(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{866:function(module,exports,__webpack_require__){var t;"undefined"!=typeof self&&self,t=function(__WEBPACK_EXTERNAL_MODULE__289a__,__WEBPACK_EXTERNAL_MODULE__5880__,__WEBPACK_EXTERNAL_MODULE__8bbf__,__WEBPACK_EXTERNAL_MODULE_b899__,__WEBPACK_EXTERNAL_MODULE_c9e2__){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s="fb15")}({"009d":function(e,t,n){"use strict";n("222b")},"01bb":function(e,t,n){},"039a":function(e,t,n){"use strict";n.r(t);var i=n("e017"),r=n.n(i),a=n("21a1"),o=n.n(a),s=new r.a({id:"icon-download",use:"icon-download-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="icon-download"><defs><style type="text/css"></style></defs><path d="M929 483c-16.6 0-30 13.4-30 30v387.9s-0.1 0.1 0 0.1H123.1s-0.1-0.1-0.1 0V513c0-16.6-13.4-30-30-30s-30 13.4-30 30v388c0 33.1 26.9 60 60 60h776c33.1 0 60-26.9 60-60V513c0-16.6-13.4-30-30-30z" p-id="12039" /><path d="M489.2 753.6l0.6 0.6c5.8 5.8 13.5 8.8 21.2 8.8 7.7 0 15.4-2.9 21.2-8.8l0.6-0.6 221.4-221.4c11.7-11.7 11.7-30.8 0-42.4-11.7-11.7-30.8-11.7-42.4 0L541 660.6V95c0-16.5-13.5-30-30-30s-30 13.5-30 30v565.6L310.2 489.8c-11.7-11.7-30.8-11.7-42.4 0-11.7 11.7-11.7 30.8 0 42.4l221.4 221.4z" p-id="12040" /></symbol>'});o.a.add(s),t.default=s},"052b":function(e,t,n){},"0536":function(e,t,n){},"068c":function(e,t,n){"use strict";n.r(t);var i=n("e017"),r=n.n(i),a=n("21a1"),o=n.n(a),s=new r.a({id:"icon-upload",use:"icon-upload-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="icon-upload"><defs><style type="text/css"></style></defs><path d="M738.9184 764.7232c-10.6496 0-19.456-8.8064-19.456-19.456s8.8064-19.456 19.456-19.456c124.7232 0 226.0992-101.376 226.0992-226.0992 0-120.4224-94.208-219.3408-214.6304-225.4848l-14.7456-0.8192-3.2768-14.336c-23.3472-103.8336-114.0736-176.128-220.3648-176.128s-197.0176 72.4992-220.3648 176.128l-3.2768 14.336-14.7456 0.8192c-120.2176 6.144-214.6304 105.0624-214.6304 225.4848 0 124.7232 101.376 226.0992 226.0992 226.0992 10.6496 0 19.456 8.8064 19.456 19.456s-8.8064 19.456-19.456 19.456c-146.0224 0-265.0112-118.784-265.0112-265.0112 0-136.192 103.0144-249.2416 237.1584-263.168 14.9504-52.224 45.8752-99.1232 88.2688-133.5296 46.8992-38.0928 106.0864-58.9824 166.5024-58.9824s119.6032 20.8896 166.5024 58.9824c42.3936 34.4064 73.3184 81.3056 88.2688 133.5296 134.144 13.9264 237.1584 126.976 237.1584 263.168 0 146.0224-118.9888 265.0112-265.0112 265.0112z" fill="#040000" p-id="12875" /><path d="M512 399.36c10.6496 0 19.456 8.8064 19.456 19.456v432.3328c0 10.6496-8.8064 19.456-19.456 19.456s-19.456-8.8064-19.456-19.456V418.816c0-10.6496 8.8064-19.456 19.456-19.456zM512 890.4704c10.6496 0 19.456 8.8064 19.456 19.456v39.5264c0 10.6496-8.8064 19.456-19.456 19.456s-19.456-8.8064-19.456-19.456v-39.5264c0-10.6496 8.8064-19.456 19.456-19.456z" fill="#040000" p-id="12876" /><path d="M512 379.904c10.8544 0 21.0944 4.3008 28.8768 11.8784l125.1328 125.1328a19.406848 19.406848 0 0 1-27.4432 27.4432l-125.1328-125.1328c-0.8192-0.8192-1.8432-0.8192-2.6624 0l-125.1328 125.1328a19.406848 19.406848 0 0 1-27.4432-27.4432l125.1328-125.1328c7.5776-7.5776 17.8176-11.8784 28.672-11.8784z" fill="#040000" p-id="12877" /></symbol>'});o.a.add(s),t.default=s},"088c":function(e,t,n){(e=>{e.keys().map(e)})(n("23f1"))},"0b16":function(e,t,n){"use strict";n("1476")},"0fc3":function(module,__webpack_exports__,__webpack_require__){"use strict";var leivii__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("b899"),leivii__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(leivii__WEBPACK_IMPORTED_MODULE_0__),_properties_LazyInput__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("2df1");const{props:props,valueInitMap:valueInitMap}=leivii__WEBPACK_IMPORTED_MODULE_0__.Dict,{isString:isString,isNumber:isNumber,isBoolean:isBoolean,isObject:isObject,isArray:isArray,isFunction:isFunction}=leivii__WEBPACK_IMPORTED_MODULE_0__.Types;__webpack_exports__.a={components:{DynamicInput:()=>Promise.resolve().then(__webpack_require__.bind(null,"56bf")),LazyInput:_properties_LazyInput__WEBPACK_IMPORTED_MODULE_1__.a},model:{prop:"data",event:"change"},props:{type:{type:[Array,Function]},options:{type:Array},keyAlign:{type:String,default:"left"},open:{type:Boolean},label:{type:String},customTitle:{type:String,default:"lang.text.object"},titleTheme:{type:String},clazz:{type:[String,Object]},valueClazz:{type:[String,Object]},size:{type:String,default:"mini"},disabled:{type:Boolean,default:!1},data:{type:Object,default:()=>({})}},computed:{title(){if(isObject(this.clazz))for(let t=0,n=this.props.length;t<n;t++){var e;if(null!==(e=this.props[t][2])&&void 0!==e&&e.isTitle)return this.$transMsg(this.props[t][1])}return""}},data(){return{comp:null,classType:null,props:[],expr:"",opened:this.open}},watch:{props:{handler(e){let t={};e.forEach(e=>{e[0]&&null!==e[1]&&(t[e[0]]=e[1])}),JSON.stringify(t)!==JSON.stringify(this.data)&&this.$emit("change",t)},deep:!0}},created(){this.initProps(),this.clazz&&(this.comp=this.getPropComp(this.clazz),this.comp&&(this.isVueOptions(this.comp)?this.classType="vue":this.classType="class"))},methods:{isString:isString,isObject:isObject,initProps(){if(isObject(this.clazz)){const a=this.parseVueProps(this.clazz);for(let o in a){var e,t,n,i,r;let s=a[o].default||null;isFunction(s)&&(s=s()),[a[o].type].flat()[0];let l=null!==(e=null===(t=this.data)||void 0===t?void 0:t[o])&&void 0!==e?e:s;this.props.push([o,l,{key:o,val:l,label:a[o].label||o,placeholder:a[o].placeholder||"",type:[a[o].type].flat().filter(Boolean),visible:null!==(n=a[o].visible)&&void 0!==n?n:"",clazz:a[o].clazz,item:a[o].item,itemClazz:a[o].itemClazz,valueClazz:a[o].valueClazz,isExpression:a[o].isExpression,disabled:a[o].disabled,isTitle:a[o].title,options:null===(i=a[o].options)||void 0===i?void 0:i.map(e=>isObject(e)?e:{label:e,value:e}),required:(null===(r=a[o])||void 0===r?void 0:r.required)||!1}])}}else this.props=Object.entries(this.data||{})},parseVueProps(e){let t={};for(let n in e)isFunction(e[n])?t[n]={type:e[n]}:t[n]=e[n];return t},getVisible(expr){if(expr)try{return expr=expr.replace(/\{\{\s*(\w+)\s*\}\}/g,(e,t)=>this.props.find(([e,n])=>e===t)[1]),!!eval(expr)}catch{}return!0},addProp(){this.props.push(["",null]),this.opened=!0},removeProp(e){this.props.splice(e,1)},handleExpr(e){e.splice(1,1,this.expr?`{{${this.expr}}}`:"")},getExpr(e){/^\{\{(.*)?\}\}$/.test(e)?this.expr=e.replace(/^\{\{(.*?)\}\}$/,(e,t)=>t):this.expr=e},isVueOptions:e=>!!e&&("render"in e&&"_compiled"in e||"_Ctor"in e),getPropComp:e=>isString(e)?props.get(e):e}}},1047:function(e,t,n){"use strict";n("39bb")},1057:function(e,t,n){"use strict";n("9d7d")},"10b2":function(e,t,n){!function(e){var t={pairs:"()[]{}''\"\"",closeBefore:")]}'\":;>",triples:"",explode:"[]{}"},n=e.Pos;function i(e,n){return"pairs"==n&&"string"==typeof e?e:"object"==typeof e&&null!=e[n]?e[n]:t[n]}e.defineOption("autoCloseBrackets",!1,(function(t,n,o){o&&o!=e.Init&&(t.removeKeyMap(r),t.state.closeBrackets=null),n&&(a(i(n,"pairs")),t.state.closeBrackets=n,t.addKeyMap(r))}));var r={Backspace:function(t){var r=s(t);if(!r||t.getOption("disableInput"))return e.Pass;for(var a=i(r,"pairs"),o=t.listSelections(),l=0;l<o.length;l++){if(!o[l].empty())return e.Pass;var c=d(t,o[l].head);if(!c||a.indexOf(c)%2!=0)return e.Pass}for(l=o.length-1;l>=0;l--){var u=o[l].head;t.replaceRange("",n(u.line,u.ch-1),n(u.line,u.ch+1),"+delete")}},Enter:function(t){var n=s(t),r=n&&i(n,"explode");if(!r||t.getOption("disableInput"))return e.Pass;for(var a=t.listSelections(),o=0;o<a.length;o++){if(!a[o].empty())return e.Pass;var c=d(t,a[o].head);if(!c||r.indexOf(c)%2!=0)return e.Pass}t.operation((function(){var e=t.lineSeparator()||"\n";t.replaceSelection(e+e,null),l(t,-1),a=t.listSelections();for(var n=0;n<a.length;n++){var i=a[n].head.line;t.indentLine(i,null,!0),t.indentLine(i+1,null,!0)}}))}};function a(e){for(var t=0;t<e.length;t++){var n=e.charAt(t),i="'"+n+"'";r[i]||(r[i]=o(n))}}function o(e){return function(t){return u(t,e)}}function s(e){var t=e.state.closeBrackets;return!t||t.override?t:e.getModeAt(e.getCursor()).closeBrackets||t}function l(e,t){for(var n=[],i=e.listSelections(),r=0,a=0;a<i.length;a++){var o=i[a];o.head==e.getCursor()&&(r=a);var s=o.head.ch||t>0?{line:o.head.line,ch:o.head.ch+t}:{line:o.head.line-1};n.push({anchor:s,head:s})}e.setSelections(n,r)}function c(t){var i=e.cmpPos(t.anchor,t.head)>0;return{anchor:new n(t.anchor.line,t.anchor.ch+(i?-1:1)),head:new n(t.head.line,t.head.ch+(i?1:-1))}}function u(t,r){var a=s(t);if(!a||t.getOption("disableInput"))return e.Pass;var o=i(a,"pairs"),u=o.indexOf(r);if(-1==u)return e.Pass;for(var d,h=i(a,"closeBefore"),f=i(a,"triples"),m=o.charAt(u+1)==r,g=t.listSelections(),v=u%2==0,b=0;b<g.length;b++){var y,x=g[b],_=x.head,w=t.getRange(_,n(_.line,_.ch+1));if(v&&!x.empty())y="surround";else if(!m&&v||w!=r)if(m&&_.ch>1&&f.indexOf(r)>=0&&t.getRange(n(_.line,_.ch-2),_)==r+r){if(_.ch>2&&/\bstring/.test(t.getTokenTypeAt(n(_.line,_.ch-2))))return e.Pass;y="addFour"}else if(m){var C=0==_.ch?" ":t.getRange(n(_.line,_.ch-1),_);if(e.isWordChar(w)||C==r||e.isWordChar(C))return e.Pass;y="both"}else{if(!v||!(0===w.length||/\s/.test(w)||h.indexOf(w)>-1))return e.Pass;y="both"}else y=m&&p(t,_)?"both":f.indexOf(r)>=0&&t.getRange(_,n(_.line,_.ch+3))==r+r+r?"skipThree":"skip";if(d){if(d!=y)return e.Pass}else d=y}var k=u%2?o.charAt(u-1):r,S=u%2?r:o.charAt(u+1);t.operation((function(){if("skip"==d)l(t,1);else if("skipThree"==d)l(t,3);else if("surround"==d){for(var e=t.getSelections(),n=0;n<e.length;n++)e[n]=k+e[n]+S;for(t.replaceSelections(e,"around"),e=t.listSelections().slice(),n=0;n<e.length;n++)e[n]=c(e[n]);t.setSelections(e)}else"both"==d?(t.replaceSelection(k+S,null),t.triggerElectric(k+S),l(t,-1)):"addFour"==d&&(t.replaceSelection(k+k+k+k,"before"),l(t,1))}))}function d(e,t){var i=e.getRange(n(t.line,t.ch-1),n(t.line,t.ch+1));return 2==i.length?i:null}function p(e,t){var i=e.getTokenAt(n(t.line,t.ch+1));return/\bstring/.test(i.type)&&i.start==t.ch&&(0==t.ch||!/\bstring/.test(e.getTokenTypeAt(t)))}a(t.pairs+"`")}(n("56b3"))},"10e4":function(e,t,n){},1408:function(e,t,n){},1476:function(e,t,n){},1727:function(e,t,n){"use strict";n("93ab")},"174c":function(e,t,n){"use strict";n("8b8a")},"197e":function(e,t,n){},"1ad7":function(e,t,n){},2024:function(e,t,n){"use strict";n("fd6e")},2199:function(e,t,n){"use strict";n("10e4")},"21a1":function(e,t,n){(function(t){!function(t,n){e.exports=n()}(0,(function(){"use strict";function e(e,t){return e(t={exports:{}},t.exports),t.exports}"undefined"!=typeof window?window:void 0!==t||"undefined"!=typeof self&&self;var n=e((function(e,t){e.exports=function(){function e(e){return e&&"object"==typeof e&&"[object RegExp]"!==Object.prototype.toString.call(e)&&"[object Date]"!==Object.prototype.toString.call(e)}function t(t,n){return n&&!0===n.clone&&e(t)?r(function(e){return Array.isArray(e)?[]:{}}(t),t,n):t}function n(n,i,a){var o=n.slice();return i.forEach((function(i,s){void 0===o[s]?o[s]=t(i,a):e(i)?o[s]=r(n[s],i,a):-1===n.indexOf(i)&&o.push(t(i,a))})),o}function i(n,i,a){var o={};return e(n)&&Object.keys(n).forEach((function(e){o[e]=t(n[e],a)})),Object.keys(i).forEach((function(s){e(i[s])&&n[s]?o[s]=r(n[s],i[s],a):o[s]=t(i[s],a)})),o}function r(e,r,a){var o=Array.isArray(r),s=(a||{arrayMerge:n}).arrayMerge||n;return o?Array.isArray(e)?s(e,r,a):t(r,a):i(e,r,a)}return r.all=function(e,t){if(!Array.isArray(e)||e.length<2)throw new Error("first argument should be an array with at least two elements");return e.reduce((function(e,n){return r(e,n,t)}))},r}()})),i=e((function(e,t){t.default={svg:{name:"xmlns",uri:"http://www.w3.org/2000/svg"},xlink:{name:"xmlns:xlink",uri:"http://www.w3.org/1999/xlink"}},e.exports=t.default})),r=i.svg,a=i.xlink,o={};o[r.name]=r.uri,o[a.name]=a.uri;var s,l=function(e,t){return void 0===e&&(e=""),"<svg "+function(e){return Object.keys(e).map((function(t){return t+'="'+e[t].toString().replace(/"/g,"&quot;")+'"'})).join(" ")}(n(o,t||{}))+">"+e+"</svg>"},c=i.svg,u=i.xlink,d={attrs:(s={style:["position: absolute","width: 0","height: 0"].join("; "),"aria-hidden":"true"},s[c.name]=c.uri,s[u.name]=u.uri,s)},p=function(e){this.config=n(d,e||{}),this.symbols=[]};p.prototype.add=function(e){var t=this.symbols,n=this.find(e.id);return n?(t[t.indexOf(n)]=e,!1):(t.push(e),!0)},p.prototype.remove=function(e){var t=this.symbols,n=this.find(e);return!!n&&(t.splice(t.indexOf(n),1),n.destroy(),!0)},p.prototype.find=function(e){return this.symbols.filter((function(t){return t.id===e}))[0]||null},p.prototype.has=function(e){return null!==this.find(e)},p.prototype.stringify=function(){var e=this.config.attrs,t=this.symbols.map((function(e){return e.stringify()})).join("");return l(t,e)},p.prototype.toString=function(){return this.stringify()},p.prototype.destroy=function(){this.symbols.forEach((function(e){return e.destroy()}))};var h=function(e){var t=e.id,n=e.viewBox,i=e.content;this.id=t,this.viewBox=n,this.content=i};h.prototype.stringify=function(){return this.content},h.prototype.toString=function(){return this.stringify()},h.prototype.destroy=function(){var e=this;["id","viewBox","content"].forEach((function(t){return delete e[t]}))};var f=function(e){var t=!!document.importNode,n=(new DOMParser).parseFromString(e,"image/svg+xml").documentElement;return t?document.importNode(n,!0):n},m=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={isMounted:{}};return n.isMounted.get=function(){return!!this.node},t.createFromExistingNode=function(e){return new t({id:e.getAttribute("id"),viewBox:e.getAttribute("viewBox"),content:e.outerHTML})},t.prototype.destroy=function(){this.isMounted&&this.unmount(),e.prototype.destroy.call(this)},t.prototype.mount=function(e){if(this.isMounted)return this.node;var t="string"==typeof e?document.querySelector(e):e,n=this.render();return this.node=n,t.appendChild(n),n},t.prototype.render=function(){var e=this.stringify();return f(l(e)).childNodes[0]},t.prototype.unmount=function(){this.node.parentNode.removeChild(this.node)},Object.defineProperties(t.prototype,n),t}(h),g={autoConfigure:!0,mountTo:"body",syncUrlsWithBaseTag:!1,listenLocationChangeEvent:!0,locationChangeEvent:"locationChange",locationChangeAngularEmitter:!1,usagesToUpdate:"use[*|href]",moveGradientsOutsideSymbol:!1},v=function(e){return Array.prototype.slice.call(e,0)},b=function(){return/firefox/i.test(navigator.userAgent)},y=function(){return/msie/i.test(navigator.userAgent)||/trident/i.test(navigator.userAgent)},x=function(){return/edge/i.test(navigator.userAgent)},_=function(e){return(e||window.location.href).split("#")[0]},w=function(e){angular.module("ng").run(["$rootScope",function(t){t.$on("$locationChangeSuccess",(function(t,n,i){!function(e,t){var n=document.createEvent("CustomEvent");n.initCustomEvent(e,!1,!1,t),window.dispatchEvent(n)}(e,{oldUrl:i,newUrl:n})}))}])},C=function(e,t){return void 0===t&&(t="linearGradient, radialGradient, pattern, mask, clipPath"),v(e.querySelectorAll("symbol")).forEach((function(e){v(e.querySelectorAll(t)).forEach((function(t){e.parentNode.insertBefore(t,e)}))})),e},k=i.xlink.uri,S="xlink:href",M=/[{}|\\\^\[\]`"<>]/g;function O(e){return e.replace(M,(function(e){return"%"+e[0].charCodeAt(0).toString(16).toUpperCase()}))}var $,E=["clipPath","colorProfile","src","cursor","fill","filter","marker","markerStart","markerMid","markerEnd","mask","stroke","style"],T=E.map((function(e){return"["+e+"]"})).join(","),D=function(e,t,n,i){var r=O(n),a=O(i);(function(e,t){return v(e).reduce((function(e,n){if(!n.attributes)return e;var i=v(n.attributes),r=t?i.filter(t):i;return e.concat(r)}),[])})(e.querySelectorAll(T),(function(e){var t=e.localName,n=e.value;return-1!==E.indexOf(t)&&-1!==n.indexOf("url("+r)})).forEach((function(e){return e.value=e.value.replace(new RegExp(function(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}(r),"g"),a)})),function(e,t,n){v(e).forEach((function(e){var i=e.getAttribute(S);if(i&&0===i.indexOf(t)){var r=i.replace(t,n);e.setAttributeNS(k,S,r)}}))}(t,r,a)},L="mount",z="symbol_mount",N=function(e){function t(t){var i=this;void 0===t&&(t={}),e.call(this,n(g,t));var r=function(e){return e=e||Object.create(null),{on:function(t,n){(e[t]||(e[t]=[])).push(n)},off:function(t,n){e[t]&&e[t].splice(e[t].indexOf(n)>>>0,1)},emit:function(t,n){(e[t]||[]).map((function(e){e(n)})),(e["*"]||[]).map((function(e){e(t,n)}))}}}();this._emitter=r,this.node=null;var a=this.config;if(a.autoConfigure&&this._autoConfigure(t),a.syncUrlsWithBaseTag){var o=document.getElementsByTagName("base")[0].getAttribute("href");r.on(L,(function(){return i.updateUrls("#",o)}))}var s=this._handleLocationChange.bind(this);this._handleLocationChange=s,a.listenLocationChangeEvent&&window.addEventListener(a.locationChangeEvent,s),a.locationChangeAngularEmitter&&w(a.locationChangeEvent),r.on(L,(function(e){a.moveGradientsOutsideSymbol&&C(e)})),r.on(z,(function(e){a.moveGradientsOutsideSymbol&&C(e.parentNode),(y()||x())&&function(e){var t=[];v(e.querySelectorAll("style")).forEach((function(e){e.textContent+="",t.push(e)}))}(e)}))}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var i={isMounted:{}};return i.isMounted.get=function(){return!!this.node},t.prototype._autoConfigure=function(e){var t=this.config;void 0===e.syncUrlsWithBaseTag&&(t.syncUrlsWithBaseTag=void 0!==document.getElementsByTagName("base")[0]),void 0===e.locationChangeAngularEmitter&&(t.locationChangeAngularEmitter=void 0!==window.angular),void 0===e.moveGradientsOutsideSymbol&&(t.moveGradientsOutsideSymbol=b())},t.prototype._handleLocationChange=function(e){var t=e.detail,n=t.oldUrl,i=t.newUrl;this.updateUrls(n,i)},t.prototype.add=function(t){var n=e.prototype.add.call(this,t);return this.isMounted&&n&&(t.mount(this.node),this._emitter.emit(z,t.node)),n},t.prototype.attach=function(e){var t=this,n=this;if(n.isMounted)return n.node;var i="string"==typeof e?document.querySelector(e):e;return n.node=i,this.symbols.forEach((function(e){e.mount(n.node),t._emitter.emit(z,e.node)})),v(i.querySelectorAll("symbol")).forEach((function(e){var t=m.createFromExistingNode(e);t.node=e,n.add(t)})),this._emitter.emit(L,i),i},t.prototype.destroy=function(){var e=this,t=e.config,n=e.symbols,i=e._emitter;n.forEach((function(e){return e.destroy()})),i.off("*"),window.removeEventListener(t.locationChangeEvent,this._handleLocationChange),this.isMounted&&this.unmount()},t.prototype.mount=function(e,t){void 0===e&&(e=this.config.mountTo),void 0===t&&(t=!1);var n=this;if(n.isMounted)return n.node;var i="string"==typeof e?document.querySelector(e):e,r=n.render();return this.node=r,t&&i.childNodes[0]?i.insertBefore(r,i.childNodes[0]):i.appendChild(r),this._emitter.emit(L,r),r},t.prototype.render=function(){return f(this.stringify())},t.prototype.unmount=function(){this.node.parentNode.removeChild(this.node)},t.prototype.updateUrls=function(e,t){if(!this.isMounted)return!1;var n=document.querySelectorAll(this.config.usagesToUpdate);return D(this.node,n,_(e)+"#",_(t)+"#"),!0},Object.defineProperties(t.prototype,i),t}(p),A=e((function(e){
/*!
  * domready (c) Dustin Diaz 2014 - License MIT
  */
e.exports=function(){var e,t=[],n=document,i=n.documentElement.doScroll,r="DOMContentLoaded",a=(i?/^loaded|^c/:/^loaded|^i|^c/).test(n.readyState);return a||n.addEventListener(r,e=function(){for(n.removeEventListener(r,e),a=1;e=t.shift();)e()}),function(e){a?setTimeout(e,0):t.push(e)}}()})),I="__SVG_SPRITE_NODE__",P="__SVG_SPRITE__";window[P]?$=window[P]:($=new N({attrs:{id:I,"aria-hidden":"true"}}),window[P]=$);var j=function(){var e=document.getElementById(I);e?$.attach(e):$.mount(document.body,!0)};return document.body?j():A(j),$}))}).call(this,n("c8ba"))},"222b":function(e,t,n){},"225c":function(e,t,n){"use strict";n("052b")},"23f1":function(e,t,n){var i={"./components.svg":"7a81","./datasource.svg":"9911","./download.svg":"039a","./example.svg":"b6f9","./export.svg":"8354","./filter.svg":"3663","./hierarchy.svg":"7df7","./logo.svg":"d9b6","./pause.svg":"b849","./plus.svg":"701f","./preview.svg":"8568","./save.svg":"b7b8","./upload.svg":"068c"};function r(e){var t=a(e);return n(t)}function a(e){if(!n.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}r.keys=function(){return Object.keys(i)},r.resolve=a,e.exports=r,r.id="23f1"},2427:function(e,t,n){},"24d5":function(e,t,n){"use strict";n("b0dd")},2720:function(e,t,n){"use strict";n("ab1e")},"280f":function(e,t,n){"use strict";n("e7a4")},2877:function(e,t,n){"use strict";function i(e,t,n,i,r,a,o,s){var l,c="function"==typeof e?e.options:e;if(t&&(c.render=t,c.staticRenderFns=n,c._compiled=!0),i&&(c.functional=!0),a&&(c._scopeId="data-v-"+a),o?(l=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(o)},c._ssrRegister=l):r&&(l=s?function(){r.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:r),l)if(c.functional){c._injectStyles=l;var u=c.render;c.render=function(e,t){return l.call(t),u(e,t)}}else{var d=c.beforeCreate;c.beforeCreate=d?[].concat(d,l):[l]}return{exports:e,options:c}}n.d(t,"a",(function(){return i}))},"289a":function(e,t){e.exports=__WEBPACK_EXTERNAL_MODULE__289a__},"2ded":function(e,t,n){"use strict";var i=n("0fc3").a,r=(n("76a3"),n("2877")),a=Object(r.a)(i,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"object-input w-full"},[n("geek-collapse",{attrs:{title:e.$transMsg(e.customTitle)+(e.isString(e.clazz)?"<"+(e.comp&&e.comp.options?e.$transMsg(e.comp.options.name):e.clazz)+">":e.isObject(e.clazz)?"<"+this.$transMsg(e.title||e.label||"lang.prop.custom")+">":""),titleTheme:e.titleTheme,"lazy-load":""},model:{value:e.opened,callback:function(t){e.opened=t},expression:"opened"}},[n("template",{slot:"actions"},[e._t("actions"),e.isObject(e.clazz)||e.isString(e.clazz)&&"vue"==e.classType?e._e():n("div",{staticClass:"header-buttons",on:{click:e.addProp}},[n("i",{staticClass:"el-icon-plus"})])],2),e.isObject(e.clazz)?[e._l(e.props,(function(t,i){return[e.getVisible(t[2].visible)?n("div",{key:i,staticClass:"flex-center item"},[n("div",{staticClass:"flex1 pr-sm",style:"text-align: "+e.keyAlign},[e._v(e._s(e.$transMsg(t[2].label)))]),n("dynamic-input",{staticStyle:{flex:"2"},attrs:{size:e.size,type:e.props[i][2].type,clazz:e.props[i][2].clazz,item:e.props[i][2].item,itemClazz:e.props[i][2].itemClazz,valueClazz:e.props[i][2].valueClazz,isExpression:e.props[i][2].isExpression,options:e.props[i][2].options,disabled:e.disabled||e.props[i][2].disabled,placeholder:e.props[i][2].placeholder},model:{value:e.props[i][1],callback:function(t){e.$set(e.props[i],1,t)},expression:"props[i][1]"}})],1):e._e()]}))]:e.isString(e.clazz)&&"vue"==e.classType?[n(e.comp,{tag:"component",staticClass:"w-full pl-sm pr-sm item",attrs:{value:e.data,disabled:e.disabled},on:{change:function(t){return e.$emit("change",t)}}})]:e._l(e.props,(function(t,i){return n("div",{key:i,staticClass:"flex-center item"},[n("lazy-input",{staticStyle:{flex:"1"},attrs:{size:e.size,disabled:e.disabled,placeholder:e.$transMsg("lang.common.key")},model:{value:e.props[i][0],callback:function(t){e.$set(e.props[i],0,t)},expression:"props[i][0]"}}),n("div",{staticClass:"pl-xs pr-sm"},[e._v(":")]),n("dynamic-input",{staticStyle:{flex:"2"},attrs:{size:e.size,disabled:e.disabled,placeholder:e.$transMsg("lang.common.value"),clazz:e.valueClazz,type:e.valueClazz?Object:String},model:{value:e.props[i][1],callback:function(t){e.$set(e.props[i],1,t)},expression:"props[i][1]"}}),n("i",{staticClass:"el-icon-delete ml-xs",staticStyle:{cursor:"pointer"},on:{click:function(t){return e.removeProp(i)}}})],1)}))],2)],1)}),[],!1,null,"9d1c77fc",null);t.a=a.exports},"2df1":function(e,t,n){"use strict";var i={model:{prop:"value",event:"change"},props:{value:String,disabled:Boolean,clearable:Boolean,placeholder:String,size:String},watch:{value:{handler(){this.data=this.value},immediate:!0}},data:()=>({data:null})},r=n("2877"),a=Object(r.a)(i,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("el-input",{staticClass:"lazy-input w-full",attrs:{size:e.size,clearable:e.clearable,disabled:e.disabled,placeholder:e.placeholder},on:{change:function(t){return e.$emit("change",t)}},model:{value:e.data,callback:function(t){e.data=t},expression:"data"}})}),[],!1,null,null,null);t.a=a.exports},"33d4":function(e,t,n){"use strict";var i=n("56b3"),r=n.n(i),a=(n("a7be"),n("f9d4"),n("1ad7"),n("f6b6"),n("9b74"),n("b899"));const{isString:o,isBoolean:s,isNumber:l,isObject:c,isArray:u}=a.Types;var d={model:{prop:"value",event:"change"},props:{placeholder:{type:String,default:""},isFn:{type:Boolean,default:!1},value:{type:null}},mounted(){this.initEditor()},methods:{initEditor(){this.editor=r.a.fromTextArea(this.$refs.editor,{mode:"javascript",theme:"midnight",lineNumbers:!0,lineWrapping:!0,styleActiveLine:!0,matchBrackets:!0,extraKeys:{Ctrl:"autocomplete"},hintOptions:{completeSingle:!1}});let e=this.value||this.placeholder;if(void 0!==this.value){try{"string"==typeof e&&(e=JSON.parse(e.replace(/^\{\{/,"").replace(/\}\}$/,"")))}catch{}"object"==typeof e?e=JSON.stringify(e,null,2):"string"==typeof e?(e=e.replace(/^\{\{/,"").replace(/\}\}$/,""),/^\w+$/.test(e)&&(e=`'${e}'`)):e=String(e)}this.editor.setValue(e),this.editor.focus(),this.editor.setCursor(0,e.length)},confirm(){let e=this.editor.getValue().trim();e=e.replace(/^'\s*'$/,""),this.isFn?this.$emit("change",e):this.$emit("change",`{{${e}}}`),this.$emit("close")}}},p=(n("174c"),n("2877")),h=Object(p.a)(d,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"code-editor"},[n("textarea",{ref:"editor"}),e._v(" "),n("div",{staticClass:"align-right pt",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){return e.$emit("close")}}},[e._v(e._s(e.$transMsg("lang.action.cancel")))]),n("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v(e._s(e.$transMsg("lang.action.confirm")))])],1)])}),[],!1,null,null,null);t.a=h.exports},3663:function(e,t,n){"use strict";n.r(t);var i=n("e017"),r=n.n(i),a=n("21a1"),o=n.n(a),s=new r.a({id:"icon-filter",use:"icon-filter-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="icon-filter"><defs><style type="text/css"></style></defs><path d="M558.72 1015.04a32.64 32.64 0 0 1-32.64-32.64V334.08a32.64 32.64 0 0 1 8.32-21.12l213.12-241.28h-640L320 312.32a35.2 35.2 0 0 1 8.32 21.76v374.4l69.76 69.12a32.64 32.64 0 1 1-46.08 46.08l-78.08-78.72a35.2 35.2 0 0 1-9.6-23.04V346.24L11.52 64A33.28 33.28 0 0 1 5.76 25.6 33.92 33.92 0 0 1 35.84 6.4h784.64a33.28 33.28 0 0 1 29.44 19.2 33.28 33.28 0 0 1-5.12 38.4l-256 286.08v635.52a32.64 32.64 0 0 1-30.08 29.44z" fill="#323333" p-id="2107" /><path d="M970.88 504.96h-280.96a32.64 32.64 0 1 1 0-64h280.96a32.64 32.64 0 1 1 0 64zM970.88 709.76h-280.96a32.64 32.64 0 0 1 0-64h280.96a32.64 32.64 0 0 1 0 64zM970.88 914.56h-280.96a32.64 32.64 0 0 1 0-64h280.96a32.64 32.64 0 0 1 0 64z" fill="#323333" p-id="2108" /></symbol>'});o.a.add(s),t.default=s},"395d":function(e,t,n){"use strict";var i=n("289a"),r=n.n(i),a=n("b899");const{isString:o,isNumber:s,isBoolean:l,isObject:c,isArray:u}=a.Types;var d={components:{Draggable:r.a,DynamicInput:()=>Promise.resolve().then(n.bind(null,"56bf"))},model:{prop:"data",event:"change"},props:{type:{type:[Array,Function]},options:{type:Array},label:{type:String},titleTheme:{type:String},item:{type:Object,default:()=>({})},itemClazz:{type:[String,Object]},size:{type:String,default:"mini"},placeholder:{type:String},disabled:{type:Boolean,default:!1},data:{type:Array,default:()=>[]}},computed:{computedItem(){return{...this.item,type:this.item.type||(this.itemClazz?Object:String),options:this.item.options||this.options,label:this.item.label||this.label,clazz:this.item.clazz||this.itemClazz,size:this.item.size||this.size}}},data:()=>({comp:null,classType:null,list:[],expr:"",opened:!1,updateTime:Date.now()}),watch:{data(){this.list=JSON.parse(JSON.stringify(this.data))||[]},list:{handler(e,t){const n=(null==e?void 0:e.filter(e=>!!e&&(!c(e)||Object.keys(e).length)))||[];JSON.stringify(n)!==JSON.stringify(this.data)&&this.$emit("change",n)},deep:!0}},created(){this.list=JSON.parse(JSON.stringify(this.data)),this.itemClazz&&(this.comp=this.getPropComp(this.itemClazz),this.comp&&(this.isVueOptions(this.comp)?this.classType="vue":this.classType="class"))},methods:{isString:o,isObject:c,addProp(){let e=this.itemClazz?{}:null;this.list.push(e),this.opened=!0},removeProp(e){this.updateTime=Date.now(),this.list.splice(e,1)},handleExpr(e){e.splice(1,1,this.expr?`{{${this.expr}}}`:"")},getExpr(e){/^\{\{(.*)?\}\}$/.test(e)?this.expr=e.replace(/^\{\{(.*?)\}\}$/,(e,t)=>t):this.expr=e},isVueOptions:e=>!!e&&("render"in e&&"_compiled"in e||"_Ctor"in e),getPropComp:e=>o(e)?a.Dict.props.get(e):e}},p=(n("7d57"),n("2877")),h=Object(p.a)(d,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"array-input w-full"},[n("geek-collapse",{staticClass:"mt-xs",attrs:{title:e.$transMsg("lang.text.list")+(e.isString(e.itemClazz)?"<"+(e.comp&&e.comp.options?e.$transMsg(e.comp.options.name):e.itemClazz)+">":e.isObject(e.itemClazz)?"<"+e.$transMsg(e.label||"lang.prop.custom")+">":""),titleTheme:e.titleTheme},model:{value:e.opened,callback:function(t){e.opened=t},expression:"opened"}},[n("template",{slot:"actions"},[e._t("actions"),n("div",{staticClass:"header-buttons",on:{click:e.addProp}},[n("i",{staticClass:"el-icon-plus"})])],2),n("draggable",{on:{change:function(t){e.updateTime=Date.now()}},model:{value:e.list,callback:function(t){e.list=t},expression:"list"}},e._l(e.list,(function(t,i){return n("div",{key:i+e.updateTime,staticClass:"flex-center"},["vue"==e.classType?n(e.comp,e._b({tag:"component",staticClass:"w-full",attrs:{disabled:e.disabled},model:{value:e.list[i],callback:function(t){e.$set(e.list,i,t)},expression:"list[i]"}},"component",e.item,!1)):n("dynamic-input",e._b({attrs:{disabled:e.disabled,placeholder:e.placeholder},model:{value:e.list[i],callback:function(t){e.$set(e.list,i,t)},expression:"list[i]"}},"dynamic-input",e.computedItem,!1)),n("i",{staticClass:"el-icon-delete ml-xs",staticStyle:{cursor:"pointer"},on:{click:function(t){return e.removeProp(i)}}})],1)})),0)],2)],1)}),[],!1,null,"192844ee",null);t.a=h.exports},3994:function(e,t,n){"use strict";var i=n("8bbf"),r=n.n(i),a=n("b899"),o={options:{name:"lang.text.dragComponent"},model:{prop:"value",event:"change"},props:{value:Object,placeholder:{type:String,default:"lang.text.dragComponent"},dragNew:{type:Boolean,default:!0}},computed:{componentName(){var e;let t=null===(e=this.value)||void 0===e?void 0:e.$id;if(t){var n,i,o;let e=this.$transMsg((null===(n=r.a.component(this.value.$type))||void 0===n||null===(i=n.options)||void 0===i||null===(o=i.options)||void 0===o?void 0:o.name)||this.value.$type),s=a.Dict.compMap.get(t);return s&&s.label?`${this.$transMsg(s.label)} [${e}]`:`${e} [${t}]`}return this.$transMsg(this.placeholder)}},methods:{mouseupHandler(e){if(this.$store.state.leivii.dragObject.target){const e={...this.$store.state.leivii.dragObject.props,$id:this.$store.state.leivii.dragObject.id,$type:this.$store.state.leivii.dragObject.target.options.name,$visible:!0};this.dragNew&&!this.$store.state.leivii.dragObject.isNew&&(this.$emit("change",e),this.$store.dispatch("leivii/removeConfigById",e.$id)),this.dragNew^this.$store.state.leivii.dragObject.isNew||this.$emit("change",e)}},selectComp(){var e;null!==(e=this.value)&&void 0!==e&&e.$id&&this.value.$type?this.$store.dispatch("leivii/setSelected",{$id:this.value.$id,$type:this.value.$type}):this.$emit("click")}}},s=(n("1047"),n("2877")),l=Object(s.a)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"component-dragger w-full",on:{mouseup:e.mouseupHandler}},[n("div",{staticClass:"component-name",attrs:{title:e.componentName},on:{click:function(t){return t.preventDefault(),e.selectComp.apply(null,arguments)}}},[e._v(e._s(e.componentName))])])}),[],!1,null,"77c10f74",null);t.a=l.exports},"39bb":function(e,t,n){},"3c98":function(e,t,n){!function(e){var t=e.Pos;function n(e,t){for(var n=0,i=e.length;n<i;++n)t(e[n])}function i(n,i,r,a){var o=n.getCursor(),s=r(n,o);if(!/\b(?:string|comment)\b/.test(s.type)){var l=e.innerMode(n.getMode(),s.state);if("json"!==l.mode.helperType){s.state=l.state,/^[\w$_]*$/.test(s.string)?s.end>o.ch&&(s.end=o.ch,s.string=s.string.slice(0,o.ch-s.start)):s={start:o.ch,end:o.ch,string:"",state:s.state,type:"."==s.string?"property":null};for(var c=s;"property"==c.type;){if("."!=(c=r(n,t(o.line,c.start))).string)return;if(c=r(n,t(o.line,c.start)),!d)var d=[];d.push(c)}return{list:u(s,d,i,a),from:t(o.line,s.start),to:t(o.line,s.end)}}}}function r(e,t){var n=e.getTokenAt(t);return t.ch==n.start+1&&"."==n.string.charAt(0)?(n.end=n.start,n.string=".",n.type="property"):/^\.[\w$_]*$/.test(n.string)&&(n.type="property",n.start++,n.string=n.string.replace(/\./,"")),n}e.registerHelper("hint","javascript",(function(e,t){return i(e,l,(function(e,t){return e.getTokenAt(t)}),t)})),e.registerHelper("hint","coffeescript",(function(e,t){return i(e,c,r,t)}));var a="charAt charCodeAt indexOf lastIndexOf substring substr slice trim trimLeft trimRight toUpperCase toLowerCase split concat match replace search".split(" "),o="length concat join splice push pop shift unshift slice reverse sort indexOf lastIndexOf every some filter forEach map reduce reduceRight ".split(" "),s="prototype apply call bind".split(" "),l="break case catch class const continue debugger default delete do else export extends false finally for function if in import instanceof new null return super switch this throw true try typeof var void while with yield".split(" "),c="and break catch class continue delete do else extends false finally for if in instanceof isnt new no not null of off on or return switch then throw true try typeof until void while with yes".split(" ");function u(e,t,i,r){var l=[],c=e.string,u=r&&r.globalScope||window;function d(e){0!=e.lastIndexOf(c,0)||function(e,t){if(!Array.prototype.indexOf){for(var n=e.length;n--;)if(e[n]===t)return!0;return!1}return-1!=e.indexOf(t)}(l,e)||l.push(e)}function p(e){"string"==typeof e?n(a,d):e instanceof Array?n(o,d):e instanceof Function&&n(s,d),function(e,t){if(Object.getOwnPropertyNames&&Object.getPrototypeOf)for(var n=e;n;n=Object.getPrototypeOf(n))Object.getOwnPropertyNames(n).forEach(t);else for(var i in e)t(i)}(e,d)}if(t&&t.length){var h,f=t.pop();for(f.type&&0===f.type.indexOf("variable")?(r&&r.additionalContext&&(h=r.additionalContext[f.string]),r&&!1===r.useGlobalScope||(h=h||u[f.string])):"string"==f.type?h="":"atom"==f.type?h=1:"function"==f.type&&(null==u.jQuery||"$"!=f.string&&"jQuery"!=f.string||"function"!=typeof u.jQuery?null!=u._&&"_"==f.string&&"function"==typeof u._&&(h=u._()):h=u.jQuery());null!=h&&t.length;)h=h[t.pop().string];null!=h&&p(h)}else{for(var m=e.state.localVars;m;m=m.next)d(m.name);for(var g=e.state.context;g;g=g.prev)for(m=g.vars;m;m=m.next)d(m.name);for(m=e.state.globalVars;m;m=m.next)d(m.name);if(r&&null!=r.additionalContext)for(var v in r.additionalContext)d(v);r&&!1===r.useGlobalScope||p(u),n(i,d)}return l}}(n("56b3"))},"3d21":function(e,t,n){"use strict";var i=n("8bbf"),r=n.n(i),a=n("b899"),o=n("3994");const{addClass:s,removeClass:l}=a.DOM,c=(e,t="")=>{var n,i,o,s,l;if(!e.$id||!e.$type)return;let u=[];for(let t in e){var d;if(!t.startsWith("$"))if(a.Types.isObject(e[t]))e[t].$id&&e[t].$type&&u.push(c(e[t],`[${(null===(d=r.a.component(e.$type))||void 0===d?void 0:d.options.props[t].label)||t}]`));else if(a.Types.isArray(e[t])){let n=e[t].map(e=>c(e)).filter(Boolean);var p;n.length&&u.push({id:t+Math.random(),label:"props",name:(null===(p=r.a.component(e.$type))||void 0===p?void 0:p.options.props[t].label)||t,children:n})}}return null!==(n=e.$body)&&void 0!==n&&n.length&&u.push(...e.$body.map(e=>c(e))),{id:e.$id,label:e.$type,name:(null===(i=r.a.component(e.$type).options)||void 0===i||null===(o=i.options)||void 0===o?void 0:o.name)||e.$type,title:null!==(s=null!==(l=e.title)&&void 0!==l?l:e.label)&&void 0!==s?s:e.text,children:u}};var u={components:{ComponentDragger:o.a},model:{prop:"compId",event:"change"},props:{compId:String,placeholder:{type:String,default:"lang.tip.selectComponent"},size:{type:String,default:"mini"}},computed:{treeData(){return[c(this.$store.state.leivii.pageConfig)]}},watch:{compId:{handler(){let e=this.$(this.compId);e&&(this.component.$id=this.compId,this.component.$type=null==e?void 0:e.$type)},immediate:!0}},data:()=>({component:{$id:"",$type:""},visible:!1}),methods:{handleDrag(e){const t=this.$(e.$id).$el;s(t,"flash"),setTimeout(()=>l(t,"flash"),888),this.visible=!1,this.$emit("change",e.$id)},handleClick(e){if("props"===e.label)return;const t=this.$(e.id).$el;try{s(t,"flash"),setTimeout(()=>l(t,"flash"),888)}catch{}this.component.$id=e.id,this.component.$type=e.label,this.visible=!1,this.$emit("change",e.id)}}},d=(n("2024"),n("c892"),n("2877")),p=Object(d.a)(u,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"component-tree w-full",on:{click:function(t){e.visible=!0}}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"layer",on:{mousedown:function(t){e.visible=!1}}}),n("el-popover",{attrs:{placement:"bottom",width:"200",trigger:"manual"},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[n("el-tree",{attrs:{data:e.treeData,"node-key":"id","default-expanded-keys":[e.component.$id],"default-checked-keys":[e.component.$id]},on:{"node-click":e.handleClick},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.data;return[n("div",[i.title?n("span",[e._v(e._s(e.$transMsg(i.title))+"-")]):e._e(),e._v(e._s(e.$transMsg(i.name)))])]}}])}),n("div",{staticClass:"drag-area w-full flex-center",attrs:{slot:"reference"},slot:"reference"},[n("component-dragger",{staticClass:"w-full",attrs:{placeholder:e.$transMsg(e.placeholder),size:e.size,dragNew:!1},on:{change:e.handleDrag},model:{value:e.component,callback:function(t){e.component=t},expression:"component"}}),n("i",{staticClass:"el-icon-arrow-down ml-sm mr-sm",staticStyle:{color:"#C0C4CC","font-size":"14px","margin-right":"9px",cursor:"pointer"}})],1)],1)],1)}),[],!1,null,"0553cd75",null);t.a=p.exports},"3e18":function(e,t,n){"use strict";var i=n("b899"),r=n("3d21"),a=n("ec41"),o=n("2df1"),s=n("56bf"),l=n("395d"),c=n("2ded"),u={name:"ParamPicker",components:{ComponentTreeInput:r.a,DataSourcePicker:a.a,DynamicInput:s.default,ArrayInput:l.a,ObjectInput:c.a,LazyInput:o.a},model:{prop:"value",event:"change"},props:{value:Object,target:String,action:[String,Object],paramIndex:{type:Number,default:0}},computed:{funcs(){let{methods:e}=i.Parsers.componentParser(this.$(this.param.target));return e},parentMethodDoc(){var e;let t=this.funcs.find(e=>e.method===this.param.action);return(null==t||null===(e=t.doc)||void 0===e?void 0:e.method)||this.param.action},parentParamDoc(){var e,t,n,r;let a=[],o={};if(this.target)a=i.Parsers.componentParser(this.$(this.target)).methods,o=a.find(e=>e.method===this.action);else{if(null===(e=this.action)||void 0===e||!e.plugin)return{};a=this.plugins.find(e=>e.plugin===this.action.plugin).methods,o=a.find(e=>e.method===this.action.func)}return o&&null!==(t=o.doc)&&void 0!==t&&null!==(n=t.params)&&void 0!==n&&n[this.paramIndex]?o.doc.params[this.paramIndex]:{label:null===(r=o)||void 0===r?void 0:r.params[this.paramIndex]}},paramDoc(){var e,t;let n=this.funcs.find(e=>e.method===this.action);return null==n||n.params.indexOf(this.param.name),n&&null!==(e=n.doc)&&void 0!==e&&null!==(t=e.params)&&void 0!==t&&t[this.paramIndex]?n.doc.params[this.paramIndex]:{label:null==n?void 0:n.params[this.paramIndex]}}},watch:{value:{handler(){this.param=Object.assign({type:"component",target:"",action:""},JSON.parse(JSON.stringify(this.value||{})),this.param)},immediate:!0,deep:!0},param:{handler(e,t){JSON.stringify(this.value)!==JSON.stringify(this.param)&&this.$emit("change",this.param)},immediate:!0,deep:!0}},data:()=>({param:{},plugins:i.Parsers.pluginParser(),pluginFuncs:[]}),methods:{handleType(){let e=this._getHandlerByType(this.param.type,this.param.name);for(let e in this.param)this.$delete(this.param,e);for(let t in e)this.$set(this.param,t,e[t])},handleFunc(e){let t=this.funcs.find(t=>t.method===e);t&&(this.param.params=t.params.map((e,n)=>{var i,r;let a=null===(i=t.doc)||void 0===i||null===(r=i.params)||void 0===r?void 0:r[n];return null!=a&&a.ignore?null:a?this._getHandlerByType("doc",e,a.default):this._getHandlerByType("component",e)}).filter(Boolean))},handlePlugin(e){var t;this.pluginFuncs=(null===(t=this.plugins.find(t=>t.plugin===e.action.plugin))||void 0===t?void 0:t.methods)||[]},handlePluginFunc(e){let t=this.pluginFuncs.find(t=>t.method===e.action.func);e.params=t.params.map((e,n)=>{var i,r;let a=null===(i=t.doc)||void 0===i||null===(r=i.params)||void 0===r?void 0:r[n];return null!=a&&a.ignore?null:a?this._getHandlerByType("doc",e,a.default):this._getHandlerByType("component",e)}).filter(Boolean)},_getHandlerByType:(e,t,n)=>"component"===e?{type:e,name:t,target:"",action:null!=n?n:"",params:[]}:"dataSource"===e?{type:e,name:t,action:null!=n?n:""}:"doc"===e?{type:e,name:t,action:null!=n?n:null}:"expression"===e||"api"===e?{type:e,name:t,action:null!=n?n:""}:"objectMerge"===e?{type:e,name:t,action:[]}:"custom"===e?{type:e,name:t,action:{}}:"plugin"===e?{type:e,name:t,action:{plugin:null,func:null},params:[]}:void 0}},d=(n("2720"),n("2877")),p=Object(d.a)(u,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(e.parentParamDoc.label?"fieldset":"div",{tag:"component",staticClass:"param-picker w-full mb",class:e.parentParamDoc.label?"pl-sm pr-sm mb-sm":"",style:e.parentParamDoc.label?"color: #606266; border: 1px solid #DCDFE6":""},[e.parentParamDoc.label?n("legend",{staticClass:"fs pl-sm pr-sm"},[e._v(e._s(e.parentParamDoc.label))]):e._e(),n("el-select",{staticClass:"w-full mb-sm",attrs:{size:"mini",placeholder:e.$transMsg("lang.prop.type")},on:{change:e.handleType},model:{value:e.param.type,callback:function(t){e.$set(e.param,"type",t)},expression:"param.type"}},[n("el-option",{attrs:{label:e.$transMsg("lang.text.component"),value:"component"}}),n("el-option",{attrs:{label:e.$transMsg("lang.text.datasource"),value:"dataSource"}}),n("el-option",{attrs:{disabled:!e.parentParamDoc.type,label:e.$transMsg("lang.text.doc"),value:"doc"}}),n("el-option",{attrs:{label:e.$transMsg("lang.prop.expression"),value:"expression"}}),n("el-option",{attrs:{label:e.$transMsg("lang.text.objectMerge"),value:"objectMerge"}}),n("el-option",{attrs:{label:e.$transMsg("lang.text.customParam"),value:"custom"}}),n("el-option",{attrs:{label:e.$transMsg("lang.text.plugin"),value:"plugin"}})],1),"component"==e.param.type?[n("component-tree-input",{staticClass:"w-full mb-sm",attrs:{placeholder:e.$transMsg("lang.tip.noneComponent")},model:{value:e.param.target,callback:function(t){e.$set(e.param,"target",t)},expression:"param.target"}}),n("el-select",{staticClass:"w-full",attrs:{size:"mini",placeholder:e.$transMsg("lang.text.method")},on:{change:e.handleFunc},model:{value:e.param.action,callback:function(t){e.$set(e.param,"action",t)},expression:"param.action"}},[e.param.target?e._l(e.funcs,(function(t){return n("el-option",{key:t.method,attrs:{label:t.doc?t.doc.method:t.method,value:t.method}},[e._v(" "+e._s(t.doc?t.doc.method:t.method)),t.doc?n("span",{staticClass:"fs-xs c-text-placeholder ml-sm"},[e._v(" "+e._s(t.method)+"("+e._s(t.params.join())+")")]):e._e()])})):e._e()],2),e.param.params&&e.param.params.length?[n("fieldset",{staticClass:"pl-sm pr-sm mt-sm mb-sm",staticStyle:{color:"#606266",border:"1px dashed #DCDFE6"}},[n("legend",{staticClass:"fs pl-sm pr-sm"},[e._v(e._s(e.parentMethodDoc)+"-"+e._s(e.$transMsg("lang.prop.params")))]),e._l(e.param.params,(function(t,i){return n("param-picker",{key:e.param.action+t.name,attrs:{paramIndex:i,target:e.param.target,action:e.param.action},model:{value:e.param.params[i],callback:function(t){e.$set(e.param.params,i,t)},expression:"param.params[index]"}})}))],2)]:e._e()]:e._e(),"dataSource"==e.param.type?[n("div",{staticClass:"w-full flex-center"},[n("data-source-picker",{staticClass:"w-full",attrs:{size:"mini"},model:{value:e.param.action,callback:function(t){e.$set(e.param,"action",t)},expression:"param.action"}})],1)]:e._e(),"doc"==e.param.type?[n("div",{staticClass:"w-full flex-center"},[n("dynamic-input",e._b({staticClass:"w-full",attrs:{size:"mini"},model:{value:e.param.action,callback:function(t){e.$set(e.param,"action",t)},expression:"param.action"}},"dynamic-input",e.parentParamDoc,!1))],1)]:e._e(),"expression"==e.param.type?[n("div",{staticClass:"w-full flex-center"},[n("lazy-input",{staticClass:"w-full",attrs:{size:"mini",placeholder:e.$transMsg("lang.tip.inputExpressionCode")},model:{value:e.param.action,callback:function(t){e.$set(e.param,"action",t)},expression:"param.action"}})],1)]:e._e(),"objectMerge"==e.param.type?[n("array-input",{attrs:{size:"mini",itemClazz:"ParamPicker"},model:{value:e.param.action,callback:function(t){e.$set(e.param,"action",t)},expression:"param.action"}})]:e._e(),"custom"==e.param.type?[n("object-input",{attrs:{size:"mini",clazz:e.param.clazz,valueClazz:"ParamPicker"},model:{value:e.param.action,callback:function(t){e.$set(e.param,"action",t)},expression:"param.action"}})]:e._e(),"plugin"==e.param.type?[n("el-form-item",{attrs:{label:e.$transMsg("lang.plugin.name")}},[n("div",{staticClass:"w-full flex-center"},[n("el-select",{staticClass:"w-full",attrs:{size:"mini"},on:{change:function(t){return e.handlePlugin(e.param)}},model:{value:e.param.action.plugin,callback:function(t){e.$set(e.param.action,"plugin",t)},expression:"param.action.plugin"}},e._l(e.plugins,(function(e){return n("el-option",{key:e.plugin,attrs:{label:e.i18nName,value:e.plugin}})})),1)],1)]),n("el-form-item",{attrs:{label:e.$transMsg("lang.plugin.method")}},[n("div",{staticClass:"w-full flex-center"},[n("el-select",{staticClass:"w-full",attrs:{size:"mini"},on:{change:function(t){return e.handlePluginFunc(e.param)}},model:{value:e.param.action.func,callback:function(t){e.$set(e.param.action,"func",t)},expression:"param.action.func"}},e._l(e.pluginFuncs,(function(e){return n("el-option",{key:e.method,attrs:{label:e.doc?e.doc.method:e.method,value:e.method}})})),1)],1)]),e.param.params.length?[n("fieldset",{staticClass:"pl-sm pr-sm mb-sm",staticStyle:{color:"#606266",border:"1px dashed #DCDFE6"}},[n("legend",{staticClass:"fs pl-sm pr-sm"},[e._v(e._s(e.$transMsg("lang.plugin.params")))]),e._l(e.param.params,(function(t,i){return n("param-picker",{key:t.name,attrs:{paramIndex:i,target:t.target,action:t.action},model:{value:t.params[i],callback:function(n){e.$set(t.params,i,n)},expression:"param.params[index]"}})}))],2)]:e._e()]:e._e()],2)}),[],!1,null,"b98ff484",null);t.a=p.exports},4593:function(e,t,n){"use strict";var i=n("289a"),r=n.n(i),a=n("33d4"),o=n("3d21"),s=n("2ded"),l=n("b899"),c=(n("9d32"),n("2df1")),u=n("ec41"),d=n("3e18"),p=n("56bf"),h=n("e720"),f={components:{Draggable:r.a,CodeEditor:a.a,ComponentTreeInput:o.a,ObjectInput:s.a,LazyInput:c.a,DataSourcePicker:u.a,ParamPicker:d.a,DynamicInput:p.default,ScfPicker:h.a},data:()=>({loading:!1,handlers:[],events:[],eventTypeList:[{label:"lang.text.component",value:"component"},{label:"lang.text.condition",value:"condition"},{label:"lang.prop.expression",value:"expression"},{label:"lang.text.scf",value:"SCF"},{label:"lang.text.plugin",value:"plugin"}],plugins:l.Parsers.pluginParser(),pluginFuncs:{}}),watch:{handlers:{handler(){this.loading||this.$store.dispatch("leivii/setConfigById",{id:this.$store.state.leivii.selected.$id,config:{$handlers:this.handlers}})},deep:!0}},created(){},mounted(){this.loading=!0,this.$store.dispatch("leivii/getConfigById",this.$store.state.leivii.selected.$id).then(e=>{if(!e)return;const{events:t}=l.Parsers.componentParser(this.$store.state.leivii.selected.$type);this.events=t||[],this.handlers=e.$handlers||[],this.$nextTick(()=>this.loading=!1),this.initOptions()})},methods:{initOptions(){this.handlers.forEach((e,t)=>{"plugin"===e.type&&this.handlePlugin(e,t)})},addHandler(e){this.handlers.push(this._getHandlerByType("component",e.name))},removeHandler(e){let t=this.handlers.indexOf(e);t>-1&&this.handlers.splice(t,1)},handleType(e){let t=this._getHandlerByType(e.type,e.name);for(let t in e)this.$delete(e,t);for(let n in t)this.$set(e,n,t[n])},handleSCF(e,t){var n,i;let r={};null===(n=t[l.CONFIG.scf.dataDescription])||void 0===n||null===(i=n.parameters)||void 0===i||i.forEach(e=>{r[e.name]={type:String,default:e.defaultValue}}),e.params={type:"custom",clazz:r,action:{}}},handlePlugin(e,t){var n;this.$set(this.pluginFuncs,t,(null===(n=this.plugins.find(t=>t.plugin===e.action.plugin))||void 0===n?void 0:n.methods)||[])},handlePluginFunc(e,t){let n=this.pluginFuncs[t].find(t=>t.method===e.action.func);e.params=n.params.map((e,t)=>{var i,r;let a=null===(i=n.doc)||void 0===i||null===(r=i.params)||void 0===r?void 0:r[t];return null!=a&&a.ignore?null:a?this._getHandlerByType("doc",e,a.default):this._getHandlerByType("component",e)}).filter(Boolean)},handleDrop(e,t){let n=this.handlers.filter(e=>e.name==this.events[t].name),i=this.handlers.indexOf(n[e.oldIndex]),r=this.handlers.indexOf(n[e.newIndex]),a=this.handlers.slice(),o=a[i];a[i]=a[r],a[r]=o,this.handlers=a},showEditor(e,t){this.$emit("showEditor",e,t)},getFuncs(e){let{methods:t}=l.Parsers.componentParser(this.$(e));return t},getMethodDoc(e){var t;let n=this.getFuncs(e.target).find(t=>t.method===e.action);return(null==n||null===(t=n.doc)||void 0===t?void 0:t.method)||e.action},getParamDoc(e,t){var n,i;let r=this.getFuncs(e.target).find(t=>t.method===e.action);return(null==r||null===(n=r.doc)||void 0===n||null===(i=n.params[t])||void 0===i?void 0:i.label)||(null==r?void 0:r.params[t])},handleTarget(e){},handleFunc(e){let t=this.getFuncs(e.target).find(t=>t.method===e.action);t&&(e.params=t.params.map((e,n)=>{var i,r;let a=null===(i=t.doc)||void 0===i||null===(r=i.params)||void 0===r?void 0:r[n];return null!=a&&a.ignore?null:a?this._getHandlerByType("doc",e,a.default):this._getHandlerByType("component",e)}).filter(Boolean))},_getHandlerByType:(e,t,n)=>"component"===e?{type:e,name:t,target:"",action:null!=n?n:"",params:[]}:"condition"===e?{type:e,name:t,action:{},succ:null,fail:null}:"dataSource"===e?{type:e,name:t,action:null!=n?n:""}:"doc"===e?{type:e,name:t,action:null!=n?n:null}:"expression"===e||"api"===e?{type:e,name:t,action:null!=n?n:""}:"custom"===e?{type:e,name:t,action:null!=n?n:{}}:"SCF"===e?{type:e,name:t,action:null,params:null!=n?n:{}}:"plugin"===e?{type:e,name:t,action:{plugin:null,func:null},params:[]}:void 0}},m=(n("f280"),n("2877")),g=Object(m.a)(f,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",e._l(e.events,(function(t,i){return n("div",{key:t.name,staticClass:"handler pl pr mb-sm"},[n("el-card",[n("geek-flex-container",{attrs:{slot:"header",align:"center",justify:"space-between"},slot:"header"},[n("div",[e._v(e._s(t.label))]),n("el-button",{attrs:{size:"mini"},on:{click:function(n){return e.addHandler(t)}}},[e._v(e._s(e.$transMsg("lang.action.addHandler")))])],1),n("draggable",{attrs:{value:e.handlers},on:{sort:function(t){return e.handleDrop(t,i)}}},e._l(e.handlers.filter((function(e){return e.name==t.name})),(function(t,i){return n("geek-collapse",{key:i,staticClass:"event-handler text item",attrs:{title:e.eventTypeList.find((function(e){return e.value==t.type})).label}},[n("i",{staticClass:"icon el-icon-delete",on:{click:function(n){return e.removeHandler(t)}}}),n("el-form",{ref:"handlerform-"+i,refInFor:!0,attrs:{size:"mini",model:e.handlers[i],"label-width":"65px","label-position":"right"}},[n("el-form-item",{attrs:{label:e.$transMsg("lang.prop.type")}},[n("el-select",{staticClass:"w-full",attrs:{size:"mini"},on:{change:function(n){return e.handleType(t)}},model:{value:t.type,callback:function(n){e.$set(t,"type",n)},expression:"handler.type"}},e._l(e.eventTypeList,(function(t){return n("el-option",{key:t.value,attrs:{label:e.$transMsg(t.label),value:t.value}})})),1)],1),"component"==t.type?[n("el-form-item",{attrs:{label:e.$transMsg("lang.text.component")}},[n("component-tree-input",{staticClass:"w-full",attrs:{placeholder:e.$transMsg("lang.tip.noneComponent")},on:{change:function(n){return e.handleTarget(t)}},model:{value:t.target,callback:function(n){e.$set(t,"target",n)},expression:"handler.target"}})],1),n("el-form-item",{attrs:{label:e.$transMsg("lang.text.method")}},[n("el-select",{staticClass:"w-full",attrs:{size:"mini",placeholder:e.$transMsg("lang.text.method")},on:{change:function(n){return e.handleFunc(t)}},model:{value:t.action,callback:function(n){e.$set(t,"action",n)},expression:"handler.action"}},[t.target?e._l(e.getFuncs(t.target),(function(t){return n("el-option",{key:t.method,attrs:{label:t.doc?t.doc.method:t.method,value:t.method}},[e._v(" "+e._s(t.doc?t.doc.method:t.method)),t.doc?n("span",{staticClass:"fs-xs c-text-placeholder ml-sm"},[e._v(" "+e._s(t.method)+"("+e._s(t.params.join())+")")]):e._e()])})):e._e()],2)],1),t.params.length?[n("fieldset",{staticClass:"pl-sm pr-sm mb-sm",staticStyle:{color:"#606266",border:"1px dashed #DCDFE6"}},[n("legend",{staticClass:"fs pl-sm pr-sm"},[e._v(e._s(e.getMethodDoc(t))+"-"+e._s(e.$transMsg("lang.prop.params")))]),e._l(t.params,(function(i,r){return n("param-picker",{key:i.name,attrs:{paramIndex:r,target:t.target,action:t.action},model:{value:t.params[r],callback:function(n){e.$set(t.params,r,n)},expression:"handler.params[index]"}})}))],2)]:e._e()]:e._e(),"condition"==t.type?[n("param-picker",{model:{value:t.action,callback:function(n){e.$set(t,"action",n)},expression:"handler.action"}}),n("fieldset",{staticClass:"pl-sm pr-sm mb-sm",staticStyle:{color:"#606266",border:"1px dashed #DCDFE6"}},[n("legend",{staticClass:"fs pl-sm pr-sm"},[e._v(e._s(e.$transMsg("lang.prop.yes")))]),n("param-picker",{model:{value:t.succ,callback:function(n){e.$set(t,"succ",n)},expression:"handler.succ"}})],1),n("fieldset",{staticClass:"pl-sm pr-sm mb-sm",staticStyle:{color:"#606266",border:"1px dashed #DCDFE6"}},[n("legend",{staticClass:"fs pl-sm pr-sm"},[e._v(e._s(e.$transMsg("lang.prop.no")))]),n("param-picker",{model:{value:t.fail,callback:function(n){e.$set(t,"fail",n)},expression:"handler.fail"}})],1)]:e._e(),"expression"==t.type?[n("el-form-item",{attrs:{label:e.$transMsg("lang.prop.expression")}},[n("div",{staticClass:"w-full flex-center"},[n("lazy-input",{attrs:{size:"mini",placeholder:e.$transMsg("lang.tip.inputExpressionCode")},model:{value:t.action,callback:function(n){e.$set(t,"action",n)},expression:"handler.action"}}),n("div",{staticClass:"expression-btn",on:{click:function(n){return e.showEditor(t,"action")}}},[e._v("{/}")])],1)])]:e._e(),"SCF"==t.type?[n("el-form-item",{attrs:{label:e.$transMsg("lang.text.scf")}},[n("div",{staticClass:"w-full flex-center"},[n("scf-picker",{attrs:{size:"mini"},on:{data:function(n){return e.handleSCF(t,n)}},model:{value:t.action,callback:function(n){e.$set(t,"action",n)},expression:"handler.action"}})],1)]),Object.keys(t.params).length?n("el-form-item",{attrs:{label:e.$transMsg("lang.prop.params")}},[n("div",{staticClass:"w-full flex-center"},[n("param-picker",{model:{value:t.params,callback:function(n){e.$set(t,"params",n)},expression:"handler.params"}})],1)]):e._e()]:e._e(),"plugin"==t.type?[n("el-form-item",{attrs:{label:e.$transMsg("lang.plugin.name")}},[n("div",{staticClass:"w-full flex-center"},[n("el-select",{staticClass:"w-full",attrs:{size:"mini"},on:{change:function(n){return e.handlePlugin(t,i)}},model:{value:t.action.plugin,callback:function(n){e.$set(t.action,"plugin",n)},expression:"handler.action.plugin"}},e._l(e.plugins,(function(e){return n("el-option",{key:e.plugin,attrs:{label:e.i18nName,value:e.plugin}})})),1)],1)]),n("el-form-item",{attrs:{label:e.$transMsg("lang.plugin.method")}},[n("div",{staticClass:"w-full flex-center"},[n("el-select",{staticClass:"w-full",attrs:{size:"mini"},on:{change:function(n){return e.handlePluginFunc(t,i)}},model:{value:t.action.func,callback:function(n){e.$set(t.action,"func",n)},expression:"handler.action.func"}},e._l(e.pluginFuncs[i],(function(e){return n("el-option",{key:e.method,attrs:{label:e.doc?e.doc.method:e.method,value:e.method}})})),1)],1)]),t.params.length?[n("fieldset",{staticClass:"pl-sm pr-sm mb-sm",staticStyle:{color:"#606266",border:"1px dashed #DCDFE6"}},[n("legend",{staticClass:"fs pl-sm pr-sm"},[e._v(e._s(e.$transMsg("lang.plugin.params")))]),e._l(t.params,(function(i,r){return n("param-picker",{key:i.name,attrs:{paramIndex:r,action:t.action},model:{value:t.params[r],callback:function(n){e.$set(t.params,r,n)},expression:"handler.params[index]"}})}))],2)]:e._e()]:e._e()],2)],1)})),1)],1)],1)})),0)}),[],!1,null,"743b7dd9",null);t.a=g.exports},"4b27":function(e,t,n){},"4eeb":function(e,t,n){"use strict";n("1408")},"56b3":function(e,t,n){e.exports=function(){"use strict";var e=navigator.userAgent,t=navigator.platform,n=/gecko\/\d/i.test(e),i=/MSIE \d/.test(e),r=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(e),a=/Edge\/(\d+)/.exec(e),o=i||r||a,s=o&&(i?document.documentMode||6:+(a||r)[1]),l=!a&&/WebKit\//.test(e),c=l&&/Qt\/\d+\.\d+/.test(e),u=!a&&/Chrome\//.test(e),d=/Opera\//.test(e),p=/Apple Computer/.test(navigator.vendor),h=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(e),f=/PhantomJS/.test(e),m=p&&(/Mobile\/\w+/.test(e)||navigator.maxTouchPoints>2),g=/Android/.test(e),v=m||g||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(e),b=m||/Mac/.test(t),y=/\bCrOS\b/.test(e),x=/win/i.test(t),_=d&&e.match(/Version\/(\d*\.\d*)/);_&&(_=Number(_[1])),_&&_>=15&&(d=!1,l=!0);var w=b&&(c||d&&(null==_||_<12.11)),C=n||o&&s>=9;function k(e){return new RegExp("(^|\\s)"+e+"(?:$|\\s)\\s*")}var S,M=function(e,t){var n=e.className,i=k(t).exec(n);if(i){var r=n.slice(i.index+i[0].length);e.className=n.slice(0,i.index)+(r?i[1]+r:"")}};function O(e){for(var t=e.childNodes.length;t>0;--t)e.removeChild(e.firstChild);return e}function $(e,t){return O(e).appendChild(t)}function E(e,t,n,i){var r=document.createElement(e);if(n&&(r.className=n),i&&(r.style.cssText=i),"string"==typeof t)r.appendChild(document.createTextNode(t));else if(t)for(var a=0;a<t.length;++a)r.appendChild(t[a]);return r}function T(e,t,n,i){var r=E(e,t,n,i);return r.setAttribute("role","presentation"),r}function D(e,t){if(3==t.nodeType&&(t=t.parentNode),e.contains)return e.contains(t);do{if(11==t.nodeType&&(t=t.host),t==e)return!0}while(t=t.parentNode)}function L(){var e;try{e=document.activeElement}catch(t){e=document.body||null}for(;e&&e.shadowRoot&&e.shadowRoot.activeElement;)e=e.shadowRoot.activeElement;return e}function z(e,t){var n=e.className;k(t).test(n)||(e.className+=(n?" ":"")+t)}function N(e,t){for(var n=e.split(" "),i=0;i<n.length;i++)n[i]&&!k(n[i]).test(t)&&(t+=" "+n[i]);return t}S=document.createRange?function(e,t,n,i){var r=document.createRange();return r.setEnd(i||e,n),r.setStart(e,t),r}:function(e,t,n){var i=document.body.createTextRange();try{i.moveToElementText(e.parentNode)}catch(e){return i}return i.collapse(!0),i.moveEnd("character",n),i.moveStart("character",t),i};var A=function(e){e.select()};function I(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}function P(e,t,n){for(var i in t||(t={}),e)!e.hasOwnProperty(i)||!1===n&&t.hasOwnProperty(i)||(t[i]=e[i]);return t}function j(e,t,n,i,r){null==t&&-1==(t=e.search(/[^\s\u00a0]/))&&(t=e.length);for(var a=i||0,o=r||0;;){var s=e.indexOf("\t",a);if(s<0||s>=t)return o+(t-a);o+=s-a,o+=n-o%n,a=s+1}}m?A=function(e){e.selectionStart=0,e.selectionEnd=e.value.length}:o&&(A=function(e){try{e.select()}catch(e){}});var F=function(){this.id=null,this.f=null,this.time=0,this.handler=I(this.onTimeout,this)};function B(e,t){for(var n=0;n<e.length;++n)if(e[n]==t)return n;return-1}F.prototype.onTimeout=function(e){e.id=0,e.time<=+new Date?e.f():setTimeout(e.handler,e.time-+new Date)},F.prototype.set=function(e,t){this.f=t;var n=+new Date+e;(!this.id||n<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,e),this.time=n)};var R={toString:function(){return"CodeMirror.Pass"}},W={scroll:!1},H={origin:"*mouse"},G={origin:"+move"};function q(e,t,n){for(var i=0,r=0;;){var a=e.indexOf("\t",i);-1==a&&(a=e.length);var o=a-i;if(a==e.length||r+o>=t)return i+Math.min(o,t-r);if(r+=a-i,i=a+1,(r+=n-r%n)>=t)return i}}var U=[""];function V(e){for(;U.length<=e;)U.push(K(U)+" ");return U[e]}function K(e){return e[e.length-1]}function X(e,t){for(var n=[],i=0;i<e.length;i++)n[i]=t(e[i],i);return n}function Y(){}function J(e,t){var n;return Object.create?n=Object.create(e):(Y.prototype=e,n=new Y),t&&P(t,n),n}var Q=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function Z(e){return/\w/.test(e)||e>""&&(e.toUpperCase()!=e.toLowerCase()||Q.test(e))}function ee(e,t){return t?!!(t.source.indexOf("\\w")>-1&&Z(e))||t.test(e):Z(e)}function te(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return!1;return!0}var ne=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function ie(e){return e.charCodeAt(0)>=768&&ne.test(e)}function re(e,t,n){for(;(n<0?t>0:t<e.length)&&ie(e.charAt(t));)t+=n;return t}function ae(e,t,n){for(var i=t>n?-1:1;;){if(t==n)return t;var r=(t+n)/2,a=i<0?Math.ceil(r):Math.floor(r);if(a==t)return e(a)?t:n;e(a)?n=a:t=a+i}}var oe=null;function se(e,t,n){var i;oe=null;for(var r=0;r<e.length;++r){var a=e[r];if(a.from<t&&a.to>t)return r;a.to==t&&(a.from!=a.to&&"before"==n?i=r:oe=r),a.from==t&&(a.from!=a.to&&"before"!=n?i=r:oe=r)}return null!=i?i:oe}var le=function(){function e(e){return e<=247?"bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN".charAt(e):1424<=e&&e<=1524?"R":1536<=e&&e<=1785?"nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111".charAt(e-1536):1774<=e&&e<=2220?"r":8192<=e&&e<=8203?"w":8204==e?"b":"L"}var t=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,n=/[stwN]/,i=/[LRr]/,r=/[Lb1n]/,a=/[1n]/;function o(e,t,n){this.level=e,this.from=t,this.to=n}return function(s,l){var c="ltr"==l?"L":"R";if(0==s.length||"ltr"==l&&!t.test(s))return!1;for(var u=s.length,d=[],p=0;p<u;++p)d.push(e(s.charCodeAt(p)));for(var h=0,f=c;h<u;++h){var m=d[h];"m"==m?d[h]=f:f=m}for(var g=0,v=c;g<u;++g){var b=d[g];"1"==b&&"r"==v?d[g]="n":i.test(b)&&(v=b,"r"==b&&(d[g]="R"))}for(var y=1,x=d[0];y<u-1;++y){var _=d[y];"+"==_&&"1"==x&&"1"==d[y+1]?d[y]="1":","!=_||x!=d[y+1]||"1"!=x&&"n"!=x||(d[y]=x),x=_}for(var w=0;w<u;++w){var C=d[w];if(","==C)d[w]="N";else if("%"==C){var k=void 0;for(k=w+1;k<u&&"%"==d[k];++k);for(var S=w&&"!"==d[w-1]||k<u&&"1"==d[k]?"1":"N",M=w;M<k;++M)d[M]=S;w=k-1}}for(var O=0,$=c;O<u;++O){var E=d[O];"L"==$&&"1"==E?d[O]="L":i.test(E)&&($=E)}for(var T=0;T<u;++T)if(n.test(d[T])){var D=void 0;for(D=T+1;D<u&&n.test(d[D]);++D);for(var L="L"==(T?d[T-1]:c),z=L==("L"==(D<u?d[D]:c))?L?"L":"R":c,N=T;N<D;++N)d[N]=z;T=D-1}for(var A,I=[],P=0;P<u;)if(r.test(d[P])){var j=P;for(++P;P<u&&r.test(d[P]);++P);I.push(new o(0,j,P))}else{var F=P,B=I.length,R="rtl"==l?1:0;for(++P;P<u&&"L"!=d[P];++P);for(var W=F;W<P;)if(a.test(d[W])){F<W&&(I.splice(B,0,new o(1,F,W)),B+=R);var H=W;for(++W;W<P&&a.test(d[W]);++W);I.splice(B,0,new o(2,H,W)),B+=R,F=W}else++W;F<P&&I.splice(B,0,new o(1,F,P))}return"ltr"==l&&(1==I[0].level&&(A=s.match(/^\s+/))&&(I[0].from=A[0].length,I.unshift(new o(0,0,A[0].length))),1==K(I).level&&(A=s.match(/\s+$/))&&(K(I).to-=A[0].length,I.push(new o(0,u-A[0].length,u)))),"rtl"==l?I.reverse():I}}();function ce(e,t){var n=e.order;return null==n&&(n=e.order=le(e.text,t)),n}var ue=[],de=function(e,t,n){if(e.addEventListener)e.addEventListener(t,n,!1);else if(e.attachEvent)e.attachEvent("on"+t,n);else{var i=e._handlers||(e._handlers={});i[t]=(i[t]||ue).concat(n)}};function pe(e,t){return e._handlers&&e._handlers[t]||ue}function he(e,t,n){if(e.removeEventListener)e.removeEventListener(t,n,!1);else if(e.detachEvent)e.detachEvent("on"+t,n);else{var i=e._handlers,r=i&&i[t];if(r){var a=B(r,n);a>-1&&(i[t]=r.slice(0,a).concat(r.slice(a+1)))}}}function fe(e,t){var n=pe(e,t);if(n.length)for(var i=Array.prototype.slice.call(arguments,2),r=0;r<n.length;++r)n[r].apply(null,i)}function me(e,t,n){return"string"==typeof t&&(t={type:t,preventDefault:function(){this.defaultPrevented=!0}}),fe(e,n||t.type,e,t),_e(t)||t.codemirrorIgnore}function ge(e){var t=e._handlers&&e._handlers.cursorActivity;if(t)for(var n=e.curOp.cursorActivityHandlers||(e.curOp.cursorActivityHandlers=[]),i=0;i<t.length;++i)-1==B(n,t[i])&&n.push(t[i])}function ve(e,t){return pe(e,t).length>0}function be(e){e.prototype.on=function(e,t){de(this,e,t)},e.prototype.off=function(e,t){he(this,e,t)}}function ye(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function xe(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function _e(e){return null!=e.defaultPrevented?e.defaultPrevented:0==e.returnValue}function we(e){ye(e),xe(e)}function Ce(e){return e.target||e.srcElement}function ke(e){var t=e.which;return null==t&&(1&e.button?t=1:2&e.button?t=3:4&e.button&&(t=2)),b&&e.ctrlKey&&1==t&&(t=3),t}var Se,Me,Oe=function(){if(o&&s<9)return!1;var e=E("div");return"draggable"in e||"dragDrop"in e}();function $e(e){if(null==Se){var t=E("span","");$(e,E("span",[t,document.createTextNode("x")])),0!=e.firstChild.offsetHeight&&(Se=t.offsetWidth<=1&&t.offsetHeight>2&&!(o&&s<8))}var n=Se?E("span",""):E("span","",null,"display: inline-block; width: 1px; margin-right: -1px");return n.setAttribute("cm-text",""),n}function Ee(e){if(null!=Me)return Me;var t=$(e,document.createTextNode("AA")),n=S(t,0,1).getBoundingClientRect(),i=S(t,1,2).getBoundingClientRect();return O(e),!(!n||n.left==n.right)&&(Me=i.right-n.right<3)}var Te=3!="\n\nb".split(/\n/).length?function(e){for(var t=0,n=[],i=e.length;t<=i;){var r=e.indexOf("\n",t);-1==r&&(r=e.length);var a=e.slice(t,"\r"==e.charAt(r-1)?r-1:r),o=a.indexOf("\r");-1!=o?(n.push(a.slice(0,o)),t+=o+1):(n.push(a),t=r+1)}return n}:function(e){return e.split(/\r\n?|\n/)},De=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch(e){return!1}}:function(e){var t;try{t=e.ownerDocument.selection.createRange()}catch(e){}return!(!t||t.parentElement()!=e)&&0!=t.compareEndPoints("StartToEnd",t)},Le=function(){var e=E("div");return"oncopy"in e||(e.setAttribute("oncopy","return;"),"function"==typeof e.oncopy)}(),ze=null,Ne={},Ae={};function Ie(e,t){arguments.length>2&&(t.dependencies=Array.prototype.slice.call(arguments,2)),Ne[e]=t}function Pe(e){if("string"==typeof e&&Ae.hasOwnProperty(e))e=Ae[e];else if(e&&"string"==typeof e.name&&Ae.hasOwnProperty(e.name)){var t=Ae[e.name];"string"==typeof t&&(t={name:t}),(e=J(t,e)).name=t.name}else{if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+xml$/.test(e))return Pe("application/xml");if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+json$/.test(e))return Pe("application/json")}return"string"==typeof e?{name:e}:e||{name:"null"}}function je(e,t){t=Pe(t);var n=Ne[t.name];if(!n)return je(e,"text/plain");var i=n(e,t);if(Fe.hasOwnProperty(t.name)){var r=Fe[t.name];for(var a in r)r.hasOwnProperty(a)&&(i.hasOwnProperty(a)&&(i["_"+a]=i[a]),i[a]=r[a])}if(i.name=t.name,t.helperType&&(i.helperType=t.helperType),t.modeProps)for(var o in t.modeProps)i[o]=t.modeProps[o];return i}var Fe={};function Be(e,t){P(t,Fe.hasOwnProperty(e)?Fe[e]:Fe[e]={})}function Re(e,t){if(!0===t)return t;if(e.copyState)return e.copyState(t);var n={};for(var i in t){var r=t[i];r instanceof Array&&(r=r.concat([])),n[i]=r}return n}function We(e,t){for(var n;e.innerMode&&(n=e.innerMode(t))&&n.mode!=e;)t=n.state,e=n.mode;return n||{mode:e,state:t}}function He(e,t,n){return!e.startState||e.startState(t,n)}var Ge=function(e,t,n){this.pos=this.start=0,this.string=e,this.tabSize=t||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=n};function qe(e,t){if((t-=e.first)<0||t>=e.size)throw new Error("There is no line "+(t+e.first)+" in the document.");for(var n=e;!n.lines;)for(var i=0;;++i){var r=n.children[i],a=r.chunkSize();if(t<a){n=r;break}t-=a}return n.lines[t]}function Ue(e,t,n){var i=[],r=t.line;return e.iter(t.line,n.line+1,(function(e){var a=e.text;r==n.line&&(a=a.slice(0,n.ch)),r==t.line&&(a=a.slice(t.ch)),i.push(a),++r})),i}function Ve(e,t,n){var i=[];return e.iter(t,n,(function(e){i.push(e.text)})),i}function Ke(e,t){var n=t-e.height;if(n)for(var i=e;i;i=i.parent)i.height+=n}function Xe(e){if(null==e.parent)return null;for(var t=e.parent,n=B(t.lines,e),i=t.parent;i;t=i,i=i.parent)for(var r=0;i.children[r]!=t;++r)n+=i.children[r].chunkSize();return n+t.first}function Ye(e,t){var n=e.first;e:do{for(var i=0;i<e.children.length;++i){var r=e.children[i],a=r.height;if(t<a){e=r;continue e}t-=a,n+=r.chunkSize()}return n}while(!e.lines);for(var o=0;o<e.lines.length;++o){var s=e.lines[o].height;if(t<s)break;t-=s}return n+o}function Je(e,t){return t>=e.first&&t<e.first+e.size}function Qe(e,t){return String(e.lineNumberFormatter(t+e.firstLineNumber))}function Ze(e,t,n){if(void 0===n&&(n=null),!(this instanceof Ze))return new Ze(e,t,n);this.line=e,this.ch=t,this.sticky=n}function et(e,t){return e.line-t.line||e.ch-t.ch}function tt(e,t){return e.sticky==t.sticky&&0==et(e,t)}function nt(e){return Ze(e.line,e.ch)}function it(e,t){return et(e,t)<0?t:e}function rt(e,t){return et(e,t)<0?e:t}function at(e,t){return Math.max(e.first,Math.min(t,e.first+e.size-1))}function ot(e,t){if(t.line<e.first)return Ze(e.first,0);var n=e.first+e.size-1;return t.line>n?Ze(n,qe(e,n).text.length):function(e,t){var n=e.ch;return null==n||n>t?Ze(e.line,t):n<0?Ze(e.line,0):e}(t,qe(e,t.line).text.length)}function st(e,t){for(var n=[],i=0;i<t.length;i++)n[i]=ot(e,t[i]);return n}Ge.prototype.eol=function(){return this.pos>=this.string.length},Ge.prototype.sol=function(){return this.pos==this.lineStart},Ge.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},Ge.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},Ge.prototype.eat=function(e){var t=this.string.charAt(this.pos);if("string"==typeof e?t==e:t&&(e.test?e.test(t):e(t)))return++this.pos,t},Ge.prototype.eatWhile=function(e){for(var t=this.pos;this.eat(e););return this.pos>t},Ge.prototype.eatSpace=function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},Ge.prototype.skipToEnd=function(){this.pos=this.string.length},Ge.prototype.skipTo=function(e){var t=this.string.indexOf(e,this.pos);if(t>-1)return this.pos=t,!0},Ge.prototype.backUp=function(e){this.pos-=e},Ge.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=j(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?j(this.string,this.lineStart,this.tabSize):0)},Ge.prototype.indentation=function(){return j(this.string,null,this.tabSize)-(this.lineStart?j(this.string,this.lineStart,this.tabSize):0)},Ge.prototype.match=function(e,t,n){if("string"!=typeof e){var i=this.string.slice(this.pos).match(e);return i&&i.index>0?null:(i&&!1!==t&&(this.pos+=i[0].length),i)}var r=function(e){return n?e.toLowerCase():e};if(r(this.string.substr(this.pos,e.length))==r(e))return!1!==t&&(this.pos+=e.length),!0},Ge.prototype.current=function(){return this.string.slice(this.start,this.pos)},Ge.prototype.hideFirstChars=function(e,t){this.lineStart+=e;try{return t()}finally{this.lineStart-=e}},Ge.prototype.lookAhead=function(e){var t=this.lineOracle;return t&&t.lookAhead(e)},Ge.prototype.baseToken=function(){var e=this.lineOracle;return e&&e.baseToken(this.pos)};var lt=function(e,t){this.state=e,this.lookAhead=t},ct=function(e,t,n,i){this.state=t,this.doc=e,this.line=n,this.maxLookAhead=i||0,this.baseTokens=null,this.baseTokenPos=1};function ut(e,t,n,i){var r=[e.state.modeGen],a={};yt(e,t.text,e.doc.mode,n,(function(e,t){return r.push(e,t)}),a,i);for(var o=n.state,s=function(i){n.baseTokens=r;var s=e.state.overlays[i],l=1,c=0;n.state=!0,yt(e,t.text,s.mode,n,(function(e,t){for(var n=l;c<e;){var i=r[l];i>e&&r.splice(l,1,e,r[l+1],i),l+=2,c=Math.min(e,i)}if(t)if(s.opaque)r.splice(n,l-n,e,"overlay "+t),l=n+2;else for(;n<l;n+=2){var a=r[n+1];r[n+1]=(a?a+" ":"")+"overlay "+t}}),a),n.state=o,n.baseTokens=null,n.baseTokenPos=1},l=0;l<e.state.overlays.length;++l)s(l);return{styles:r,classes:a.bgClass||a.textClass?a:null}}function dt(e,t,n){if(!t.styles||t.styles[0]!=e.state.modeGen){var i=pt(e,Xe(t)),r=t.text.length>e.options.maxHighlightLength&&Re(e.doc.mode,i.state),a=ut(e,t,i);r&&(i.state=r),t.stateAfter=i.save(!r),t.styles=a.styles,a.classes?t.styleClasses=a.classes:t.styleClasses&&(t.styleClasses=null),n===e.doc.highlightFrontier&&(e.doc.modeFrontier=Math.max(e.doc.modeFrontier,++e.doc.highlightFrontier))}return t.styles}function pt(e,t,n){var i=e.doc,r=e.display;if(!i.mode.startState)return new ct(i,!0,t);var a=function(e,t,n){for(var i,r,a=e.doc,o=n?-1:t-(e.doc.mode.innerMode?1e3:100),s=t;s>o;--s){if(s<=a.first)return a.first;var l=qe(a,s-1),c=l.stateAfter;if(c&&(!n||s+(c instanceof lt?c.lookAhead:0)<=a.modeFrontier))return s;var u=j(l.text,null,e.options.tabSize);(null==r||i>u)&&(r=s-1,i=u)}return r}(e,t,n),o=a>i.first&&qe(i,a-1).stateAfter,s=o?ct.fromSaved(i,o,a):new ct(i,He(i.mode),a);return i.iter(a,t,(function(n){ht(e,n.text,s);var i=s.line;n.stateAfter=i==t-1||i%5==0||i>=r.viewFrom&&i<r.viewTo?s.save():null,s.nextLine()})),n&&(i.modeFrontier=s.line),s}function ht(e,t,n,i){var r=e.doc.mode,a=new Ge(t,e.options.tabSize,n);for(a.start=a.pos=i||0,""==t&&ft(r,n.state);!a.eol();)mt(r,a,n.state),a.start=a.pos}function ft(e,t){if(e.blankLine)return e.blankLine(t);if(e.innerMode){var n=We(e,t);return n.mode.blankLine?n.mode.blankLine(n.state):void 0}}function mt(e,t,n,i){for(var r=0;r<10;r++){i&&(i[0]=We(e,n).mode);var a=e.token(t,n);if(t.pos>t.start)return a}throw new Error("Mode "+e.name+" failed to advance stream.")}ct.prototype.lookAhead=function(e){var t=this.doc.getLine(this.line+e);return null!=t&&e>this.maxLookAhead&&(this.maxLookAhead=e),t},ct.prototype.baseToken=function(e){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=e;)this.baseTokenPos+=2;var t=this.baseTokens[this.baseTokenPos+1];return{type:t&&t.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-e}},ct.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},ct.fromSaved=function(e,t,n){return t instanceof lt?new ct(e,Re(e.mode,t.state),n,t.lookAhead):new ct(e,Re(e.mode,t),n)},ct.prototype.save=function(e){var t=!1!==e?Re(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new lt(t,this.maxLookAhead):t};var gt=function(e,t,n){this.start=e.start,this.end=e.pos,this.string=e.current(),this.type=t||null,this.state=n};function vt(e,t,n,i){var r,a,o=e.doc,s=o.mode,l=qe(o,(t=ot(o,t)).line),c=pt(e,t.line,n),u=new Ge(l.text,e.options.tabSize,c);for(i&&(a=[]);(i||u.pos<t.ch)&&!u.eol();)u.start=u.pos,r=mt(s,u,c.state),i&&a.push(new gt(u,r,Re(o.mode,c.state)));return i?a:new gt(u,r,c.state)}function bt(e,t){if(e)for(;;){var n=e.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!n)break;e=e.slice(0,n.index)+e.slice(n.index+n[0].length);var i=n[1]?"bgClass":"textClass";null==t[i]?t[i]=n[2]:new RegExp("(?:^|\\s)"+n[2]+"(?:$|\\s)").test(t[i])||(t[i]+=" "+n[2])}return e}function yt(e,t,n,i,r,a,o){var s=n.flattenSpans;null==s&&(s=e.options.flattenSpans);var l,c=0,u=null,d=new Ge(t,e.options.tabSize,i),p=e.options.addModeClass&&[null];for(""==t&&bt(ft(n,i.state),a);!d.eol();){if(d.pos>e.options.maxHighlightLength?(s=!1,o&&ht(e,t,i,d.pos),d.pos=t.length,l=null):l=bt(mt(n,d,i.state,p),a),p){var h=p[0].name;h&&(l="m-"+(l?h+" "+l:h))}if(!s||u!=l){for(;c<d.start;)r(c=Math.min(d.start,c+5e3),u);u=l}d.start=d.pos}for(;c<d.pos;){var f=Math.min(d.pos,c+5e3);r(f,u),c=f}}var xt=!1,_t=!1;function wt(e,t,n){this.marker=e,this.from=t,this.to=n}function Ct(e,t){if(e)for(var n=0;n<e.length;++n){var i=e[n];if(i.marker==t)return i}}function kt(e,t){for(var n,i=0;i<e.length;++i)e[i]!=t&&(n||(n=[])).push(e[i]);return n}function St(e,t){if(t.full)return null;var n=Je(e,t.from.line)&&qe(e,t.from.line).markedSpans,i=Je(e,t.to.line)&&qe(e,t.to.line).markedSpans;if(!n&&!i)return null;var r=t.from.ch,a=t.to.ch,o=0==et(t.from,t.to),s=function(e,t,n){var i;if(e)for(var r=0;r<e.length;++r){var a=e[r],o=a.marker;if(null==a.from||(o.inclusiveLeft?a.from<=t:a.from<t)||a.from==t&&"bookmark"==o.type&&(!n||!a.marker.insertLeft)){var s=null==a.to||(o.inclusiveRight?a.to>=t:a.to>t);(i||(i=[])).push(new wt(o,a.from,s?null:a.to))}}return i}(n,r,o),l=function(e,t,n){var i;if(e)for(var r=0;r<e.length;++r){var a=e[r],o=a.marker;if(null==a.to||(o.inclusiveRight?a.to>=t:a.to>t)||a.from==t&&"bookmark"==o.type&&(!n||a.marker.insertLeft)){var s=null==a.from||(o.inclusiveLeft?a.from<=t:a.from<t);(i||(i=[])).push(new wt(o,s?null:a.from-t,null==a.to?null:a.to-t))}}return i}(i,a,o),c=1==t.text.length,u=K(t.text).length+(c?r:0);if(s)for(var d=0;d<s.length;++d){var p=s[d];if(null==p.to){var h=Ct(l,p.marker);h?c&&(p.to=null==h.to?null:h.to+u):p.to=r}}if(l)for(var f=0;f<l.length;++f){var m=l[f];null!=m.to&&(m.to+=u),null==m.from?Ct(s,m.marker)||(m.from=u,c&&(s||(s=[])).push(m)):(m.from+=u,c&&(s||(s=[])).push(m))}s&&(s=Mt(s)),l&&l!=s&&(l=Mt(l));var g=[s];if(!c){var v,b=t.text.length-2;if(b>0&&s)for(var y=0;y<s.length;++y)null==s[y].to&&(v||(v=[])).push(new wt(s[y].marker,null,null));for(var x=0;x<b;++x)g.push(v);g.push(l)}return g}function Mt(e){for(var t=0;t<e.length;++t){var n=e[t];null!=n.from&&n.from==n.to&&!1!==n.marker.clearWhenEmpty&&e.splice(t--,1)}return e.length?e:null}function Ot(e){var t=e.markedSpans;if(t){for(var n=0;n<t.length;++n)t[n].marker.detachLine(e);e.markedSpans=null}}function $t(e,t){if(t){for(var n=0;n<t.length;++n)t[n].marker.attachLine(e);e.markedSpans=t}}function Et(e){return e.inclusiveLeft?-1:0}function Tt(e){return e.inclusiveRight?1:0}function Dt(e,t){var n=e.lines.length-t.lines.length;if(0!=n)return n;var i=e.find(),r=t.find(),a=et(i.from,r.from)||Et(e)-Et(t);return a?-a:et(i.to,r.to)||Tt(e)-Tt(t)||t.id-e.id}function Lt(e,t){var n,i=_t&&e.markedSpans;if(i)for(var r=void 0,a=0;a<i.length;++a)(r=i[a]).marker.collapsed&&null==(t?r.from:r.to)&&(!n||Dt(n,r.marker)<0)&&(n=r.marker);return n}function zt(e){return Lt(e,!0)}function Nt(e){return Lt(e,!1)}function At(e,t){var n,i=_t&&e.markedSpans;if(i)for(var r=0;r<i.length;++r){var a=i[r];a.marker.collapsed&&(null==a.from||a.from<t)&&(null==a.to||a.to>t)&&(!n||Dt(n,a.marker)<0)&&(n=a.marker)}return n}function It(e,t,n,i,r){var a=qe(e,t),o=_t&&a.markedSpans;if(o)for(var s=0;s<o.length;++s){var l=o[s];if(l.marker.collapsed){var c=l.marker.find(0),u=et(c.from,n)||Et(l.marker)-Et(r),d=et(c.to,i)||Tt(l.marker)-Tt(r);if(!(u>=0&&d<=0||u<=0&&d>=0)&&(u<=0&&(l.marker.inclusiveRight&&r.inclusiveLeft?et(c.to,n)>=0:et(c.to,n)>0)||u>=0&&(l.marker.inclusiveRight&&r.inclusiveLeft?et(c.from,i)<=0:et(c.from,i)<0)))return!0}}}function Pt(e){for(var t;t=zt(e);)e=t.find(-1,!0).line;return e}function jt(e,t){var n=qe(e,t),i=Pt(n);return n==i?t:Xe(i)}function Ft(e,t){if(t>e.lastLine())return t;var n,i=qe(e,t);if(!Bt(e,i))return t;for(;n=Nt(i);)i=n.find(1,!0).line;return Xe(i)+1}function Bt(e,t){var n=_t&&t.markedSpans;if(n)for(var i=void 0,r=0;r<n.length;++r)if((i=n[r]).marker.collapsed){if(null==i.from)return!0;if(!i.marker.widgetNode&&0==i.from&&i.marker.inclusiveLeft&&Rt(e,t,i))return!0}}function Rt(e,t,n){if(null==n.to){var i=n.marker.find(1,!0);return Rt(e,i.line,Ct(i.line.markedSpans,n.marker))}if(n.marker.inclusiveRight&&n.to==t.text.length)return!0;for(var r=void 0,a=0;a<t.markedSpans.length;++a)if((r=t.markedSpans[a]).marker.collapsed&&!r.marker.widgetNode&&r.from==n.to&&(null==r.to||r.to!=n.from)&&(r.marker.inclusiveLeft||n.marker.inclusiveRight)&&Rt(e,t,r))return!0}function Wt(e){for(var t=0,n=(e=Pt(e)).parent,i=0;i<n.lines.length;++i){var r=n.lines[i];if(r==e)break;t+=r.height}for(var a=n.parent;a;a=(n=a).parent)for(var o=0;o<a.children.length;++o){var s=a.children[o];if(s==n)break;t+=s.height}return t}function Ht(e){if(0==e.height)return 0;for(var t,n=e.text.length,i=e;t=zt(i);){var r=t.find(0,!0);i=r.from.line,n+=r.from.ch-r.to.ch}for(i=e;t=Nt(i);){var a=t.find(0,!0);n-=i.text.length-a.from.ch,n+=(i=a.to.line).text.length-a.to.ch}return n}function Gt(e){var t=e.display,n=e.doc;t.maxLine=qe(n,n.first),t.maxLineLength=Ht(t.maxLine),t.maxLineChanged=!0,n.iter((function(e){var n=Ht(e);n>t.maxLineLength&&(t.maxLineLength=n,t.maxLine=e)}))}var qt=function(e,t,n){this.text=e,$t(this,t),this.height=n?n(this):1};function Ut(e){e.parent=null,Ot(e)}qt.prototype.lineNo=function(){return Xe(this)},be(qt);var Vt={},Kt={};function Xt(e,t){if(!e||/^\s*$/.test(e))return null;var n=t.addModeClass?Kt:Vt;return n[e]||(n[e]=e.replace(/\S+/g,"cm-$&"))}function Yt(e,t){var n=T("span",null,null,l?"padding-right: .1px":null),i={pre:T("pre",[n],"CodeMirror-line"),content:n,col:0,pos:0,cm:e,trailingSpace:!1,splitSpaces:e.getOption("lineWrapping")};t.measure={};for(var r=0;r<=(t.rest?t.rest.length:0);r++){var a=r?t.rest[r-1]:t.line,o=void 0;i.pos=0,i.addToken=Qt,Ee(e.display.measure)&&(o=ce(a,e.doc.direction))&&(i.addToken=Zt(i.addToken,o)),i.map=[],tn(a,i,dt(e,a,t!=e.display.externalMeasured&&Xe(a))),a.styleClasses&&(a.styleClasses.bgClass&&(i.bgClass=N(a.styleClasses.bgClass,i.bgClass||"")),a.styleClasses.textClass&&(i.textClass=N(a.styleClasses.textClass,i.textClass||""))),0==i.map.length&&i.map.push(0,0,i.content.appendChild($e(e.display.measure))),0==r?(t.measure.map=i.map,t.measure.cache={}):((t.measure.maps||(t.measure.maps=[])).push(i.map),(t.measure.caches||(t.measure.caches=[])).push({}))}if(l){var s=i.content.lastChild;(/\bcm-tab\b/.test(s.className)||s.querySelector&&s.querySelector(".cm-tab"))&&(i.content.className="cm-tab-wrap-hack")}return fe(e,"renderLine",e,t.line,i.pre),i.pre.className&&(i.textClass=N(i.pre.className,i.textClass||"")),i}function Jt(e){var t=E("span","","cm-invalidchar");return t.title="\\u"+e.charCodeAt(0).toString(16),t.setAttribute("aria-label",t.title),t}function Qt(e,t,n,i,r,a,l){if(t){var c,u=e.splitSpaces?function(e,t){if(e.length>1&&!/  /.test(e))return e;for(var n=t,i="",r=0;r<e.length;r++){var a=e.charAt(r);" "!=a||!n||r!=e.length-1&&32!=e.charCodeAt(r+1)||(a=""),i+=a,n=" "==a}return i}(t,e.trailingSpace):t,d=e.cm.state.specialChars,p=!1;if(d.test(t)){c=document.createDocumentFragment();for(var h=0;;){d.lastIndex=h;var f=d.exec(t),m=f?f.index-h:t.length-h;if(m){var g=document.createTextNode(u.slice(h,h+m));o&&s<9?c.appendChild(E("span",[g])):c.appendChild(g),e.map.push(e.pos,e.pos+m,g),e.col+=m,e.pos+=m}if(!f)break;h+=m+1;var v=void 0;if("\t"==f[0]){var b=e.cm.options.tabSize,y=b-e.col%b;(v=c.appendChild(E("span",V(y),"cm-tab"))).setAttribute("role","presentation"),v.setAttribute("cm-text","\t"),e.col+=y}else"\r"==f[0]||"\n"==f[0]?((v=c.appendChild(E("span","\r"==f[0]?"":"","cm-invalidchar"))).setAttribute("cm-text",f[0]),e.col+=1):((v=e.cm.options.specialCharPlaceholder(f[0])).setAttribute("cm-text",f[0]),o&&s<9?c.appendChild(E("span",[v])):c.appendChild(v),e.col+=1);e.map.push(e.pos,e.pos+1,v),e.pos++}}else e.col+=t.length,c=document.createTextNode(u),e.map.push(e.pos,e.pos+t.length,c),o&&s<9&&(p=!0),e.pos+=t.length;if(e.trailingSpace=32==u.charCodeAt(t.length-1),n||i||r||p||a||l){var x=n||"";i&&(x+=i),r&&(x+=r);var _=E("span",[c],x,a);if(l)for(var w in l)l.hasOwnProperty(w)&&"style"!=w&&"class"!=w&&_.setAttribute(w,l[w]);return e.content.appendChild(_)}e.content.appendChild(c)}}function Zt(e,t){return function(n,i,r,a,o,s,l){r=r?r+" cm-force-border":"cm-force-border";for(var c=n.pos,u=c+i.length;;){for(var d=void 0,p=0;p<t.length&&!((d=t[p]).to>c&&d.from<=c);p++);if(d.to>=u)return e(n,i,r,a,o,s,l);e(n,i.slice(0,d.to-c),r,a,null,s,l),a=null,i=i.slice(d.to-c),c=d.to}}}function en(e,t,n,i){var r=!i&&n.widgetNode;r&&e.map.push(e.pos,e.pos+t,r),!i&&e.cm.display.input.needsContentAttribute&&(r||(r=e.content.appendChild(document.createElement("span"))),r.setAttribute("cm-marker",n.id)),r&&(e.cm.display.input.setUneditable(r),e.content.appendChild(r)),e.pos+=t,e.trailingSpace=!1}function tn(e,t,n){var i=e.markedSpans,r=e.text,a=0;if(i)for(var o,s,l,c,u,d,p,h=r.length,f=0,m=1,g="",v=0;;){if(v==f){l=c=u=s="",p=null,d=null,v=1/0;for(var b=[],y=void 0,x=0;x<i.length;++x){var _=i[x],w=_.marker;if("bookmark"==w.type&&_.from==f&&w.widgetNode)b.push(w);else if(_.from<=f&&(null==_.to||_.to>f||w.collapsed&&_.to==f&&_.from==f)){if(null!=_.to&&_.to!=f&&v>_.to&&(v=_.to,c=""),w.className&&(l+=" "+w.className),w.css&&(s=(s?s+";":"")+w.css),w.startStyle&&_.from==f&&(u+=" "+w.startStyle),w.endStyle&&_.to==v&&(y||(y=[])).push(w.endStyle,_.to),w.title&&((p||(p={})).title=w.title),w.attributes)for(var C in w.attributes)(p||(p={}))[C]=w.attributes[C];w.collapsed&&(!d||Dt(d.marker,w)<0)&&(d=_)}else _.from>f&&v>_.from&&(v=_.from)}if(y)for(var k=0;k<y.length;k+=2)y[k+1]==v&&(c+=" "+y[k]);if(!d||d.from==f)for(var S=0;S<b.length;++S)en(t,0,b[S]);if(d&&(d.from||0)==f){if(en(t,(null==d.to?h+1:d.to)-f,d.marker,null==d.from),null==d.to)return;d.to==f&&(d=!1)}}if(f>=h)break;for(var M=Math.min(h,v);;){if(g){var O=f+g.length;if(!d){var $=O>M?g.slice(0,M-f):g;t.addToken(t,$,o?o+l:l,u,f+$.length==v?c:"",s,p)}if(O>=M){g=g.slice(M-f),f=M;break}f=O,u=""}g=r.slice(a,a=n[m++]),o=Xt(n[m++],t.cm.options)}}else for(var E=1;E<n.length;E+=2)t.addToken(t,r.slice(a,a=n[E]),Xt(n[E+1],t.cm.options))}function nn(e,t,n){this.line=t,this.rest=function(e){for(var t,n;t=Nt(e);)e=t.find(1,!0).line,(n||(n=[])).push(e);return n}(t),this.size=this.rest?Xe(K(this.rest))-n+1:1,this.node=this.text=null,this.hidden=Bt(e,t)}function rn(e,t,n){for(var i,r=[],a=t;a<n;a=i){var o=new nn(e.doc,qe(e.doc,a),a);i=a+o.size,r.push(o)}return r}var an=null,on=null;function sn(e,t){var n=pe(e,t);if(n.length){var i,r=Array.prototype.slice.call(arguments,2);an?i=an.delayedCallbacks:on?i=on:(i=on=[],setTimeout(ln,0));for(var a=function(e){i.push((function(){return n[e].apply(null,r)}))},o=0;o<n.length;++o)a(o)}}function ln(){var e=on;on=null;for(var t=0;t<e.length;++t)e[t]()}function cn(e,t,n,i){for(var r=0;r<t.changes.length;r++){var a=t.changes[r];"text"==a?pn(e,t):"gutter"==a?fn(e,t,n,i):"class"==a?hn(e,t):"widget"==a&&mn(e,t,i)}t.changes=null}function un(e){return e.node==e.text&&(e.node=E("div",null,null,"position: relative"),e.text.parentNode&&e.text.parentNode.replaceChild(e.node,e.text),e.node.appendChild(e.text),o&&s<8&&(e.node.style.zIndex=2)),e.node}function dn(e,t){var n=e.display.externalMeasured;return n&&n.line==t.line?(e.display.externalMeasured=null,t.measure=n.measure,n.built):Yt(e,t)}function pn(e,t){var n=t.text.className,i=dn(e,t);t.text==t.node&&(t.node=i.pre),t.text.parentNode.replaceChild(i.pre,t.text),t.text=i.pre,i.bgClass!=t.bgClass||i.textClass!=t.textClass?(t.bgClass=i.bgClass,t.textClass=i.textClass,hn(e,t)):n&&(t.text.className=n)}function hn(e,t){(function(e,t){var n=t.bgClass?t.bgClass+" "+(t.line.bgClass||""):t.line.bgClass;if(n&&(n+=" CodeMirror-linebackground"),t.background)n?t.background.className=n:(t.background.parentNode.removeChild(t.background),t.background=null);else if(n){var i=un(t);t.background=i.insertBefore(E("div",null,n),i.firstChild),e.display.input.setUneditable(t.background)}})(e,t),t.line.wrapClass?un(t).className=t.line.wrapClass:t.node!=t.text&&(t.node.className="");var n=t.textClass?t.textClass+" "+(t.line.textClass||""):t.line.textClass;t.text.className=n||""}function fn(e,t,n,i){if(t.gutter&&(t.node.removeChild(t.gutter),t.gutter=null),t.gutterBackground&&(t.node.removeChild(t.gutterBackground),t.gutterBackground=null),t.line.gutterClass){var r=un(t);t.gutterBackground=E("div",null,"CodeMirror-gutter-background "+t.line.gutterClass,"left: "+(e.options.fixedGutter?i.fixedPos:-i.gutterTotalWidth)+"px; width: "+i.gutterTotalWidth+"px"),e.display.input.setUneditable(t.gutterBackground),r.insertBefore(t.gutterBackground,t.text)}var a=t.line.gutterMarkers;if(e.options.lineNumbers||a){var o=un(t),s=t.gutter=E("div",null,"CodeMirror-gutter-wrapper","left: "+(e.options.fixedGutter?i.fixedPos:-i.gutterTotalWidth)+"px");if(s.setAttribute("aria-hidden","true"),e.display.input.setUneditable(s),o.insertBefore(s,t.text),t.line.gutterClass&&(s.className+=" "+t.line.gutterClass),!e.options.lineNumbers||a&&a["CodeMirror-linenumbers"]||(t.lineNumber=s.appendChild(E("div",Qe(e.options,n),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+i.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+e.display.lineNumInnerWidth+"px"))),a)for(var l=0;l<e.display.gutterSpecs.length;++l){var c=e.display.gutterSpecs[l].className,u=a.hasOwnProperty(c)&&a[c];u&&s.appendChild(E("div",[u],"CodeMirror-gutter-elt","left: "+i.gutterLeft[c]+"px; width: "+i.gutterWidth[c]+"px"))}}}function mn(e,t,n){t.alignable&&(t.alignable=null);for(var i=k("CodeMirror-linewidget"),r=t.node.firstChild,a=void 0;r;r=a)a=r.nextSibling,i.test(r.className)&&t.node.removeChild(r);vn(e,t,n)}function gn(e,t,n,i){var r=dn(e,t);return t.text=t.node=r.pre,r.bgClass&&(t.bgClass=r.bgClass),r.textClass&&(t.textClass=r.textClass),hn(e,t),fn(e,t,n,i),vn(e,t,i),t.node}function vn(e,t,n){if(bn(e,t.line,t,n,!0),t.rest)for(var i=0;i<t.rest.length;i++)bn(e,t.rest[i],t,n,!1)}function bn(e,t,n,i,r){if(t.widgets)for(var a=un(n),o=0,s=t.widgets;o<s.length;++o){var l=s[o],c=E("div",[l.node],"CodeMirror-linewidget"+(l.className?" "+l.className:""));l.handleMouseEvents||c.setAttribute("cm-ignore-events","true"),yn(l,c,n,i),e.display.input.setUneditable(c),r&&l.above?a.insertBefore(c,n.gutter||n.text):a.appendChild(c),sn(l,"redraw")}}function yn(e,t,n,i){if(e.noHScroll){(n.alignable||(n.alignable=[])).push(t);var r=i.wrapperWidth;t.style.left=i.fixedPos+"px",e.coverGutter||(r-=i.gutterTotalWidth,t.style.paddingLeft=i.gutterTotalWidth+"px"),t.style.width=r+"px"}e.coverGutter&&(t.style.zIndex=5,t.style.position="relative",e.noHScroll||(t.style.marginLeft=-i.gutterTotalWidth+"px"))}function xn(e){if(null!=e.height)return e.height;var t=e.doc.cm;if(!t)return 0;if(!D(document.body,e.node)){var n="position: relative;";e.coverGutter&&(n+="margin-left: -"+t.display.gutters.offsetWidth+"px;"),e.noHScroll&&(n+="width: "+t.display.wrapper.clientWidth+"px;"),$(t.display.measure,E("div",[e.node],null,n))}return e.height=e.node.parentNode.offsetHeight}function _n(e,t){for(var n=Ce(t);n!=e.wrapper;n=n.parentNode)if(!n||1==n.nodeType&&"true"==n.getAttribute("cm-ignore-events")||n.parentNode==e.sizer&&n!=e.mover)return!0}function wn(e){return e.lineSpace.offsetTop}function Cn(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function kn(e){if(e.cachedPaddingH)return e.cachedPaddingH;var t=$(e.measure,E("pre","x","CodeMirror-line-like")),n=window.getComputedStyle?window.getComputedStyle(t):t.currentStyle,i={left:parseInt(n.paddingLeft),right:parseInt(n.paddingRight)};return isNaN(i.left)||isNaN(i.right)||(e.cachedPaddingH=i),i}function Sn(e){return 50-e.display.nativeBarWidth}function Mn(e){return e.display.scroller.clientWidth-Sn(e)-e.display.barWidth}function On(e){return e.display.scroller.clientHeight-Sn(e)-e.display.barHeight}function $n(e,t,n){if(e.line==t)return{map:e.measure.map,cache:e.measure.cache};for(var i=0;i<e.rest.length;i++)if(e.rest[i]==t)return{map:e.measure.maps[i],cache:e.measure.caches[i]};for(var r=0;r<e.rest.length;r++)if(Xe(e.rest[r])>n)return{map:e.measure.maps[r],cache:e.measure.caches[r],before:!0}}function En(e,t,n,i){return Ln(e,Dn(e,t),n,i)}function Tn(e,t){if(t>=e.display.viewFrom&&t<e.display.viewTo)return e.display.view[ui(e,t)];var n=e.display.externalMeasured;return n&&t>=n.lineN&&t<n.lineN+n.size?n:void 0}function Dn(e,t){var n=Xe(t),i=Tn(e,n);i&&!i.text?i=null:i&&i.changes&&(cn(e,i,n,ai(e)),e.curOp.forceUpdate=!0),i||(i=function(e,t){var n=Xe(t=Pt(t)),i=e.display.externalMeasured=new nn(e.doc,t,n);i.lineN=n;var r=i.built=Yt(e,i);return i.text=r.pre,$(e.display.lineMeasure,r.pre),i}(e,t));var r=$n(i,t,n);return{line:t,view:i,rect:null,map:r.map,cache:r.cache,before:r.before,hasHeights:!1}}function Ln(e,t,n,i,r){t.before&&(n=-1);var a,o=n+(i||"");return t.cache.hasOwnProperty(o)?a=t.cache[o]:(t.rect||(t.rect=t.view.text.getBoundingClientRect()),t.hasHeights||(function(e,t,n){var i=e.options.lineWrapping,r=i&&Mn(e);if(!t.measure.heights||i&&t.measure.width!=r){var a=t.measure.heights=[];if(i){t.measure.width=r;for(var o=t.text.firstChild.getClientRects(),s=0;s<o.length-1;s++){var l=o[s],c=o[s+1];Math.abs(l.bottom-c.bottom)>2&&a.push((l.bottom+c.top)/2-n.top)}}a.push(n.bottom-n.top)}}(e,t.view,t.rect),t.hasHeights=!0),(a=Pn(e,t,n,i)).bogus||(t.cache[o]=a)),{left:a.left,right:a.right,top:r?a.rtop:a.top,bottom:r?a.rbottom:a.bottom}}var zn,Nn={left:0,right:0,top:0,bottom:0};function An(e,t,n){for(var i,r,a,o,s,l,c=0;c<e.length;c+=3)if(s=e[c],l=e[c+1],t<s?(r=0,a=1,o="left"):t<l?a=1+(r=t-s):(c==e.length-3||t==l&&e[c+3]>t)&&(r=(a=l-s)-1,t>=l&&(o="right")),null!=r){if(i=e[c+2],s==l&&n==(i.insertLeft?"left":"right")&&(o=n),"left"==n&&0==r)for(;c&&e[c-2]==e[c-3]&&e[c-1].insertLeft;)i=e[2+(c-=3)],o="left";if("right"==n&&r==l-s)for(;c<e.length-3&&e[c+3]==e[c+4]&&!e[c+5].insertLeft;)i=e[(c+=3)+2],o="right";break}return{node:i,start:r,end:a,collapse:o,coverStart:s,coverEnd:l}}function In(e,t){var n=Nn;if("left"==t)for(var i=0;i<e.length&&(n=e[i]).left==n.right;i++);else for(var r=e.length-1;r>=0&&(n=e[r]).left==n.right;r--);return n}function Pn(e,t,n,i){var r,a=An(t.map,n,i),l=a.node,c=a.start,u=a.end,d=a.collapse;if(3==l.nodeType){for(var p=0;p<4;p++){for(;c&&ie(t.line.text.charAt(a.coverStart+c));)--c;for(;a.coverStart+u<a.coverEnd&&ie(t.line.text.charAt(a.coverStart+u));)++u;if((r=o&&s<9&&0==c&&u==a.coverEnd-a.coverStart?l.parentNode.getBoundingClientRect():In(S(l,c,u).getClientRects(),i)).left||r.right||0==c)break;u=c,c-=1,d="right"}o&&s<11&&(r=function(e,t){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!function(e){if(null!=ze)return ze;var t=$(e,E("span","x")),n=t.getBoundingClientRect(),i=S(t,0,1).getBoundingClientRect();return ze=Math.abs(n.left-i.left)>1}(e))return t;var n=screen.logicalXDPI/screen.deviceXDPI,i=screen.logicalYDPI/screen.deviceYDPI;return{left:t.left*n,right:t.right*n,top:t.top*i,bottom:t.bottom*i}}(e.display.measure,r))}else{var h;c>0&&(d=i="right"),r=e.options.lineWrapping&&(h=l.getClientRects()).length>1?h["right"==i?h.length-1:0]:l.getBoundingClientRect()}if(o&&s<9&&!c&&(!r||!r.left&&!r.right)){var f=l.parentNode.getClientRects()[0];r=f?{left:f.left,right:f.left+ri(e.display),top:f.top,bottom:f.bottom}:Nn}for(var m=r.top-t.rect.top,g=r.bottom-t.rect.top,v=(m+g)/2,b=t.view.measure.heights,y=0;y<b.length-1&&!(v<b[y]);y++);var x=y?b[y-1]:0,_=b[y],w={left:("right"==d?r.right:r.left)-t.rect.left,right:("left"==d?r.left:r.right)-t.rect.left,top:x,bottom:_};return r.left||r.right||(w.bogus=!0),e.options.singleCursorHeightPerLine||(w.rtop=m,w.rbottom=g),w}function jn(e){if(e.measure&&(e.measure.cache={},e.measure.heights=null,e.rest))for(var t=0;t<e.rest.length;t++)e.measure.caches[t]={}}function Fn(e){e.display.externalMeasure=null,O(e.display.lineMeasure);for(var t=0;t<e.display.view.length;t++)jn(e.display.view[t])}function Bn(e){Fn(e),e.display.cachedCharWidth=e.display.cachedTextHeight=e.display.cachedPaddingH=null,e.options.lineWrapping||(e.display.maxLineChanged=!0),e.display.lineNumChars=null}function Rn(){return u&&g?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function Wn(){return u&&g?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function Hn(e){var t=0;if(e.widgets)for(var n=0;n<e.widgets.length;++n)e.widgets[n].above&&(t+=xn(e.widgets[n]));return t}function Gn(e,t,n,i,r){if(!r){var a=Hn(t);n.top+=a,n.bottom+=a}if("line"==i)return n;i||(i="local");var o=Wt(t);if("local"==i?o+=wn(e.display):o-=e.display.viewOffset,"page"==i||"window"==i){var s=e.display.lineSpace.getBoundingClientRect();o+=s.top+("window"==i?0:Wn());var l=s.left+("window"==i?0:Rn());n.left+=l,n.right+=l}return n.top+=o,n.bottom+=o,n}function qn(e,t,n){if("div"==n)return t;var i=t.left,r=t.top;if("page"==n)i-=Rn(),r-=Wn();else if("local"==n||!n){var a=e.display.sizer.getBoundingClientRect();i+=a.left,r+=a.top}var o=e.display.lineSpace.getBoundingClientRect();return{left:i-o.left,top:r-o.top}}function Un(e,t,n,i,r){return i||(i=qe(e.doc,t.line)),Gn(e,i,En(e,i,t.ch,r),n)}function Vn(e,t,n,i,r,a){function o(t,o){var s=Ln(e,r,t,o?"right":"left",a);return o?s.left=s.right:s.right=s.left,Gn(e,i,s,n)}i=i||qe(e.doc,t.line),r||(r=Dn(e,i));var s=ce(i,e.doc.direction),l=t.ch,c=t.sticky;if(l>=i.text.length?(l=i.text.length,c="before"):l<=0&&(l=0,c="after"),!s)return o("before"==c?l-1:l,"before"==c);function u(e,t,n){return o(n?e-1:e,1==s[t].level!=n)}var d=se(s,l,c),p=oe,h=u(l,d,"before"==c);return null!=p&&(h.other=u(l,p,"before"!=c)),h}function Kn(e,t){var n=0;t=ot(e.doc,t),e.options.lineWrapping||(n=ri(e.display)*t.ch);var i=qe(e.doc,t.line),r=Wt(i)+wn(e.display);return{left:n,right:n,top:r,bottom:r+i.height}}function Xn(e,t,n,i,r){var a=Ze(e,t,n);return a.xRel=r,i&&(a.outside=i),a}function Yn(e,t,n){var i=e.doc;if((n+=e.display.viewOffset)<0)return Xn(i.first,0,null,-1,-1);var r=Ye(i,n),a=i.first+i.size-1;if(r>a)return Xn(i.first+i.size-1,qe(i,a).text.length,null,1,1);t<0&&(t=0);for(var o=qe(i,r);;){var s=ei(e,o,r,t,n),l=At(o,s.ch+(s.xRel>0||s.outside>0?1:0));if(!l)return s;var c=l.find(1);if(c.line==r)return c;o=qe(i,r=c.line)}}function Jn(e,t,n,i){i-=Hn(t);var r=t.text.length,a=ae((function(t){return Ln(e,n,t-1).bottom<=i}),r,0);return{begin:a,end:r=ae((function(t){return Ln(e,n,t).top>i}),a,r)}}function Qn(e,t,n,i){return n||(n=Dn(e,t)),Jn(e,t,n,Gn(e,t,Ln(e,n,i),"line").top)}function Zn(e,t,n,i){return!(e.bottom<=n)&&(e.top>n||(i?e.left:e.right)>t)}function ei(e,t,n,i,r){r-=Wt(t);var a=Dn(e,t),o=Hn(t),s=0,l=t.text.length,c=!0,u=ce(t,e.doc.direction);if(u){var d=(e.options.lineWrapping?ni:ti)(e,t,n,a,u,i,r);s=(c=1!=d.level)?d.from:d.to-1,l=c?d.to:d.from-1}var p,h,f=null,m=null,g=ae((function(t){var n=Ln(e,a,t);return n.top+=o,n.bottom+=o,!!Zn(n,i,r,!1)&&(n.top<=r&&n.left<=i&&(f=t,m=n),!0)}),s,l),v=!1;if(m){var b=i-m.left<m.right-i,y=b==c;g=f+(y?0:1),h=y?"after":"before",p=b?m.left:m.right}else{c||g!=l&&g!=s||g++,h=0==g?"after":g==t.text.length?"before":Ln(e,a,g-(c?1:0)).bottom+o<=r==c?"after":"before";var x=Vn(e,Ze(n,g,h),"line",t,a);p=x.left,v=r<x.top?-1:r>=x.bottom?1:0}return Xn(n,g=re(t.text,g,1),h,v,i-p)}function ti(e,t,n,i,r,a,o){var s=ae((function(s){var l=r[s],c=1!=l.level;return Zn(Vn(e,Ze(n,c?l.to:l.from,c?"before":"after"),"line",t,i),a,o,!0)}),0,r.length-1),l=r[s];if(s>0){var c=1!=l.level,u=Vn(e,Ze(n,c?l.from:l.to,c?"after":"before"),"line",t,i);Zn(u,a,o,!0)&&u.top>o&&(l=r[s-1])}return l}function ni(e,t,n,i,r,a,o){var s=Jn(e,t,i,o),l=s.begin,c=s.end;/\s/.test(t.text.charAt(c-1))&&c--;for(var u=null,d=null,p=0;p<r.length;p++){var h=r[p];if(!(h.from>=c||h.to<=l)){var f=Ln(e,i,1!=h.level?Math.min(c,h.to)-1:Math.max(l,h.from)).right,m=f<a?a-f+1e9:f-a;(!u||d>m)&&(u=h,d=m)}}return u||(u=r[r.length-1]),u.from<l&&(u={from:l,to:u.to,level:u.level}),u.to>c&&(u={from:u.from,to:c,level:u.level}),u}function ii(e){if(null!=e.cachedTextHeight)return e.cachedTextHeight;if(null==zn){zn=E("pre",null,"CodeMirror-line-like");for(var t=0;t<49;++t)zn.appendChild(document.createTextNode("x")),zn.appendChild(E("br"));zn.appendChild(document.createTextNode("x"))}$(e.measure,zn);var n=zn.offsetHeight/50;return n>3&&(e.cachedTextHeight=n),O(e.measure),n||1}function ri(e){if(null!=e.cachedCharWidth)return e.cachedCharWidth;var t=E("span","xxxxxxxxxx"),n=E("pre",[t],"CodeMirror-line-like");$(e.measure,n);var i=t.getBoundingClientRect(),r=(i.right-i.left)/10;return r>2&&(e.cachedCharWidth=r),r||10}function ai(e){for(var t=e.display,n={},i={},r=t.gutters.clientLeft,a=t.gutters.firstChild,o=0;a;a=a.nextSibling,++o){var s=e.display.gutterSpecs[o].className;n[s]=a.offsetLeft+a.clientLeft+r,i[s]=a.clientWidth}return{fixedPos:oi(t),gutterTotalWidth:t.gutters.offsetWidth,gutterLeft:n,gutterWidth:i,wrapperWidth:t.wrapper.clientWidth}}function oi(e){return e.scroller.getBoundingClientRect().left-e.sizer.getBoundingClientRect().left}function si(e){var t=ii(e.display),n=e.options.lineWrapping,i=n&&Math.max(5,e.display.scroller.clientWidth/ri(e.display)-3);return function(r){if(Bt(e.doc,r))return 0;var a=0;if(r.widgets)for(var o=0;o<r.widgets.length;o++)r.widgets[o].height&&(a+=r.widgets[o].height);return n?a+(Math.ceil(r.text.length/i)||1)*t:a+t}}function li(e){var t=e.doc,n=si(e);t.iter((function(e){var t=n(e);t!=e.height&&Ke(e,t)}))}function ci(e,t,n,i){var r=e.display;if(!n&&"true"==Ce(t).getAttribute("cm-not-content"))return null;var a,o,s=r.lineSpace.getBoundingClientRect();try{a=t.clientX-s.left,o=t.clientY-s.top}catch(e){return null}var l,c=Yn(e,a,o);if(i&&c.xRel>0&&(l=qe(e.doc,c.line).text).length==c.ch){var u=j(l,l.length,e.options.tabSize)-l.length;c=Ze(c.line,Math.max(0,Math.round((a-kn(e.display).left)/ri(e.display))-u))}return c}function ui(e,t){if(t>=e.display.viewTo)return null;if((t-=e.display.viewFrom)<0)return null;for(var n=e.display.view,i=0;i<n.length;i++)if((t-=n[i].size)<0)return i}function di(e,t,n,i){null==t&&(t=e.doc.first),null==n&&(n=e.doc.first+e.doc.size),i||(i=0);var r=e.display;if(i&&n<r.viewTo&&(null==r.updateLineNumbers||r.updateLineNumbers>t)&&(r.updateLineNumbers=t),e.curOp.viewChanged=!0,t>=r.viewTo)_t&&jt(e.doc,t)<r.viewTo&&hi(e);else if(n<=r.viewFrom)_t&&Ft(e.doc,n+i)>r.viewFrom?hi(e):(r.viewFrom+=i,r.viewTo+=i);else if(t<=r.viewFrom&&n>=r.viewTo)hi(e);else if(t<=r.viewFrom){var a=fi(e,n,n+i,1);a?(r.view=r.view.slice(a.index),r.viewFrom=a.lineN,r.viewTo+=i):hi(e)}else if(n>=r.viewTo){var o=fi(e,t,t,-1);o?(r.view=r.view.slice(0,o.index),r.viewTo=o.lineN):hi(e)}else{var s=fi(e,t,t,-1),l=fi(e,n,n+i,1);s&&l?(r.view=r.view.slice(0,s.index).concat(rn(e,s.lineN,l.lineN)).concat(r.view.slice(l.index)),r.viewTo+=i):hi(e)}var c=r.externalMeasured;c&&(n<c.lineN?c.lineN+=i:t<c.lineN+c.size&&(r.externalMeasured=null))}function pi(e,t,n){e.curOp.viewChanged=!0;var i=e.display,r=e.display.externalMeasured;if(r&&t>=r.lineN&&t<r.lineN+r.size&&(i.externalMeasured=null),!(t<i.viewFrom||t>=i.viewTo)){var a=i.view[ui(e,t)];if(null!=a.node){var o=a.changes||(a.changes=[]);-1==B(o,n)&&o.push(n)}}}function hi(e){e.display.viewFrom=e.display.viewTo=e.doc.first,e.display.view=[],e.display.viewOffset=0}function fi(e,t,n,i){var r,a=ui(e,t),o=e.display.view;if(!_t||n==e.doc.first+e.doc.size)return{index:a,lineN:n};for(var s=e.display.viewFrom,l=0;l<a;l++)s+=o[l].size;if(s!=t){if(i>0){if(a==o.length-1)return null;r=s+o[a].size-t,a++}else r=s-t;t+=r,n+=r}for(;jt(e.doc,n)!=n;){if(a==(i<0?0:o.length-1))return null;n+=i*o[a-(i<0?1:0)].size,a+=i}return{index:a,lineN:n}}function mi(e){for(var t=e.display.view,n=0,i=0;i<t.length;i++){var r=t[i];r.hidden||r.node&&!r.changes||++n}return n}function gi(e){e.display.input.showSelection(e.display.input.prepareSelection())}function vi(e,t){void 0===t&&(t=!0);for(var n=e.doc,i={},r=i.cursors=document.createDocumentFragment(),a=i.selection=document.createDocumentFragment(),o=0;o<n.sel.ranges.length;o++)if(t||o!=n.sel.primIndex){var s=n.sel.ranges[o];if(!(s.from().line>=e.display.viewTo||s.to().line<e.display.viewFrom)){var l=s.empty();(l||e.options.showCursorWhenSelecting)&&bi(e,s.head,r),l||xi(e,s,a)}}return i}function bi(e,t,n){var i=Vn(e,t,"div",null,null,!e.options.singleCursorHeightPerLine),r=n.appendChild(E("div","","CodeMirror-cursor"));if(r.style.left=i.left+"px",r.style.top=i.top+"px",r.style.height=Math.max(0,i.bottom-i.top)*e.options.cursorHeight+"px",i.other){var a=n.appendChild(E("div","","CodeMirror-cursor CodeMirror-secondarycursor"));a.style.display="",a.style.left=i.other.left+"px",a.style.top=i.other.top+"px",a.style.height=.85*(i.other.bottom-i.other.top)+"px"}}function yi(e,t){return e.top-t.top||e.left-t.left}function xi(e,t,n){var i=e.display,r=e.doc,a=document.createDocumentFragment(),o=kn(e.display),s=o.left,l=Math.max(i.sizerWidth,Mn(e)-i.sizer.offsetLeft)-o.right,c="ltr"==r.direction;function u(e,t,n,i){t<0&&(t=0),t=Math.round(t),i=Math.round(i),a.appendChild(E("div",null,"CodeMirror-selected","position: absolute; left: "+e+"px;\n                             top: "+t+"px; width: "+(null==n?l-e:n)+"px;\n                             height: "+(i-t)+"px"))}function d(t,n,i){var a,o,d=qe(r,t),p=d.text.length;function h(n,i){return Un(e,Ze(t,n),"div",d,i)}function f(t,n,i){var r=Qn(e,d,null,t),a="ltr"==n==("after"==i)?"left":"right";return h("after"==i?r.begin:r.end-(/\s/.test(d.text.charAt(r.end-1))?2:1),a)[a]}var m=ce(d,r.direction);return function(e,t,n,i){if(!e)return i(t,n,"ltr",0);for(var r=!1,a=0;a<e.length;++a){var o=e[a];(o.from<n&&o.to>t||t==n&&o.to==t)&&(i(Math.max(o.from,t),Math.min(o.to,n),1==o.level?"rtl":"ltr",a),r=!0)}r||i(t,n,"ltr")}(m,n||0,null==i?p:i,(function(e,t,r,d){var g="ltr"==r,v=h(e,g?"left":"right"),b=h(t-1,g?"right":"left"),y=null==n&&0==e,x=null==i&&t==p,_=0==d,w=!m||d==m.length-1;if(b.top-v.top<=3){var C=(c?x:y)&&w,k=(c?y:x)&&_?s:(g?v:b).left,S=C?l:(g?b:v).right;u(k,v.top,S-k,v.bottom)}else{var M,O,$,E;g?(M=c&&y&&_?s:v.left,O=c?l:f(e,r,"before"),$=c?s:f(t,r,"after"),E=c&&x&&w?l:b.right):(M=c?f(e,r,"before"):s,O=!c&&y&&_?l:v.right,$=!c&&x&&w?s:b.left,E=c?f(t,r,"after"):l),u(M,v.top,O-M,v.bottom),v.bottom<b.top&&u(s,v.bottom,null,b.top),u($,b.top,E-$,b.bottom)}(!a||yi(v,a)<0)&&(a=v),yi(b,a)<0&&(a=b),(!o||yi(v,o)<0)&&(o=v),yi(b,o)<0&&(o=b)})),{start:a,end:o}}var p=t.from(),h=t.to();if(p.line==h.line)d(p.line,p.ch,h.ch);else{var f=qe(r,p.line),m=qe(r,h.line),g=Pt(f)==Pt(m),v=d(p.line,p.ch,g?f.text.length+1:null).end,b=d(h.line,g?0:null,h.ch).start;g&&(v.top<b.top-2?(u(v.right,v.top,null,v.bottom),u(s,b.top,b.left,b.bottom)):u(v.right,v.top,b.left-v.right,v.bottom)),v.bottom<b.top&&u(s,v.bottom,null,b.top)}n.appendChild(a)}function _i(e){if(e.state.focused){var t=e.display;clearInterval(t.blinker);var n=!0;t.cursorDiv.style.visibility="",e.options.cursorBlinkRate>0?t.blinker=setInterval((function(){e.hasFocus()||Si(e),t.cursorDiv.style.visibility=(n=!n)?"":"hidden"}),e.options.cursorBlinkRate):e.options.cursorBlinkRate<0&&(t.cursorDiv.style.visibility="hidden")}}function wi(e){e.hasFocus()||(e.display.input.focus(),e.state.focused||ki(e))}function Ci(e){e.state.delayingBlurEvent=!0,setTimeout((function(){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1,e.state.focused&&Si(e))}),100)}function ki(e,t){e.state.delayingBlurEvent&&!e.state.draggingText&&(e.state.delayingBlurEvent=!1),"nocursor"!=e.options.readOnly&&(e.state.focused||(fe(e,"focus",e,t),e.state.focused=!0,z(e.display.wrapper,"CodeMirror-focused"),e.curOp||e.display.selForContextMenu==e.doc.sel||(e.display.input.reset(),l&&setTimeout((function(){return e.display.input.reset(!0)}),20)),e.display.input.receivedFocus()),_i(e))}function Si(e,t){e.state.delayingBlurEvent||(e.state.focused&&(fe(e,"blur",e,t),e.state.focused=!1,M(e.display.wrapper,"CodeMirror-focused")),clearInterval(e.display.blinker),setTimeout((function(){e.state.focused||(e.display.shift=!1)}),150))}function Mi(e){for(var t=e.display,n=t.lineDiv.offsetTop,i=0;i<t.view.length;i++){var r=t.view[i],a=e.options.lineWrapping,l=void 0,c=0;if(!r.hidden){if(o&&s<8){var u=r.node.offsetTop+r.node.offsetHeight;l=u-n,n=u}else{var d=r.node.getBoundingClientRect();l=d.bottom-d.top,!a&&r.text.firstChild&&(c=r.text.firstChild.getBoundingClientRect().right-d.left-1)}var p=r.line.height-l;if((p>.005||p<-.005)&&(Ke(r.line,l),Oi(r.line),r.rest))for(var h=0;h<r.rest.length;h++)Oi(r.rest[h]);if(c>e.display.sizerWidth){var f=Math.ceil(c/ri(e.display));f>e.display.maxLineLength&&(e.display.maxLineLength=f,e.display.maxLine=r.line,e.display.maxLineChanged=!0)}}}}function Oi(e){if(e.widgets)for(var t=0;t<e.widgets.length;++t){var n=e.widgets[t],i=n.node.parentNode;i&&(n.height=i.offsetHeight)}}function $i(e,t,n){var i=n&&null!=n.top?Math.max(0,n.top):e.scroller.scrollTop;i=Math.floor(i-wn(e));var r=n&&null!=n.bottom?n.bottom:i+e.wrapper.clientHeight,a=Ye(t,i),o=Ye(t,r);if(n&&n.ensure){var s=n.ensure.from.line,l=n.ensure.to.line;s<a?(a=s,o=Ye(t,Wt(qe(t,s))+e.wrapper.clientHeight)):Math.min(l,t.lastLine())>=o&&(a=Ye(t,Wt(qe(t,l))-e.wrapper.clientHeight),o=l)}return{from:a,to:Math.max(o,a+1)}}function Ei(e,t){var n=e.display,i=ii(e.display);t.top<0&&(t.top=0);var r=e.curOp&&null!=e.curOp.scrollTop?e.curOp.scrollTop:n.scroller.scrollTop,a=On(e),o={};t.bottom-t.top>a&&(t.bottom=t.top+a);var s=e.doc.height+Cn(n),l=t.top<i,c=t.bottom>s-i;if(t.top<r)o.scrollTop=l?0:t.top;else if(t.bottom>r+a){var u=Math.min(t.top,(c?s:t.bottom)-a);u!=r&&(o.scrollTop=u)}var d=e.options.fixedGutter?0:n.gutters.offsetWidth,p=e.curOp&&null!=e.curOp.scrollLeft?e.curOp.scrollLeft:n.scroller.scrollLeft-d,h=Mn(e)-n.gutters.offsetWidth,f=t.right-t.left>h;return f&&(t.right=t.left+h),t.left<10?o.scrollLeft=0:t.left<p?o.scrollLeft=Math.max(0,t.left+d-(f?0:10)):t.right>h+p-3&&(o.scrollLeft=t.right+(f?0:10)-h),o}function Ti(e,t){null!=t&&(zi(e),e.curOp.scrollTop=(null==e.curOp.scrollTop?e.doc.scrollTop:e.curOp.scrollTop)+t)}function Di(e){zi(e);var t=e.getCursor();e.curOp.scrollToPos={from:t,to:t,margin:e.options.cursorScrollMargin}}function Li(e,t,n){null==t&&null==n||zi(e),null!=t&&(e.curOp.scrollLeft=t),null!=n&&(e.curOp.scrollTop=n)}function zi(e){var t=e.curOp.scrollToPos;t&&(e.curOp.scrollToPos=null,Ni(e,Kn(e,t.from),Kn(e,t.to),t.margin))}function Ni(e,t,n,i){var r=Ei(e,{left:Math.min(t.left,n.left),top:Math.min(t.top,n.top)-i,right:Math.max(t.right,n.right),bottom:Math.max(t.bottom,n.bottom)+i});Li(e,r.scrollLeft,r.scrollTop)}function Ai(e,t){Math.abs(e.doc.scrollTop-t)<2||(n||lr(e,{top:t}),Ii(e,t,!0),n&&lr(e),ir(e,100))}function Ii(e,t,n){t=Math.max(0,Math.min(e.display.scroller.scrollHeight-e.display.scroller.clientHeight,t)),(e.display.scroller.scrollTop!=t||n)&&(e.doc.scrollTop=t,e.display.scrollbars.setScrollTop(t),e.display.scroller.scrollTop!=t&&(e.display.scroller.scrollTop=t))}function Pi(e,t,n,i){t=Math.max(0,Math.min(t,e.display.scroller.scrollWidth-e.display.scroller.clientWidth)),(n?t==e.doc.scrollLeft:Math.abs(e.doc.scrollLeft-t)<2)&&!i||(e.doc.scrollLeft=t,pr(e),e.display.scroller.scrollLeft!=t&&(e.display.scroller.scrollLeft=t),e.display.scrollbars.setScrollLeft(t))}function ji(e){var t=e.display,n=t.gutters.offsetWidth,i=Math.round(e.doc.height+Cn(e.display));return{clientHeight:t.scroller.clientHeight,viewHeight:t.wrapper.clientHeight,scrollWidth:t.scroller.scrollWidth,clientWidth:t.scroller.clientWidth,viewWidth:t.wrapper.clientWidth,barLeft:e.options.fixedGutter?n:0,docHeight:i,scrollHeight:i+Sn(e)+t.barHeight,nativeBarWidth:t.nativeBarWidth,gutterWidth:n}}var Fi=function(e,t,n){this.cm=n;var i=this.vert=E("div",[E("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),r=this.horiz=E("div",[E("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");i.tabIndex=r.tabIndex=-1,e(i),e(r),de(i,"scroll",(function(){i.clientHeight&&t(i.scrollTop,"vertical")})),de(r,"scroll",(function(){r.clientWidth&&t(r.scrollLeft,"horizontal")})),this.checkedZeroWidth=!1,o&&s<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};Fi.prototype.update=function(e){var t=e.scrollWidth>e.clientWidth+1,n=e.scrollHeight>e.clientHeight+1,i=e.nativeBarWidth;if(n){this.vert.style.display="block",this.vert.style.bottom=t?i+"px":"0";var r=e.viewHeight-(t?i:0);this.vert.firstChild.style.height=Math.max(0,e.scrollHeight-e.clientHeight+r)+"px"}else this.vert.style.display="",this.vert.firstChild.style.height="0";if(t){this.horiz.style.display="block",this.horiz.style.right=n?i+"px":"0",this.horiz.style.left=e.barLeft+"px";var a=e.viewWidth-e.barLeft-(n?i:0);this.horiz.firstChild.style.width=Math.max(0,e.scrollWidth-e.clientWidth+a)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&e.clientHeight>0&&(0==i&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:n?i:0,bottom:t?i:0}},Fi.prototype.setScrollLeft=function(e){this.horiz.scrollLeft!=e&&(this.horiz.scrollLeft=e),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},Fi.prototype.setScrollTop=function(e){this.vert.scrollTop!=e&&(this.vert.scrollTop=e),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},Fi.prototype.zeroWidthHack=function(){var e=b&&!h?"12px":"18px";this.horiz.style.height=this.vert.style.width=e,this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new F,this.disableVert=new F},Fi.prototype.enableZeroWidthBar=function(e,t,n){e.style.pointerEvents="auto",t.set(1e3,(function i(){var r=e.getBoundingClientRect();("vert"==n?document.elementFromPoint(r.right-1,(r.top+r.bottom)/2):document.elementFromPoint((r.right+r.left)/2,r.bottom-1))!=e?e.style.pointerEvents="none":t.set(1e3,i)}))},Fi.prototype.clear=function(){var e=this.horiz.parentNode;e.removeChild(this.horiz),e.removeChild(this.vert)};var Bi=function(){};function Ri(e,t){t||(t=ji(e));var n=e.display.barWidth,i=e.display.barHeight;Wi(e,t);for(var r=0;r<4&&n!=e.display.barWidth||i!=e.display.barHeight;r++)n!=e.display.barWidth&&e.options.lineWrapping&&Mi(e),Wi(e,ji(e)),n=e.display.barWidth,i=e.display.barHeight}function Wi(e,t){var n=e.display,i=n.scrollbars.update(t);n.sizer.style.paddingRight=(n.barWidth=i.right)+"px",n.sizer.style.paddingBottom=(n.barHeight=i.bottom)+"px",n.heightForcer.style.borderBottom=i.bottom+"px solid transparent",i.right&&i.bottom?(n.scrollbarFiller.style.display="block",n.scrollbarFiller.style.height=i.bottom+"px",n.scrollbarFiller.style.width=i.right+"px"):n.scrollbarFiller.style.display="",i.bottom&&e.options.coverGutterNextToScrollbar&&e.options.fixedGutter?(n.gutterFiller.style.display="block",n.gutterFiller.style.height=i.bottom+"px",n.gutterFiller.style.width=t.gutterWidth+"px"):n.gutterFiller.style.display=""}Bi.prototype.update=function(){return{bottom:0,right:0}},Bi.prototype.setScrollLeft=function(){},Bi.prototype.setScrollTop=function(){},Bi.prototype.clear=function(){};var Hi={native:Fi,null:Bi};function Gi(e){e.display.scrollbars&&(e.display.scrollbars.clear(),e.display.scrollbars.addClass&&M(e.display.wrapper,e.display.scrollbars.addClass)),e.display.scrollbars=new Hi[e.options.scrollbarStyle]((function(t){e.display.wrapper.insertBefore(t,e.display.scrollbarFiller),de(t,"mousedown",(function(){e.state.focused&&setTimeout((function(){return e.display.input.focus()}),0)})),t.setAttribute("cm-not-content","true")}),(function(t,n){"horizontal"==n?Pi(e,t):Ai(e,t)}),e),e.display.scrollbars.addClass&&z(e.display.wrapper,e.display.scrollbars.addClass)}var qi=0;function Ui(e){e.curOp={cm:e,viewChanged:!1,startHeight:e.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++qi,markArrays:null},function(e){an?an.ops.push(e):e.ownsGroup=an={ops:[e],delayedCallbacks:[]}}(e.curOp)}function Vi(e){var t=e.curOp;t&&function(e,t){var n=e.ownsGroup;if(n)try{!function(e){var t=e.delayedCallbacks,n=0;do{for(;n<t.length;n++)t[n].call(null);for(var i=0;i<e.ops.length;i++){var r=e.ops[i];if(r.cursorActivityHandlers)for(;r.cursorActivityCalled<r.cursorActivityHandlers.length;)r.cursorActivityHandlers[r.cursorActivityCalled++].call(null,r.cm)}}while(n<t.length)}(n)}finally{an=null,t(n)}}(t,(function(e){for(var t=0;t<e.ops.length;t++)e.ops[t].cm.curOp=null;!function(e){for(var t=e.ops,n=0;n<t.length;n++)Ki(t[n]);for(var i=0;i<t.length;i++)Xi(t[i]);for(var r=0;r<t.length;r++)Yi(t[r]);for(var a=0;a<t.length;a++)Ji(t[a]);for(var o=0;o<t.length;o++)Qi(t[o])}(e)}))}function Ki(e){var t=e.cm,n=t.display;(function(e){var t=e.display;!t.scrollbarsClipped&&t.scroller.offsetWidth&&(t.nativeBarWidth=t.scroller.offsetWidth-t.scroller.clientWidth,t.heightForcer.style.height=Sn(e)+"px",t.sizer.style.marginBottom=-t.nativeBarWidth+"px",t.sizer.style.borderRightWidth=Sn(e)+"px",t.scrollbarsClipped=!0)})(t),e.updateMaxLine&&Gt(t),e.mustUpdate=e.viewChanged||e.forceUpdate||null!=e.scrollTop||e.scrollToPos&&(e.scrollToPos.from.line<n.viewFrom||e.scrollToPos.to.line>=n.viewTo)||n.maxLineChanged&&t.options.lineWrapping,e.update=e.mustUpdate&&new ar(t,e.mustUpdate&&{top:e.scrollTop,ensure:e.scrollToPos},e.forceUpdate)}function Xi(e){e.updatedDisplay=e.mustUpdate&&or(e.cm,e.update)}function Yi(e){var t=e.cm,n=t.display;e.updatedDisplay&&Mi(t),e.barMeasure=ji(t),n.maxLineChanged&&!t.options.lineWrapping&&(e.adjustWidthTo=En(t,n.maxLine,n.maxLine.text.length).left+3,t.display.sizerWidth=e.adjustWidthTo,e.barMeasure.scrollWidth=Math.max(n.scroller.clientWidth,n.sizer.offsetLeft+e.adjustWidthTo+Sn(t)+t.display.barWidth),e.maxScrollLeft=Math.max(0,n.sizer.offsetLeft+e.adjustWidthTo-Mn(t))),(e.updatedDisplay||e.selectionChanged)&&(e.preparedSelection=n.input.prepareSelection())}function Ji(e){var t=e.cm;null!=e.adjustWidthTo&&(t.display.sizer.style.minWidth=e.adjustWidthTo+"px",e.maxScrollLeft<t.doc.scrollLeft&&Pi(t,Math.min(t.display.scroller.scrollLeft,e.maxScrollLeft),!0),t.display.maxLineChanged=!1);var n=e.focus&&e.focus==L();e.preparedSelection&&t.display.input.showSelection(e.preparedSelection,n),(e.updatedDisplay||e.startHeight!=t.doc.height)&&Ri(t,e.barMeasure),e.updatedDisplay&&dr(t,e.barMeasure),e.selectionChanged&&_i(t),t.state.focused&&e.updateInput&&t.display.input.reset(e.typing),n&&wi(e.cm)}function Qi(e){var t=e.cm,n=t.display,i=t.doc;if(e.updatedDisplay&&sr(t,e.update),null==n.wheelStartX||null==e.scrollTop&&null==e.scrollLeft&&!e.scrollToPos||(n.wheelStartX=n.wheelStartY=null),null!=e.scrollTop&&Ii(t,e.scrollTop,e.forceScroll),null!=e.scrollLeft&&Pi(t,e.scrollLeft,!0,!0),e.scrollToPos){var r=function(e,t,n,i){var r;null==i&&(i=0),e.options.lineWrapping||t!=n||(n="before"==t.sticky?Ze(t.line,t.ch+1,"before"):t,t=t.ch?Ze(t.line,"before"==t.sticky?t.ch-1:t.ch,"after"):t);for(var a=0;a<5;a++){var o=!1,s=Vn(e,t),l=n&&n!=t?Vn(e,n):s,c=Ei(e,r={left:Math.min(s.left,l.left),top:Math.min(s.top,l.top)-i,right:Math.max(s.left,l.left),bottom:Math.max(s.bottom,l.bottom)+i}),u=e.doc.scrollTop,d=e.doc.scrollLeft;if(null!=c.scrollTop&&(Ai(e,c.scrollTop),Math.abs(e.doc.scrollTop-u)>1&&(o=!0)),null!=c.scrollLeft&&(Pi(e,c.scrollLeft),Math.abs(e.doc.scrollLeft-d)>1&&(o=!0)),!o)break}return r}(t,ot(i,e.scrollToPos.from),ot(i,e.scrollToPos.to),e.scrollToPos.margin);!function(e,t){if(!me(e,"scrollCursorIntoView")){var n=e.display,i=n.sizer.getBoundingClientRect(),r=null;if(t.top+i.top<0?r=!0:t.bottom+i.top>(window.innerHeight||document.documentElement.clientHeight)&&(r=!1),null!=r&&!f){var a=E("div","",null,"position: absolute;\n                         top: "+(t.top-n.viewOffset-wn(e.display))+"px;\n                         height: "+(t.bottom-t.top+Sn(e)+n.barHeight)+"px;\n                         left: "+t.left+"px; width: "+Math.max(2,t.right-t.left)+"px;");e.display.lineSpace.appendChild(a),a.scrollIntoView(r),e.display.lineSpace.removeChild(a)}}}(t,r)}var a=e.maybeHiddenMarkers,o=e.maybeUnhiddenMarkers;if(a)for(var s=0;s<a.length;++s)a[s].lines.length||fe(a[s],"hide");if(o)for(var l=0;l<o.length;++l)o[l].lines.length&&fe(o[l],"unhide");n.wrapper.offsetHeight&&(i.scrollTop=t.display.scroller.scrollTop),e.changeObjs&&fe(t,"changes",t,e.changeObjs),e.update&&e.update.finish()}function Zi(e,t){if(e.curOp)return t();Ui(e);try{return t()}finally{Vi(e)}}function er(e,t){return function(){if(e.curOp)return t.apply(e,arguments);Ui(e);try{return t.apply(e,arguments)}finally{Vi(e)}}}function tr(e){return function(){if(this.curOp)return e.apply(this,arguments);Ui(this);try{return e.apply(this,arguments)}finally{Vi(this)}}}function nr(e){return function(){var t=this.cm;if(!t||t.curOp)return e.apply(this,arguments);Ui(t);try{return e.apply(this,arguments)}finally{Vi(t)}}}function ir(e,t){e.doc.highlightFrontier<e.display.viewTo&&e.state.highlight.set(t,I(rr,e))}function rr(e){var t=e.doc;if(!(t.highlightFrontier>=e.display.viewTo)){var n=+new Date+e.options.workTime,i=pt(e,t.highlightFrontier),r=[];t.iter(i.line,Math.min(t.first+t.size,e.display.viewTo+500),(function(a){if(i.line>=e.display.viewFrom){var o=a.styles,s=a.text.length>e.options.maxHighlightLength?Re(t.mode,i.state):null,l=ut(e,a,i,!0);s&&(i.state=s),a.styles=l.styles;var c=a.styleClasses,u=l.classes;u?a.styleClasses=u:c&&(a.styleClasses=null);for(var d=!o||o.length!=a.styles.length||c!=u&&(!c||!u||c.bgClass!=u.bgClass||c.textClass!=u.textClass),p=0;!d&&p<o.length;++p)d=o[p]!=a.styles[p];d&&r.push(i.line),a.stateAfter=i.save(),i.nextLine()}else a.text.length<=e.options.maxHighlightLength&&ht(e,a.text,i),a.stateAfter=i.line%5==0?i.save():null,i.nextLine();if(+new Date>n)return ir(e,e.options.workDelay),!0})),t.highlightFrontier=i.line,t.modeFrontier=Math.max(t.modeFrontier,i.line),r.length&&Zi(e,(function(){for(var t=0;t<r.length;t++)pi(e,r[t],"text")}))}}var ar=function(e,t,n){var i=e.display;this.viewport=t,this.visible=$i(i,e.doc,t),this.editorIsHidden=!i.wrapper.offsetWidth,this.wrapperHeight=i.wrapper.clientHeight,this.wrapperWidth=i.wrapper.clientWidth,this.oldDisplayWidth=Mn(e),this.force=n,this.dims=ai(e),this.events=[]};function or(e,t){var n=e.display,i=e.doc;if(t.editorIsHidden)return hi(e),!1;if(!t.force&&t.visible.from>=n.viewFrom&&t.visible.to<=n.viewTo&&(null==n.updateLineNumbers||n.updateLineNumbers>=n.viewTo)&&n.renderedView==n.view&&0==mi(e))return!1;hr(e)&&(hi(e),t.dims=ai(e));var r=i.first+i.size,a=Math.max(t.visible.from-e.options.viewportMargin,i.first),o=Math.min(r,t.visible.to+e.options.viewportMargin);n.viewFrom<a&&a-n.viewFrom<20&&(a=Math.max(i.first,n.viewFrom)),n.viewTo>o&&n.viewTo-o<20&&(o=Math.min(r,n.viewTo)),_t&&(a=jt(e.doc,a),o=Ft(e.doc,o));var s=a!=n.viewFrom||o!=n.viewTo||n.lastWrapHeight!=t.wrapperHeight||n.lastWrapWidth!=t.wrapperWidth;(function(e,t,n){var i=e.display;0==i.view.length||t>=i.viewTo||n<=i.viewFrom?(i.view=rn(e,t,n),i.viewFrom=t):(i.viewFrom>t?i.view=rn(e,t,i.viewFrom).concat(i.view):i.viewFrom<t&&(i.view=i.view.slice(ui(e,t))),i.viewFrom=t,i.viewTo<n?i.view=i.view.concat(rn(e,i.viewTo,n)):i.viewTo>n&&(i.view=i.view.slice(0,ui(e,n)))),i.viewTo=n})(e,a,o),n.viewOffset=Wt(qe(e.doc,n.viewFrom)),e.display.mover.style.top=n.viewOffset+"px";var l=mi(e);if(!s&&0==l&&!t.force&&n.renderedView==n.view&&(null==n.updateLineNumbers||n.updateLineNumbers>=n.viewTo))return!1;var c=function(e){if(e.hasFocus())return null;var t=L();if(!t||!D(e.display.lineDiv,t))return null;var n={activeElt:t};if(window.getSelection){var i=window.getSelection();i.anchorNode&&i.extend&&D(e.display.lineDiv,i.anchorNode)&&(n.anchorNode=i.anchorNode,n.anchorOffset=i.anchorOffset,n.focusNode=i.focusNode,n.focusOffset=i.focusOffset)}return n}(e);return l>4&&(n.lineDiv.style.display="none"),cr(e,n.updateLineNumbers,t.dims),l>4&&(n.lineDiv.style.display=""),n.renderedView=n.view,function(e){if(e&&e.activeElt&&e.activeElt!=L()&&(e.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(e.activeElt.nodeName)&&e.anchorNode&&D(document.body,e.anchorNode)&&D(document.body,e.focusNode))){var t=window.getSelection(),n=document.createRange();n.setEnd(e.anchorNode,e.anchorOffset),n.collapse(!1),t.removeAllRanges(),t.addRange(n),t.extend(e.focusNode,e.focusOffset)}}(c),O(n.cursorDiv),O(n.selectionDiv),n.gutters.style.height=n.sizer.style.minHeight=0,s&&(n.lastWrapHeight=t.wrapperHeight,n.lastWrapWidth=t.wrapperWidth,ir(e,400)),n.updateLineNumbers=null,!0}function sr(e,t){for(var n=t.viewport,i=!0;;i=!1){if(i&&e.options.lineWrapping&&t.oldDisplayWidth!=Mn(e))i&&(t.visible=$i(e.display,e.doc,n));else if(n&&null!=n.top&&(n={top:Math.min(e.doc.height+Cn(e.display)-On(e),n.top)}),t.visible=$i(e.display,e.doc,n),t.visible.from>=e.display.viewFrom&&t.visible.to<=e.display.viewTo)break;if(!or(e,t))break;Mi(e);var r=ji(e);gi(e),Ri(e,r),dr(e,r),t.force=!1}t.signal(e,"update",e),e.display.viewFrom==e.display.reportedViewFrom&&e.display.viewTo==e.display.reportedViewTo||(t.signal(e,"viewportChange",e,e.display.viewFrom,e.display.viewTo),e.display.reportedViewFrom=e.display.viewFrom,e.display.reportedViewTo=e.display.viewTo)}function lr(e,t){var n=new ar(e,t);if(or(e,n)){Mi(e),sr(e,n);var i=ji(e);gi(e),Ri(e,i),dr(e,i),n.finish()}}function cr(e,t,n){var i=e.display,r=e.options.lineNumbers,a=i.lineDiv,o=a.firstChild;function s(t){var n=t.nextSibling;return l&&b&&e.display.currentWheelTarget==t?t.style.display="none":t.parentNode.removeChild(t),n}for(var c=i.view,u=i.viewFrom,d=0;d<c.length;d++){var p=c[d];if(p.hidden);else if(p.node&&p.node.parentNode==a){for(;o!=p.node;)o=s(o);var h=r&&null!=t&&t<=u&&p.lineNumber;p.changes&&(B(p.changes,"gutter")>-1&&(h=!1),cn(e,p,u,n)),h&&(O(p.lineNumber),p.lineNumber.appendChild(document.createTextNode(Qe(e.options,u)))),o=p.node.nextSibling}else{var f=gn(e,p,u,n);a.insertBefore(f,o)}u+=p.size}for(;o;)o=s(o)}function ur(e){var t=e.gutters.offsetWidth;e.sizer.style.marginLeft=t+"px",sn(e,"gutterChanged",e)}function dr(e,t){e.display.sizer.style.minHeight=t.docHeight+"px",e.display.heightForcer.style.top=t.docHeight+"px",e.display.gutters.style.height=t.docHeight+e.display.barHeight+Sn(e)+"px"}function pr(e){var t=e.display,n=t.view;if(t.alignWidgets||t.gutters.firstChild&&e.options.fixedGutter){for(var i=oi(t)-t.scroller.scrollLeft+e.doc.scrollLeft,r=t.gutters.offsetWidth,a=i+"px",o=0;o<n.length;o++)if(!n[o].hidden){e.options.fixedGutter&&(n[o].gutter&&(n[o].gutter.style.left=a),n[o].gutterBackground&&(n[o].gutterBackground.style.left=a));var s=n[o].alignable;if(s)for(var l=0;l<s.length;l++)s[l].style.left=a}e.options.fixedGutter&&(t.gutters.style.left=i+r+"px")}}function hr(e){if(!e.options.lineNumbers)return!1;var t=e.doc,n=Qe(e.options,t.first+t.size-1),i=e.display;if(n.length!=i.lineNumChars){var r=i.measure.appendChild(E("div",[E("div",n)],"CodeMirror-linenumber CodeMirror-gutter-elt")),a=r.firstChild.offsetWidth,o=r.offsetWidth-a;return i.lineGutter.style.width="",i.lineNumInnerWidth=Math.max(a,i.lineGutter.offsetWidth-o)+1,i.lineNumWidth=i.lineNumInnerWidth+o,i.lineNumChars=i.lineNumInnerWidth?n.length:-1,i.lineGutter.style.width=i.lineNumWidth+"px",ur(e.display),!0}return!1}function fr(e,t){for(var n=[],i=!1,r=0;r<e.length;r++){var a=e[r],o=null;if("string"!=typeof a&&(o=a.style,a=a.className),"CodeMirror-linenumbers"==a){if(!t)continue;i=!0}n.push({className:a,style:o})}return t&&!i&&n.push({className:"CodeMirror-linenumbers",style:null}),n}function mr(e){var t=e.gutters,n=e.gutterSpecs;O(t),e.lineGutter=null;for(var i=0;i<n.length;++i){var r=n[i],a=r.className,o=r.style,s=t.appendChild(E("div",null,"CodeMirror-gutter "+a));o&&(s.style.cssText=o),"CodeMirror-linenumbers"==a&&(e.lineGutter=s,s.style.width=(e.lineNumWidth||1)+"px")}t.style.display=n.length?"":"none",ur(e)}function gr(e){mr(e.display),di(e),pr(e)}function vr(e,t,i,r){var a=this;this.input=i,a.scrollbarFiller=E("div",null,"CodeMirror-scrollbar-filler"),a.scrollbarFiller.setAttribute("cm-not-content","true"),a.gutterFiller=E("div",null,"CodeMirror-gutter-filler"),a.gutterFiller.setAttribute("cm-not-content","true"),a.lineDiv=T("div",null,"CodeMirror-code"),a.selectionDiv=E("div",null,null,"position: relative; z-index: 1"),a.cursorDiv=E("div",null,"CodeMirror-cursors"),a.measure=E("div",null,"CodeMirror-measure"),a.lineMeasure=E("div",null,"CodeMirror-measure"),a.lineSpace=T("div",[a.measure,a.lineMeasure,a.selectionDiv,a.cursorDiv,a.lineDiv],null,"position: relative; outline: none");var c=T("div",[a.lineSpace],"CodeMirror-lines");a.mover=E("div",[c],null,"position: relative"),a.sizer=E("div",[a.mover],"CodeMirror-sizer"),a.sizerWidth=null,a.heightForcer=E("div",null,null,"position: absolute; height: 50px; width: 1px;"),a.gutters=E("div",null,"CodeMirror-gutters"),a.lineGutter=null,a.scroller=E("div",[a.sizer,a.heightForcer,a.gutters],"CodeMirror-scroll"),a.scroller.setAttribute("tabIndex","-1"),a.wrapper=E("div",[a.scrollbarFiller,a.gutterFiller,a.scroller],"CodeMirror"),o&&s<8&&(a.gutters.style.zIndex=-1,a.scroller.style.paddingRight=0),l||n&&v||(a.scroller.draggable=!0),e&&(e.appendChild?e.appendChild(a.wrapper):e(a.wrapper)),a.viewFrom=a.viewTo=t.first,a.reportedViewFrom=a.reportedViewTo=t.first,a.view=[],a.renderedView=null,a.externalMeasured=null,a.viewOffset=0,a.lastWrapHeight=a.lastWrapWidth=0,a.updateLineNumbers=null,a.nativeBarWidth=a.barHeight=a.barWidth=0,a.scrollbarsClipped=!1,a.lineNumWidth=a.lineNumInnerWidth=a.lineNumChars=null,a.alignWidgets=!1,a.cachedCharWidth=a.cachedTextHeight=a.cachedPaddingH=null,a.maxLine=null,a.maxLineLength=0,a.maxLineChanged=!1,a.wheelDX=a.wheelDY=a.wheelStartX=a.wheelStartY=null,a.shift=!1,a.selForContextMenu=null,a.activeTouch=null,a.gutterSpecs=fr(r.gutters,r.lineNumbers),mr(a),i.init(a)}ar.prototype.signal=function(e,t){ve(e,t)&&this.events.push(arguments)},ar.prototype.finish=function(){for(var e=0;e<this.events.length;e++)fe.apply(null,this.events[e])};var br=0,yr=null;function xr(e){var t=e.wheelDeltaX,n=e.wheelDeltaY;return null==t&&e.detail&&e.axis==e.HORIZONTAL_AXIS&&(t=e.detail),null==n&&e.detail&&e.axis==e.VERTICAL_AXIS?n=e.detail:null==n&&(n=e.wheelDelta),{x:t,y:n}}function _r(e){var t=xr(e);return t.x*=yr,t.y*=yr,t}function wr(e,t){var i=xr(t),r=i.x,a=i.y,o=e.display,s=o.scroller,c=s.scrollWidth>s.clientWidth,u=s.scrollHeight>s.clientHeight;if(r&&c||a&&u){if(a&&b&&l)e:for(var p=t.target,h=o.view;p!=s;p=p.parentNode)for(var f=0;f<h.length;f++)if(h[f].node==p){e.display.currentWheelTarget=p;break e}if(r&&!n&&!d&&null!=yr)return a&&u&&Ai(e,Math.max(0,s.scrollTop+a*yr)),Pi(e,Math.max(0,s.scrollLeft+r*yr)),(!a||a&&u)&&ye(t),void(o.wheelStartX=null);if(a&&null!=yr){var m=a*yr,g=e.doc.scrollTop,v=g+o.wrapper.clientHeight;m<0?g=Math.max(0,g+m-50):v=Math.min(e.doc.height,v+m+50),lr(e,{top:g,bottom:v})}br<20&&(null==o.wheelStartX?(o.wheelStartX=s.scrollLeft,o.wheelStartY=s.scrollTop,o.wheelDX=r,o.wheelDY=a,setTimeout((function(){if(null!=o.wheelStartX){var e=s.scrollLeft-o.wheelStartX,t=s.scrollTop-o.wheelStartY,n=t&&o.wheelDY&&t/o.wheelDY||e&&o.wheelDX&&e/o.wheelDX;o.wheelStartX=o.wheelStartY=null,n&&(yr=(yr*br+n)/(br+1),++br)}}),200)):(o.wheelDX+=r,o.wheelDY+=a))}}o?yr=-.53:n?yr=15:u?yr=-.7:p&&(yr=-1/3);var Cr=function(e,t){this.ranges=e,this.primIndex=t};Cr.prototype.primary=function(){return this.ranges[this.primIndex]},Cr.prototype.equals=function(e){if(e==this)return!0;if(e.primIndex!=this.primIndex||e.ranges.length!=this.ranges.length)return!1;for(var t=0;t<this.ranges.length;t++){var n=this.ranges[t],i=e.ranges[t];if(!tt(n.anchor,i.anchor)||!tt(n.head,i.head))return!1}return!0},Cr.prototype.deepCopy=function(){for(var e=[],t=0;t<this.ranges.length;t++)e[t]=new kr(nt(this.ranges[t].anchor),nt(this.ranges[t].head));return new Cr(e,this.primIndex)},Cr.prototype.somethingSelected=function(){for(var e=0;e<this.ranges.length;e++)if(!this.ranges[e].empty())return!0;return!1},Cr.prototype.contains=function(e,t){t||(t=e);for(var n=0;n<this.ranges.length;n++){var i=this.ranges[n];if(et(t,i.from())>=0&&et(e,i.to())<=0)return n}return-1};var kr=function(e,t){this.anchor=e,this.head=t};function Sr(e,t,n){var i=e&&e.options.selectionsMayTouch,r=t[n];t.sort((function(e,t){return et(e.from(),t.from())})),n=B(t,r);for(var a=1;a<t.length;a++){var o=t[a],s=t[a-1],l=et(s.to(),o.from());if(i&&!o.empty()?l>0:l>=0){var c=rt(s.from(),o.from()),u=it(s.to(),o.to()),d=s.empty()?o.from()==o.head:s.from()==s.head;a<=n&&--n,t.splice(--a,2,new kr(d?u:c,d?c:u))}}return new Cr(t,n)}function Mr(e,t){return new Cr([new kr(e,t||e)],0)}function Or(e){return e.text?Ze(e.from.line+e.text.length-1,K(e.text).length+(1==e.text.length?e.from.ch:0)):e.to}function $r(e,t){if(et(e,t.from)<0)return e;if(et(e,t.to)<=0)return Or(t);var n=e.line+t.text.length-(t.to.line-t.from.line)-1,i=e.ch;return e.line==t.to.line&&(i+=Or(t).ch-t.to.ch),Ze(n,i)}function Er(e,t){for(var n=[],i=0;i<e.sel.ranges.length;i++){var r=e.sel.ranges[i];n.push(new kr($r(r.anchor,t),$r(r.head,t)))}return Sr(e.cm,n,e.sel.primIndex)}function Tr(e,t,n){return e.line==t.line?Ze(n.line,e.ch-t.ch+n.ch):Ze(n.line+(e.line-t.line),e.ch)}function Dr(e){e.doc.mode=je(e.options,e.doc.modeOption),Lr(e)}function Lr(e){e.doc.iter((function(e){e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null)})),e.doc.modeFrontier=e.doc.highlightFrontier=e.doc.first,ir(e,100),e.state.modeGen++,e.curOp&&di(e)}function zr(e,t){return 0==t.from.ch&&0==t.to.ch&&""==K(t.text)&&(!e.cm||e.cm.options.wholeLineUpdateBefore)}function Nr(e,t,n,i){function r(e){return n?n[e]:null}function a(e,n,r){(function(e,t,n,i){e.text=t,e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null),null!=e.order&&(e.order=null),Ot(e),$t(e,n);var r=i?i(e):1;r!=e.height&&Ke(e,r)})(e,n,r,i),sn(e,"change",e,t)}function o(e,t){for(var n=[],a=e;a<t;++a)n.push(new qt(c[a],r(a),i));return n}var s=t.from,l=t.to,c=t.text,u=qe(e,s.line),d=qe(e,l.line),p=K(c),h=r(c.length-1),f=l.line-s.line;if(t.full)e.insert(0,o(0,c.length)),e.remove(c.length,e.size-c.length);else if(zr(e,t)){var m=o(0,c.length-1);a(d,d.text,h),f&&e.remove(s.line,f),m.length&&e.insert(s.line,m)}else if(u==d)if(1==c.length)a(u,u.text.slice(0,s.ch)+p+u.text.slice(l.ch),h);else{var g=o(1,c.length-1);g.push(new qt(p+u.text.slice(l.ch),h,i)),a(u,u.text.slice(0,s.ch)+c[0],r(0)),e.insert(s.line+1,g)}else if(1==c.length)a(u,u.text.slice(0,s.ch)+c[0]+d.text.slice(l.ch),r(0)),e.remove(s.line+1,f);else{a(u,u.text.slice(0,s.ch)+c[0],r(0)),a(d,p+d.text.slice(l.ch),h);var v=o(1,c.length-1);f>1&&e.remove(s.line+1,f-1),e.insert(s.line+1,v)}sn(e,"change",e,t)}function Ar(e,t,n){!function e(i,r,a){if(i.linked)for(var o=0;o<i.linked.length;++o){var s=i.linked[o];if(s.doc!=r){var l=a&&s.sharedHist;n&&!l||(t(s.doc,l),e(s.doc,i,l))}}}(e,null,!0)}function Ir(e,t){if(t.cm)throw new Error("This document is already in use.");e.doc=t,t.cm=e,li(e),Dr(e),Pr(e),e.options.direction=t.direction,e.options.lineWrapping||Gt(e),e.options.mode=t.modeOption,di(e)}function Pr(e){("rtl"==e.doc.direction?z:M)(e.display.lineDiv,"CodeMirror-rtl")}function jr(e){this.done=[],this.undone=[],this.undoDepth=e?e.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=e?e.maxGeneration:1}function Fr(e,t){var n={from:nt(t.from),to:Or(t),text:Ue(e,t.from,t.to)};return Gr(e,n,t.from.line,t.to.line+1),Ar(e,(function(e){return Gr(e,n,t.from.line,t.to.line+1)}),!0),n}function Br(e){for(;e.length&&K(e).ranges;)e.pop()}function Rr(e,t,n,i){var r=e.history;r.undone.length=0;var a,o,s=+new Date;if((r.lastOp==i||r.lastOrigin==t.origin&&t.origin&&("+"==t.origin.charAt(0)&&r.lastModTime>s-(e.cm?e.cm.options.historyEventDelay:500)||"*"==t.origin.charAt(0)))&&(a=function(e,t){return t?(Br(e.done),K(e.done)):e.done.length&&!K(e.done).ranges?K(e.done):e.done.length>1&&!e.done[e.done.length-2].ranges?(e.done.pop(),K(e.done)):void 0}(r,r.lastOp==i)))o=K(a.changes),0==et(t.from,t.to)&&0==et(t.from,o.to)?o.to=Or(t):a.changes.push(Fr(e,t));else{var l=K(r.done);for(l&&l.ranges||Hr(e.sel,r.done),a={changes:[Fr(e,t)],generation:r.generation},r.done.push(a);r.done.length>r.undoDepth;)r.done.shift(),r.done[0].ranges||r.done.shift()}r.done.push(n),r.generation=++r.maxGeneration,r.lastModTime=r.lastSelTime=s,r.lastOp=r.lastSelOp=i,r.lastOrigin=r.lastSelOrigin=t.origin,o||fe(e,"historyAdded")}function Wr(e,t,n,i){var r=e.history,a=i&&i.origin;n==r.lastSelOp||a&&r.lastSelOrigin==a&&(r.lastModTime==r.lastSelTime&&r.lastOrigin==a||function(e,t,n,i){var r=t.charAt(0);return"*"==r||"+"==r&&n.ranges.length==i.ranges.length&&n.somethingSelected()==i.somethingSelected()&&new Date-e.history.lastSelTime<=(e.cm?e.cm.options.historyEventDelay:500)}(e,a,K(r.done),t))?r.done[r.done.length-1]=t:Hr(t,r.done),r.lastSelTime=+new Date,r.lastSelOrigin=a,r.lastSelOp=n,i&&!1!==i.clearRedo&&Br(r.undone)}function Hr(e,t){var n=K(t);n&&n.ranges&&n.equals(e)||t.push(e)}function Gr(e,t,n,i){var r=t["spans_"+e.id],a=0;e.iter(Math.max(e.first,n),Math.min(e.first+e.size,i),(function(n){n.markedSpans&&((r||(r=t["spans_"+e.id]={}))[a]=n.markedSpans),++a}))}function qr(e){if(!e)return null;for(var t,n=0;n<e.length;++n)e[n].marker.explicitlyCleared?t||(t=e.slice(0,n)):t&&t.push(e[n]);return t?t.length?t:null:e}function Ur(e,t){var n=function(e,t){var n=t["spans_"+e.id];if(!n)return null;for(var i=[],r=0;r<t.text.length;++r)i.push(qr(n[r]));return i}(e,t),i=St(e,t);if(!n)return i;if(!i)return n;for(var r=0;r<n.length;++r){var a=n[r],o=i[r];if(a&&o)e:for(var s=0;s<o.length;++s){for(var l=o[s],c=0;c<a.length;++c)if(a[c].marker==l.marker)continue e;a.push(l)}else o&&(n[r]=o)}return n}function Vr(e,t,n){for(var i=[],r=0;r<e.length;++r){var a=e[r];if(a.ranges)i.push(n?Cr.prototype.deepCopy.call(a):a);else{var o=a.changes,s=[];i.push({changes:s});for(var l=0;l<o.length;++l){var c=o[l],u=void 0;if(s.push({from:c.from,to:c.to,text:c.text}),t)for(var d in c)(u=d.match(/^spans_(\d+)$/))&&B(t,Number(u[1]))>-1&&(K(s)[d]=c[d],delete c[d])}}}return i}function Kr(e,t,n,i){if(i){var r=e.anchor;if(n){var a=et(t,r)<0;a!=et(n,r)<0?(r=t,t=n):a!=et(t,n)<0&&(t=n)}return new kr(r,t)}return new kr(n||t,t)}function Xr(e,t,n,i,r){null==r&&(r=e.cm&&(e.cm.display.shift||e.extend)),ea(e,new Cr([Kr(e.sel.primary(),t,n,r)],0),i)}function Yr(e,t,n){for(var i=[],r=e.cm&&(e.cm.display.shift||e.extend),a=0;a<e.sel.ranges.length;a++)i[a]=Kr(e.sel.ranges[a],t[a],null,r);ea(e,Sr(e.cm,i,e.sel.primIndex),n)}function Jr(e,t,n,i){var r=e.sel.ranges.slice(0);r[t]=n,ea(e,Sr(e.cm,r,e.sel.primIndex),i)}function Qr(e,t,n,i){ea(e,Mr(t,n),i)}function Zr(e,t,n){var i=e.history.done,r=K(i);r&&r.ranges?(i[i.length-1]=t,ta(e,t,n)):ea(e,t,n)}function ea(e,t,n){ta(e,t,n),Wr(e,e.sel,e.cm?e.cm.curOp.id:NaN,n)}function ta(e,t,n){(ve(e,"beforeSelectionChange")||e.cm&&ve(e.cm,"beforeSelectionChange"))&&(t=function(e,t,n){var i={ranges:t.ranges,update:function(t){this.ranges=[];for(var n=0;n<t.length;n++)this.ranges[n]=new kr(ot(e,t[n].anchor),ot(e,t[n].head))},origin:n&&n.origin};return fe(e,"beforeSelectionChange",e,i),e.cm&&fe(e.cm,"beforeSelectionChange",e.cm,i),i.ranges!=t.ranges?Sr(e.cm,i.ranges,i.ranges.length-1):t}(e,t,n));var i=n&&n.bias||(et(t.primary().head,e.sel.primary().head)<0?-1:1);na(e,ra(e,t,i,!0)),n&&!1===n.scroll||!e.cm||"nocursor"==e.cm.getOption("readOnly")||Di(e.cm)}function na(e,t){t.equals(e.sel)||(e.sel=t,e.cm&&(e.cm.curOp.updateInput=1,e.cm.curOp.selectionChanged=!0,ge(e.cm)),sn(e,"cursorActivity",e))}function ia(e){na(e,ra(e,e.sel,null,!1))}function ra(e,t,n,i){for(var r,a=0;a<t.ranges.length;a++){var o=t.ranges[a],s=t.ranges.length==e.sel.ranges.length&&e.sel.ranges[a],l=oa(e,o.anchor,s&&s.anchor,n,i),c=oa(e,o.head,s&&s.head,n,i);(r||l!=o.anchor||c!=o.head)&&(r||(r=t.ranges.slice(0,a)),r[a]=new kr(l,c))}return r?Sr(e.cm,r,t.primIndex):t}function aa(e,t,n,i,r){var a=qe(e,t.line);if(a.markedSpans)for(var o=0;o<a.markedSpans.length;++o){var s=a.markedSpans[o],l=s.marker,c="selectLeft"in l?!l.selectLeft:l.inclusiveLeft,u="selectRight"in l?!l.selectRight:l.inclusiveRight;if((null==s.from||(c?s.from<=t.ch:s.from<t.ch))&&(null==s.to||(u?s.to>=t.ch:s.to>t.ch))){if(r&&(fe(l,"beforeCursorEnter"),l.explicitlyCleared)){if(a.markedSpans){--o;continue}break}if(!l.atomic)continue;if(n){var d=l.find(i<0?1:-1),p=void 0;if((i<0?u:c)&&(d=sa(e,d,-i,d&&d.line==t.line?a:null)),d&&d.line==t.line&&(p=et(d,n))&&(i<0?p<0:p>0))return aa(e,d,t,i,r)}var h=l.find(i<0?-1:1);return(i<0?c:u)&&(h=sa(e,h,i,h.line==t.line?a:null)),h?aa(e,h,t,i,r):null}}return t}function oa(e,t,n,i,r){var a=i||1;return aa(e,t,n,a,r)||!r&&aa(e,t,n,a,!0)||aa(e,t,n,-a,r)||!r&&aa(e,t,n,-a,!0)||(e.cantEdit=!0,Ze(e.first,0))}function sa(e,t,n,i){return n<0&&0==t.ch?t.line>e.first?ot(e,Ze(t.line-1)):null:n>0&&t.ch==(i||qe(e,t.line)).text.length?t.line<e.first+e.size-1?Ze(t.line+1,0):null:new Ze(t.line,t.ch+n)}function la(e){e.setSelection(Ze(e.firstLine(),0),Ze(e.lastLine()),W)}function ca(e,t,n){var i={canceled:!1,from:t.from,to:t.to,text:t.text,origin:t.origin,cancel:function(){return i.canceled=!0}};return n&&(i.update=function(t,n,r,a){t&&(i.from=ot(e,t)),n&&(i.to=ot(e,n)),r&&(i.text=r),void 0!==a&&(i.origin=a)}),fe(e,"beforeChange",e,i),e.cm&&fe(e.cm,"beforeChange",e.cm,i),i.canceled?(e.cm&&(e.cm.curOp.updateInput=2),null):{from:i.from,to:i.to,text:i.text,origin:i.origin}}function ua(e,t,n){if(e.cm){if(!e.cm.curOp)return er(e.cm,ua)(e,t,n);if(e.cm.state.suppressEdits)return}if(!(ve(e,"beforeChange")||e.cm&&ve(e.cm,"beforeChange"))||(t=ca(e,t,!0))){var i=xt&&!n&&function(e,t,n){var i=null;if(e.iter(t.line,n.line+1,(function(e){if(e.markedSpans)for(var t=0;t<e.markedSpans.length;++t){var n=e.markedSpans[t].marker;!n.readOnly||i&&-1!=B(i,n)||(i||(i=[])).push(n)}})),!i)return null;for(var r=[{from:t,to:n}],a=0;a<i.length;++a)for(var o=i[a],s=o.find(0),l=0;l<r.length;++l){var c=r[l];if(!(et(c.to,s.from)<0||et(c.from,s.to)>0)){var u=[l,1],d=et(c.from,s.from),p=et(c.to,s.to);(d<0||!o.inclusiveLeft&&!d)&&u.push({from:c.from,to:s.from}),(p>0||!o.inclusiveRight&&!p)&&u.push({from:s.to,to:c.to}),r.splice.apply(r,u),l+=u.length-3}}return r}(e,t.from,t.to);if(i)for(var r=i.length-1;r>=0;--r)da(e,{from:i[r].from,to:i[r].to,text:r?[""]:t.text,origin:t.origin});else da(e,t)}}function da(e,t){if(1!=t.text.length||""!=t.text[0]||0!=et(t.from,t.to)){var n=Er(e,t);Rr(e,t,n,e.cm?e.cm.curOp.id:NaN),fa(e,t,n,St(e,t));var i=[];Ar(e,(function(e,n){n||-1!=B(i,e.history)||(ba(e.history,t),i.push(e.history)),fa(e,t,null,St(e,t))}))}}function pa(e,t,n){var i=e.cm&&e.cm.state.suppressEdits;if(!i||n){for(var r,a=e.history,o=e.sel,s="undo"==t?a.done:a.undone,l="undo"==t?a.undone:a.done,c=0;c<s.length&&(r=s[c],n?!r.ranges||r.equals(e.sel):r.ranges);c++);if(c!=s.length){for(a.lastOrigin=a.lastSelOrigin=null;;){if(!(r=s.pop()).ranges){if(i)return void s.push(r);break}if(Hr(r,l),n&&!r.equals(e.sel))return void ea(e,r,{clearRedo:!1});o=r}var u=[];Hr(o,l),l.push({changes:u,generation:a.generation}),a.generation=r.generation||++a.maxGeneration;for(var d=ve(e,"beforeChange")||e.cm&&ve(e.cm,"beforeChange"),p=function(n){var i=r.changes[n];if(i.origin=t,d&&!ca(e,i,!1))return s.length=0,{};u.push(Fr(e,i));var a=n?Er(e,i):K(s);fa(e,i,a,Ur(e,i)),!n&&e.cm&&e.cm.scrollIntoView({from:i.from,to:Or(i)});var o=[];Ar(e,(function(e,t){t||-1!=B(o,e.history)||(ba(e.history,i),o.push(e.history)),fa(e,i,null,Ur(e,i))}))},h=r.changes.length-1;h>=0;--h){var f=p(h);if(f)return f.v}}}}function ha(e,t){if(0!=t&&(e.first+=t,e.sel=new Cr(X(e.sel.ranges,(function(e){return new kr(Ze(e.anchor.line+t,e.anchor.ch),Ze(e.head.line+t,e.head.ch))})),e.sel.primIndex),e.cm)){di(e.cm,e.first,e.first-t,t);for(var n=e.cm.display,i=n.viewFrom;i<n.viewTo;i++)pi(e.cm,i,"gutter")}}function fa(e,t,n,i){if(e.cm&&!e.cm.curOp)return er(e.cm,fa)(e,t,n,i);if(t.to.line<e.first)ha(e,t.text.length-1-(t.to.line-t.from.line));else if(!(t.from.line>e.lastLine())){if(t.from.line<e.first){var r=t.text.length-1-(e.first-t.from.line);ha(e,r),t={from:Ze(e.first,0),to:Ze(t.to.line+r,t.to.ch),text:[K(t.text)],origin:t.origin}}var a=e.lastLine();t.to.line>a&&(t={from:t.from,to:Ze(a,qe(e,a).text.length),text:[t.text[0]],origin:t.origin}),t.removed=Ue(e,t.from,t.to),n||(n=Er(e,t)),e.cm?function(e,t,n){var i=e.doc,r=e.display,a=t.from,o=t.to,s=!1,l=a.line;e.options.lineWrapping||(l=Xe(Pt(qe(i,a.line))),i.iter(l,o.line+1,(function(e){if(e==r.maxLine)return s=!0,!0}))),i.sel.contains(t.from,t.to)>-1&&ge(e),Nr(i,t,n,si(e)),e.options.lineWrapping||(i.iter(l,a.line+t.text.length,(function(e){var t=Ht(e);t>r.maxLineLength&&(r.maxLine=e,r.maxLineLength=t,r.maxLineChanged=!0,s=!1)})),s&&(e.curOp.updateMaxLine=!0)),function(e,t){if(e.modeFrontier=Math.min(e.modeFrontier,t),!(e.highlightFrontier<t-10)){for(var n=e.first,i=t-1;i>n;i--){var r=qe(e,i).stateAfter;if(r&&(!(r instanceof lt)||i+r.lookAhead<t)){n=i+1;break}}e.highlightFrontier=Math.min(e.highlightFrontier,n)}}(i,a.line),ir(e,400);var c=t.text.length-(o.line-a.line)-1;t.full?di(e):a.line!=o.line||1!=t.text.length||zr(e.doc,t)?di(e,a.line,o.line+1,c):pi(e,a.line,"text");var u=ve(e,"changes"),d=ve(e,"change");if(d||u){var p={from:a,to:o,text:t.text,removed:t.removed,origin:t.origin};d&&sn(e,"change",e,p),u&&(e.curOp.changeObjs||(e.curOp.changeObjs=[])).push(p)}e.display.selForContextMenu=null}(e.cm,t,i):Nr(e,t,i),ta(e,n,W),e.cantEdit&&oa(e,Ze(e.firstLine(),0))&&(e.cantEdit=!1)}}function ma(e,t,n,i,r){var a;i||(i=n),et(i,n)<0&&(n=(a=[i,n])[0],i=a[1]),"string"==typeof t&&(t=e.splitLines(t)),ua(e,{from:n,to:i,text:t,origin:r})}function ga(e,t,n,i){n<e.line?e.line+=i:t<e.line&&(e.line=t,e.ch=0)}function va(e,t,n,i){for(var r=0;r<e.length;++r){var a=e[r],o=!0;if(a.ranges){a.copied||((a=e[r]=a.deepCopy()).copied=!0);for(var s=0;s<a.ranges.length;s++)ga(a.ranges[s].anchor,t,n,i),ga(a.ranges[s].head,t,n,i)}else{for(var l=0;l<a.changes.length;++l){var c=a.changes[l];if(n<c.from.line)c.from=Ze(c.from.line+i,c.from.ch),c.to=Ze(c.to.line+i,c.to.ch);else if(t<=c.to.line){o=!1;break}}o||(e.splice(0,r+1),r=0)}}}function ba(e,t){var n=t.from.line,i=t.to.line,r=t.text.length-(i-n)-1;va(e.done,n,i,r),va(e.undone,n,i,r)}function ya(e,t,n,i){var r=t,a=t;return"number"==typeof t?a=qe(e,at(e,t)):r=Xe(t),null==r?null:(i(a,r)&&e.cm&&pi(e.cm,r,n),a)}function xa(e){this.lines=e,this.parent=null;for(var t=0,n=0;n<e.length;++n)e[n].parent=this,t+=e[n].height;this.height=t}function _a(e){this.children=e;for(var t=0,n=0,i=0;i<e.length;++i){var r=e[i];t+=r.chunkSize(),n+=r.height,r.parent=this}this.size=t,this.height=n,this.parent=null}kr.prototype.from=function(){return rt(this.anchor,this.head)},kr.prototype.to=function(){return it(this.anchor,this.head)},kr.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch},xa.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,t){for(var n=e,i=e+t;n<i;++n){var r=this.lines[n];this.height-=r.height,Ut(r),sn(r,"delete")}this.lines.splice(e,t)},collapse:function(e){e.push.apply(e,this.lines)},insertInner:function(e,t,n){this.height+=n,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var i=0;i<t.length;++i)t[i].parent=this},iterN:function(e,t,n){for(var i=e+t;e<i;++e)if(n(this.lines[e]))return!0}},_a.prototype={chunkSize:function(){return this.size},removeInner:function(e,t){this.size-=t;for(var n=0;n<this.children.length;++n){var i=this.children[n],r=i.chunkSize();if(e<r){var a=Math.min(t,r-e),o=i.height;if(i.removeInner(e,a),this.height-=o-i.height,r==a&&(this.children.splice(n--,1),i.parent=null),0==(t-=a))break;e=0}else e-=r}if(this.size-t<25&&(this.children.length>1||!(this.children[0]instanceof xa))){var s=[];this.collapse(s),this.children=[new xa(s)],this.children[0].parent=this}},collapse:function(e){for(var t=0;t<this.children.length;++t)this.children[t].collapse(e)},insertInner:function(e,t,n){this.size+=t.length,this.height+=n;for(var i=0;i<this.children.length;++i){var r=this.children[i],a=r.chunkSize();if(e<=a){if(r.insertInner(e,t,n),r.lines&&r.lines.length>50){for(var o=r.lines.length%25+25,s=o;s<r.lines.length;){var l=new xa(r.lines.slice(s,s+=25));r.height-=l.height,this.children.splice(++i,0,l),l.parent=this}r.lines=r.lines.slice(0,o),this.maybeSpill()}break}e-=a}},maybeSpill:function(){if(!(this.children.length<=10)){var e=this;do{var t=new _a(e.children.splice(e.children.length-5,5));if(e.parent){e.size-=t.size,e.height-=t.height;var n=B(e.parent.children,e);e.parent.children.splice(n+1,0,t)}else{var i=new _a(e.children);i.parent=e,e.children=[i,t],e=i}t.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()}},iterN:function(e,t,n){for(var i=0;i<this.children.length;++i){var r=this.children[i],a=r.chunkSize();if(e<a){var o=Math.min(t,a-e);if(r.iterN(e,o,n))return!0;if(0==(t-=o))break;e=0}else e-=a}}};var wa=function(e,t,n){if(n)for(var i in n)n.hasOwnProperty(i)&&(this[i]=n[i]);this.doc=e,this.node=t};function Ca(e,t,n){Wt(t)<(e.curOp&&e.curOp.scrollTop||e.doc.scrollTop)&&Ti(e,n)}wa.prototype.clear=function(){var e=this.doc.cm,t=this.line.widgets,n=this.line,i=Xe(n);if(null!=i&&t){for(var r=0;r<t.length;++r)t[r]==this&&t.splice(r--,1);t.length||(n.widgets=null);var a=xn(this);Ke(n,Math.max(0,n.height-a)),e&&(Zi(e,(function(){Ca(e,n,-a),pi(e,i,"widget")})),sn(e,"lineWidgetCleared",e,this,i))}},wa.prototype.changed=function(){var e=this,t=this.height,n=this.doc.cm,i=this.line;this.height=null;var r=xn(this)-t;r&&(Bt(this.doc,i)||Ke(i,i.height+r),n&&Zi(n,(function(){n.curOp.forceUpdate=!0,Ca(n,i,r),sn(n,"lineWidgetChanged",n,e,Xe(i))})))},be(wa);var ka=0,Sa=function(e,t){this.lines=[],this.type=t,this.doc=e,this.id=++ka};function Ma(e,t,n,i,r){if(i&&i.shared)return function(e,t,n,i,r){(i=P(i)).shared=!1;var a=[Ma(e,t,n,i,r)],o=a[0],s=i.widgetNode;return Ar(e,(function(e){s&&(i.widgetNode=s.cloneNode(!0)),a.push(Ma(e,ot(e,t),ot(e,n),i,r));for(var l=0;l<e.linked.length;++l)if(e.linked[l].isParent)return;o=K(a)})),new Oa(a,o)}(e,t,n,i,r);if(e.cm&&!e.cm.curOp)return er(e.cm,Ma)(e,t,n,i,r);var a=new Sa(e,r),o=et(t,n);if(i&&P(i,a,!1),o>0||0==o&&!1!==a.clearWhenEmpty)return a;if(a.replacedWith&&(a.collapsed=!0,a.widgetNode=T("span",[a.replacedWith],"CodeMirror-widget"),i.handleMouseEvents||a.widgetNode.setAttribute("cm-ignore-events","true"),i.insertLeft&&(a.widgetNode.insertLeft=!0)),a.collapsed){if(It(e,t.line,t,n,a)||t.line!=n.line&&It(e,n.line,t,n,a))throw new Error("Inserting collapsed marker partially overlapping an existing one");_t=!0}a.addToHistory&&Rr(e,{from:t,to:n,origin:"markText"},e.sel,NaN);var s,l=t.line,c=e.cm;if(e.iter(l,n.line+1,(function(i){c&&a.collapsed&&!c.options.lineWrapping&&Pt(i)==c.display.maxLine&&(s=!0),a.collapsed&&l!=t.line&&Ke(i,0),function(e,t,n){var i=n&&window.WeakSet&&(n.markedSpans||(n.markedSpans=new WeakSet));i&&i.has(e.markedSpans)?e.markedSpans.push(t):(e.markedSpans=e.markedSpans?e.markedSpans.concat([t]):[t],i&&i.add(e.markedSpans)),t.marker.attachLine(e)}(i,new wt(a,l==t.line?t.ch:null,l==n.line?n.ch:null),e.cm&&e.cm.curOp),++l})),a.collapsed&&e.iter(t.line,n.line+1,(function(t){Bt(e,t)&&Ke(t,0)})),a.clearOnEnter&&de(a,"beforeCursorEnter",(function(){return a.clear()})),a.readOnly&&(xt=!0,(e.history.done.length||e.history.undone.length)&&e.clearHistory()),a.collapsed&&(a.id=++ka,a.atomic=!0),c){if(s&&(c.curOp.updateMaxLine=!0),a.collapsed)di(c,t.line,n.line+1);else if(a.className||a.startStyle||a.endStyle||a.css||a.attributes||a.title)for(var u=t.line;u<=n.line;u++)pi(c,u,"text");a.atomic&&ia(c.doc),sn(c,"markerAdded",c,a)}return a}Sa.prototype.clear=function(){if(!this.explicitlyCleared){var e=this.doc.cm,t=e&&!e.curOp;if(t&&Ui(e),ve(this,"clear")){var n=this.find();n&&sn(this,"clear",n.from,n.to)}for(var i=null,r=null,a=0;a<this.lines.length;++a){var o=this.lines[a],s=Ct(o.markedSpans,this);e&&!this.collapsed?pi(e,Xe(o),"text"):e&&(null!=s.to&&(r=Xe(o)),null!=s.from&&(i=Xe(o))),o.markedSpans=kt(o.markedSpans,s),null==s.from&&this.collapsed&&!Bt(this.doc,o)&&e&&Ke(o,ii(e.display))}if(e&&this.collapsed&&!e.options.lineWrapping)for(var l=0;l<this.lines.length;++l){var c=Pt(this.lines[l]),u=Ht(c);u>e.display.maxLineLength&&(e.display.maxLine=c,e.display.maxLineLength=u,e.display.maxLineChanged=!0)}null!=i&&e&&this.collapsed&&di(e,i,r+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,e&&ia(e.doc)),e&&sn(e,"markerCleared",e,this,i,r),t&&Vi(e),this.parent&&this.parent.clear()}},Sa.prototype.find=function(e,t){var n,i;null==e&&"bookmark"==this.type&&(e=1);for(var r=0;r<this.lines.length;++r){var a=this.lines[r],o=Ct(a.markedSpans,this);if(null!=o.from&&(n=Ze(t?a:Xe(a),o.from),-1==e))return n;if(null!=o.to&&(i=Ze(t?a:Xe(a),o.to),1==e))return i}return n&&{from:n,to:i}},Sa.prototype.changed=function(){var e=this,t=this.find(-1,!0),n=this,i=this.doc.cm;t&&i&&Zi(i,(function(){var r=t.line,a=Xe(t.line),o=Tn(i,a);if(o&&(jn(o),i.curOp.selectionChanged=i.curOp.forceUpdate=!0),i.curOp.updateMaxLine=!0,!Bt(n.doc,r)&&null!=n.height){var s=n.height;n.height=null;var l=xn(n)-s;l&&Ke(r,r.height+l)}sn(i,"markerChanged",i,e)}))},Sa.prototype.attachLine=function(e){if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;t.maybeHiddenMarkers&&-1!=B(t.maybeHiddenMarkers,this)||(t.maybeUnhiddenMarkers||(t.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(e)},Sa.prototype.detachLine=function(e){if(this.lines.splice(B(this.lines,e),1),!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(t.maybeHiddenMarkers||(t.maybeHiddenMarkers=[])).push(this)}},be(Sa);var Oa=function(e,t){this.markers=e,this.primary=t;for(var n=0;n<e.length;++n)e[n].parent=this};function $a(e){return e.findMarks(Ze(e.first,0),e.clipPos(Ze(e.lastLine())),(function(e){return e.parent}))}function Ea(e){for(var t=function(t){var n=e[t],i=[n.primary.doc];Ar(n.primary.doc,(function(e){return i.push(e)}));for(var r=0;r<n.markers.length;r++){var a=n.markers[r];-1==B(i,a.doc)&&(a.parent=null,n.markers.splice(r--,1))}},n=0;n<e.length;n++)t(n)}Oa.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var e=0;e<this.markers.length;++e)this.markers[e].clear();sn(this,"clear")}},Oa.prototype.find=function(e,t){return this.primary.find(e,t)},be(Oa);var Ta=0,Da=function(e,t,n,i,r){if(!(this instanceof Da))return new Da(e,t,n,i,r);null==n&&(n=0),_a.call(this,[new xa([new qt("",null)])]),this.first=n,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=n;var a=Ze(n,0);this.sel=Mr(a),this.history=new jr(null),this.id=++Ta,this.modeOption=t,this.lineSep=i,this.direction="rtl"==r?"rtl":"ltr",this.extend=!1,"string"==typeof e&&(e=this.splitLines(e)),Nr(this,{from:a,to:a,text:e}),ea(this,Mr(a),W)};Da.prototype=J(_a.prototype,{constructor:Da,iter:function(e,t,n){n?this.iterN(e-this.first,t-e,n):this.iterN(this.first,this.first+this.size,e)},insert:function(e,t){for(var n=0,i=0;i<t.length;++i)n+=t[i].height;this.insertInner(e-this.first,t,n)},remove:function(e,t){this.removeInner(e-this.first,t)},getValue:function(e){var t=Ve(this,this.first,this.first+this.size);return!1===e?t:t.join(e||this.lineSeparator())},setValue:nr((function(e){var t=Ze(this.first,0),n=this.first+this.size-1;ua(this,{from:t,to:Ze(n,qe(this,n).text.length),text:this.splitLines(e),origin:"setValue",full:!0},!0),this.cm&&Li(this.cm,0,0),ea(this,Mr(t),W)})),replaceRange:function(e,t,n,i){ma(this,e,t=ot(this,t),n=n?ot(this,n):t,i)},getRange:function(e,t,n){var i=Ue(this,ot(this,e),ot(this,t));return!1===n?i:""===n?i.join(""):i.join(n||this.lineSeparator())},getLine:function(e){var t=this.getLineHandle(e);return t&&t.text},getLineHandle:function(e){if(Je(this,e))return qe(this,e)},getLineNumber:function(e){return Xe(e)},getLineHandleVisualStart:function(e){return"number"==typeof e&&(e=qe(this,e)),Pt(e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return ot(this,e)},getCursor:function(e){var t=this.sel.primary();return null==e||"head"==e?t.head:"anchor"==e?t.anchor:"end"==e||"to"==e||!1===e?t.to():t.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:nr((function(e,t,n){Qr(this,ot(this,"number"==typeof e?Ze(e,t||0):e),null,n)})),setSelection:nr((function(e,t,n){Qr(this,ot(this,e),ot(this,t||e),n)})),extendSelection:nr((function(e,t,n){Xr(this,ot(this,e),t&&ot(this,t),n)})),extendSelections:nr((function(e,t){Yr(this,st(this,e),t)})),extendSelectionsBy:nr((function(e,t){Yr(this,st(this,X(this.sel.ranges,e)),t)})),setSelections:nr((function(e,t,n){if(e.length){for(var i=[],r=0;r<e.length;r++)i[r]=new kr(ot(this,e[r].anchor),ot(this,e[r].head||e[r].anchor));null==t&&(t=Math.min(e.length-1,this.sel.primIndex)),ea(this,Sr(this.cm,i,t),n)}})),addSelection:nr((function(e,t,n){var i=this.sel.ranges.slice(0);i.push(new kr(ot(this,e),ot(this,t||e))),ea(this,Sr(this.cm,i,i.length-1),n)})),getSelection:function(e){for(var t,n=this.sel.ranges,i=0;i<n.length;i++){var r=Ue(this,n[i].from(),n[i].to());t=t?t.concat(r):r}return!1===e?t:t.join(e||this.lineSeparator())},getSelections:function(e){for(var t=[],n=this.sel.ranges,i=0;i<n.length;i++){var r=Ue(this,n[i].from(),n[i].to());!1!==e&&(r=r.join(e||this.lineSeparator())),t[i]=r}return t},replaceSelection:function(e,t,n){for(var i=[],r=0;r<this.sel.ranges.length;r++)i[r]=e;this.replaceSelections(i,t,n||"+input")},replaceSelections:nr((function(e,t,n){for(var i=[],r=this.sel,a=0;a<r.ranges.length;a++){var o=r.ranges[a];i[a]={from:o.from(),to:o.to(),text:this.splitLines(e[a]),origin:n}}for(var s=t&&"end"!=t&&function(e,t,n){for(var i=[],r=Ze(e.first,0),a=r,o=0;o<t.length;o++){var s=t[o],l=Tr(s.from,r,a),c=Tr(Or(s),r,a);if(r=s.to,a=c,"around"==n){var u=e.sel.ranges[o],d=et(u.head,u.anchor)<0;i[o]=new kr(d?c:l,d?l:c)}else i[o]=new kr(l,l)}return new Cr(i,e.sel.primIndex)}(this,i,t),l=i.length-1;l>=0;l--)ua(this,i[l]);s?Zr(this,s):this.cm&&Di(this.cm)})),undo:nr((function(){pa(this,"undo")})),redo:nr((function(){pa(this,"redo")})),undoSelection:nr((function(){pa(this,"undo",!0)})),redoSelection:nr((function(){pa(this,"redo",!0)})),setExtending:function(e){this.extend=e},getExtending:function(){return this.extend},historySize:function(){for(var e=this.history,t=0,n=0,i=0;i<e.done.length;i++)e.done[i].ranges||++t;for(var r=0;r<e.undone.length;r++)e.undone[r].ranges||++n;return{undo:t,redo:n}},clearHistory:function(){var e=this;this.history=new jr(this.history),Ar(this,(function(t){return t.history=e.history}),!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(e){return e&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(e){return this.history.generation==(e||this.cleanGeneration)},getHistory:function(){return{done:Vr(this.history.done),undone:Vr(this.history.undone)}},setHistory:function(e){var t=this.history=new jr(this.history);t.done=Vr(e.done.slice(0),null,!0),t.undone=Vr(e.undone.slice(0),null,!0)},setGutterMarker:nr((function(e,t,n){return ya(this,e,"gutter",(function(e){var i=e.gutterMarkers||(e.gutterMarkers={});return i[t]=n,!n&&te(i)&&(e.gutterMarkers=null),!0}))})),clearGutter:nr((function(e){var t=this;this.iter((function(n){n.gutterMarkers&&n.gutterMarkers[e]&&ya(t,n,"gutter",(function(){return n.gutterMarkers[e]=null,te(n.gutterMarkers)&&(n.gutterMarkers=null),!0}))}))})),lineInfo:function(e){var t;if("number"==typeof e){if(!Je(this,e))return null;if(t=e,!(e=qe(this,e)))return null}else if(null==(t=Xe(e)))return null;return{line:t,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},addLineClass:nr((function(e,t,n){return ya(this,e,"gutter"==t?"gutter":"class",(function(e){var i="text"==t?"textClass":"background"==t?"bgClass":"gutter"==t?"gutterClass":"wrapClass";if(e[i]){if(k(n).test(e[i]))return!1;e[i]+=" "+n}else e[i]=n;return!0}))})),removeLineClass:nr((function(e,t,n){return ya(this,e,"gutter"==t?"gutter":"class",(function(e){var i="text"==t?"textClass":"background"==t?"bgClass":"gutter"==t?"gutterClass":"wrapClass",r=e[i];if(!r)return!1;if(null==n)e[i]=null;else{var a=r.match(k(n));if(!a)return!1;var o=a.index+a[0].length;e[i]=r.slice(0,a.index)+(a.index&&o!=r.length?" ":"")+r.slice(o)||null}return!0}))})),addLineWidget:nr((function(e,t,n){return function(e,t,n,i){var r=new wa(e,n,i),a=e.cm;return a&&r.noHScroll&&(a.display.alignWidgets=!0),ya(e,t,"widget",(function(t){var n=t.widgets||(t.widgets=[]);if(null==r.insertAt?n.push(r):n.splice(Math.min(n.length,Math.max(0,r.insertAt)),0,r),r.line=t,a&&!Bt(e,t)){var i=Wt(t)<e.scrollTop;Ke(t,t.height+xn(r)),i&&Ti(a,r.height),a.curOp.forceUpdate=!0}return!0})),a&&sn(a,"lineWidgetAdded",a,r,"number"==typeof t?t:Xe(t)),r}(this,e,t,n)})),removeLineWidget:function(e){e.clear()},markText:function(e,t,n){return Ma(this,ot(this,e),ot(this,t),n,n&&n.type||"range")},setBookmark:function(e,t){var n={replacedWith:t&&(null==t.nodeType?t.widget:t),insertLeft:t&&t.insertLeft,clearWhenEmpty:!1,shared:t&&t.shared,handleMouseEvents:t&&t.handleMouseEvents};return Ma(this,e=ot(this,e),e,n,"bookmark")},findMarksAt:function(e){var t=[],n=qe(this,(e=ot(this,e)).line).markedSpans;if(n)for(var i=0;i<n.length;++i){var r=n[i];(null==r.from||r.from<=e.ch)&&(null==r.to||r.to>=e.ch)&&t.push(r.marker.parent||r.marker)}return t},findMarks:function(e,t,n){e=ot(this,e),t=ot(this,t);var i=[],r=e.line;return this.iter(e.line,t.line+1,(function(a){var o=a.markedSpans;if(o)for(var s=0;s<o.length;s++){var l=o[s];null!=l.to&&r==e.line&&e.ch>=l.to||null==l.from&&r!=e.line||null!=l.from&&r==t.line&&l.from>=t.ch||n&&!n(l.marker)||i.push(l.marker.parent||l.marker)}++r})),i},getAllMarks:function(){var e=[];return this.iter((function(t){var n=t.markedSpans;if(n)for(var i=0;i<n.length;++i)null!=n[i].from&&e.push(n[i].marker)})),e},posFromIndex:function(e){var t,n=this.first,i=this.lineSeparator().length;return this.iter((function(r){var a=r.text.length+i;if(a>e)return t=e,!0;e-=a,++n})),ot(this,Ze(n,t))},indexFromPos:function(e){var t=(e=ot(this,e)).ch;if(e.line<this.first||e.ch<0)return 0;var n=this.lineSeparator().length;return this.iter(this.first,e.line,(function(e){t+=e.text.length+n})),t},copy:function(e){var t=new Da(Ve(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return t.scrollTop=this.scrollTop,t.scrollLeft=this.scrollLeft,t.sel=this.sel,t.extend=!1,e&&(t.history.undoDepth=this.history.undoDepth,t.setHistory(this.getHistory())),t},linkedDoc:function(e){e||(e={});var t=this.first,n=this.first+this.size;null!=e.from&&e.from>t&&(t=e.from),null!=e.to&&e.to<n&&(n=e.to);var i=new Da(Ve(this,t,n),e.mode||this.modeOption,t,this.lineSep,this.direction);return e.sharedHist&&(i.history=this.history),(this.linked||(this.linked=[])).push({doc:i,sharedHist:e.sharedHist}),i.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}],function(e,t){for(var n=0;n<t.length;n++){var i=t[n],r=i.find(),a=e.clipPos(r.from),o=e.clipPos(r.to);if(et(a,o)){var s=Ma(e,a,o,i.primary,i.primary.type);i.markers.push(s),s.parent=i}}}(i,$a(this)),i},unlinkDoc:function(e){if(e instanceof Eo&&(e=e.doc),this.linked)for(var t=0;t<this.linked.length;++t)if(this.linked[t].doc==e){this.linked.splice(t,1),e.unlinkDoc(this),Ea($a(this));break}if(e.history==this.history){var n=[e.id];Ar(e,(function(e){return n.push(e.id)}),!0),e.history=new jr(null),e.history.done=Vr(this.history.done,n),e.history.undone=Vr(this.history.undone,n)}},iterLinkedDocs:function(e){Ar(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(e){return this.lineSep?e.split(this.lineSep):Te(e)},lineSeparator:function(){return this.lineSep||"\n"},setDirection:nr((function(e){"rtl"!=e&&(e="ltr"),e!=this.direction&&(this.direction=e,this.iter((function(e){return e.order=null})),this.cm&&function(e){Zi(e,(function(){Pr(e),di(e)}))}(this.cm))}))}),Da.prototype.eachLine=Da.prototype.iter;var La=0;function za(e){var t=this;if(Na(t),!me(t,e)&&!_n(t.display,e)){ye(e),o&&(La=+new Date);var n=ci(t,e,!0),i=e.dataTransfer.files;if(n&&!t.isReadOnly())if(i&&i.length&&window.FileReader&&window.File)for(var r=i.length,a=Array(r),s=0,l=function(){++s==r&&er(t,(function(){var e={from:n=ot(t.doc,n),to:n,text:t.doc.splitLines(a.filter((function(e){return null!=e})).join(t.doc.lineSeparator())),origin:"paste"};ua(t.doc,e),Zr(t.doc,Mr(ot(t.doc,n),ot(t.doc,Or(e))))}))()},c=function(e,n){if(t.options.allowDropFileTypes&&-1==B(t.options.allowDropFileTypes,e.type))l();else{var i=new FileReader;i.onerror=function(){return l()},i.onload=function(){var e=i.result;/[\x00-\x08\x0e-\x1f]{2}/.test(e)||(a[n]=e),l()},i.readAsText(e)}},u=0;u<i.length;u++)c(i[u],u);else{if(t.state.draggingText&&t.doc.sel.contains(n)>-1)return t.state.draggingText(e),void setTimeout((function(){return t.display.input.focus()}),20);try{var d=e.dataTransfer.getData("Text");if(d){var p;if(t.state.draggingText&&!t.state.draggingText.copy&&(p=t.listSelections()),ta(t.doc,Mr(n,n)),p)for(var h=0;h<p.length;++h)ma(t.doc,"",p[h].anchor,p[h].head,"drag");t.replaceSelection(d,"around","paste"),t.display.input.focus()}}catch(e){}}}}function Na(e){e.display.dragCursor&&(e.display.lineSpace.removeChild(e.display.dragCursor),e.display.dragCursor=null)}function Aa(e){if(document.getElementsByClassName){for(var t=document.getElementsByClassName("CodeMirror"),n=[],i=0;i<t.length;i++){var r=t[i].CodeMirror;r&&n.push(r)}n.length&&n[0].operation((function(){for(var t=0;t<n.length;t++)e(n[t])}))}}var Ia=!1;function Pa(){Ia||(function(){var e;de(window,"resize",(function(){null==e&&(e=setTimeout((function(){e=null,Aa(ja)}),100))})),de(window,"blur",(function(){return Aa(Si)}))}(),Ia=!0)}function ja(e){var t=e.display;t.cachedCharWidth=t.cachedTextHeight=t.cachedPaddingH=null,t.scrollbarsClipped=!1,e.setSize()}for(var Fa={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},Ba=0;Ba<10;Ba++)Fa[Ba+48]=Fa[Ba+96]=String(Ba);for(var Ra=65;Ra<=90;Ra++)Fa[Ra]=String.fromCharCode(Ra);for(var Wa=1;Wa<=12;Wa++)Fa[Wa+111]=Fa[Wa+63235]="F"+Wa;var Ha={};function Ga(e){var t,n,i,r,a=e.split(/-(?!$)/);e=a[a.length-1];for(var o=0;o<a.length-1;o++){var s=a[o];if(/^(cmd|meta|m)$/i.test(s))r=!0;else if(/^a(lt)?$/i.test(s))t=!0;else if(/^(c|ctrl|control)$/i.test(s))n=!0;else{if(!/^s(hift)?$/i.test(s))throw new Error("Unrecognized modifier name: "+s);i=!0}}return t&&(e="Alt-"+e),n&&(e="Ctrl-"+e),r&&(e="Cmd-"+e),i&&(e="Shift-"+e),e}function qa(e){var t={};for(var n in e)if(e.hasOwnProperty(n)){var i=e[n];if(/^(name|fallthrough|(de|at)tach)$/.test(n))continue;if("..."==i){delete e[n];continue}for(var r=X(n.split(" "),Ga),a=0;a<r.length;a++){var o=void 0,s=void 0;a==r.length-1?(s=r.join(" "),o=i):(s=r.slice(0,a+1).join(" "),o="...");var l=t[s];if(l){if(l!=o)throw new Error("Inconsistent bindings for "+s)}else t[s]=o}delete e[n]}for(var c in t)e[c]=t[c];return e}function Ua(e,t,n,i){var r=(t=Ya(t)).call?t.call(e,i):t[e];if(!1===r)return"nothing";if("..."===r)return"multi";if(null!=r&&n(r))return"handled";if(t.fallthrough){if("[object Array]"!=Object.prototype.toString.call(t.fallthrough))return Ua(e,t.fallthrough,n,i);for(var a=0;a<t.fallthrough.length;a++){var o=Ua(e,t.fallthrough[a],n,i);if(o)return o}}}function Va(e){var t="string"==typeof e?e:Fa[e.keyCode];return"Ctrl"==t||"Alt"==t||"Shift"==t||"Mod"==t}function Ka(e,t,n){var i=e;return t.altKey&&"Alt"!=i&&(e="Alt-"+e),(w?t.metaKey:t.ctrlKey)&&"Ctrl"!=i&&(e="Ctrl-"+e),(w?t.ctrlKey:t.metaKey)&&"Mod"!=i&&(e="Cmd-"+e),!n&&t.shiftKey&&"Shift"!=i&&(e="Shift-"+e),e}function Xa(e,t){if(d&&34==e.keyCode&&e.char)return!1;var n=Fa[e.keyCode];return null!=n&&!e.altGraphKey&&(3==e.keyCode&&e.code&&(n=e.code),Ka(n,e,t))}function Ya(e){return"string"==typeof e?Ha[e]:e}function Ja(e,t){for(var n=e.doc.sel.ranges,i=[],r=0;r<n.length;r++){for(var a=t(n[r]);i.length&&et(a.from,K(i).to)<=0;){var o=i.pop();if(et(o.from,a.from)<0){a.from=o.from;break}}i.push(a)}Zi(e,(function(){for(var t=i.length-1;t>=0;t--)ma(e.doc,"",i[t].from,i[t].to,"+delete");Di(e)}))}function Qa(e,t,n){var i=re(e.text,t+n,n);return i<0||i>e.text.length?null:i}function Za(e,t,n){var i=Qa(e,t.ch,n);return null==i?null:new Ze(t.line,i,n<0?"after":"before")}function eo(e,t,n,i,r){if(e){"rtl"==t.doc.direction&&(r=-r);var a=ce(n,t.doc.direction);if(a){var o,s=r<0?K(a):a[0],l=r<0==(1==s.level)?"after":"before";if(s.level>0||"rtl"==t.doc.direction){var c=Dn(t,n);o=r<0?n.text.length-1:0;var u=Ln(t,c,o).top;o=ae((function(e){return Ln(t,c,e).top==u}),r<0==(1==s.level)?s.from:s.to-1,o),"before"==l&&(o=Qa(n,o,1))}else o=r<0?s.to:s.from;return new Ze(i,o,l)}}return new Ze(i,r<0?n.text.length:0,r<0?"before":"after")}Ha.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},Ha.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},Ha.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},Ha.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},Ha.default=b?Ha.macDefault:Ha.pcDefault;var to={selectAll:la,singleSelection:function(e){return e.setSelection(e.getCursor("anchor"),e.getCursor("head"),W)},killLine:function(e){return Ja(e,(function(t){if(t.empty()){var n=qe(e.doc,t.head.line).text.length;return t.head.ch==n&&t.head.line<e.lastLine()?{from:t.head,to:Ze(t.head.line+1,0)}:{from:t.head,to:Ze(t.head.line,n)}}return{from:t.from(),to:t.to()}}))},deleteLine:function(e){return Ja(e,(function(t){return{from:Ze(t.from().line,0),to:ot(e.doc,Ze(t.to().line+1,0))}}))},delLineLeft:function(e){return Ja(e,(function(e){return{from:Ze(e.from().line,0),to:e.from()}}))},delWrappedLineLeft:function(e){return Ja(e,(function(t){var n=e.charCoords(t.head,"div").top+5;return{from:e.coordsChar({left:0,top:n},"div"),to:t.from()}}))},delWrappedLineRight:function(e){return Ja(e,(function(t){var n=e.charCoords(t.head,"div").top+5,i=e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:n},"div");return{from:t.from(),to:i}}))},undo:function(e){return e.undo()},redo:function(e){return e.redo()},undoSelection:function(e){return e.undoSelection()},redoSelection:function(e){return e.redoSelection()},goDocStart:function(e){return e.extendSelection(Ze(e.firstLine(),0))},goDocEnd:function(e){return e.extendSelection(Ze(e.lastLine()))},goLineStart:function(e){return e.extendSelectionsBy((function(t){return no(e,t.head.line)}),{origin:"+move",bias:1})},goLineStartSmart:function(e){return e.extendSelectionsBy((function(t){return io(e,t.head)}),{origin:"+move",bias:1})},goLineEnd:function(e){return e.extendSelectionsBy((function(t){return function(e,t){var n=qe(e.doc,t),i=function(e){for(var t;t=Nt(e);)e=t.find(1,!0).line;return e}(n);return i!=n&&(t=Xe(i)),eo(!0,e,n,t,-1)}(e,t.head.line)}),{origin:"+move",bias:-1})},goLineRight:function(e){return e.extendSelectionsBy((function(t){var n=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:n},"div")}),G)},goLineLeft:function(e){return e.extendSelectionsBy((function(t){var n=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:0,top:n},"div")}),G)},goLineLeftSmart:function(e){return e.extendSelectionsBy((function(t){var n=e.cursorCoords(t.head,"div").top+5,i=e.coordsChar({left:0,top:n},"div");return i.ch<e.getLine(i.line).search(/\S/)?io(e,t.head):i}),G)},goLineUp:function(e){return e.moveV(-1,"line")},goLineDown:function(e){return e.moveV(1,"line")},goPageUp:function(e){return e.moveV(-1,"page")},goPageDown:function(e){return e.moveV(1,"page")},goCharLeft:function(e){return e.moveH(-1,"char")},goCharRight:function(e){return e.moveH(1,"char")},goColumnLeft:function(e){return e.moveH(-1,"column")},goColumnRight:function(e){return e.moveH(1,"column")},goWordLeft:function(e){return e.moveH(-1,"word")},goGroupRight:function(e){return e.moveH(1,"group")},goGroupLeft:function(e){return e.moveH(-1,"group")},goWordRight:function(e){return e.moveH(1,"word")},delCharBefore:function(e){return e.deleteH(-1,"codepoint")},delCharAfter:function(e){return e.deleteH(1,"char")},delWordBefore:function(e){return e.deleteH(-1,"word")},delWordAfter:function(e){return e.deleteH(1,"word")},delGroupBefore:function(e){return e.deleteH(-1,"group")},delGroupAfter:function(e){return e.deleteH(1,"group")},indentAuto:function(e){return e.indentSelection("smart")},indentMore:function(e){return e.indentSelection("add")},indentLess:function(e){return e.indentSelection("subtract")},insertTab:function(e){return e.replaceSelection("\t")},insertSoftTab:function(e){for(var t=[],n=e.listSelections(),i=e.options.tabSize,r=0;r<n.length;r++){var a=n[r].from(),o=j(e.getLine(a.line),a.ch,i);t.push(V(i-o%i))}e.replaceSelections(t)},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.execCommand("insertTab")},transposeChars:function(e){return Zi(e,(function(){for(var t=e.listSelections(),n=[],i=0;i<t.length;i++)if(t[i].empty()){var r=t[i].head,a=qe(e.doc,r.line).text;if(a)if(r.ch==a.length&&(r=new Ze(r.line,r.ch-1)),r.ch>0)r=new Ze(r.line,r.ch+1),e.replaceRange(a.charAt(r.ch-1)+a.charAt(r.ch-2),Ze(r.line,r.ch-2),r,"+transpose");else if(r.line>e.doc.first){var o=qe(e.doc,r.line-1).text;o&&(r=new Ze(r.line,1),e.replaceRange(a.charAt(0)+e.doc.lineSeparator()+o.charAt(o.length-1),Ze(r.line-1,o.length-1),r,"+transpose"))}n.push(new kr(r,r))}e.setSelections(n)}))},newlineAndIndent:function(e){return Zi(e,(function(){for(var t=e.listSelections(),n=t.length-1;n>=0;n--)e.replaceRange(e.doc.lineSeparator(),t[n].anchor,t[n].head,"+input");t=e.listSelections();for(var i=0;i<t.length;i++)e.indentLine(t[i].from().line,null,!0);Di(e)}))},openLine:function(e){return e.replaceSelection("\n","start")},toggleOverwrite:function(e){return e.toggleOverwrite()}};function no(e,t){var n=qe(e.doc,t),i=Pt(n);return i!=n&&(t=Xe(i)),eo(!0,e,i,t,1)}function io(e,t){var n=no(e,t.line),i=qe(e.doc,n.line),r=ce(i,e.doc.direction);if(!r||0==r[0].level){var a=Math.max(n.ch,i.text.search(/\S/)),o=t.line==n.line&&t.ch<=a&&t.ch;return Ze(n.line,o?0:a,n.sticky)}return n}function ro(e,t,n){if("string"==typeof t&&!(t=to[t]))return!1;e.display.input.ensurePolled();var i=e.display.shift,r=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),n&&(e.display.shift=!1),r=t(e)!=R}finally{e.display.shift=i,e.state.suppressEdits=!1}return r}var ao=new F;function oo(e,t,n,i){var r=e.state.keySeq;if(r){if(Va(t))return"handled";if(/\'$/.test(t)?e.state.keySeq=null:ao.set(50,(function(){e.state.keySeq==r&&(e.state.keySeq=null,e.display.input.reset())})),so(e,r+" "+t,n,i))return!0}return so(e,t,n,i)}function so(e,t,n,i){var r=function(e,t,n){for(var i=0;i<e.state.keyMaps.length;i++){var r=Ua(t,e.state.keyMaps[i],n,e);if(r)return r}return e.options.extraKeys&&Ua(t,e.options.extraKeys,n,e)||Ua(t,e.options.keyMap,n,e)}(e,t,i);return"multi"==r&&(e.state.keySeq=t),"handled"==r&&sn(e,"keyHandled",e,t,n),"handled"!=r&&"multi"!=r||(ye(n),_i(e)),!!r}function lo(e,t){var n=Xa(t,!0);return!!n&&(t.shiftKey&&!e.state.keySeq?oo(e,"Shift-"+n,t,(function(t){return ro(e,t,!0)}))||oo(e,n,t,(function(t){if("string"==typeof t?/^go[A-Z]/.test(t):t.motion)return ro(e,t)})):oo(e,n,t,(function(t){return ro(e,t)})))}var co=null;function uo(e){var t=this;if(!(e.target&&e.target!=t.display.input.getField()||(t.curOp.focus=L(),me(t,e)))){o&&s<11&&27==e.keyCode&&(e.returnValue=!1);var i=e.keyCode;t.display.shift=16==i||e.shiftKey;var r=lo(t,e);d&&(co=r?i:null,r||88!=i||Le||!(b?e.metaKey:e.ctrlKey)||t.replaceSelection("",null,"cut")),n&&!b&&!r&&46==i&&e.shiftKey&&!e.ctrlKey&&document.execCommand&&document.execCommand("cut"),18!=i||/\bCodeMirror-crosshair\b/.test(t.display.lineDiv.className)||function(e){var t=e.display.lineDiv;function n(e){18!=e.keyCode&&e.altKey||(M(t,"CodeMirror-crosshair"),he(document,"keyup",n),he(document,"mouseover",n))}z(t,"CodeMirror-crosshair"),de(document,"keyup",n),de(document,"mouseover",n)}(t)}}function po(e){16==e.keyCode&&(this.doc.sel.shift=!1),me(this,e)}function ho(e){var t=this;if(!(e.target&&e.target!=t.display.input.getField()||_n(t.display,e)||me(t,e)||e.ctrlKey&&!e.altKey||b&&e.metaKey)){var n=e.keyCode,i=e.charCode;if(d&&n==co)return co=null,void ye(e);if(!d||e.which&&!(e.which<10)||!lo(t,e)){var r=String.fromCharCode(null==i?n:i);"\b"!=r&&(function(e,t,n){return oo(e,"'"+n+"'",t,(function(t){return ro(e,t,!0)}))}(t,e,r)||t.display.input.onKeyPress(e))}}}var fo,mo,go=function(e,t,n){this.time=e,this.pos=t,this.button=n};function vo(e){var t=this,n=t.display;if(!(me(t,e)||n.activeTouch&&n.input.supportsTouch()))if(n.input.ensurePolled(),n.shift=e.shiftKey,_n(n,e))l||(n.scroller.draggable=!1,setTimeout((function(){return n.scroller.draggable=!0}),100));else if(!_o(t,e)){var i=ci(t,e),r=ke(e),a=i?function(e,t){var n=+new Date;return mo&&mo.compare(n,e,t)?(fo=mo=null,"triple"):fo&&fo.compare(n,e,t)?(mo=new go(n,e,t),fo=null,"double"):(fo=new go(n,e,t),mo=null,"single")}(i,r):"single";window.focus(),1==r&&t.state.selectingText&&t.state.selectingText(e),i&&function(e,t,n,i,r){var a="Click";return"double"==i?a="Double"+a:"triple"==i&&(a="Triple"+a),oo(e,Ka(a=(1==t?"Left":2==t?"Middle":"Right")+a,r),r,(function(t){if("string"==typeof t&&(t=to[t]),!t)return!1;var i=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),i=t(e,n)!=R}finally{e.state.suppressEdits=!1}return i}))}(t,r,i,a,e)||(1==r?i?function(e,t,n,i){o?setTimeout(I(wi,e),0):e.curOp.focus=L();var r,a=function(e,t,n){var i=e.getOption("configureMouse"),r=i?i(e,t,n):{};if(null==r.unit){var a=y?n.shiftKey&&n.metaKey:n.altKey;r.unit=a?"rectangle":"single"==t?"char":"double"==t?"word":"line"}return(null==r.extend||e.doc.extend)&&(r.extend=e.doc.extend||n.shiftKey),null==r.addNew&&(r.addNew=b?n.metaKey:n.ctrlKey),null==r.moveOnDrag&&(r.moveOnDrag=!(b?n.altKey:n.ctrlKey)),r}(e,n,i),s=e.doc.sel;e.options.dragDrop&&Oe&&!e.isReadOnly()&&"single"==n&&(r=s.contains(t))>-1&&(et((r=s.ranges[r]).from(),t)<0||t.xRel>0)&&(et(r.to(),t)>0||t.xRel<0)?bo(e,i,t,a):function(e,t,n,i){o&&Ci(e);var r=e.display,a=e.doc;ye(t);var s,l,c=a.sel,u=c.ranges;if(i.addNew&&!i.extend?(l=a.sel.contains(n),s=l>-1?u[l]:new kr(n,n)):(s=a.sel.primary(),l=a.sel.primIndex),"rectangle"==i.unit)i.addNew||(s=new kr(n,n)),n=ci(e,t,!0,!0),l=-1;else{var d=yo(e,n,i.unit);s=i.extend?Kr(s,d.anchor,d.head,i.extend):d}i.addNew?-1==l?(l=u.length,ea(a,Sr(e,u.concat([s]),l),{scroll:!1,origin:"*mouse"})):u.length>1&&u[l].empty()&&"char"==i.unit&&!i.extend?(ea(a,Sr(e,u.slice(0,l).concat(u.slice(l+1)),0),{scroll:!1,origin:"*mouse"}),c=a.sel):Jr(a,l,s,H):(l=0,ea(a,new Cr([s],0),H),c=a.sel);var p=n;function h(t){if(0!=et(p,t))if(p=t,"rectangle"==i.unit){for(var r=[],o=e.options.tabSize,u=j(qe(a,n.line).text,n.ch,o),d=j(qe(a,t.line).text,t.ch,o),h=Math.min(u,d),f=Math.max(u,d),m=Math.min(n.line,t.line),g=Math.min(e.lastLine(),Math.max(n.line,t.line));m<=g;m++){var v=qe(a,m).text,b=q(v,h,o);h==f?r.push(new kr(Ze(m,b),Ze(m,b))):v.length>b&&r.push(new kr(Ze(m,b),Ze(m,q(v,f,o))))}r.length||r.push(new kr(n,n)),ea(a,Sr(e,c.ranges.slice(0,l).concat(r),l),{origin:"*mouse",scroll:!1}),e.scrollIntoView(t)}else{var y,x=s,_=yo(e,t,i.unit),w=x.anchor;et(_.anchor,w)>0?(y=_.head,w=rt(x.from(),_.anchor)):(y=_.anchor,w=it(x.to(),_.head));var C=c.ranges.slice(0);C[l]=function(e,t){var n=t.anchor,i=t.head,r=qe(e.doc,n.line);if(0==et(n,i)&&n.sticky==i.sticky)return t;var a=ce(r);if(!a)return t;var o=se(a,n.ch,n.sticky),s=a[o];if(s.from!=n.ch&&s.to!=n.ch)return t;var l,c=o+(s.from==n.ch==(1!=s.level)?0:1);if(0==c||c==a.length)return t;if(i.line!=n.line)l=(i.line-n.line)*("ltr"==e.doc.direction?1:-1)>0;else{var u=se(a,i.ch,i.sticky),d=u-o||(i.ch-n.ch)*(1==s.level?-1:1);l=u==c-1||u==c?d<0:d>0}var p=a[c+(l?-1:0)],h=l==(1==p.level),f=h?p.from:p.to,m=h?"after":"before";return n.ch==f&&n.sticky==m?t:new kr(new Ze(n.line,f,m),i)}(e,new kr(ot(a,w),y)),ea(a,Sr(e,C,l),H)}}var f=r.wrapper.getBoundingClientRect(),m=0;function g(t){var n=++m,o=ci(e,t,!0,"rectangle"==i.unit);if(o)if(0!=et(o,p)){e.curOp.focus=L(),h(o);var s=$i(r,a);(o.line>=s.to||o.line<s.from)&&setTimeout(er(e,(function(){m==n&&g(t)})),150)}else{var l=t.clientY<f.top?-20:t.clientY>f.bottom?20:0;l&&setTimeout(er(e,(function(){m==n&&(r.scroller.scrollTop+=l,g(t))})),50)}}function v(t){e.state.selectingText=!1,m=1/0,t&&(ye(t),r.input.focus()),he(r.wrapper.ownerDocument,"mousemove",b),he(r.wrapper.ownerDocument,"mouseup",y),a.history.lastSelOrigin=null}var b=er(e,(function(e){0!==e.buttons&&ke(e)?g(e):v(e)})),y=er(e,v);e.state.selectingText=y,de(r.wrapper.ownerDocument,"mousemove",b),de(r.wrapper.ownerDocument,"mouseup",y)}(e,i,t,a)}(t,i,a,e):Ce(e)==n.scroller&&ye(e):2==r?(i&&Xr(t.doc,i),setTimeout((function(){return n.input.focus()}),20)):3==r&&(C?t.display.input.onContextMenu(e):Ci(t)))}}function bo(e,t,n,i){var r=e.display,a=!1,c=er(e,(function(t){l&&(r.scroller.draggable=!1),e.state.draggingText=!1,e.state.delayingBlurEvent&&(e.hasFocus()?e.state.delayingBlurEvent=!1:Ci(e)),he(r.wrapper.ownerDocument,"mouseup",c),he(r.wrapper.ownerDocument,"mousemove",u),he(r.scroller,"dragstart",d),he(r.scroller,"drop",c),a||(ye(t),i.addNew||Xr(e.doc,n,null,null,i.extend),l&&!p||o&&9==s?setTimeout((function(){r.wrapper.ownerDocument.body.focus({preventScroll:!0}),r.input.focus()}),20):r.input.focus())})),u=function(e){a=a||Math.abs(t.clientX-e.clientX)+Math.abs(t.clientY-e.clientY)>=10},d=function(){return a=!0};l&&(r.scroller.draggable=!0),e.state.draggingText=c,c.copy=!i.moveOnDrag,de(r.wrapper.ownerDocument,"mouseup",c),de(r.wrapper.ownerDocument,"mousemove",u),de(r.scroller,"dragstart",d),de(r.scroller,"drop",c),e.state.delayingBlurEvent=!0,setTimeout((function(){return r.input.focus()}),20),r.scroller.dragDrop&&r.scroller.dragDrop()}function yo(e,t,n){if("char"==n)return new kr(t,t);if("word"==n)return e.findWordAt(t);if("line"==n)return new kr(Ze(t.line,0),ot(e.doc,Ze(t.line+1,0)));var i=n(e,t);return new kr(i.from,i.to)}function xo(e,t,n,i){var r,a;if(t.touches)r=t.touches[0].clientX,a=t.touches[0].clientY;else try{r=t.clientX,a=t.clientY}catch(e){return!1}if(r>=Math.floor(e.display.gutters.getBoundingClientRect().right))return!1;i&&ye(t);var o=e.display,s=o.lineDiv.getBoundingClientRect();if(a>s.bottom||!ve(e,n))return _e(t);a-=s.top-o.viewOffset;for(var l=0;l<e.display.gutterSpecs.length;++l){var c=o.gutters.childNodes[l];if(c&&c.getBoundingClientRect().right>=r)return fe(e,n,e,Ye(e.doc,a),e.display.gutterSpecs[l].className,t),_e(t)}}function _o(e,t){return xo(e,t,"gutterClick",!0)}function wo(e,t){_n(e.display,t)||function(e,t){return!!ve(e,"gutterContextMenu")&&xo(e,t,"gutterContextMenu",!1)}(e,t)||me(e,t,"contextmenu")||C||e.display.input.onContextMenu(t)}function Co(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-"),Bn(e)}go.prototype.compare=function(e,t,n){return this.time+400>e&&0==et(t,this.pos)&&n==this.button};var ko={toString:function(){return"CodeMirror.Init"}},So={},Mo={};function Oo(e,t,n){if(!t!=!(n&&n!=ko)){var i=e.display.dragFunctions,r=t?de:he;r(e.display.scroller,"dragstart",i.start),r(e.display.scroller,"dragenter",i.enter),r(e.display.scroller,"dragover",i.over),r(e.display.scroller,"dragleave",i.leave),r(e.display.scroller,"drop",i.drop)}}function $o(e){e.options.lineWrapping?(z(e.display.wrapper,"CodeMirror-wrap"),e.display.sizer.style.minWidth="",e.display.sizerWidth=null):(M(e.display.wrapper,"CodeMirror-wrap"),Gt(e)),li(e),di(e),Bn(e),setTimeout((function(){return Ri(e)}),100)}function Eo(e,t){var n=this;if(!(this instanceof Eo))return new Eo(e,t);this.options=t=t?P(t):{},P(So,t,!1);var i=t.value;"string"==typeof i?i=new Da(i,t.mode,null,t.lineSeparator,t.direction):t.mode&&(i.modeOption=t.mode),this.doc=i;var r=new Eo.inputStyles[t.inputStyle](this),a=this.display=new vr(e,i,r,t);for(var c in a.wrapper.CodeMirror=this,Co(this),t.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),Gi(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new F,keySeq:null,specialChars:null},t.autofocus&&!v&&a.input.focus(),o&&s<11&&setTimeout((function(){return n.display.input.reset(!0)}),20),function(e){var t=e.display;de(t.scroller,"mousedown",er(e,vo)),de(t.scroller,"dblclick",o&&s<11?er(e,(function(t){if(!me(e,t)){var n=ci(e,t);if(n&&!_o(e,t)&&!_n(e.display,t)){ye(t);var i=e.findWordAt(n);Xr(e.doc,i.anchor,i.head)}}})):function(t){return me(e,t)||ye(t)}),de(t.scroller,"contextmenu",(function(t){return wo(e,t)})),de(t.input.getField(),"contextmenu",(function(n){t.scroller.contains(n.target)||wo(e,n)}));var n,i={end:0};function r(){t.activeTouch&&(n=setTimeout((function(){return t.activeTouch=null}),1e3),(i=t.activeTouch).end=+new Date)}function a(e,t){if(null==t.left)return!0;var n=t.left-e.left,i=t.top-e.top;return n*n+i*i>400}de(t.scroller,"touchstart",(function(r){if(!me(e,r)&&!function(e){if(1!=e.touches.length)return!1;var t=e.touches[0];return t.radiusX<=1&&t.radiusY<=1}(r)&&!_o(e,r)){t.input.ensurePolled(),clearTimeout(n);var a=+new Date;t.activeTouch={start:a,moved:!1,prev:a-i.end<=300?i:null},1==r.touches.length&&(t.activeTouch.left=r.touches[0].pageX,t.activeTouch.top=r.touches[0].pageY)}})),de(t.scroller,"touchmove",(function(){t.activeTouch&&(t.activeTouch.moved=!0)})),de(t.scroller,"touchend",(function(n){var i=t.activeTouch;if(i&&!_n(t,n)&&null!=i.left&&!i.moved&&new Date-i.start<300){var o,s=e.coordsChar(t.activeTouch,"page");o=!i.prev||a(i,i.prev)?new kr(s,s):!i.prev.prev||a(i,i.prev.prev)?e.findWordAt(s):new kr(Ze(s.line,0),ot(e.doc,Ze(s.line+1,0))),e.setSelection(o.anchor,o.head),e.focus(),ye(n)}r()})),de(t.scroller,"touchcancel",r),de(t.scroller,"scroll",(function(){t.scroller.clientHeight&&(Ai(e,t.scroller.scrollTop),Pi(e,t.scroller.scrollLeft,!0),fe(e,"scroll",e))})),de(t.scroller,"mousewheel",(function(t){return wr(e,t)})),de(t.scroller,"DOMMouseScroll",(function(t){return wr(e,t)})),de(t.wrapper,"scroll",(function(){return t.wrapper.scrollTop=t.wrapper.scrollLeft=0})),t.dragFunctions={enter:function(t){me(e,t)||we(t)},over:function(t){me(e,t)||(function(e,t){var n=ci(e,t);if(n){var i=document.createDocumentFragment();bi(e,n,i),e.display.dragCursor||(e.display.dragCursor=E("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),e.display.lineSpace.insertBefore(e.display.dragCursor,e.display.cursorDiv)),$(e.display.dragCursor,i)}}(e,t),we(t))},start:function(t){return function(e,t){if(o&&(!e.state.draggingText||+new Date-La<100))we(t);else if(!me(e,t)&&!_n(e.display,t)&&(t.dataTransfer.setData("Text",e.getSelection()),t.dataTransfer.effectAllowed="copyMove",t.dataTransfer.setDragImage&&!p)){var n=E("img",null,null,"position: fixed; left: 0; top: 0;");n.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",d&&(n.width=n.height=1,e.display.wrapper.appendChild(n),n._top=n.offsetTop),t.dataTransfer.setDragImage(n,0,0),d&&n.parentNode.removeChild(n)}}(e,t)},drop:er(e,za),leave:function(t){me(e,t)||Na(e)}};var l=t.input.getField();de(l,"keyup",(function(t){return po.call(e,t)})),de(l,"keydown",er(e,uo)),de(l,"keypress",er(e,ho)),de(l,"focus",(function(t){return ki(e,t)})),de(l,"blur",(function(t){return Si(e,t)}))}(this),Pa(),Ui(this),this.curOp.forceUpdate=!0,Ir(this,i),t.autofocus&&!v||this.hasFocus()?setTimeout((function(){n.hasFocus()&&!n.state.focused&&ki(n)}),20):Si(this),Mo)Mo.hasOwnProperty(c)&&Mo[c](this,t[c],ko);hr(this),t.finishInit&&t.finishInit(this);for(var u=0;u<To.length;++u)To[u](this);Vi(this),l&&t.lineWrapping&&"optimizelegibility"==getComputedStyle(a.lineDiv).textRendering&&(a.lineDiv.style.textRendering="auto")}Eo.defaults=So,Eo.optionHandlers=Mo;var To=[];function Do(e,t,n,i){var r,a=e.doc;null==n&&(n="add"),"smart"==n&&(a.mode.indent?r=pt(e,t).state:n="prev");var o=e.options.tabSize,s=qe(a,t),l=j(s.text,null,o);s.stateAfter&&(s.stateAfter=null);var c,u=s.text.match(/^\s*/)[0];if(i||/\S/.test(s.text)){if("smart"==n&&((c=a.mode.indent(r,s.text.slice(u.length),s.text))==R||c>150)){if(!i)return;n="prev"}}else c=0,n="not";"prev"==n?c=t>a.first?j(qe(a,t-1).text,null,o):0:"add"==n?c=l+e.options.indentUnit:"subtract"==n?c=l-e.options.indentUnit:"number"==typeof n&&(c=l+n),c=Math.max(0,c);var d="",p=0;if(e.options.indentWithTabs)for(var h=Math.floor(c/o);h;--h)p+=o,d+="\t";if(p<c&&(d+=V(c-p)),d!=u)return ma(a,d,Ze(t,0),Ze(t,u.length),"+input"),s.stateAfter=null,!0;for(var f=0;f<a.sel.ranges.length;f++){var m=a.sel.ranges[f];if(m.head.line==t&&m.head.ch<u.length){var g=Ze(t,u.length);Jr(a,f,new kr(g,g));break}}}Eo.defineInitHook=function(e){return To.push(e)};var Lo=null;function zo(e){Lo=e}function No(e,t,n,i,r){var a=e.doc;e.display.shift=!1,i||(i=a.sel);var o=+new Date-200,s="paste"==r||e.state.pasteIncoming>o,l=Te(t),c=null;if(s&&i.ranges.length>1)if(Lo&&Lo.text.join("\n")==t){if(i.ranges.length%Lo.text.length==0){c=[];for(var u=0;u<Lo.text.length;u++)c.push(a.splitLines(Lo.text[u]))}}else l.length==i.ranges.length&&e.options.pasteLinesPerSelection&&(c=X(l,(function(e){return[e]})));for(var d=e.curOp.updateInput,p=i.ranges.length-1;p>=0;p--){var h=i.ranges[p],f=h.from(),m=h.to();h.empty()&&(n&&n>0?f=Ze(f.line,f.ch-n):e.state.overwrite&&!s?m=Ze(m.line,Math.min(qe(a,m.line).text.length,m.ch+K(l).length)):s&&Lo&&Lo.lineWise&&Lo.text.join("\n")==l.join("\n")&&(f=m=Ze(f.line,0)));var g={from:f,to:m,text:c?c[p%c.length]:l,origin:r||(s?"paste":e.state.cutIncoming>o?"cut":"+input")};ua(e.doc,g),sn(e,"inputRead",e,g)}t&&!s&&Io(e,t),Di(e),e.curOp.updateInput<2&&(e.curOp.updateInput=d),e.curOp.typing=!0,e.state.pasteIncoming=e.state.cutIncoming=-1}function Ao(e,t){var n=e.clipboardData&&e.clipboardData.getData("Text");if(n)return e.preventDefault(),t.isReadOnly()||t.options.disableInput||Zi(t,(function(){return No(t,n,0,null,"paste")})),!0}function Io(e,t){if(e.options.electricChars&&e.options.smartIndent)for(var n=e.doc.sel,i=n.ranges.length-1;i>=0;i--){var r=n.ranges[i];if(!(r.head.ch>100||i&&n.ranges[i-1].head.line==r.head.line)){var a=e.getModeAt(r.head),o=!1;if(a.electricChars){for(var s=0;s<a.electricChars.length;s++)if(t.indexOf(a.electricChars.charAt(s))>-1){o=Do(e,r.head.line,"smart");break}}else a.electricInput&&a.electricInput.test(qe(e.doc,r.head.line).text.slice(0,r.head.ch))&&(o=Do(e,r.head.line,"smart"));o&&sn(e,"electricInput",e,r.head.line)}}}function Po(e){for(var t=[],n=[],i=0;i<e.doc.sel.ranges.length;i++){var r=e.doc.sel.ranges[i].head.line,a={anchor:Ze(r,0),head:Ze(r+1,0)};n.push(a),t.push(e.getRange(a.anchor,a.head))}return{text:t,ranges:n}}function jo(e,t,n,i){e.setAttribute("autocorrect",n?"":"off"),e.setAttribute("autocapitalize",i?"":"off"),e.setAttribute("spellcheck",!!t)}function Fo(){var e=E("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none"),t=E("div",[e],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return l?e.style.width="1000px":e.setAttribute("wrap","off"),m&&(e.style.border="1px solid black"),jo(e),t}function Bo(e,t,n,i,r){var a=t,o=n,s=qe(e,t.line),l=r&&"rtl"==e.direction?-n:n;function c(a){var o;if("codepoint"==i){var c=s.text.charCodeAt(t.ch+(n>0?0:-1));if(isNaN(c))o=null;else{var u=n>0?c>=55296&&c<56320:c>=56320&&c<57343;o=new Ze(t.line,Math.max(0,Math.min(s.text.length,t.ch+n*(u?2:1))),-n)}}else o=r?function(e,t,n,i){var r=ce(t,e.doc.direction);if(!r)return Za(t,n,i);n.ch>=t.text.length?(n.ch=t.text.length,n.sticky="before"):n.ch<=0&&(n.ch=0,n.sticky="after");var a=se(r,n.ch,n.sticky),o=r[a];if("ltr"==e.doc.direction&&o.level%2==0&&(i>0?o.to>n.ch:o.from<n.ch))return Za(t,n,i);var s,l=function(e,n){return Qa(t,e instanceof Ze?e.ch:e,n)},c=function(n){return e.options.lineWrapping?(s=s||Dn(e,t),Qn(e,t,s,n)):{begin:0,end:t.text.length}},u=c("before"==n.sticky?l(n,-1):n.ch);if("rtl"==e.doc.direction||1==o.level){var d=1==o.level==i<0,p=l(n,d?1:-1);if(null!=p&&(d?p<=o.to&&p<=u.end:p>=o.from&&p>=u.begin)){var h=d?"before":"after";return new Ze(n.line,p,h)}}var f=function(e,t,i){for(var a=function(e,t){return t?new Ze(n.line,l(e,1),"before"):new Ze(n.line,e,"after")};e>=0&&e<r.length;e+=t){var o=r[e],s=t>0==(1!=o.level),c=s?i.begin:l(i.end,-1);if(o.from<=c&&c<o.to)return a(c,s);if(c=s?o.from:l(o.to,-1),i.begin<=c&&c<i.end)return a(c,s)}},m=f(a+i,i,u);if(m)return m;var g=i>0?u.end:l(u.begin,-1);return null==g||i>0&&g==t.text.length||!(m=f(i>0?0:r.length-1,i,c(g)))?null:m}(e.cm,s,t,n):Za(s,t,n);if(null==o){if(a||!function(){var n=t.line+l;return!(n<e.first||n>=e.first+e.size)&&(t=new Ze(n,t.ch,t.sticky),s=qe(e,n))}())return!1;t=eo(r,e.cm,s,t.line,l)}else t=o;return!0}if("char"==i||"codepoint"==i)c();else if("column"==i)c(!0);else if("word"==i||"group"==i)for(var u=null,d="group"==i,p=e.cm&&e.cm.getHelper(t,"wordChars"),h=!0;!(n<0)||c(!h);h=!1){var f=s.text.charAt(t.ch)||"\n",m=ee(f,p)?"w":d&&"\n"==f?"n":!d||/\s/.test(f)?null:"p";if(!d||h||m||(m="s"),u&&u!=m){n<0&&(n=1,c(),t.sticky="after");break}if(m&&(u=m),n>0&&!c(!h))break}var g=oa(e,t,a,o,!0);return tt(a,g)&&(g.hitSide=!0),g}function Ro(e,t,n,i){var r,a,o=e.doc,s=t.left;if("page"==i){var l=Math.min(e.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),c=Math.max(l-.5*ii(e.display),3);r=(n>0?t.bottom:t.top)+n*c}else"line"==i&&(r=n>0?t.bottom+3:t.top-3);for(;(a=Yn(e,s,r)).outside;){if(n<0?r<=0:r>=o.height){a.hitSide=!0;break}r+=5*n}return a}var Wo=function(e){this.cm=e,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new F,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};function Ho(e,t){var n=Tn(e,t.line);if(!n||n.hidden)return null;var i=qe(e.doc,t.line),r=$n(n,i,t.line),a=ce(i,e.doc.direction),o="left";a&&(o=se(a,t.ch)%2?"right":"left");var s=An(r.map,t.ch,o);return s.offset="right"==s.collapse?s.end:s.start,s}function Go(e,t){return t&&(e.bad=!0),e}function qo(e,t,n){var i;if(t==e.display.lineDiv){if(!(i=e.display.lineDiv.childNodes[n]))return Go(e.clipPos(Ze(e.display.viewTo-1)),!0);t=null,n=0}else for(i=t;;i=i.parentNode){if(!i||i==e.display.lineDiv)return null;if(i.parentNode&&i.parentNode==e.display.lineDiv)break}for(var r=0;r<e.display.view.length;r++){var a=e.display.view[r];if(a.node==i)return Uo(a,t,n)}}function Uo(e,t,n){var i=e.text.firstChild,r=!1;if(!t||!D(i,t))return Go(Ze(Xe(e.line),0),!0);if(t==i&&(r=!0,t=i.childNodes[n],n=0,!t)){var a=e.rest?K(e.rest):e.line;return Go(Ze(Xe(a),a.text.length),r)}var o=3==t.nodeType?t:null,s=t;for(o||1!=t.childNodes.length||3!=t.firstChild.nodeType||(o=t.firstChild,n&&(n=o.nodeValue.length));s.parentNode!=i;)s=s.parentNode;var l=e.measure,c=l.maps;function u(t,n,i){for(var r=-1;r<(c?c.length:0);r++)for(var a=r<0?l.map:c[r],o=0;o<a.length;o+=3){var s=a[o+2];if(s==t||s==n){var u=Xe(r<0?e.line:e.rest[r]),d=a[o]+i;return(i<0||s!=t)&&(d=a[o+(i?1:0)]),Ze(u,d)}}}var d=u(o,s,n);if(d)return Go(d,r);for(var p=s.nextSibling,h=o?o.nodeValue.length-n:0;p;p=p.nextSibling){if(d=u(p,p.firstChild,0))return Go(Ze(d.line,d.ch-h),r);h+=p.textContent.length}for(var f=s.previousSibling,m=n;f;f=f.previousSibling){if(d=u(f,f.firstChild,-1))return Go(Ze(d.line,d.ch+m),r);m+=f.textContent.length}}Wo.prototype.init=function(e){var t=this,n=this,i=n.cm,r=n.div=e.lineDiv;function a(e){for(var t=e.target;t;t=t.parentNode){if(t==r)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(t.className))break}return!1}function o(e){if(a(e)&&!me(i,e)){if(i.somethingSelected())zo({lineWise:!1,text:i.getSelections()}),"cut"==e.type&&i.replaceSelection("",null,"cut");else{if(!i.options.lineWiseCopyCut)return;var t=Po(i);zo({lineWise:!0,text:t.text}),"cut"==e.type&&i.operation((function(){i.setSelections(t.ranges,0,W),i.replaceSelection("",null,"cut")}))}if(e.clipboardData){e.clipboardData.clearData();var o=Lo.text.join("\n");if(e.clipboardData.setData("Text",o),e.clipboardData.getData("Text")==o)return void e.preventDefault()}var s=Fo(),l=s.firstChild;i.display.lineSpace.insertBefore(s,i.display.lineSpace.firstChild),l.value=Lo.text.join("\n");var c=L();A(l),setTimeout((function(){i.display.lineSpace.removeChild(s),c.focus(),c==r&&n.showPrimarySelection()}),50)}}r.contentEditable=!0,jo(r,i.options.spellcheck,i.options.autocorrect,i.options.autocapitalize),de(r,"paste",(function(e){!a(e)||me(i,e)||Ao(e,i)||s<=11&&setTimeout(er(i,(function(){return t.updateFromDOM()})),20)})),de(r,"compositionstart",(function(e){t.composing={data:e.data,done:!1}})),de(r,"compositionupdate",(function(e){t.composing||(t.composing={data:e.data,done:!1})})),de(r,"compositionend",(function(e){t.composing&&(e.data!=t.composing.data&&t.readFromDOMSoon(),t.composing.done=!0)})),de(r,"touchstart",(function(){return n.forceCompositionEnd()})),de(r,"input",(function(){t.composing||t.readFromDOMSoon()})),de(r,"copy",o),de(r,"cut",o)},Wo.prototype.screenReaderLabelChanged=function(e){e?this.div.setAttribute("aria-label",e):this.div.removeAttribute("aria-label")},Wo.prototype.prepareSelection=function(){var e=vi(this.cm,!1);return e.focus=L()==this.div,e},Wo.prototype.showSelection=function(e,t){e&&this.cm.display.view.length&&((e.focus||t)&&this.showPrimarySelection(),this.showMultipleSelections(e))},Wo.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},Wo.prototype.showPrimarySelection=function(){var e=this.getSelection(),t=this.cm,i=t.doc.sel.primary(),r=i.from(),a=i.to();if(t.display.viewTo==t.display.viewFrom||r.line>=t.display.viewTo||a.line<t.display.viewFrom)e.removeAllRanges();else{var o=qo(t,e.anchorNode,e.anchorOffset),s=qo(t,e.focusNode,e.focusOffset);if(!o||o.bad||!s||s.bad||0!=et(rt(o,s),r)||0!=et(it(o,s),a)){var l=t.display.view,c=r.line>=t.display.viewFrom&&Ho(t,r)||{node:l[0].measure.map[2],offset:0},u=a.line<t.display.viewTo&&Ho(t,a);if(!u){var d=l[l.length-1].measure,p=d.maps?d.maps[d.maps.length-1]:d.map;u={node:p[p.length-1],offset:p[p.length-2]-p[p.length-3]}}if(c&&u){var h,f=e.rangeCount&&e.getRangeAt(0);try{h=S(c.node,c.offset,u.offset,u.node)}catch(e){}h&&(!n&&t.state.focused?(e.collapse(c.node,c.offset),h.collapsed||(e.removeAllRanges(),e.addRange(h))):(e.removeAllRanges(),e.addRange(h)),f&&null==e.anchorNode?e.addRange(f):n&&this.startGracePeriod()),this.rememberSelection()}else e.removeAllRanges()}}},Wo.prototype.startGracePeriod=function(){var e=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout((function(){e.gracePeriod=!1,e.selectionChanged()&&e.cm.operation((function(){return e.cm.curOp.selectionChanged=!0}))}),20)},Wo.prototype.showMultipleSelections=function(e){$(this.cm.display.cursorDiv,e.cursors),$(this.cm.display.selectionDiv,e.selection)},Wo.prototype.rememberSelection=function(){var e=this.getSelection();this.lastAnchorNode=e.anchorNode,this.lastAnchorOffset=e.anchorOffset,this.lastFocusNode=e.focusNode,this.lastFocusOffset=e.focusOffset},Wo.prototype.selectionInEditor=function(){var e=this.getSelection();if(!e.rangeCount)return!1;var t=e.getRangeAt(0).commonAncestorContainer;return D(this.div,t)},Wo.prototype.focus=function(){"nocursor"!=this.cm.options.readOnly&&(this.selectionInEditor()&&L()==this.div||this.showSelection(this.prepareSelection(),!0),this.div.focus())},Wo.prototype.blur=function(){this.div.blur()},Wo.prototype.getField=function(){return this.div},Wo.prototype.supportsTouch=function(){return!0},Wo.prototype.receivedFocus=function(){var e=this;this.selectionInEditor()?this.pollSelection():Zi(this.cm,(function(){return e.cm.curOp.selectionChanged=!0})),this.polling.set(this.cm.options.pollInterval,(function t(){e.cm.state.focused&&(e.pollSelection(),e.polling.set(e.cm.options.pollInterval,t))}))},Wo.prototype.selectionChanged=function(){var e=this.getSelection();return e.anchorNode!=this.lastAnchorNode||e.anchorOffset!=this.lastAnchorOffset||e.focusNode!=this.lastFocusNode||e.focusOffset!=this.lastFocusOffset},Wo.prototype.pollSelection=function(){if(null==this.readDOMTimeout&&!this.gracePeriod&&this.selectionChanged()){var e=this.getSelection(),t=this.cm;if(g&&u&&this.cm.display.gutterSpecs.length&&function(e){for(var t=e;t;t=t.parentNode)if(/CodeMirror-gutter-wrapper/.test(t.className))return!0;return!1}(e.anchorNode))return this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),void this.focus();if(!this.composing){this.rememberSelection();var n=qo(t,e.anchorNode,e.anchorOffset),i=qo(t,e.focusNode,e.focusOffset);n&&i&&Zi(t,(function(){ea(t.doc,Mr(n,i),W),(n.bad||i.bad)&&(t.curOp.selectionChanged=!0)}))}}},Wo.prototype.pollContent=function(){null!=this.readDOMTimeout&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var e,t,n,i=this.cm,r=i.display,a=i.doc.sel.primary(),o=a.from(),s=a.to();if(0==o.ch&&o.line>i.firstLine()&&(o=Ze(o.line-1,qe(i.doc,o.line-1).length)),s.ch==qe(i.doc,s.line).text.length&&s.line<i.lastLine()&&(s=Ze(s.line+1,0)),o.line<r.viewFrom||s.line>r.viewTo-1)return!1;o.line==r.viewFrom||0==(e=ui(i,o.line))?(t=Xe(r.view[0].line),n=r.view[0].node):(t=Xe(r.view[e].line),n=r.view[e-1].node.nextSibling);var l,c,u=ui(i,s.line);if(u==r.view.length-1?(l=r.viewTo-1,c=r.lineDiv.lastChild):(l=Xe(r.view[u+1].line)-1,c=r.view[u+1].node.previousSibling),!n)return!1;for(var d=i.doc.splitLines(function(e,t,n,i,r){var a="",o=!1,s=e.doc.lineSeparator(),l=!1;function c(){o&&(a+=s,l&&(a+=s),o=l=!1)}function u(e){e&&(c(),a+=e)}function d(t){if(1==t.nodeType){var n=t.getAttribute("cm-text");if(n)return void u(n);var a,p=t.getAttribute("cm-marker");if(p){var h=e.findMarks(Ze(i,0),Ze(r+1,0),function(e){return function(t){return t.id==e}}(+p));return void(h.length&&(a=h[0].find(0))&&u(Ue(e.doc,a.from,a.to).join(s)))}if("false"==t.getAttribute("contenteditable"))return;var f=/^(pre|div|p|li|table|br)$/i.test(t.nodeName);if(!/^br$/i.test(t.nodeName)&&0==t.textContent.length)return;f&&c();for(var m=0;m<t.childNodes.length;m++)d(t.childNodes[m]);/^(pre|p)$/i.test(t.nodeName)&&(l=!0),f&&(o=!0)}else 3==t.nodeType&&u(t.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(;d(t),t!=n;)t=t.nextSibling,l=!1;return a}(i,n,c,t,l)),p=Ue(i.doc,Ze(t,0),Ze(l,qe(i.doc,l).text.length));d.length>1&&p.length>1;)if(K(d)==K(p))d.pop(),p.pop(),l--;else{if(d[0]!=p[0])break;d.shift(),p.shift(),t++}for(var h=0,f=0,m=d[0],g=p[0],v=Math.min(m.length,g.length);h<v&&m.charCodeAt(h)==g.charCodeAt(h);)++h;for(var b=K(d),y=K(p),x=Math.min(b.length-(1==d.length?h:0),y.length-(1==p.length?h:0));f<x&&b.charCodeAt(b.length-f-1)==y.charCodeAt(y.length-f-1);)++f;if(1==d.length&&1==p.length&&t==o.line)for(;h&&h>o.ch&&b.charCodeAt(b.length-f-1)==y.charCodeAt(y.length-f-1);)h--,f++;d[d.length-1]=b.slice(0,b.length-f).replace(/^\u200b+/,""),d[0]=d[0].slice(h).replace(/\u200b+$/,"");var _=Ze(t,h),w=Ze(l,p.length?K(p).length-f:0);return d.length>1||d[0]||et(_,w)?(ma(i.doc,d,_,w,"+input"),!0):void 0},Wo.prototype.ensurePolled=function(){this.forceCompositionEnd()},Wo.prototype.reset=function(){this.forceCompositionEnd()},Wo.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},Wo.prototype.readFromDOMSoon=function(){var e=this;null==this.readDOMTimeout&&(this.readDOMTimeout=setTimeout((function(){if(e.readDOMTimeout=null,e.composing){if(!e.composing.done)return;e.composing=null}e.updateFromDOM()}),80))},Wo.prototype.updateFromDOM=function(){var e=this;!this.cm.isReadOnly()&&this.pollContent()||Zi(this.cm,(function(){return di(e.cm)}))},Wo.prototype.setUneditable=function(e){e.contentEditable="false"},Wo.prototype.onKeyPress=function(e){0==e.charCode||this.composing||(e.preventDefault(),this.cm.isReadOnly()||er(this.cm,No)(this.cm,String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),0))},Wo.prototype.readOnlyChanged=function(e){this.div.contentEditable=String("nocursor"!=e)},Wo.prototype.onContextMenu=function(){},Wo.prototype.resetPosition=function(){},Wo.prototype.needsContentAttribute=!0;var Vo=function(e){this.cm=e,this.prevInput="",this.pollingFast=!1,this.polling=new F,this.hasSelection=!1,this.composing=null};Vo.prototype.init=function(e){var t=this,n=this,i=this.cm;this.createField(e);var r=this.textarea;function a(e){if(!me(i,e)){if(i.somethingSelected())zo({lineWise:!1,text:i.getSelections()});else{if(!i.options.lineWiseCopyCut)return;var t=Po(i);zo({lineWise:!0,text:t.text}),"cut"==e.type?i.setSelections(t.ranges,null,W):(n.prevInput="",r.value=t.text.join("\n"),A(r))}"cut"==e.type&&(i.state.cutIncoming=+new Date)}}e.wrapper.insertBefore(this.wrapper,e.wrapper.firstChild),m&&(r.style.width="0px"),de(r,"input",(function(){o&&s>=9&&t.hasSelection&&(t.hasSelection=null),n.poll()})),de(r,"paste",(function(e){me(i,e)||Ao(e,i)||(i.state.pasteIncoming=+new Date,n.fastPoll())})),de(r,"cut",a),de(r,"copy",a),de(e.scroller,"paste",(function(t){if(!_n(e,t)&&!me(i,t)){if(!r.dispatchEvent)return i.state.pasteIncoming=+new Date,void n.focus();var a=new Event("paste");a.clipboardData=t.clipboardData,r.dispatchEvent(a)}})),de(e.lineSpace,"selectstart",(function(t){_n(e,t)||ye(t)})),de(r,"compositionstart",(function(){var e=i.getCursor("from");n.composing&&n.composing.range.clear(),n.composing={start:e,range:i.markText(e,i.getCursor("to"),{className:"CodeMirror-composing"})}})),de(r,"compositionend",(function(){n.composing&&(n.poll(),n.composing.range.clear(),n.composing=null)}))},Vo.prototype.createField=function(e){this.wrapper=Fo(),this.textarea=this.wrapper.firstChild},Vo.prototype.screenReaderLabelChanged=function(e){e?this.textarea.setAttribute("aria-label",e):this.textarea.removeAttribute("aria-label")},Vo.prototype.prepareSelection=function(){var e=this.cm,t=e.display,n=e.doc,i=vi(e);if(e.options.moveInputWithCursor){var r=Vn(e,n.sel.primary().head,"div"),a=t.wrapper.getBoundingClientRect(),o=t.lineDiv.getBoundingClientRect();i.teTop=Math.max(0,Math.min(t.wrapper.clientHeight-10,r.top+o.top-a.top)),i.teLeft=Math.max(0,Math.min(t.wrapper.clientWidth-10,r.left+o.left-a.left))}return i},Vo.prototype.showSelection=function(e){var t=this.cm.display;$(t.cursorDiv,e.cursors),$(t.selectionDiv,e.selection),null!=e.teTop&&(this.wrapper.style.top=e.teTop+"px",this.wrapper.style.left=e.teLeft+"px")},Vo.prototype.reset=function(e){if(!this.contextMenuPending&&!this.composing){var t=this.cm;if(t.somethingSelected()){this.prevInput="";var n=t.getSelection();this.textarea.value=n,t.state.focused&&A(this.textarea),o&&s>=9&&(this.hasSelection=n)}else e||(this.prevInput=this.textarea.value="",o&&s>=9&&(this.hasSelection=null))}},Vo.prototype.getField=function(){return this.textarea},Vo.prototype.supportsTouch=function(){return!1},Vo.prototype.focus=function(){if("nocursor"!=this.cm.options.readOnly&&(!v||L()!=this.textarea))try{this.textarea.focus()}catch(e){}},Vo.prototype.blur=function(){this.textarea.blur()},Vo.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},Vo.prototype.receivedFocus=function(){this.slowPoll()},Vo.prototype.slowPoll=function(){var e=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,(function(){e.poll(),e.cm.state.focused&&e.slowPoll()}))},Vo.prototype.fastPoll=function(){var e=!1,t=this;t.pollingFast=!0,t.polling.set(20,(function n(){t.poll()||e?(t.pollingFast=!1,t.slowPoll()):(e=!0,t.polling.set(60,n))}))},Vo.prototype.poll=function(){var e=this,t=this.cm,n=this.textarea,i=this.prevInput;if(this.contextMenuPending||!t.state.focused||De(n)&&!i&&!this.composing||t.isReadOnly()||t.options.disableInput||t.state.keySeq)return!1;var r=n.value;if(r==i&&!t.somethingSelected())return!1;if(o&&s>=9&&this.hasSelection===r||b&&/[\uf700-\uf7ff]/.test(r))return t.display.input.reset(),!1;if(t.doc.sel==t.display.selForContextMenu){var a=r.charCodeAt(0);if(8203!=a||i||(i=""),8666==a)return this.reset(),this.cm.execCommand("undo")}for(var l=0,c=Math.min(i.length,r.length);l<c&&i.charCodeAt(l)==r.charCodeAt(l);)++l;return Zi(t,(function(){No(t,r.slice(l),i.length-l,null,e.composing?"*compose":null),r.length>1e3||r.indexOf("\n")>-1?n.value=e.prevInput="":e.prevInput=r,e.composing&&(e.composing.range.clear(),e.composing.range=t.markText(e.composing.start,t.getCursor("to"),{className:"CodeMirror-composing"}))})),!0},Vo.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},Vo.prototype.onKeyPress=function(){o&&s>=9&&(this.hasSelection=null),this.fastPoll()},Vo.prototype.onContextMenu=function(e){var t=this,n=t.cm,i=n.display,r=t.textarea;t.contextMenuPending&&t.contextMenuPending();var a=ci(n,e),c=i.scroller.scrollTop;if(a&&!d){n.options.resetSelectionOnContextMenu&&-1==n.doc.sel.contains(a)&&er(n,ea)(n.doc,Mr(a),W);var u,p=r.style.cssText,h=t.wrapper.style.cssText,f=t.wrapper.offsetParent.getBoundingClientRect();if(t.wrapper.style.cssText="position: static",r.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(e.clientY-f.top-5)+"px; left: "+(e.clientX-f.left-5)+"px;\n      z-index: 1000; background: "+(o?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",l&&(u=window.scrollY),i.input.focus(),l&&window.scrollTo(null,u),i.input.reset(),n.somethingSelected()||(r.value=t.prevInput=" "),t.contextMenuPending=v,i.selForContextMenu=n.doc.sel,clearTimeout(i.detectingSelectAll),o&&s>=9&&g(),C){we(e);var m=function(){he(window,"mouseup",m),setTimeout(v,20)};de(window,"mouseup",m)}else setTimeout(v,50)}function g(){if(null!=r.selectionStart){var e=n.somethingSelected(),a=""+(e?r.value:"");r.value="",r.value=a,t.prevInput=e?"":"",r.selectionStart=1,r.selectionEnd=a.length,i.selForContextMenu=n.doc.sel}}function v(){if(t.contextMenuPending==v&&(t.contextMenuPending=!1,t.wrapper.style.cssText=h,r.style.cssText=p,o&&s<9&&i.scrollbars.setScrollTop(i.scroller.scrollTop=c),null!=r.selectionStart)){(!o||o&&s<9)&&g();var e=0,a=function(){i.selForContextMenu==n.doc.sel&&0==r.selectionStart&&r.selectionEnd>0&&""==t.prevInput?er(n,la)(n):e++<10?i.detectingSelectAll=setTimeout(a,500):(i.selForContextMenu=null,i.input.reset())};i.detectingSelectAll=setTimeout(a,200)}}},Vo.prototype.readOnlyChanged=function(e){e||this.reset(),this.textarea.disabled="nocursor"==e,this.textarea.readOnly=!!e},Vo.prototype.setUneditable=function(){},Vo.prototype.needsContentAttribute=!1,function(e){var t=e.optionHandlers;function n(n,i,r,a){e.defaults[n]=i,r&&(t[n]=a?function(e,t,n){n!=ko&&r(e,t,n)}:r)}e.defineOption=n,e.Init=ko,n("value","",(function(e,t){return e.setValue(t)}),!0),n("mode",null,(function(e,t){e.doc.modeOption=t,Dr(e)}),!0),n("indentUnit",2,Dr,!0),n("indentWithTabs",!1),n("smartIndent",!0),n("tabSize",4,(function(e){Lr(e),Bn(e),di(e)}),!0),n("lineSeparator",null,(function(e,t){if(e.doc.lineSep=t,t){var n=[],i=e.doc.first;e.doc.iter((function(e){for(var r=0;;){var a=e.text.indexOf(t,r);if(-1==a)break;r=a+t.length,n.push(Ze(i,a))}i++}));for(var r=n.length-1;r>=0;r--)ma(e.doc,t,n[r],Ze(n[r].line,n[r].ch+t.length))}})),n("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\ufeff\ufff9-\ufffc]/g,(function(e,t,n){e.state.specialChars=new RegExp(t.source+(t.test("\t")?"":"|\t"),"g"),n!=ko&&e.refresh()})),n("specialCharPlaceholder",Jt,(function(e){return e.refresh()}),!0),n("electricChars",!0),n("inputStyle",v?"contenteditable":"textarea",(function(){throw new Error("inputStyle can not (yet) be changed in a running editor")}),!0),n("spellcheck",!1,(function(e,t){return e.getInputField().spellcheck=t}),!0),n("autocorrect",!1,(function(e,t){return e.getInputField().autocorrect=t}),!0),n("autocapitalize",!1,(function(e,t){return e.getInputField().autocapitalize=t}),!0),n("rtlMoveVisually",!x),n("wholeLineUpdateBefore",!0),n("theme","default",(function(e){Co(e),gr(e)}),!0),n("keyMap","default",(function(e,t,n){var i=Ya(t),r=n!=ko&&Ya(n);r&&r.detach&&r.detach(e,i),i.attach&&i.attach(e,r||null)})),n("extraKeys",null),n("configureMouse",null),n("lineWrapping",!1,$o,!0),n("gutters",[],(function(e,t){e.display.gutterSpecs=fr(t,e.options.lineNumbers),gr(e)}),!0),n("fixedGutter",!0,(function(e,t){e.display.gutters.style.left=t?oi(e.display)+"px":"0",e.refresh()}),!0),n("coverGutterNextToScrollbar",!1,(function(e){return Ri(e)}),!0),n("scrollbarStyle","native",(function(e){Gi(e),Ri(e),e.display.scrollbars.setScrollTop(e.doc.scrollTop),e.display.scrollbars.setScrollLeft(e.doc.scrollLeft)}),!0),n("lineNumbers",!1,(function(e,t){e.display.gutterSpecs=fr(e.options.gutters,t),gr(e)}),!0),n("firstLineNumber",1,gr,!0),n("lineNumberFormatter",(function(e){return e}),gr,!0),n("showCursorWhenSelecting",!1,gi,!0),n("resetSelectionOnContextMenu",!0),n("lineWiseCopyCut",!0),n("pasteLinesPerSelection",!0),n("selectionsMayTouch",!1),n("readOnly",!1,(function(e,t){"nocursor"==t&&(Si(e),e.display.input.blur()),e.display.input.readOnlyChanged(t)})),n("screenReaderLabel",null,(function(e,t){t=""===t?null:t,e.display.input.screenReaderLabelChanged(t)})),n("disableInput",!1,(function(e,t){t||e.display.input.reset()}),!0),n("dragDrop",!0,Oo),n("allowDropFileTypes",null),n("cursorBlinkRate",530),n("cursorScrollMargin",0),n("cursorHeight",1,gi,!0),n("singleCursorHeightPerLine",!0,gi,!0),n("workTime",100),n("workDelay",100),n("flattenSpans",!0,Lr,!0),n("addModeClass",!1,Lr,!0),n("pollInterval",100),n("undoDepth",200,(function(e,t){return e.doc.history.undoDepth=t})),n("historyEventDelay",1250),n("viewportMargin",10,(function(e){return e.refresh()}),!0),n("maxHighlightLength",1e4,Lr,!0),n("moveInputWithCursor",!0,(function(e,t){t||e.display.input.resetPosition()})),n("tabindex",null,(function(e,t){return e.display.input.getField().tabIndex=t||""})),n("autofocus",null),n("direction","ltr",(function(e,t){return e.doc.setDirection(t)}),!0),n("phrases",null)}(Eo),function(e){var t=e.optionHandlers,n=e.helpers={};e.prototype={constructor:e,focus:function(){window.focus(),this.display.input.focus()},setOption:function(e,n){var i=this.options,r=i[e];i[e]==n&&"mode"!=e||(i[e]=n,t.hasOwnProperty(e)&&er(this,t[e])(this,n,r),fe(this,"optionChange",this,e))},getOption:function(e){return this.options[e]},getDoc:function(){return this.doc},addKeyMap:function(e,t){this.state.keyMaps[t?"push":"unshift"](Ya(e))},removeKeyMap:function(e){for(var t=this.state.keyMaps,n=0;n<t.length;++n)if(t[n]==e||t[n].name==e)return t.splice(n,1),!0},addOverlay:tr((function(t,n){var i=t.token?t:e.getMode(this.options,t);if(i.startState)throw new Error("Overlays may not be stateful.");(function(e,t,n){for(var i=0,r=n(t);i<e.length&&n(e[i])<=r;)i++;e.splice(i,0,t)})(this.state.overlays,{mode:i,modeSpec:t,opaque:n&&n.opaque,priority:n&&n.priority||0},(function(e){return e.priority})),this.state.modeGen++,di(this)})),removeOverlay:tr((function(e){for(var t=this.state.overlays,n=0;n<t.length;++n){var i=t[n].modeSpec;if(i==e||"string"==typeof e&&i.name==e)return t.splice(n,1),this.state.modeGen++,void di(this)}})),indentLine:tr((function(e,t,n){"string"!=typeof t&&"number"!=typeof t&&(t=null==t?this.options.smartIndent?"smart":"prev":t?"add":"subtract"),Je(this.doc,e)&&Do(this,e,t,n)})),indentSelection:tr((function(e){for(var t=this.doc.sel.ranges,n=-1,i=0;i<t.length;i++){var r=t[i];if(r.empty())r.head.line>n&&(Do(this,r.head.line,e,!0),n=r.head.line,i==this.doc.sel.primIndex&&Di(this));else{var a=r.from(),o=r.to(),s=Math.max(n,a.line);n=Math.min(this.lastLine(),o.line-(o.ch?0:1))+1;for(var l=s;l<n;++l)Do(this,l,e);var c=this.doc.sel.ranges;0==a.ch&&t.length==c.length&&c[i].from().ch>0&&Jr(this.doc,i,new kr(a,c[i].to()),W)}}})),getTokenAt:function(e,t){return vt(this,e,t)},getLineTokens:function(e,t){return vt(this,Ze(e),t,!0)},getTokenTypeAt:function(e){e=ot(this.doc,e);var t,n=dt(this,qe(this.doc,e.line)),i=0,r=(n.length-1)/2,a=e.ch;if(0==a)t=n[2];else for(;;){var o=i+r>>1;if((o?n[2*o-1]:0)>=a)r=o;else{if(!(n[2*o+1]<a)){t=n[2*o+2];break}i=o+1}}var s=t?t.indexOf("overlay "):-1;return s<0?t:0==s?null:t.slice(0,s-1)},getModeAt:function(t){var n=this.doc.mode;return n.innerMode?e.innerMode(n,this.getTokenAt(t).state).mode:n},getHelper:function(e,t){return this.getHelpers(e,t)[0]},getHelpers:function(e,t){var i=[];if(!n.hasOwnProperty(t))return i;var r=n[t],a=this.getModeAt(e);if("string"==typeof a[t])r[a[t]]&&i.push(r[a[t]]);else if(a[t])for(var o=0;o<a[t].length;o++){var s=r[a[t][o]];s&&i.push(s)}else a.helperType&&r[a.helperType]?i.push(r[a.helperType]):r[a.name]&&i.push(r[a.name]);for(var l=0;l<r._global.length;l++){var c=r._global[l];c.pred(a,this)&&-1==B(i,c.val)&&i.push(c.val)}return i},getStateAfter:function(e,t){var n=this.doc;return pt(this,(e=at(n,null==e?n.first+n.size-1:e))+1,t).state},cursorCoords:function(e,t){var n=this.doc.sel.primary();return Vn(this,null==e?n.head:"object"==typeof e?ot(this.doc,e):e?n.from():n.to(),t||"page")},charCoords:function(e,t){return Un(this,ot(this.doc,e),t||"page")},coordsChar:function(e,t){return Yn(this,(e=qn(this,e,t||"page")).left,e.top)},lineAtHeight:function(e,t){return e=qn(this,{top:e,left:0},t||"page").top,Ye(this.doc,e+this.display.viewOffset)},heightAtLine:function(e,t,n){var i,r=!1;if("number"==typeof e){var a=this.doc.first+this.doc.size-1;e<this.doc.first?e=this.doc.first:e>a&&(e=a,r=!0),i=qe(this.doc,e)}else i=e;return Gn(this,i,{top:0,left:0},t||"page",n||r).top+(r?this.doc.height-Wt(i):0)},defaultTextHeight:function(){return ii(this.display)},defaultCharWidth:function(){return ri(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(e,t,n,i,r){var a=this.display,o=(e=Vn(this,ot(this.doc,e))).bottom,s=e.left;if(t.style.position="absolute",t.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(t),a.sizer.appendChild(t),"over"==i)o=e.top;else if("above"==i||"near"==i){var l=Math.max(a.wrapper.clientHeight,this.doc.height),c=Math.max(a.sizer.clientWidth,a.lineSpace.clientWidth);("above"==i||e.bottom+t.offsetHeight>l)&&e.top>t.offsetHeight?o=e.top-t.offsetHeight:e.bottom+t.offsetHeight<=l&&(o=e.bottom),s+t.offsetWidth>c&&(s=c-t.offsetWidth)}t.style.top=o+"px",t.style.left=t.style.right="","right"==r?(s=a.sizer.clientWidth-t.offsetWidth,t.style.right="0px"):("left"==r?s=0:"middle"==r&&(s=(a.sizer.clientWidth-t.offsetWidth)/2),t.style.left=s+"px"),n&&function(e,t){var n=Ei(e,t);null!=n.scrollTop&&Ai(e,n.scrollTop),null!=n.scrollLeft&&Pi(e,n.scrollLeft)}(this,{left:s,top:o,right:s+t.offsetWidth,bottom:o+t.offsetHeight})},triggerOnKeyDown:tr(uo),triggerOnKeyPress:tr(ho),triggerOnKeyUp:po,triggerOnMouseDown:tr(vo),execCommand:function(e){if(to.hasOwnProperty(e))return to[e].call(null,this)},triggerElectric:tr((function(e){Io(this,e)})),findPosH:function(e,t,n,i){var r=1;t<0&&(r=-1,t=-t);for(var a=ot(this.doc,e),o=0;o<t&&!(a=Bo(this.doc,a,r,n,i)).hitSide;++o);return a},moveH:tr((function(e,t){var n=this;this.extendSelectionsBy((function(i){return n.display.shift||n.doc.extend||i.empty()?Bo(n.doc,i.head,e,t,n.options.rtlMoveVisually):e<0?i.from():i.to()}),G)})),deleteH:tr((function(e,t){var n=this.doc.sel,i=this.doc;n.somethingSelected()?i.replaceSelection("",null,"+delete"):Ja(this,(function(n){var r=Bo(i,n.head,e,t,!1);return e<0?{from:r,to:n.head}:{from:n.head,to:r}}))})),findPosV:function(e,t,n,i){var r=1,a=i;t<0&&(r=-1,t=-t);for(var o=ot(this.doc,e),s=0;s<t;++s){var l=Vn(this,o,"div");if(null==a?a=l.left:l.left=a,(o=Ro(this,l,r,n)).hitSide)break}return o},moveV:tr((function(e,t){var n=this,i=this.doc,r=[],a=!this.display.shift&&!i.extend&&i.sel.somethingSelected();if(i.extendSelectionsBy((function(o){if(a)return e<0?o.from():o.to();var s=Vn(n,o.head,"div");null!=o.goalColumn&&(s.left=o.goalColumn),r.push(s.left);var l=Ro(n,s,e,t);return"page"==t&&o==i.sel.primary()&&Ti(n,Un(n,l,"div").top-s.top),l}),G),r.length)for(var o=0;o<i.sel.ranges.length;o++)i.sel.ranges[o].goalColumn=r[o]})),findWordAt:function(e){var t=qe(this.doc,e.line).text,n=e.ch,i=e.ch;if(t){var r=this.getHelper(e,"wordChars");"before"!=e.sticky&&i!=t.length||!n?++i:--n;for(var a=t.charAt(n),o=ee(a,r)?function(e){return ee(e,r)}:/\s/.test(a)?function(e){return/\s/.test(e)}:function(e){return!/\s/.test(e)&&!ee(e)};n>0&&o(t.charAt(n-1));)--n;for(;i<t.length&&o(t.charAt(i));)++i}return new kr(Ze(e.line,n),Ze(e.line,i))},toggleOverwrite:function(e){null!=e&&e==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?z(this.display.cursorDiv,"CodeMirror-overwrite"):M(this.display.cursorDiv,"CodeMirror-overwrite"),fe(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==L()},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:tr((function(e,t){Li(this,e,t)})),getScrollInfo:function(){var e=this.display.scroller;return{left:e.scrollLeft,top:e.scrollTop,height:e.scrollHeight-Sn(this)-this.display.barHeight,width:e.scrollWidth-Sn(this)-this.display.barWidth,clientHeight:On(this),clientWidth:Mn(this)}},scrollIntoView:tr((function(e,t){null==e?(e={from:this.doc.sel.primary().head,to:null},null==t&&(t=this.options.cursorScrollMargin)):"number"==typeof e?e={from:Ze(e,0),to:null}:null==e.from&&(e={from:e,to:null}),e.to||(e.to=e.from),e.margin=t||0,null!=e.from.line?function(e,t){zi(e),e.curOp.scrollToPos=t}(this,e):Ni(this,e.from,e.to,e.margin)})),setSize:tr((function(e,t){var n=this,i=function(e){return"number"==typeof e||/^\d+$/.test(String(e))?e+"px":e};null!=e&&(this.display.wrapper.style.width=i(e)),null!=t&&(this.display.wrapper.style.height=i(t)),this.options.lineWrapping&&Fn(this);var r=this.display.viewFrom;this.doc.iter(r,this.display.viewTo,(function(e){if(e.widgets)for(var t=0;t<e.widgets.length;t++)if(e.widgets[t].noHScroll){pi(n,r,"widget");break}++r})),this.curOp.forceUpdate=!0,fe(this,"refresh",this)})),operation:function(e){return Zi(this,e)},startOperation:function(){return Ui(this)},endOperation:function(){return Vi(this)},refresh:tr((function(){var e=this.display.cachedTextHeight;di(this),this.curOp.forceUpdate=!0,Bn(this),Li(this,this.doc.scrollLeft,this.doc.scrollTop),ur(this.display),(null==e||Math.abs(e-ii(this.display))>.5||this.options.lineWrapping)&&li(this),fe(this,"refresh",this)})),swapDoc:tr((function(e){var t=this.doc;return t.cm=null,this.state.selectingText&&this.state.selectingText(),Ir(this,e),Bn(this),this.display.input.reset(),Li(this,e.scrollLeft,e.scrollTop),this.curOp.forceScroll=!0,sn(this,"swapDoc",this,t),t})),phrase:function(e){var t=this.options.phrases;return t&&Object.prototype.hasOwnProperty.call(t,e)?t[e]:e},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},be(e),e.registerHelper=function(t,i,r){n.hasOwnProperty(t)||(n[t]=e[t]={_global:[]}),n[t][i]=r},e.registerGlobalHelper=function(t,i,r,a){e.registerHelper(t,i,a),n[t]._global.push({pred:r,val:a})}}(Eo);var Ko="iter insert remove copy getEditor constructor".split(" ");for(var Xo in Da.prototype)Da.prototype.hasOwnProperty(Xo)&&B(Ko,Xo)<0&&(Eo.prototype[Xo]=function(e){return function(){return e.apply(this.doc,arguments)}}(Da.prototype[Xo]));return be(Da),Eo.inputStyles={textarea:Vo,contenteditable:Wo},Eo.defineMode=function(e){Eo.defaults.mode||"null"==e||(Eo.defaults.mode=e),Ie.apply(this,arguments)},Eo.defineMIME=function(e,t){Ae[e]=t},Eo.defineMode("null",(function(){return{token:function(e){return e.skipToEnd()}}})),Eo.defineMIME("text/plain","null"),Eo.defineExtension=function(e,t){Eo.prototype[e]=t},Eo.defineDocExtension=function(e,t){Da.prototype[e]=t},Eo.fromTextArea=function(e,t){if((t=t?P(t):{}).value=e.value,!t.tabindex&&e.tabIndex&&(t.tabindex=e.tabIndex),!t.placeholder&&e.placeholder&&(t.placeholder=e.placeholder),null==t.autofocus){var n=L();t.autofocus=n==e||null!=e.getAttribute("autofocus")&&n==document.body}function i(){e.value=s.getValue()}var r;if(e.form&&(de(e.form,"submit",i),!t.leaveSubmitMethodAlone)){var a=e.form;r=a.submit;try{var o=a.submit=function(){i(),a.submit=r,a.submit(),a.submit=o}}catch(e){}}t.finishInit=function(n){n.save=i,n.getTextArea=function(){return e},n.toTextArea=function(){n.toTextArea=isNaN,i(),e.parentNode.removeChild(n.getWrapperElement()),e.style.display="",e.form&&(he(e.form,"submit",i),t.leaveSubmitMethodAlone||"function"!=typeof e.form.submit||(e.form.submit=r))}},e.style.display="none";var s=Eo((function(t){return e.parentNode.insertBefore(t,e.nextSibling)}),t);return s},function(e){e.off=he,e.on=de,e.wheelEventPixels=_r,e.Doc=Da,e.splitLines=Te,e.countColumn=j,e.findColumn=q,e.isWordChar=Z,e.Pass=R,e.signal=fe,e.Line=qt,e.changeEnd=Or,e.scrollbarModel=Hi,e.Pos=Ze,e.cmpPos=et,e.modes=Ne,e.mimeModes=Ae,e.resolveMode=Pe,e.getMode=je,e.modeExtensions=Fe,e.extendMode=Be,e.copyState=Re,e.startState=He,e.innerMode=We,e.commands=to,e.keyMap=Ha,e.keyName=Xa,e.isModifierKey=Va,e.lookupKey=Ua,e.normalizeKeyMap=qa,e.StringStream=Ge,e.SharedTextMarker=Oa,e.TextMarker=Sa,e.LineWidget=wa,e.e_preventDefault=ye,e.e_stopPropagation=xe,e.e_stop=we,e.addClass=z,e.contains=D,e.rmClass=M,e.keyNames=Fa}(Eo),Eo.version="5.62.2",Eo}()},"56bf":function(e,t,n){"use strict";n.r(t);var i=n("b899"),r=n("2ded"),a=n("395d"),o=n("2df1"),s=n("33d4");const{isString:l,isNumber:c,isBoolean:u,isObject:d,isArray:p}=i.Types;var h={components:{ObjectInput:r.a,ArrayInput:a.a,LazyInput:o.a,CodeEditor:s.a},model:{prop:"data",event:"change"},props:{prop:{type:String},type:{type:[Array,Function],default:()=>[]},options:{type:Array},label:{type:String},placeholder:{type:String},clazz:{type:[String,Object]},item:{type:Object},itemClazz:{type:[String,Object]},valueClazz:{type:[String,Object]},isExpression:{type:Boolean},disabled:{type:Boolean,default:!1},size:{type:String,default:"mini"},data:{type:[String,Number,Boolean,Object,Array]}},computed:{computedData:{get(){return this.isExpression&&this.validExpr(this.data)?this.$exec(this.data):this.data},set(e){e&&this.isExpression&&this.validExpr(this.data)?this.validExpr(e)&&this.$emit("change",e):this.$emit("change",e)}}},data:()=>({comp:null,classType:null,visible:!1,expression:"",selectedType:null,typeMap:new WeakMap([[String,"lang.text.string"],[Number,"lang.text.number"],[Boolean,"lang.text.bool"],[Array,"lang.text.array"],[Object,"lang.text.object"]])}),created(){this.comp=this.getPropComp(this.clazz),this.comp&&(this.isVueOptions(this.comp)?this.classType="vue":this.classType="class")},methods:{isNumber:c,isBoolean:u,isObject:d,isArray:p,$exec(e){if(null!=e&&e.toString)try{return Object(i.exec)(e.toString().trim().replace(/^\{\{/,"").replace(/\}\}$/,""),this.$(this.$store.state.leivii.selected.$id))}catch{return i.logger.log("GEEK::exec",e),null}return null},handleCommand(e){i.logger.log("handleCommand",e),this.selectedType=e,this.$emit("change",i.Dict.valueInitMap[e])},validExpr:e=>/^\{\{[\s\S]+\}\}$/.test(null==e?void 0:e.toString()),isDisabled(e){return this.disabled||this.isExpression&&this.validExpr(e)},isVueOptions:e=>!!e&&("render"in e&&"_compiled"in e||"_Ctor"in e),getPropComp:e=>l(e)?i.Dict.props.get(e):e,showByType(e){return this.selectedType?this.selectedType===e:this.isExpression&&l(this.data)?[this.type].flat().includes(e):e===String?this.data||""===this.data||0===this.data?l(this.data):[this.type].flat().includes(String):e===Number?this.data||0===this.data?c(this.data):[this.type].flat().includes(Number):e===Boolean?this.data||!1===this.data?u(this.data):[this.type].flat().includes(Boolean):e===Array?!["",0,!1].includes(this.data)&&(this.data?p(this.data):[this.type].flat().includes(Array)):e===Object?!["",0,!1].includes(this.data)&&(this.data?d(this.data):[this.type].flat().includes(Object)):void 0},handleExpr(e){this.computedData="{{}}"===e?"":e}}},f=(n("db1c"),n("2877")),m=Object(f.a)(h,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"dynamic-input w-full"},[e.clazz&&"vue"==e.classType?n(e.comp,{tag:"component",attrs:{disabled:e.isDisabled(e.data),type:e.type,itemClazz:e.itemClazz,valueClazz:e.valueClazz,placeholder:e.placeholder},model:{value:e.computedData,callback:function(t){e.computedData=t},expression:"computedData"}}):e.options?[n("el-select",{staticClass:"w-full",attrs:{size:e.size,disabled:e.disabled,clearable:""},model:{value:e.computedData,callback:function(t){e.computedData=t},expression:"computedData"}},e._l(e.options,(function(t,i){return n("el-option",{key:i,attrs:{label:e.$transMsg(t.label),value:t.value}})})),1)]:e.showByType(String)?n("lazy-input",{attrs:{disabled:e.isDisabled(e.data),size:e.size,placeholder:e.placeholder},model:{value:e.computedData,callback:function(t){e.computedData=t},expression:"computedData"}}):e.showByType(Number)?n("el-input-number",{staticClass:"w-full",attrs:{disabled:e.isDisabled(e.data),size:e.size,placeholder:e.placeholder},model:{value:e.computedData,callback:function(t){e.computedData=t},expression:"computedData"}}):e.showByType(Boolean)?n("el-switch",{attrs:{disabled:e.isDisabled(e.data),size:e.size},model:{value:e.computedData,callback:function(t){e.computedData=t},expression:"computedData"}}):e.showByType(Array)?n("array-input",{attrs:{disabled:e.isDisabled(e.data),size:e.size,placeholder:e.placeholder,label:e.label,type:e.type,item:e.item,itemClazz:e.itemClazz,options:e.options},model:{value:e.computedData,callback:function(t){e.computedData=t},expression:"computedData"}}):e.showByType(Object)?n("object-input",{attrs:{disabled:e.isDisabled(e.data),size:e.size,placeholder:e.placeholder,label:e.label,type:e.type,clazz:e.clazz,valueClazz:e.valueClazz,options:e.options},model:{value:e.computedData,callback:function(t){e.computedData=t},expression:"computedData"}}):n("lazy-input",{attrs:{disabled:e.isDisabled(e.data),size:e.size,placeholder:e.placeholder},model:{value:e.computedData,callback:function(t){e.computedData=t},expression:"computedData"}}),e.type.length>1?n("el-dropdown",{attrs:{trigger:"click"},on:{command:e.handleCommand}},[n("div",{staticClass:"el-dropdown-link",staticStyle:{display:"flex","align-items":"center","font-size":"12px","white-space":"nowrap",cursor:"pointer"}},[n("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},e._l(e.type,(function(t,i){return n("el-dropdown-item",{key:i,attrs:{command:t}},[e._v(e._s(e.$transMsg(e.typeMap.get(t))))])})),1)],1):e._e(),e.isExpression?n("div",{staticClass:"expression-section"},[n("div",{staticClass:"btn",class:{active:e.validExpr(e.data)},on:{click:function(t){e.visible=!0}}},[e._v("{/}")]),e.isDisabled(e.data)?n("div",{staticClass:"disable-layer"}):e._e(),n("el-dialog",{attrs:{title:e.$transMsg("lang.text.codeEditor"),visible:e.visible,"custom-class":"editor-dialog","append-to-body":""},on:{"update:visible":function(t){e.visible=t}}},[n("code-editor",{key:Date.now(),attrs:{value:e.data,placeholder:e.placeholder},on:{change:e.handleExpr,close:function(t){e.visible=!1}}})],1)],1):e._e()],2)}),[],!1,null,"4ff38270",null);t.default=m.exports},5880:function(e,t){e.exports=__WEBPACK_EXTERNAL_MODULE__5880__},"5d1c":function(e,t,n){},"5e6a":function(e,t,n){},"5f9c":function(e,t,n){"use strict";n("96ec")},"5fb4":function(e,t,n){!function(e){"use strict";e.defineMode("groovy",(function(t){function n(e){for(var t={},n=e.split(" "),i=0;i<n.length;++i)t[n[i]]=!0;return t}var i,r=n("abstract as assert boolean break byte case catch char class const continue def default do double else enum extends final finally float for goto if implements import in instanceof int interface long native new package private protected public return short static strictfp super switch synchronized threadsafe throw throws trait transient try void volatile while"),a=n("catch class def do else enum finally for if interface switch trait try while"),o=n("return break continue"),s=n("null true false this");function l(e,t){var n=e.next();if('"'==n||"'"==n)return c(n,e,t);if(/[\[\]{}\(\),;\:\.]/.test(n))return i=n,null;if(/\d/.test(n))return e.eatWhile(/[\w\.]/),e.eat(/eE/)&&(e.eat(/\+\-/),e.eatWhile(/\d/)),"number";if("/"==n){if(e.eat("*"))return t.tokenize.push(d),d(e,t);if(e.eat("/"))return e.skipToEnd(),"comment";if(p(t.lastToken,!1))return c(n,e,t)}if("-"==n&&e.eat(">"))return i="->",null;if(/[+\-*&%=<>!?|\/~]/.test(n))return e.eatWhile(/[+\-*&%=<>|~]/),"operator";if(e.eatWhile(/[\w\$_]/),"@"==n)return e.eatWhile(/[\w\$_\.]/),"meta";if("."==t.lastToken)return"property";if(e.eat(":"))return i="proplabel","property";var l=e.current();return s.propertyIsEnumerable(l)?"atom":r.propertyIsEnumerable(l)?(a.propertyIsEnumerable(l)?i="newstatement":o.propertyIsEnumerable(l)&&(i="standalone"),"keyword"):"variable"}function c(e,t,n){var i=!1;if("/"!=e&&t.eat(e)){if(!t.eat(e))return"string";i=!0}function r(t,n){for(var r,a=!1,o=!i;null!=(r=t.next());){if(r==e&&!a){if(!i)break;if(t.match(e+e)){o=!0;break}}if('"'==e&&"$"==r&&!a&&t.eat("{"))return n.tokenize.push(u()),"string";a=!a&&"\\"==r}return o&&n.tokenize.pop(),"string"}return n.tokenize.push(r),r(t,n)}function u(){var e=1;function t(t,n){if("}"==t.peek()){if(0==--e)return n.tokenize.pop(),n.tokenize[n.tokenize.length-1](t,n)}else"{"==t.peek()&&e++;return l(t,n)}return t.isBase=!0,t}function d(e,t){for(var n,i=!1;n=e.next();){if("/"==n&&i){t.tokenize.pop();break}i="*"==n}return"comment"}function p(e,t){return!e||"operator"==e||"->"==e||/[\.\[\{\(,;:]/.test(e)||"newstatement"==e||"keyword"==e||"proplabel"==e||"standalone"==e&&!t}function h(e,t,n,i,r){this.indented=e,this.column=t,this.type=n,this.align=i,this.prev=r}function f(e,t,n){return e.context=new h(e.indented,t,n,null,e.context)}function m(e){var t=e.context.type;return")"!=t&&"]"!=t&&"}"!=t||(e.indented=e.context.indented),e.context=e.context.prev}return l.isBase=!0,{startState:function(e){return{tokenize:[l],context:new h((e||0)-t.indentUnit,0,"top",!1),indented:0,startOfLine:!0,lastToken:null}},token:function(e,t){var n=t.context;if(e.sol()&&(null==n.align&&(n.align=!1),t.indented=e.indentation(),t.startOfLine=!0,"statement"!=n.type||p(t.lastToken,!0)||(m(t),n=t.context)),e.eatSpace())return null;i=null;var r=t.tokenize[t.tokenize.length-1](e,t);if("comment"==r)return r;if(null==n.align&&(n.align=!0),";"!=i&&":"!=i||"statement"!=n.type)if("->"==i&&"statement"==n.type&&"}"==n.prev.type)m(t),t.context.align=!1;else if("{"==i)f(t,e.column(),"}");else if("["==i)f(t,e.column(),"]");else if("("==i)f(t,e.column(),")");else if("}"==i){for(;"statement"==n.type;)n=m(t);for("}"==n.type&&(n=m(t));"statement"==n.type;)n=m(t)}else i==n.type?m(t):("}"==n.type||"top"==n.type||"statement"==n.type&&"newstatement"==i)&&f(t,e.column(),"statement");else m(t);return t.startOfLine=!1,t.lastToken=i||r,r},indent:function(n,i){if(!n.tokenize[n.tokenize.length-1].isBase)return e.Pass;var r=i&&i.charAt(0),a=n.context;"statement"!=a.type||p(n.lastToken,!0)||(a=a.prev);var o=r==a.type;return"statement"==a.type?a.indented+("{"==r?0:t.indentUnit):a.align?a.column+(o?0:1):a.indented+(o?0:t.indentUnit)},electricChars:"{}",closeBrackets:{triples:"'\""},fold:"brace",blockCommentStart:"/*",blockCommentEnd:"*/",lineComment:"//"}})),e.defineMIME("text/x-groovy","groovy")}(n("56b3"))},6307:function(e,t,n){"use strict";n("5d1c")},"63ea":function(e,t,n){},"64e3":function(e,t,n){},6794:function(e,t,n){"use strict";var i=n("395d"),r=n("2ded"),a=n("2df1"),o=n("e720"),s=n("3e18"),l=n("b899"),c=n("9d32"),u={components:{ObjectInput:r.a,ArrayInput:i.a,LazyInput:a.a,ScfPicker:o.a,ParamPicker:s.a},watch:{dataSources:{handler(){this.loading||(l.logger.log("change",this.dataSources),this.debouncedSaveDataSource())},deep:!0}},data:()=>({loading:!1,dataSources:[],typeList:[{label:"lang.prop.api",value:"api"},{label:"lang.prop.dict",value:"dict"},{label:"lang.prop.custom",value:"custom"},{label:"lang.text.scf",value:"SCF"},{label:"lang.text.plugin",value:"plugin"}],subTypeList:[{label:"lang.text.list",value:"LIST"},{label:"lang.text.paginglist",value:"PAGING_LIST"},{label:"lang.text.object",value:"SINGLE"},{label:"lang.text.dict",value:"dict"}],dictProp:{code:{type:String,label:"code",title:!0},type:{type:String,label:"lang.text.valueType",default:"string",options:[{label:"lang.text.string",value:"string"},{label:"lang.text.number",value:"number"},{label:"lang.text.bool",value:"boolean"}]}},plugins:l.Parsers.pluginParser(),pluginFuncs:{},dictValueClazz:{label:String,value:String},model:{visible:!1,selected:null,list:[]}}),created(){this.debouncedSaveDataSource=Object(c.a)(200,()=>this.saveDataSource())},mounted(){this.loading=!0,this.$store.dispatch("leivii/getConfigById",this.$store.state.leivii.selected.$id).then(e=>{e&&(this.dataSources=[e.$dataSource].filter(Boolean).flat(),this.$nextTick(()=>this.loading=!1),this.initOptions())})},methods:{initOptions(){this.dataSources.forEach((e,t)=>{"plugin"===e.type&&this.handlePlugin(e,t)})},addDataSource(){this.dataSources.push(this._getDataSourceByType("api","LIST"))},createModel(e,t){[this.$refs["form-"+t]].flat()[0].validate(t=>{t?l.DataSource.getDataSource(e,l.Dict.compMap.get(this.$store.state.leivii.selected.$id)).then(t=>{"LIST"===e.subtype?Array.isArray(t)&&t.length&&this.createModelPrompt(t[0]):"PAGING_LIST"===e.subtype?Array.isArray(t.list)&&t.list.length&&this.createModelPrompt(t.list[0]):"SINGLE"===e.subtype&&Object.keys(t||{}).length?this.createModelPrompt(t):this.$message({type:"warning",message:this.$transMsg("lang.tip.dataSourceEmpty")})}):this.$message({type:"warning",message:this.$transMsg("lang.tip.checkDataSource")})})},createModelPrompt(e){if(e){let t=[];for(let n in e)t.push({prop:n,name:n,type:"input"});this.$prompt(this.$transMsg("lang.tip.modelName"),this.$transMsg("lang.common.tip"),{inputPattern:/^\S+$/,inputPlaceholder:this.$transMsg("lang.text.modelName"),inputErrorMessage:this.$transMsg("lang.tip.invalidModelName")}).then(({value:e})=>{this.$emit("dataModelCreation"),this.$store.dispatch("leivii/setConfigById",{id:this.$store.state.leivii.pageConfig.$id,config:{models:[...[this.$store.state.leivii.pageConfig.models].flat().filter(Boolean),{name:e,list:t}]}})}),this.model.visible=!1}else this.$message({type:"warning",message:this.$transMsg("lang.tip.checkDataSource")})},showModelDialog(e){let t=this;this.model.visible=!0,this.model.list=[],function e(n){for(let i in n)Array.isArray(n[i])?t.model.list.push({label:i,value:n[i]}):l.Types.isObject(n[i])&&e(n[i])}(e)},handleType(e,t){this.dataSources.splice(t,1,this._getDataSourceByType(e.type))},handleSubType(e,t){this.dataSources.splice(t,1,this._getDataSourceByType(e.type,e.subtype))},handleSCF(e,t){var n,i;let r={};null===(n=t[l.CONFIG.scf.dataDescription])||void 0===n||null===(i=n.parameters)||void 0===i||i.forEach(e=>{r[e.name]={type:String,default:e.defaultValue}}),this.$set(e,"params",{type:"custom",clazz:r,action:{}}),this.$set(e,"key",t.dataTrickleName)},handlePlugin(e,t){var n;this.$set(this.pluginFuncs,t,(null===(n=this.plugins.find(t=>t.plugin===e.plugin))||void 0===n?void 0:n.methods)||[])},_getDataSourceByType(e,t=""){let n={type:e,subtype:t,autoProcess:!0,scoped:!0,cache:!1,root:l.CONFIG.root},i={};return"api"===e?(i={method:"GET",api:"",params:{type:"custom",action:{}},data:{type:"custom",action:{}}},"LIST"===t?i={...i,key:""}:"PAGING_LIST"===t?i={...i,page:l.CONFIG.pagination.page,size:l.CONFIG.pagination.size,total:l.CONFIG.pagination.total,list:l.CONFIG.pagination.list,key:""}:"SINGLE"===t?i={...i,key:""}:"dict"===t&&(i={...i,label:"",value:"",key:""})):"dict"===e?"dict"===t&&(i={dict:[]}):"custom"===e?i={subtype:"dict",dictValue:[],key:""}:"SCF"===e?(i={action:"",key:""},"LIST"===t||("PAGING_LIST"===t?i={...i,page:l.CONFIG.pagination.page,size:l.CONFIG.pagination.size,total:l.CONFIG.pagination.total,list:l.CONFIG.pagination.list}:"SINGLE"===t?i={...i}:"dict"===t&&(i={...i,label:"",value:""}))):"plugin"===e&&(i={plugin:"",func:"",key:"",root:""},"LIST"===t||("PAGING_LIST"===t?i={...i,page:l.CONFIG.pagination.page,size:l.CONFIG.pagination.size,total:l.CONFIG.pagination.total,list:l.CONFIG.pagination.list}:"SINGLE"===t?i={...i}:"dict"===t&&(i={...i,label:"",value:""}))),Object.assign({},n,i)},saveDataSource(){Promise.all(this.dataSources.map((e,t)=>new Promise((e,n)=>{[this.$refs["form-"+t]].flat()[0].validate(t=>t?e():n())}))).then(()=>{this.$store.dispatch("leivii/setConfigById",{id:this.$store.state.leivii.selected.$id,config:{$dataSource:this.dataSources}}).then(()=>{this.$(this.$store.state.leivii.selected.$id).updateDataSource(null,{updateCache:!0})}),this.$message({type:"success",message:this.$transMsg("lang.tip.dataSourceSaved")})}).catch(()=>{l.logger.log("GEEK:datasource check datasource config")})},removeDataSource(e){this.$confirm(this.$transMsg("lang.tip.deleteDataSource")).then(t=>{this.dataSources.splice(this.dataSources.indexOf(e),1)})},getLabelByValue(e,t){var n;return t?this.$transMsg(null===(n=e.find(e=>e.value==t))||void 0===n?void 0:n.label):""}}},d=(n("1727"),n("2877")),p=Object(d.a)(u,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"data-source fs-lg ml mr"},[n("el-card",[n("geek-flex-container",{attrs:{slot:"header",align:"center",justify:"space-between"},slot:"header"},[n("div",[e._v(e._s(e.$transMsg("lang.text.list")))]),n("div",[n("el-button",{attrs:{size:"mini"},on:{click:e.addDataSource}},[e._v(e._s(e.$transMsg("lang.action.addDataSource")))])],1)]),e.dataSources.length?n("el-collapse",e._l(e.dataSources,(function(t,i){return n("el-collapse-item",{key:i},[n("div",{staticClass:"collapse-title",attrs:{slot:"title"},slot:"title"},[n("div",{staticClass:"flex-center w-full"},[n("span",{staticClass:"flex1",attrs:{title:t.key}},[e._v(e._s(e.getLabelByValue(e.typeList,t.type))+" - "+e._s(e.getLabelByValue(e.subTypeList,t.subtype)+(t.key?" - "+t.key:"")))]),n("el-button",{attrs:{type:"text",circle:"",icon:"el-icon-delete"},on:{click:function(n){return n.stopPropagation(),e.removeDataSource(t)}}})],1),["LIST","PAGING_LIST","SINGLE"].includes(t.subtype)?n("el-button",{attrs:{size:"mini"},on:{click:function(n){return n.stopPropagation(),e.createModel(t,i)}}},[e._v(e._s(e.$transMsg("lang.action.createModel")))]):e._e()],1),n("el-form",{ref:"form-"+i,refInFor:!0,staticClass:"pt",attrs:{size:"mini",model:e.dataSources[i]}},[n("el-form-item",{attrs:{label:e.$transMsg("lang.prop.type")}},[n("el-select",{staticClass:"w-full",attrs:{size:"mini"},on:{change:function(n){return e.handleType(t,i)}},model:{value:t.type,callback:function(n){e.$set(t,"type",n)},expression:"ds.type"}},[e._l(e.typeList,(function(t){return["plugin"!=t.value||Object.keys(e.plugins).length?n("el-option",{key:t.value,attrs:{label:e.$transMsg(t.label),value:t.value}}):e._e()]}))],2)],1),n("el-form-item",{attrs:{label:e.$transMsg("lang.text.subtype"),prop:"subtype",rules:{required:!0}}},[n("el-select",{staticClass:"w-full",attrs:{size:"mini"},on:{change:function(n){return e.handleSubType(t,i)}},model:{value:t.subtype,callback:function(n){e.$set(t,"subtype",n)},expression:"ds.subtype"}},[["api","SCF","plugin"].includes(t.type)?n("el-option",{attrs:{label:e.$transMsg("lang.text.list"),value:"LIST"}}):e._e(),["api","SCF","plugin"].includes(t.type)?n("el-option",{attrs:{label:e.$transMsg("lang.text.paginglist"),value:"PAGING_LIST"}}):e._e(),["api","SCF","plugin"].includes(t.type)?n("el-option",{attrs:{label:e.$transMsg("lang.text.object"),value:"SINGLE"}}):e._e(),["api","custom","dict","SCF","plugin"].includes(t.type)?n("el-option",{attrs:{label:e.$transMsg("lang.text.dict"),value:"dict"}}):e._e()],1)],1),"action"in t&&"SCF"==t.type?n("el-form-item",{attrs:{label:e.$transMsg("lang.text.scf"),prop:"action",rules:{required:!0}}},[n("scf-picker",{staticClass:"w-full",on:{data:function(n){return e.handleSCF(t,n)}},model:{value:t.action,callback:function(n){e.$set(t,"action",n)},expression:"ds.action"}})],1):e._e(),"dict"in t&&Array.isArray(t.dict)?n("el-form-item",{attrs:{label:e.$transMsg("lang.text.dict"),prop:"dict",rules:{required:!0}}},[n("array-input",{staticClass:"w-full",attrs:{itemClazz:e.dictProp},model:{value:t.dict,callback:function(n){e.$set(t,"dict",n)},expression:"ds.dict"}})],1):e._e(),"dictValue"in t?n("el-form-item",{attrs:{label:e.$transMsg("lang.text.dictValue"),prop:"dictValue",rules:{required:!0}}},[n("array-input",{staticClass:"w-full",attrs:{itemClazz:"DictInput"},model:{value:t.dictValue,callback:function(n){e.$set(t,"dictValue",n)},expression:"ds.dictValue"}})],1):e._e(),"api"in t?n("el-form-item",{attrs:{label:e.$transMsg("lang.axios.url"),prop:"api",rules:{required:!0}}},[n("lazy-input",{attrs:{size:"mini",placeholder:"/api"},model:{value:t.api,callback:function(n){e.$set(t,"api",n)},expression:"ds.api"}})],1):e._e(),"method"in t?n("el-form-item",{attrs:{label:e.$transMsg("lang.axios.method")}},[n("el-select",{staticClass:"w-full",attrs:{size:"mini"},model:{value:t.method,callback:function(n){e.$set(t,"method",n)},expression:"ds.method"}},[n("el-option",{attrs:{value:"GET"}}),n("el-option",{attrs:{value:"POST"}}),n("el-option",{attrs:{value:"PUT"}}),n("el-option",{attrs:{value:"DELETE"}})],1)],1):e._e(),"params"in t?n("fieldset",{staticClass:"pl-md pr-md mb",staticStyle:{color:"#606266",border:"1px solid #DCDFE6"}},[n("legend",[e._v(e._s(e.$transMsg("lang.axios.params")))]),n("param-picker",{model:{value:t.params,callback:function(n){e.$set(t,"params",n)},expression:"ds.params"}})],1):e._e(),"data"in t&&["POST","PUT"].includes(t.method)?n("fieldset",{staticClass:"pl-md pr-md mb",staticStyle:{color:"#606266",border:"1px solid #DCDFE6"}},[n("legend",[e._v(e._s(e.$transMsg("lang.axios.data")))]),n("param-picker",{model:{value:t.data,callback:function(n){e.$set(t,"data",n)},expression:"ds.data"}})],1):e._e(),"plugin"==t.type?n("el-form-item",{attrs:{label:e.$transMsg("lang.plugin.name")}},[n("el-select",{staticClass:"w-full",attrs:{size:"mini"},on:{change:function(n){return e.handlePlugin(t,i)}},model:{value:t.plugin,callback:function(n){e.$set(t,"plugin",n)},expression:"ds.plugin"}},e._l(e.plugins,(function(e){return n("el-option",{key:e.plugin,attrs:{label:e.i18nName,value:e.plugin}})})),1)],1):e._e(),"plugin"==t.type?n("el-form-item",{attrs:{label:e.$transMsg("lang.plugin.method")}},[n("el-select",{staticClass:"w-full",attrs:{size:"mini"},model:{value:t.func,callback:function(n){e.$set(t,"func",n)},expression:"ds.func"}},e._l(e.pluginFuncs[i],(function(e){return n("el-option",{key:e.method,attrs:{label:e.doc?e.doc.method:e.method,value:e.method}})})),1)],1):e._e(),"key"in t?n("el-form-item",{attrs:{label:e.$transMsg("lang.text.keyword"),prop:"key",rules:{required:!0}}},[n("lazy-input",{attrs:{size:"mini"},model:{value:t.key,callback:function(n){e.$set(t,"key",n)},expression:"ds.key"}})],1):e._e(),"PAGING_LIST"==t.subtype?n("fieldset",{staticClass:"pl-md pr-md mb",staticStyle:{color:"#606266",border:"1px solid #DCDFE6"}},[n("legend",[e._v(e._s(e.$transMsg("lang.text.pagingConfig")))]),n("el-form-item",{attrs:{label:"page",prop:"page",rules:{required:!0}}},[n("lazy-input",{attrs:{size:"mini"},model:{value:t.page,callback:function(n){e.$set(t,"page",n)},expression:"ds.page"}})],1),n("el-form-item",{attrs:{label:"size",prop:"size",rules:{required:!0}}},[n("lazy-input",{attrs:{size:"mini"},model:{value:t.size,callback:function(n){e.$set(t,"size",n)},expression:"ds.size"}})],1),n("el-form-item",{attrs:{label:"total",prop:"total",rules:{required:!0}}},[n("lazy-input",{attrs:{size:"mini"},model:{value:t.total,callback:function(n){e.$set(t,"total",n)},expression:"ds.total"}})],1),n("el-form-item",{attrs:{label:"list",prop:"list",rules:{required:!0}}},[n("lazy-input",{attrs:{size:"mini"},model:{value:t.list,callback:function(n){e.$set(t,"list",n)},expression:"ds.list"}})],1)],1):e._e(),["api","SCF"].includes(t.type)&&"dict"==t.subtype?n("fieldset",{staticClass:"pl-md pr-md mb",staticStyle:{color:"#606266",border:"1px solid #DCDFE6"}},[n("legend",[e._v(e._s(e.$transMsg("lang.text.dictConfig")))]),n("el-form-item",{attrs:{label:e.$transMsg("lang.common.label"),prop:"label"}},[n("lazy-input",{attrs:{size:"mini"},model:{value:t.label,callback:function(n){e.$set(t,"label",n)},expression:"ds.label"}})],1),n("el-form-item",{attrs:{label:e.$transMsg("lang.common.value"),prop:"value"}},[n("lazy-input",{attrs:{size:"mini"},model:{value:t.value,callback:function(n){e.$set(t,"value",n)},expression:"ds.value"}})],1)],1):e._e(),n("el-form-item",{staticClass:"right",attrs:{label:e.$transMsg("lang.text.autoProcess")}},[n("el-switch",{attrs:{size:"mini"},model:{value:t.autoProcess,callback:function(n){e.$set(t,"autoProcess",n)},expression:"ds.autoProcess"}})],1),n("el-form-item",{staticClass:"right",attrs:{label:e.$transMsg("lang.text.private")}},[n("el-switch",{attrs:{size:"mini"},model:{value:t.scoped,callback:function(n){e.$set(t,"scoped",n)},expression:"ds.scoped"}})],1),n("el-form-item",{staticClass:"right",attrs:{label:e.$transMsg("lang.text.cache")}},[n("el-switch",{attrs:{size:"mini"},model:{value:t.cache,callback:function(n){e.$set(t,"cache",n)},expression:"ds.cache"}})],1),["dict"].includes(t.type)?e._e():n("el-form-item",{attrs:{label:e.$transMsg("lang.text.rootNode")}},[n("lazy-input",{attrs:{size:"mini"},model:{value:t.root,callback:function(n){e.$set(t,"root",n)},expression:"ds.root"}})],1)],1)],1)})),1):e._e()],1),n("el-dialog",{attrs:{title:e.$transMsg("lang.action.chooseModel"),"append-to-body":"",visible:e.model.visible},on:{"update:visible":function(t){return e.$set(e.model,"visible",t)}}},[e.model.list.length?n("el-radio-group",{model:{value:e.model.selected,callback:function(t){e.$set(e.model,"selected",t)},expression:"model.selected"}},e._l(e.model.list,(function(t){return n("el-radio",{key:t.label,attrs:{label:t.value}},[e._v(e._s(t.label))])})),1):n("div",{staticClass:"p"},[e._v(e._s(e.$transMsg("lang.tip.modelNotFound")))]),n("div",{staticClass:"dialog-footer align-right pt-xl"},[n("el-button",{attrs:{type:"primary",disabled:!e.model.selected},on:{click:function(t){return e.createModelPrompt(e.model.selected[0])}}},[e._v(e._s(e.$transMsg("lang.action.confirm")))])],1)],1)],1)}),[],!1,null,"2f1e5ec8",null);t.a=p.exports},"6df4":function(e,t,n){},"701f":function(e,t,n){"use strict";n.r(t);var i=n("e017"),r=n.n(i),a=n("21a1"),o=n.n(a),s=new r.a({id:"icon-plus",use:"icon-plus-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="icon-plus"><defs><style type="text/css"></style></defs><path d="M512.17594 1023.648121c-29.52585 0-58.347943-6.397801-58.347943-37.395145V564.030115H37.459123c-23.76783 0-37.459123-22.392303-37.459123-51.182406 0-26.614851 10.076536-51.790197 35.187904-51.790198h425.005904V43.888913c0-28.054356 20.888819-43.888913 51.854176-43.888913 28.790103 0 51.182406 12.795602 51.182406 37.395145v416.49683h430.156133c28.790103 0 30.261598 34.516135 30.261598 58.283965s-7.933273 51.182406-36.723376 51.182406H563.326357v422.926619c0.735747 24.40761-21.592578 37.363156-51.150417 37.363156z" p-id="24219" /></symbol>'});o.a.add(s),t.default=s},"76a3":function(e,t,n){"use strict";n("5e6a")},7717:function(module,__webpack_exports__,__webpack_require__){"use strict";var vue__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("8bbf"),vue__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(vue__WEBPACK_IMPORTED_MODULE_0__),leivii__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("b899"),leivii__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(leivii__WEBPACK_IMPORTED_MODULE_1__),_CodeEditor__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("33d4"),_ComponentTreeInput__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("3d21"),_DataSource__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("6794"),_ArrayInput__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("395d"),_DynamicInput__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("56bf"),_properties_CustomClass__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("dfda"),_EventsHandler__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("4593");const{props:props,valueInitMap:valueInitMap}=leivii__WEBPACK_IMPORTED_MODULE_1__.Dict,{isString:isString,isFunction:isFunction,isBoolean:isBoolean,isObject:isObject}=leivii__WEBPACK_IMPORTED_MODULE_1__.Types,BLACK_LIST=["$type","$config","$dataSource","$handlers","$plugins","$scopeData"],propOrderList=["$id","$classes","$visible","$prop","$body"],propCompare=(e,t)=>e.startsWith("$")?t.startsWith("$")?propOrderList.indexOf(e)-propOrderList.indexOf(t):-1:t.startsWith("$")?1:void 0;__webpack_exports__.a={components:{CodeEditor:_CodeEditor__WEBPACK_IMPORTED_MODULE_2__.a,ComponentTreeInput:_ComponentTreeInput__WEBPACK_IMPORTED_MODULE_3__.a,DataSource:_DataSource__WEBPACK_IMPORTED_MODULE_4__.a,ArrayInput:_ArrayInput__WEBPACK_IMPORTED_MODULE_5__.a,DynamicInput:_DynamicInput__WEBPACK_IMPORTED_MODULE_6__.default,CustomClass:_properties_CustomClass__WEBPACK_IMPORTED_MODULE_7__.a,EventsHandler:_EventsHandler__WEBPACK_IMPORTED_MODULE_8__.a},data:()=>({tab:"dsl",form:{},properties:[],dataSources:[],currEdit:{obj:null,key:null},expression:null,visible:!1}),mounted(){this.$watch(()=>[Object.entries(this.$store.state.leivii.selected),JSON.parse(JSON.stringify(Object.entries(this.form)))],(e,t)=>{if(JSON.stringify(e)===JSON.stringify(t))return;const[n,i]=e||[[],[]],[r,a]=t||[[],[]];this.$store.dispatch("leivii/getConfigById",this.$store.state.leivii.selected.$id).then(e=>{if(leivii__WEBPACK_IMPORTED_MODULE_1__.logger.log("Geek::selected config",this.$store.state.leivii.selected.$id,e),e)if(JSON.stringify(n)!==JSON.stringify(r)){this.form={},this.properties=[];const{props:t,options:n={}}=vue__WEBPACK_IMPORTED_MODULE_0___default.a.component(e.$type).options,{groups:i="none"}=n,r=[i].flat().includes("container");Object.keys(t).filter(e=>!BLACK_LIST.includes(e)&&!t[e].ignore&&("$body"!==e||r)).sort(propCompare).forEach(n=>{var i,r,a,o;let s=t[n].default||null;isFunction(s)&&(s=s()),[t[n].type].flat()[0];let l=null!==(i=e[n])&&void 0!==i?i:s;this.$set(this.form,n,l),this.properties.push({prop:n,key:n,val:l,label:t[n].label||n,placeholder:t[n].placeholder||"",type:[t[n].type].flat().filter(Boolean),visible:null!==(r=t[n].visible)&&void 0!==r?r:"",clazz:t[n].clazz,item:t[n].item,itemClazz:t[n].itemClazz,valueClazz:t[n].valueClazz,isExpression:t[n].isExpression,options:null===(a=t[n].options)||void 0===a?void 0:a.map(e=>isObject(e)?e:{label:e,value:e}),expression:isString(e[n])&&/^\{\{(.*?)\}\}$/.test(e[n])?e[n].replace(/^\{\{/,"").replace(/\}\}$/,""):"",required:(null===(o=t[n])||void 0===o?void 0:o.required)||!1})})}else i.find(e=>"$id"===e[0]&&a.some(t=>"$id"===t[0]&&e[1]===t[1]))&&i.forEach((e,t)=>{JSON.stringify(e[1])!==JSON.stringify(a[t][1])&&(leivii__WEBPACK_IMPORTED_MODULE_1__.logger.log("property change:",e[0],e[1],a[t][1]),this.$store.dispatch("leivii/setConfigById",{id:this.$store.state.leivii.selected.$id,config:{[e[0]]:e[1]}}).then(()=>{var e;return null===(e=leivii__WEBPACK_IMPORTED_MODULE_1__.Dict.compMap.get(this.$store.state.leivii.selected.$id))||void 0===e?void 0:e.$emit("propChange")}))})})},{immediate:!0,deep:!0})},methods:{isFunction:isFunction,isBoolean:isBoolean,isObject:isObject,getPropComp:e=>props.get(e),exec(e,t){try{e=e.replace(/^\{\{([\s\S]+)\}\}/,(e,t)=>t);const n=Object(leivii__WEBPACK_IMPORTED_MODULE_1__.exec)(e,this.$(this.$store.state.leivii.selected.$id));if(t(n)===n)return n}catch{}},getVisible(expr){if(expr)try{return expr=expr.replace(/\{\{\s*(\w+)\s*\}\}/g,(e,t)=>this.form[t]),!!eval(expr)}catch{}return!0},showEditor(e,t){this.currEdit.obj=e,this.currEdit.key=t,this.expression=e[t]||e.val,this.visible=!0},handleExpr(){this.expression&&(this.currEdit.obj[this.currEdit.key]=this.expression,this.$store.dispatch("leivii/setConfigById",{id:this.$store.state.leivii.selected.$id,config:{[this.currEdit.obj.key]:this.expression}}))}}}},"7a81":function(e,t,n){"use strict";n.r(t);var i=n("e017"),r=n.n(i),a=n("21a1"),o=n.n(a),s=new r.a({id:"icon-components",use:"icon-components-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="icon-components"><defs><style type="text/css"></style></defs><path d="M949.101714 186.270476h-173.372952a173.372952 173.372952 0 1 0-346.745905 0h-173.372952a69.339429 69.339429 0 0 0-69.339429 69.339429v173.348571a173.372952 173.372952 0 0 0 0 346.770286v173.348571a69.339429 69.339429 0 0 0 69.339429 69.36381h242.712381v-69.339429a104.033524 104.033524 0 0 1 208.042666 0v69.339429h242.736762a69.339429 69.339429 0 0 0 69.339429-69.339429v-242.736762h-69.339429a104.033524 104.033524 0 0 1 0-208.042666h69.339429v-242.712381a69.339429 69.339429 0 0 0-69.339429-69.339429z m-173.372952 416.085334a173.372952 173.372952 0 0 0 173.348571 173.348571v173.397333h-173.348571a173.372952 173.372952 0 1 0-346.745905 0h-173.372952v-242.736762H186.270476a104.033524 104.033524 0 0 1 0-208.042666h69.339429v-242.712381h242.712381V186.270476a104.033524 104.033524 0 0 1 208.042666 0v69.339429h242.736762v173.348571a173.372952 173.372952 0 0 0-173.372952 173.397334z" p-id="40089" /></symbol>'});o.a.add(s),t.default=s},"7d57":function(e,t,n){"use strict";n("d47c")},"7df7":function(e,t,n){"use strict";n.r(t);var i=n("e017"),r=n.n(i),a=n("21a1"),o=n.n(a),s=new r.a({id:"icon-hierarchy",use:"icon-hierarchy-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="icon-hierarchy"><defs><style type="text/css"></style></defs><path d="M216.2 344.2c-81 0-146.9-65.9-146.9-146.9S135.2 50.4 216.2 50.4s146.9 65.9 146.9 146.9-65.9 146.9-146.9 146.9z m0-251.8c-57.8 0-104.9 47.1-104.9 104.9s47.1 104.9 104.9 104.9 104.9-47.1 104.9-104.9S274 92.4 216.2 92.4z" fill="#000333" p-id="22613" /><path d="M195.2 323.2h42v545.1h-42z" fill="#000333" p-id="22614" /><path d="M235.1 491h419.6v42H235.1z" fill="#000333" p-id="22615" /><path d="M820.4 637.9H694.6c-34.7 0-62.9-28.2-62.9-62.9V449.1c0-34.7 28.2-62.9 62.9-62.9h125.9c34.7 0 62.9 28.2 62.9 62.9V575c0 34.6-28.2 62.9-63 62.9zM694.6 428.1c-11.6 0-21 9.4-21 21V575c0 11.6 9.4 21 21 21h125.9c11.6 0 21-9.4 21-21V449.1c0-11.6-9.4-21-21-21H694.6zM235.1 826.7h419.6v42H235.1z" fill="#000333" p-id="22616" /><path d="M820.4 973.6H694.6c-34.7 0-62.9-28.2-62.9-62.9v-126c0-34.7 28.2-62.9 62.9-62.9h125.9c34.7 0 62.9 28.2 62.9 62.9v125.9c0 34.7-28.2 63-63 63zM694.6 763.8c-11.6 0-21 9.4-21 21v125.9c0 11.6 9.4 21 21 21h125.9c11.6 0 21-9.4 21-21v-126c0-11.6-9.4-21-21-21H694.6zM933.7 218.3H451.1c-11.6 0-21-9.4-21-21s9.4-21 21-21h482.5c11.6 0 21 9.4 21 21s-9.3 21-20.9 21z" fill="#000333" p-id="22617" /></symbol>'});o.a.add(s),t.default=s},8185:function(e,t,n){},8354:function(e,t,n){"use strict";n.r(t);var i=n("e017"),r=n.n(i),a=n("21a1"),o=n.n(a),s=new r.a({id:"icon-export",use:"icon-export-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="icon-export"><defs><style type="text/css"></style></defs><path d="M520.448 83.328l-437.856 0 0 858.4 859.168 0 0-438.816 60.832 59.68 0 341.792c0 0 3.36 98.176-88.32 98.176l-793.184 0c0 0-99.744 8.192-99.744-94.816l0-788.384c0 0 0-98.144 93.216-98.144l345.056 0 60.832 62.08z" p-id="15163" /><path d="M623.2 21.28l379.424 0 0.064 376.128-142.784-140.704-248.672 245.376-91.488-88.64 243.68-250.272z" p-id="15164" /></symbol>'});o.a.add(s),t.default=s},8568:function(e,t,n){"use strict";n.r(t);var i=n("e017"),r=n.n(i),a=n("21a1"),o=n.n(a),s=new r.a({id:"icon-preview",use:"icon-preview-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="icon-preview"><defs><style type="text/css"></style></defs><path d="M912.205085 449.388089L182.415592 9.695957a69.292355 69.292355 0 0 0-70.641975 0A71.352302 71.352302 0 0 0 76.470388 73.021569v878.247741a72.701922 72.701922 0 0 0 35.303229 63.325611 63.929389 63.929389 0 0 0 35.303229 9.376311 79.556573 79.556573 0 0 0 35.30323-9.376311l729.789493-439.692131a71.316785 71.316785 0 0 0 35.303229-63.325612 79.556573 79.556573 0 0 0-35.267713-62.189089zM152.972557 941.857483l-3.551633-858.323081 714.481956 430.315821z" p-id="16322" /></symbol>'});o.a.add(s),t.default=s},"85ac":function(e,t,n){"use strict";n("197e")},8716:function(e,t,n){"use strict";n("d780")},8875:function(e,t,n){var i,r,a;"undefined"!=typeof self&&self,r=[],void 0===(a="function"==typeof(i=function(){return function e(){var t=Object.getOwnPropertyDescriptor(document,"currentScript");if(!t&&"currentScript"in document&&document.currentScript)return document.currentScript;if(t&&t.get!==e&&document.currentScript)return document.currentScript;try{throw new Error}catch(e){var n,i,r,a=/.*at [^(]*\((.*):(.+):(.+)\)$/gi.exec(e.stack)||/@([^@]*):(\d+):(\d+)\s*$/gi.exec(e.stack),o=a&&a[1]||!1,s=a&&a[2]||!1,l=document.location.href.replace(document.location.hash,""),c=document.getElementsByTagName("script");o===l&&(n=document.documentElement.outerHTML,i=new RegExp("(?:[^\\n]+?\\n){0,"+(s-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),r=n.replace(i,"$1").trim());for(var u=0;u<c.length;u++){if("interactive"===c[u].readyState)return c[u];if(c[u].src===o)return c[u];if(o===l&&c[u].innerHTML&&c[u].innerHTML.trim()===r)return c[u]}return null}}})?i.apply(t,r):i)||(e.exports=a)},"8b8a":function(e,t,n){},"8bbf":function(e,t){e.exports=__WEBPACK_EXTERNAL_MODULE__8bbf__},"8c33":function(e,t,n){!function(e){var t=/MSIE \d/.test(navigator.userAgent)&&(null==document.documentMode||document.documentMode<8),n=e.Pos,i={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<","<":">>",">":"<<"};function r(e){return e&&e.bracketRegex||/[(){}[\]]/}function a(e,t,a){var s=e.getLineHandle(t.line),l=t.ch-1,c=a&&a.afterCursor;null==c&&(c=/(^| )cm-fat-cursor($| )/.test(e.getWrapperElement().className));var u=r(a),d=!c&&l>=0&&u.test(s.text.charAt(l))&&i[s.text.charAt(l)]||u.test(s.text.charAt(l+1))&&i[s.text.charAt(++l)];if(!d)return null;var p=">"==d.charAt(1)?1:-1;if(a&&a.strict&&p>0!=(l==t.ch))return null;var h=e.getTokenTypeAt(n(t.line,l+1)),f=o(e,n(t.line,l+(p>0?1:0)),p,h,a);return null==f?null:{from:n(t.line,l),to:f&&f.pos,match:f&&f.ch==d.charAt(0),forward:p>0}}function o(e,t,a,o,s){for(var l=s&&s.maxScanLineLength||1e4,c=s&&s.maxScanLines||1e3,u=[],d=r(s),p=a>0?Math.min(t.line+c,e.lastLine()+1):Math.max(e.firstLine()-1,t.line-c),h=t.line;h!=p;h+=a){var f=e.getLine(h);if(f){var m=a>0?0:f.length-1,g=a>0?f.length:-1;if(!(f.length>l))for(h==t.line&&(m=t.ch-(a<0?1:0));m!=g;m+=a){var v=f.charAt(m);if(d.test(v)&&(void 0===o||(e.getTokenTypeAt(n(h,m+1))||"")==(o||""))){var b=i[v];if(b&&">"==b.charAt(1)==a>0)u.push(v);else{if(!u.length)return{pos:n(h,m),ch:v};u.pop()}}}}}return h-a!=(a>0?e.lastLine():e.firstLine())&&null}function s(e,i,r){for(var o=e.state.matchBrackets.maxHighlightLineLength||1e3,s=r&&r.highlightNonMatching,l=[],c=e.listSelections(),u=0;u<c.length;u++){var d=c[u].empty()&&a(e,c[u].head,r);if(d&&(d.match||!1!==s)&&e.getLine(d.from.line).length<=o){var p=d.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket";l.push(e.markText(d.from,n(d.from.line,d.from.ch+1),{className:p})),d.to&&e.getLine(d.to.line).length<=o&&l.push(e.markText(d.to,n(d.to.line,d.to.ch+1),{className:p}))}}if(l.length){t&&e.state.focused&&e.focus();var h=function(){e.operation((function(){for(var e=0;e<l.length;e++)l[e].clear()}))};if(!i)return h;setTimeout(h,800)}}function l(e){e.operation((function(){e.state.matchBrackets.currentlyHighlighted&&(e.state.matchBrackets.currentlyHighlighted(),e.state.matchBrackets.currentlyHighlighted=null),e.state.matchBrackets.currentlyHighlighted=s(e,!1,e.state.matchBrackets)}))}function c(e){e.state.matchBrackets&&e.state.matchBrackets.currentlyHighlighted&&(e.state.matchBrackets.currentlyHighlighted(),e.state.matchBrackets.currentlyHighlighted=null)}e.defineOption("matchBrackets",!1,(function(t,n,i){i&&i!=e.Init&&(t.off("cursorActivity",l),t.off("focus",l),t.off("blur",c),c(t)),n&&(t.state.matchBrackets="object"==typeof n?n:{},t.on("cursorActivity",l),t.on("focus",l),t.on("blur",c))})),e.defineExtension("matchBrackets",(function(){s(this,!0)})),e.defineExtension("findMatchingBracket",(function(e,t,n){return(n||"boolean"==typeof t)&&(n?(n.strict=t,t=n):t=t?{strict:!0}:null),a(this,e,t)})),e.defineExtension("scanForBracket",(function(e,t,n,i){return o(this,e,t,n,i)}))}(n("56b3"))},"8f6e":function(e,t,n){},9224:function(e){e.exports=JSON.parse('{"name":"leivii-editor","version":"0.1.12","private":false,"description":"Geek+ Leivii Editor","author":"keke.qiu","scripts":{"serve":"vue-cli-service serve","build":"vue-cli-service build","lib":"vue-cli-service build --target lib --name leivii-editor --dest lib src/index.js","postversion":"git push && git push --tags","version":"npm run lib && npm run changelog && git add CHANGELOG.md","changelog":"conventional-changelog -p angular -i CHANGELOG.md -s"},"main":"lib/leivii-editor.umd.min.js","dependencies":{"clipboard-polyfill":"^3.0.3","codemirror":"^5.58.0","throttle-debounce":"^3.0.1","vuedraggable":"^2.24.3","xlsx":"^0.17.2"},"devDependencies":{"@commitlint/cli":"^13.2.1","@commitlint/config-angular":"^13.2.0","@vue/cli-plugin-babel":"~4.5.0","@vue/cli-plugin-router":"~4.5.0","@vue/cli-plugin-vuex":"~4.5.0","@vue/cli-service":"~4.5.0","axios":"^0.20.0","conventional-changelog-cli":"^2.1.1","element-ui":"^2.13.2","husky":"^4.3.8","leivii":"^1.2.10","sass":"~1.32.6","sass-loader":"^8.0.2","svg-sprite-loader":"^6.0.11","vue":"^2.6.11","vue-i18n":"^8.25.0","vue-router":"^3.2.0","vue-template-compiler":"^2.6.11","vuex":"^3.4.0","webpack-bundle-analyzer":"^4.5.0"},"peerDependencies":{"axios":"^0.20.0","element-ui":"^2.13.2","vue":"^2.6.11","vue-i18n":"^8.25.0","vuex":"^3.4.0","xlsx":"^0.17.2"},"browserslist":["> 1%","last 2 versions","not dead"],"keywords":["low-code","leivii","leivii editor","","","IDE","vue"],"license":"MIT","repository":{"type":"git","url":"http://gitlab.geekplus.cc/fe/leivii-editor.git"},"husky":{"hooks":{"commit-msg":"commitlint -E HUSKY_GIT_PARAMS"}}}')},"93ab":function(e,t,n){},"96ec":function(e,t,n){},9911:function(e,t,n){"use strict";n.r(t);var i=n("e017"),r=n.n(i),a=n("21a1"),o=n.n(a),s=new r.a({id:"icon-datasource",use:"icon-datasource-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="icon-datasource"><defs><style type="text/css"></style></defs><path d="M979.392 213.312C971.84 98.432 769.536 9.408 512 9.408S52.16 98.432 44.608 213.312h-0.704v590.72c0 118.016 205.568 210.56 468.096 210.56s468.096-92.544 468.096-210.56v-590.72h-0.704zM512 80.256c234.688 0 393.408 73.216 399.424 148.672C905.472 304.448 746.688 377.6 512 377.6s-393.408-73.152-399.424-148.608C118.528 153.472 277.312 80.32 512 80.32z m0 863.36c-239.232 0-400-76.032-400-153.024V638.08c81.408 60.416 228.288 100.096 400 100.096s318.592-39.68 400-100.096v152.512c0 76.992-160.768 153.024-400 153.024z m400-440.704v11.264C912 591.168 751.232 667.2 512 667.2s-400-75.968-400-152.96V348.48c81.408 60.352 228.288 100.096 400 100.096s318.592-39.68 400-100.096v154.432z" p-id="44702" /></symbol>'});o.a.add(s),t.default=s},"991c":function(e,t,n){!function(e){"use strict";var t,n,i,r,a=";",o="AS",s=e.Pos,l=e.cmpPos;function c(e){return"[object Array]"==Object.prototype.toString.call(e)}function u(t){var n=t.doc.modeOption;return"sql"===n&&(n="text/x-sql"),e.resolveMode(n).keywords}function d(t){var n=t.doc.modeOption;return"sql"===n&&(n="text/x-sql"),e.resolveMode(n).identifierQuote||"`"}function p(e){return"string"==typeof e?e:e.text}function h(e,t){return c(t)&&(t={columns:t}),t.text||(t.text=e),t}function f(e){var t={};if(c(e))for(var n=e.length-1;n>=0;n--){var i=e[n];t[p(i).toUpperCase()]=h(p(i),i)}else if(e)for(var r in e)t[r.toUpperCase()]=h(r,e[r]);return t}function m(e){return t[e.toUpperCase()]}function g(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function v(e,t){var n=e.length,i=p(t).substr(0,n);return e.toUpperCase()===i.toUpperCase()}function b(e,t,n,i){if(c(n))for(var r=0;r<n.length;r++)v(t,n[r])&&e.push(i(n[r]));else for(var a in n)if(n.hasOwnProperty(a)){var o=n[a];v(t,o=o&&!0!==o?o.displayText?{text:o.text,displayText:o.displayText}:o.text:a)&&e.push(i(o))}}function y(e){"."==e.charAt(0)&&(e=e.substr(1));for(var t=e.split(r+r),n=0;n<t.length;n++)t[n]=t[n].replace(new RegExp(r,"g"),"");return t.join(r)}function x(e){for(var t=p(e).split("."),n=0;n<t.length;n++)t[n]=r+t[n].replace(new RegExp(r,"g"),r+r)+r;var i=t.join(".");return"string"==typeof e?i:((e=g(e)).text=i,e)}function _(e,i,a,o){for(var l=!1,c=[],u=i.start,d=!0;d;)d="."==i.string.charAt(0),l=l||i.string.charAt(0)==r,u=i.start,c.unshift(y(i.string)),"."==(i=o.getTokenAt(s(e.line,i.start))).string&&(d=!0,i=o.getTokenAt(s(e.line,i.start)));var p=c.join(".");b(a,p,t,(function(e){return l?x(e):e})),b(a,p,n,(function(e){return l?x(e):e})),p=c.pop();var h=c.join("."),f=!1,v=h;if(!m(h)){var _=h;(h=C(h,o))!==_&&(f=!0)}var w=m(h);return w&&w.columns&&(w=w.columns),w&&b(a,p,w,(function(e){var t=h;return 1==f&&(t=v),"string"==typeof e?e=t+"."+e:(e=g(e)).text=t+"."+e.text,l?x(e):e})),u}function w(e,t){for(var n=e.split(/\s+/),i=0;i<n.length;i++)n[i]&&t(n[i].replace(/[`,;]/g,""))}function C(e,t){for(var n=t.doc,i=n.getValue(),r=e.toUpperCase(),c="",u="",d=[],p={start:s(0,0),end:s(t.lastLine(),t.getLineHandle(t.lastLine()).length)},h=i.indexOf(a);-1!=h;)d.push(n.posFromIndex(h)),h=i.indexOf(a,h+1);d.unshift(s(0,0)),d.push(s(t.lastLine(),t.getLineHandle(t.lastLine()).text.length));for(var f=null,g=t.getCursor(),v=0;v<d.length;v++){if((null==f||l(g,f)>0)&&l(g,d[v])<=0){p={start:f,end:d[v]};break}f=d[v]}if(p.start){var b=n.getRange(p.start,p.end,!1);for(v=0;v<b.length&&(w(b[v],(function(e){var t=e.toUpperCase();t===r&&m(c)&&(u=c),t!==o&&(c=e)})),!u);v++);}return u}e.registerHelper("hint","sql",(function(e,a){t=f(a&&a.tables);var o=a&&a.defaultTable,l=a&&a.disableKeywords;n=o&&m(o),i=u(e),r=d(e),o&&!n&&(n=C(o,e)),(n=n||[]).columns&&(n=n.columns);var c,p,h,g=e.getCursor(),v=[],y=e.getTokenAt(g);if(y.end>g.ch&&(y.end=g.ch,y.string=y.string.slice(0,g.ch-y.start)),y.string.match(/^[.`"'\w@][\w$#]*$/g)?(h=y.string,c=y.start,p=y.end):(c=p=g.ch,h=""),"."==h.charAt(0)||h.charAt(0)==r)c=_(g,y,v,e);else{var x=function(e,t){return"object"==typeof e?e.className=t:e={text:e,className:t},e};b(v,h,n,(function(e){return x(e,"CodeMirror-hint-table CodeMirror-hint-default-table")})),b(v,h,t,(function(e){return x(e,"CodeMirror-hint-table")})),l||b(v,h,i,(function(e){return x(e.toUpperCase(),"CodeMirror-hint-keyword")}))}return{list:v,from:s(g.line,c),to:s(g.line,p)}}))}(n("56b3"),n("ffda"))},"9ae6":function(e,t,n){},"9b74":function(e,t,n){!function(e){"use strict";var t="CodeMirror-hint-active";function n(e,t){if(this.cm=e,this.options=t,this.widget=null,this.debounce=0,this.tick=0,this.startPos=this.cm.getCursor("start"),this.startLen=this.cm.getLine(this.startPos.line).length-this.cm.getSelection().length,this.options.updateOnCursorActivity){var n=this;e.on("cursorActivity",this.activityFunc=function(){n.cursorActivity()})}}e.showHint=function(e,t,n){if(!t)return e.showHint(n);n&&n.async&&(t.async=!0);var i={hint:t};if(n)for(var r in n)i[r]=n[r];return e.showHint(i)},e.defineExtension("showHint",(function(t){t=function(e,t,n){var i=e.options.hintOptions,r={};for(var a in c)r[a]=c[a];if(i)for(var a in i)void 0!==i[a]&&(r[a]=i[a]);if(n)for(var a in n)void 0!==n[a]&&(r[a]=n[a]);return r.hint.resolve&&(r.hint=r.hint.resolve(e,t)),r}(this,this.getCursor("start"),t);var i=this.listSelections();if(!(i.length>1)){if(this.somethingSelected()){if(!t.hint.supportsSelection)return;for(var r=0;r<i.length;r++)if(i[r].head.line!=i[r].anchor.line)return}this.state.completionActive&&this.state.completionActive.close();var a=this.state.completionActive=new n(this,t);a.options.hint&&(e.signal(this,"startCompletion",this),a.update(!0))}})),e.defineExtension("closeHint",(function(){this.state.completionActive&&this.state.completionActive.close()}));var i=window.requestAnimationFrame||function(e){return setTimeout(e,1e3/60)},r=window.cancelAnimationFrame||clearTimeout;function a(e){return"string"==typeof e?e:e.text}function o(e,t){for(;t&&t!=e;){if("LI"===t.nodeName.toUpperCase()&&t.parentNode==e)return t;t=t.parentNode}}function s(n,i){this.id="cm-complete-"+Math.floor(Math.random(1e6)),this.completion=n,this.data=i,this.picked=!1;var r=this,s=n.cm,l=s.getInputField().ownerDocument,c=l.defaultView||l.parentWindow,u=this.hints=l.createElement("ul");u.setAttribute("role","listbox"),u.setAttribute("aria-expanded","true"),u.id=this.id;var d=n.cm.options.theme;u.className="CodeMirror-hints "+d,this.selectedHint=i.selectedHint||0;for(var p=i.list,h=0;h<p.length;++h){var f=u.appendChild(l.createElement("li")),m=p[h],g="CodeMirror-hint"+(h!=this.selectedHint?"":" "+t);null!=m.className&&(g=m.className+" "+g),f.className=g,h==this.selectedHint&&f.setAttribute("aria-selected","true"),f.id=this.id+"-"+h,f.setAttribute("role","option"),m.render?m.render(f,i,m):f.appendChild(l.createTextNode(m.displayText||a(m))),f.hintId=h}var v=n.options.container||l.body,b=s.cursorCoords(n.options.alignWithWord?i.from:null),y=b.left,x=b.bottom,_=!0,w=0,C=0;if(v!==l.body){var k=-1!==["absolute","relative","fixed"].indexOf(c.getComputedStyle(v).position)?v:v.offsetParent,S=k.getBoundingClientRect(),M=l.body.getBoundingClientRect();w=S.left-M.left-k.scrollLeft,C=S.top-M.top-k.scrollTop}u.style.left=y-w+"px",u.style.top=x-C+"px";var O=c.innerWidth||Math.max(l.body.offsetWidth,l.documentElement.offsetWidth),$=c.innerHeight||Math.max(l.body.offsetHeight,l.documentElement.offsetHeight);v.appendChild(u),s.getInputField().setAttribute("aria-autocomplete","list"),s.getInputField().setAttribute("aria-owns",this.id),s.getInputField().setAttribute("aria-activedescendant",this.id+"-"+this.selectedHint);var E,T=n.options.moveOnOverlap?u.getBoundingClientRect():new DOMRect,D=!!n.options.paddingForScrollbar&&u.scrollHeight>u.clientHeight+1;if(setTimeout((function(){E=s.getScrollInfo()})),T.bottom-$>0){var L=T.bottom-T.top;if(b.top-(b.bottom-T.top)-L>0)u.style.top=(x=b.top-L-C)+"px",_=!1;else if(L>$){u.style.height=$-5+"px",u.style.top=(x=b.bottom-T.top-C)+"px";var z=s.getCursor();i.from.ch!=z.ch&&(b=s.cursorCoords(z),u.style.left=(y=b.left-w)+"px",T=u.getBoundingClientRect())}}var N,A=T.right-O;if(D&&(A+=s.display.nativeBarWidth),A>0&&(T.right-T.left>O&&(u.style.width=O-5+"px",A-=T.right-T.left-O),u.style.left=(y=b.left-A-w)+"px"),D)for(var I=u.firstChild;I;I=I.nextSibling)I.style.paddingRight=s.display.nativeBarWidth+"px";s.addKeyMap(this.keyMap=function(e,t){var n={Up:function(){t.moveFocus(-1)},Down:function(){t.moveFocus(1)},PageUp:function(){t.moveFocus(1-t.menuSize(),!0)},PageDown:function(){t.moveFocus(t.menuSize()-1,!0)},Home:function(){t.setFocus(0)},End:function(){t.setFocus(t.length-1)},Enter:t.pick,Tab:t.pick,Esc:t.close};/Mac/.test(navigator.platform)&&(n["Ctrl-P"]=function(){t.moveFocus(-1)},n["Ctrl-N"]=function(){t.moveFocus(1)});var i=e.options.customKeys,r=i?{}:n;function a(e,i){var a;a="string"!=typeof i?function(e){return i(e,t)}:n.hasOwnProperty(i)?n[i]:i,r[e]=a}if(i)for(var o in i)i.hasOwnProperty(o)&&a(o,i[o]);var s=e.options.extraKeys;if(s)for(var o in s)s.hasOwnProperty(o)&&a(o,s[o]);return r}(n,{moveFocus:function(e,t){r.changeActive(r.selectedHint+e,t)},setFocus:function(e){r.changeActive(e)},menuSize:function(){return r.screenAmount()},length:p.length,close:function(){n.close()},pick:function(){r.pick()},data:i})),n.options.closeOnUnfocus&&(s.on("blur",this.onBlur=function(){N=setTimeout((function(){n.close()}),100)}),s.on("focus",this.onFocus=function(){clearTimeout(N)})),s.on("scroll",this.onScroll=function(){var e=s.getScrollInfo(),t=s.getWrapperElement().getBoundingClientRect();E||(E=s.getScrollInfo());var i=x+E.top-e.top,r=i-(c.pageYOffset||(l.documentElement||l.body).scrollTop);if(_||(r+=u.offsetHeight),r<=t.top||r>=t.bottom)return n.close();u.style.top=i+"px",u.style.left=y+E.left-e.left+"px"}),e.on(u,"dblclick",(function(e){var t=o(u,e.target||e.srcElement);t&&null!=t.hintId&&(r.changeActive(t.hintId),r.pick())})),e.on(u,"click",(function(e){var t=o(u,e.target||e.srcElement);t&&null!=t.hintId&&(r.changeActive(t.hintId),n.options.completeOnSingleClick&&r.pick())})),e.on(u,"mousedown",(function(){setTimeout((function(){s.focus()}),20)}));var P=this.getSelectedHintRange();return 0===P.from&&0===P.to||this.scrollToActive(),e.signal(i,"select",p[this.selectedHint],u.childNodes[this.selectedHint]),!0}function l(e,t,n,i){if(e.async)e(t,i,n);else{var r=e(t,n);r&&r.then?r.then(i):i(r)}}n.prototype={close:function(){this.active()&&(this.cm.state.completionActive=null,this.tick=null,this.options.updateOnCursorActivity&&this.cm.off("cursorActivity",this.activityFunc),this.widget&&this.data&&e.signal(this.data,"close"),this.widget&&this.widget.close(),e.signal(this.cm,"endCompletion",this.cm))},active:function(){return this.cm.state.completionActive==this},pick:function(t,n){var i=t.list[n],r=this;this.cm.operation((function(){i.hint?i.hint(r.cm,t,i):r.cm.replaceRange(a(i),i.from||t.from,i.to||t.to,"complete"),e.signal(t,"pick",i),r.cm.scrollIntoView()})),this.options.closeOnPick&&this.close()},cursorActivity:function(){this.debounce&&(r(this.debounce),this.debounce=0);var e=this.startPos;this.data&&(e=this.data.from);var t=this.cm.getCursor(),n=this.cm.getLine(t.line);if(t.line!=this.startPos.line||n.length-t.ch!=this.startLen-this.startPos.ch||t.ch<e.ch||this.cm.somethingSelected()||!t.ch||this.options.closeCharacters.test(n.charAt(t.ch-1)))this.close();else{var a=this;this.debounce=i((function(){a.update()})),this.widget&&this.widget.disable()}},update:function(e){if(null!=this.tick){var t=this,n=++this.tick;l(this.options.hint,this.cm,this.options,(function(i){t.tick==n&&t.finishUpdate(i,e)}))}},finishUpdate:function(t,n){this.data&&e.signal(this.data,"update");var i=this.widget&&this.widget.picked||n&&this.options.completeSingle;this.widget&&this.widget.close(),this.data=t,t&&t.list.length&&(i&&1==t.list.length?this.pick(t,0):(this.widget=new s(this,t),e.signal(t,"shown")))}},s.prototype={close:function(){if(this.completion.widget==this){this.completion.widget=null,this.hints.parentNode&&this.hints.parentNode.removeChild(this.hints),this.completion.cm.removeKeyMap(this.keyMap);var e=this.completion.cm.getInputField();e.removeAttribute("aria-activedescendant"),e.removeAttribute("aria-owns");var t=this.completion.cm;this.completion.options.closeOnUnfocus&&(t.off("blur",this.onBlur),t.off("focus",this.onFocus)),t.off("scroll",this.onScroll)}},disable:function(){this.completion.cm.removeKeyMap(this.keyMap);var e=this;this.keyMap={Enter:function(){e.picked=!0}},this.completion.cm.addKeyMap(this.keyMap)},pick:function(){this.completion.pick(this.data,this.selectedHint)},changeActive:function(n,i){if(n>=this.data.list.length?n=i?this.data.list.length-1:0:n<0&&(n=i?0:this.data.list.length-1),this.selectedHint!=n){var r=this.hints.childNodes[this.selectedHint];r&&(r.className=r.className.replace(" "+t,""),r.removeAttribute("aria-selected")),(r=this.hints.childNodes[this.selectedHint=n]).className+=" "+t,r.setAttribute("aria-selected","true"),this.completion.cm.getInputField().setAttribute("aria-activedescendant",r.id),this.scrollToActive(),e.signal(this.data,"select",this.data.list[this.selectedHint],r)}},scrollToActive:function(){var e=this.getSelectedHintRange(),t=this.hints.childNodes[e.from],n=this.hints.childNodes[e.to],i=this.hints.firstChild;t.offsetTop<this.hints.scrollTop?this.hints.scrollTop=t.offsetTop-i.offsetTop:n.offsetTop+n.offsetHeight>this.hints.scrollTop+this.hints.clientHeight&&(this.hints.scrollTop=n.offsetTop+n.offsetHeight-this.hints.clientHeight+i.offsetTop)},screenAmount:function(){return Math.floor(this.hints.clientHeight/this.hints.firstChild.offsetHeight)||1},getSelectedHintRange:function(){var e=this.completion.options.scrollMargin||0;return{from:Math.max(0,this.selectedHint-e),to:Math.min(this.data.list.length-1,this.selectedHint+e)}}},e.registerHelper("hint","auto",{resolve:function(t,n){var i,r=t.getHelpers(n,"hint");if(r.length){var a=function(e,t,n){var i=function(e,t){if(!e.somethingSelected())return t;for(var n=[],i=0;i<t.length;i++)t[i].supportsSelection&&n.push(t[i]);return n}(e,r);!function r(a){if(a==i.length)return t(null);l(i[a],e,n,(function(e){e&&e.list.length>0?t(e):r(a+1)}))}(0)};return a.async=!0,a.supportsSelection=!0,a}return(i=t.getHelper(t.getCursor(),"hintWords"))?function(t){return e.hint.fromList(t,{words:i})}:e.hint.anyword?function(t,n){return e.hint.anyword(t,n)}:function(){}}}),e.registerHelper("hint","fromList",(function(t,n){var i,r=t.getCursor(),a=t.getTokenAt(r),o=e.Pos(r.line,a.start),s=r;a.start<r.ch&&/\w/.test(a.string.charAt(r.ch-a.start-1))?i=a.string.substr(0,r.ch-a.start):(i="",o=r);for(var l=[],c=0;c<n.words.length;c++){var u=n.words[c];u.slice(0,i.length)==i&&l.push(u)}if(l.length)return{list:l,from:o,to:s}})),e.commands.autocomplete=e.showHint;var c={hint:e.hint.auto,completeSingle:!0,alignWithWord:!0,closeCharacters:/[\s()\[\]{};:>,]/,closeOnPick:!0,closeOnUnfocus:!0,updateOnCursorActivity:!0,completeOnSingleClick:!0,container:null,customKeys:null,extraKeys:null,paddingForScrollbar:!0,moveOnOverlap:!0};e.defineOption("hintOptions",null)}(n("56b3"))},"9d32":function(e,t,n){"use strict";function i(e,t,n,i){var r,a=!1,o=0;function s(){r&&clearTimeout(r)}function l(){for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];var d=this,p=Date.now()-o;function h(){o=Date.now(),n.apply(d,c)}function f(){r=void 0}a||(i&&!r&&h(),s(),void 0===i&&p>e?h():!0!==t&&(r=setTimeout(i?f:h,void 0===i?e-p:e)))}return"boolean"!=typeof t&&(i=n,n=t,t=void 0),l.cancel=function(){s(),a=!0},l}function r(e,t,n){return void 0===n?i(e,t,!1):i(e,n,!1!==t)}n.d(t,"a",(function(){return r}))},"9d7d":function(e,t,n){},a4af:function(e,t,n){"use strict";n("64e3")},a7be:function(e,t,n){},a9e2:function(e,t,n){},ab1e:function(e,t,n){},afbf:function(e,t,n){},b07f:function(e,t,n){"use strict";n("8f6e")},b0dd:function(e,t,n){},b6f9:function(e,t,n){"use strict";n.r(t);var i=n("e017"),r=n.n(i),a=n("21a1"),o=n.n(a),s=new r.a({id:"icon-example",use:"icon-example-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="icon-example"><defs><style type="text/css"></style></defs><path d="M439.323 775.478c-49.28 0-97.098-9.657-142.126-28.7-43.48-18.389-82.523-44.706-116.044-78.225s-59.841-72.561-78.23-116.04c-19.044-45.027-28.7-92.844-28.7-142.122 0-49.285 9.656-97.105 28.7-142.133 18.388-43.48 44.71-82.52 78.231-116.04C214.673 118.705 253.717 92.387 297.198 74c45.027-19.04 92.846-28.694 142.125-28.694 49.28 0 97.1 9.654 142.127 28.694 43.481 18.386 82.526 44.705 116.045 78.22 33.52 33.52 59.842 72.56 78.23 116.04 19.043 45.028 28.7 92.848 28.7 142.133 0 49.278-9.657 97.095-28.702 142.123-18.388 43.477-44.708 82.52-78.228 116.039S624.93 728.392 581.45 746.78c-45.028 19.043-92.847 28.698-142.128 28.698z m0-676.961c-171.975 0-311.888 139.906-311.888 311.875s139.913 311.874 311.888 311.874 311.888-139.908 311.888-311.874S611.3 98.517 439.323 98.517z m451.355 846.218c-22.122 0-42.904-8.562-58.541-24.116L674.673 767.975l37.039-38.206L869.6 882.828c5.607 5.606 13.092 8.693 21.078 8.693 7.983 0 15.465-3.088 21.07-8.691 5.617-5.622 8.717-13.127 8.717-21.123 0-7.981-3.092-15.463-8.703-21.068l-0.302-0.307-152.746-157.563 38.208-37.035L949.534 803.16c15.571 15.638 24.145 36.423 24.145 58.55 0 22.195-8.626 43.054-24.287 58.736-15.669 15.665-36.515 24.288-58.714 24.288z" fill="" p-id="782" /><path d="M281.015 568.755c-42.34-42.321-65.652-98.585-65.643-158.421 0.008-59.819 23.319-116.075 65.637-158.408l37.635 37.62c-66.607 66.629-66.61 175-0.007 241.577l-37.622 37.632z" fill="" p-id="783" /></symbol>'});o.a.add(s),t.default=s},b7b8:function(e,t,n){"use strict";n.r(t);var i=n("e017"),r=n.n(i),a=n("21a1"),o=n.n(a),s=new r.a({id:"icon-save",use:"icon-save-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="icon-save"><defs><style type="text/css"></style></defs><path d="M819.814 968.064H204.186c-84.352 0-152.986-68.582-152.986-152.96V208.922c0-84.378 68.634-153.012 152.986-153.012H819.84c84.326 0.026 152.96 68.634 152.96 153.012v606.182c0 84.378-68.608 152.96-152.986 152.96zM204.186 115.635c-51.456 0-93.312 41.83-93.312 93.312v606.157c0 51.456 41.856 93.338 93.312 93.338H819.84c51.456 0 93.312-41.882 93.312-93.338V208.922c0-51.482-41.856-93.312-93.312-93.312H204.186v0.025zM807.04 513.434H216.96V55.936h590.106v457.498h-0.026z m-530.432-59.7h470.784V115.635H276.608v338.1z m323.251-250.29h59.648V402.38H599.86V203.443z m0 0" fill="" p-id="20747" /></symbol>'});o.a.add(s),t.default=s},b849:function(e,t,n){"use strict";n.r(t);var i=n("e017"),r=n.n(i),a=n("21a1"),o=n.n(a),s=new r.a({id:"icon-pause",use:"icon-pause-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="icon-pause"><defs><style type="text/css"></style></defs><path d="M247.731946 0a49.546389 49.546389 0 0 0-49.546389 49.546389v924.907222a49.546389 49.546389 0 0 0 99.092779 0V49.546389a49.546389 49.546389 0 0 0-49.54639-49.546389zM776.268054 0a49.546389 49.546389 0 0 0-49.54639 49.546389v924.907222a49.546389 49.546389 0 0 0 99.092779 0V49.546389a49.546389 49.546389 0 0 0-49.546389-49.546389z" p-id="46189" /></symbol>'});o.a.add(s),t.default=s},b899:function(e,t){e.exports=__WEBPACK_EXTERNAL_MODULE_b899__},b8be:function(e,t,n){"use strict";n("fb73")},bb5a:function(e,t,n){"use strict";n("01bb")},c107:function(e,t,n){},c188:function(e,t,n){"use strict";n("4b27")},c892:function(e,t,n){"use strict";n("2427")},c8ba:function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},c928:function(e,t,n){"use strict";n("da5e")},c9e2:function(e,t){e.exports=__WEBPACK_EXTERNAL_MODULE_c9e2__},d22b:function(e,t,n){"use strict";var i=n("b899"),r=n("9d32"),a=n("56b3"),o=n.n(a);n("a7be"),n("5fb4"),n("ffda"),n("1ad7"),n("8c33"),n("10b2"),n("f6b6"),n("9b74"),n("991c");const s={GROOVY:"text/x-groovy",SQL:"text/x-mysql",NODEJS:"text/x-javascript"},l={GROOVY:"SINGLE",SQL:"LIST",NODEJS:""},c={GROOVY:'// Groovy\n// contextcontext.get("orderNo")\n// DBUtils.getSingleBySql(String sql)Map\n// DBUtils.getListBySql(String sql)MapList\n',SQL:"",NODEJS:""};var u={props:{code:{type:String,required:!0},btnText:{type:String,default:"lang.action.complete"}},data:()=>({CONFIG:i.CONFIG,loading:!1,validate:!1,dirty:!0,cache:{groovy:"",sql:""},result:{},viewdata:{[i.CONFIG.scf.code]:null,[i.CONFIG.scf.name]:null,[i.CONFIG.scf.dataType]:null,[i.CONFIG.scf.dataForm]:null,[i.CONFIG.scf.dataExpression]:null,[i.CONFIG.scf.dataDescription]:{}},data:null}),mounted(){this.getViewdata().then(()=>this.initEditor()).catch(e=>this.$emit("error"))},methods:{getViewdata(){return i.CONFIG.scf.get(this.code).then(e=>{this.viewdata=e})},initEditor(){const e=this.viewdata[i.CONFIG.scf.dataType]||i.CONFIG.scf.defaultDataType;this.editor=o.a.fromTextArea(this.$refs.editor,{mode:s[e],theme:"midnight",lineNumbers:!0,lineWrapping:!1,styleActiveLine:!0,matchBrackets:!0,autoCloseBrackets:!0,minimap:{scale:6}}),this.editor.setValue(this.viewdata[i.CONFIG.scf.dataExpression]||c[e]),this.editor.on("keyup",Object(r.a)(500,()=>this.parseScope(this.editor.getValue()))),this.viewdata[i.CONFIG.scf.dataExpression]&&this.onExpressionChange(this.editor.getValue())},editorTypeChange(e){let t="";t="GROOVY"===e?this.cache.groovy||c.GROOVY:this.cache[e.toLowerCase()],this.viewdata[i.CONFIG.scf.dataType]=e,this.viewdata[i.CONFIG.scf.dataForm]=l[this.viewdata[i.CONFIG.scf.dataType]],this.editor.setOption("mode",s[this.viewdata[i.CONFIG.scf.dataType]]),this.editor.setValue(t),this.parseScope(t),this.validate=!1,this.dirty=!0,this.result={}},paramHandler(e,t){this.dirty=!0;let{handler:n,...r}=this.viewdata[i.CONFIG.scf.dataDescription].parameters[t];e&&(r.handler=e),this.viewdata[i.CONFIG.scf.dataDescription].parameters.splice(t,1,r)},clearColumns(){this.viewdata[i.CONFIG.scf.dataDescription].columns=[],this.$message({type:"success",message:this.$transMsg("lang.tip.operationSuccess")})},execScript(){this.onExpressionChange(this.editor.getValue()).catch(e=>{e===this.$transMsg("lang.tip.compelteParams")?this.$message({type:"warning",message:e}):this.$message({type:"warning",message:this.$transMsg("lang.action.execFail")})})},saveGroovy(){let e={viewdata:this.viewdata,data:this.data};this.loading=!0,this.onExpressionChange(this.editor.getValue()).then(()=>{i.CONFIG.scf.update(this.viewdata).then(()=>this.$emit("done",e))}).finally(()=>this.loading=!1)},onExpressionChange(e){return new Promise((t,n)=>{this.viewdata[i.CONFIG.scf.dataExpression]=e,this.parseScope(e),this._validateScope().then(()=>{this._execGroovy().then(e=>{this.validate=!0,this.data=e.data,t()}).catch(e=>{this.validate=!1,this.data=null,n(e)})}).catch(e=>{this.result={},this.validate=!1,this.data=null,n(e)})})},parseScope(e){const{parameters:t=[]}=this.viewdata[i.CONFIG.scf.dataDescription];this.$set(this.viewdata[i.CONFIG.scf.dataDescription],"parameters",[]),this.dirty=!0,"GROOVY"===this.viewdata[i.CONFIG.scf.dataType]?(this.cache.groovy=e,null==e||e.split("\n").forEach(e=>{/^\s*\/\//.test(e)||e.replace(/context\.get\((['"])(\w+)\1\)/g,(e,n,r)=>{this.viewdata[i.CONFIG.scf.dataDescription].parameters.every(e=>e.name!==r)&&this.viewdata[i.CONFIG.scf.dataDescription].parameters.push({name:r,...t.find(e=>e.name===r)||{defaultValue:""}})})})):"SQL"===this.viewdata[i.CONFIG.scf.dataType]&&(this.cache.sql=e,null==e||e.split("\n").forEach(e=>{/^\s*\-\-\s/.test(e)||e.replace(/#\{(\w+)\}/g,(e,n)=>{this.viewdata[i.CONFIG.scf.dataDescription].parameters.every(e=>e.name!==n)&&this.viewdata[i.CONFIG.scf.dataDescription].parameters.push({name:n,...t.find(e=>e.name===n)||{defaultValue:""}})})}))},_validateScope:()=>new Promise((e,t)=>e()),_execGroovy(){return new Promise((e,t)=>{this.loading=!0,i.CONFIG.scf.exec(this.viewdata).then(n=>{this.result=n,this.dirty=!1,0===n.code?e(n):t(n)}).catch(e=>t(e)).finally(()=>this.loading=!1)})},getErrorMsg:e=>null==e?void 0:e.split("\n").map(e=>e.replace(/GroovyCaller\.(.*?)\sis/g,"GroovyCaller.<font color=red>$1</font> is").replace(/No\ssuch\sproperty:\s(.*?)\sfor/g,"No such property: <font color=red>$1</font> for").replace(/Unexpected\sinput:\s'(.*?)'/g,"Unexpected input: '<font color=red>$1</font>'").replace(/^(\s*)(import\s[\w+\.]+;?)/g,"$1<font color=red>$2</font>")).join("\n")}},d=(n("c928"),n("e924"),n("2877")),p=Object(d.a)(u,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"script-editor"},[n("div",{staticClass:"editor-wrap"},[n("textarea",{ref:"editor"}),e._v(" "),n("el-dropdown",{staticClass:"settings",attrs:{trigger:"click"},on:{command:e.editorTypeChange}},[n("el-popover",{attrs:{"close-delay":0,"open-delay":200,placement:"top-start",trigger:"hover",content:e.$transMsg("lang.tip.selectScriptType")+": "+e.viewdata[e.CONFIG.scf.dataType]}},[n("i",{staticClass:"icon el-icon-setting",attrs:{slot:"reference"},slot:"reference"})]),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{attrs:{disabled:"GROOVY"==e.viewdata.dataType,command:"GROOVY"}},[e._v("GROOVY")]),n("el-dropdown-item",{attrs:{disabled:"SQL"==e.viewdata.dataType,command:"SQL"}},[e._v("SQL")])],1)],1)],1),Object.keys(e.viewdata).length?n("div",{staticClass:"groovy-details"},[n("div",{staticClass:"operations"},[n("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-caret-right",title:e.$transMsg("lang.action.execScript")},on:{click:e.execScript}},[e._v(e._s(e.$transMsg("lang.action.exec")))])],1),n("fieldset",{staticClass:"params"},[n("legend",[e._v("PARAMS")]),n("el-form",{ref:"paramsForm",attrs:{"label-width":"120px",size:"mini"},nativeOn:{submit:function(e){e.preventDefault()}}},e._l(e.viewdata[e.CONFIG.scf.dataDescription].parameters,(function(t){return n("el-form-item",{key:t.name,staticClass:"groovy-param",attrs:{label:t.name}},[n("el-input",{attrs:{placeholder:e.$transMsg("lang.action.execOnEnter")},on:{change:function(t){e.dirty=!0}},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.execScript.apply(null,arguments)}},model:{value:t.defaultValue,callback:function(n){e.$set(t,"defaultValue",n)},expression:"param.defaultValue"}})],1)})),1)],1),n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"preview-groovy"},[0==e.result.code?n("div",{staticClass:"groovy-result"},[n("label",[e._v("RETURNED JSON")]),n("pre",[e._v(e._s(JSON.stringify(e.result.data,null,2)))])]):"code"in e.result?n("div",{staticClass:"groovy-error"},[n("div",{staticClass:"error-code"},[n("label",[e._v("Error Code: ")]),e._v(e._s(e.result.code))]),n("div",{staticClass:"error-msg"},[n("label",[e._v("Error Msg: ")]),n("pre",{domProps:{innerHTML:e._s(e.getErrorMsg(e.result.data.message))}})]),n("div",{staticClass:"error-stack"},[n("label",[e._v("Stack Trace: ")]),e._l(e.result.data.stackTrace,(function(t,i){return n("div",{key:i,staticClass:"stack-trace"},[n("div",{staticClass:"method-name"},[e._v(e._s(t.methodName))]),n("div",{staticClass:"class-info"},[n("div",{staticClass:"class-name"},[e._v(e._s(t.className))]),e._v(":"),n("div",{staticClass:"line-number"},[e._v(e._s(t.lineNumber))])])])}))],2)]):e._e()]),n("div",{staticClass:"buttons"},[n("el-button",{attrs:{type:"primary",disabled:!e.validate,loading:e.loading},on:{click:e.saveGroovy}},[e._v(e._s(e.$t(e.btnText)))])],1)]):e._e()])}),[],!1,null,null,null);t.a=p.exports},d47c:function(e,t,n){},d780:function(e,t,n){},d9b6:function(e,t,n){"use strict";n.r(t);var i=n("e017"),r=n.n(i),a=n("21a1"),o=n.n(a),s=new r.a({id:"icon-logo",use:"icon-logo-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="icon-logo"><defs><style type="text/css"></style></defs><path d="M837.908843 1004.852357v19.147643H186.091157V0h19.147643v1004.852357z" fill="#F2F2F2" p-id="4477" /><path d="M837.908843 985.704714v19.147643H205.2388V0h19.147643v985.704714z" fill="#6CB92B" p-id="4478" data-spm-anchor-id="a313x.7781069.0.i26" class="" /><path d="M837.908843 966.557071v19.147643H224.386443V0h19.147643v966.557071z" fill="#F2F2F2" p-id="4479" /><path d="M837.908843 947.409427v19.147644h-594.374757V0h19.147644v947.409427z" fill="#008CD6" p-id="4480" data-spm-anchor-id="a313x.7781069.0.i28" class="" /><path d="M837.908843 928.261784v19.147643H262.68173V0H281.829373v928.261784z" fill="#F2F2F2" p-id="4481" data-spm-anchor-id="a313x.7781069.0.i25" class="" /><path d="M837.908843 909.114141v19.147643H281.829373V0h19.147643v909.114141z" fill="#F6AA01" p-id="4482" data-spm-anchor-id="a313x.7781069.0.i24" class="" /><path d="M837.908843 889.966498v19.147643H300.977016V0h19.147643v889.966498z" fill="#F2F2F2" p-id="4483" data-spm-anchor-id="a313x.7781069.0.i23" class="" /><path d="M837.908843 870.818855v19.147643H320.124659V0h19.147643v870.818855z" fill="#FFE102" p-id="4484" data-spm-anchor-id="a313x.7781069.0.i22" class="" /><path d="M837.908843 851.671212v19.147643h-498.636541V0h19.147643v851.671212z" fill="#F2F2F2" p-id="4485" data-spm-anchor-id="a313x.7781069.0.i21" class="" /><path d="M837.908843 832.523568v19.147644H358.419945V0H377.567589v832.523568z" fill="#E8330B" p-id="4486" data-spm-anchor-id="a313x.7781069.0.i20" class="selected" /><path d="M837.908843 813.375925v19.147643H377.567589V0h19.147643v813.375925z" fill="#ffffff" p-id="4487" data-spm-anchor-id="a313x.7781069.0.i29" class="" /><path d="M837.908843 775.080639v19.147643H415.862875V0h19.147643v775.080639z" fill="#ffffff" p-id="4488" data-spm-anchor-id="a313x.7781069.0.i30" class="" /><path d="M837.908843 794.228282v19.147643H396.715232V0h19.147643v794.228282z" fill="#ffffff" p-id="4489" data-spm-anchor-id="a313x.7781069.0.i19" class="" /></symbol>'});o.a.add(s),t.default=s},da5e:function(e,t,n){},db1c:function(e,t,n){"use strict";n("a9e2")},dfda:function(e,t,n){"use strict";var i=n("b899"),r={components:{DynamicInput:n("56bf").default},props:{data:Object},data:()=>({properties:[]}),created(){this.initProps()},methods:{initProps(){for(let e in this.data)i.Types.isFunction(this.data[e])?this.properties.push({key:e,type:this.data[e],simple:!0}):i.Types.isObject(this.data[e])&&this.properties.push({key:e,...this.data[e]})}}},a=n("2877"),o=Object(a.a)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"custom-class w-full"},[e._l(e.properties,(function(t,i){return[t.simple?n("dynamic-input",{key:i,model:{value:e.properties[i],callback:function(t){e.$set(e.properties,i,t)},expression:"properties[i]"}}):e._e(),e._v(" "+e._s(t.simple)+" ")]}))],2)}),[],!1,null,"3149737c",null);t.a=o.exports},e017:function(e,t,n){(function(t){!function(t,n){e.exports=n()}(0,(function(){"use strict";var e=function(e){var t=e.id,n=e.viewBox,i=e.content;this.id=t,this.viewBox=n,this.content=i};function n(e,t){return e(t={exports:{}},t.exports),t.exports}e.prototype.stringify=function(){return this.content},e.prototype.toString=function(){return this.stringify()},e.prototype.destroy=function(){var e=this;["id","viewBox","content"].forEach((function(t){return delete e[t]}))},"undefined"!=typeof window?window:void 0!==t||"undefined"!=typeof self&&self;var i=n((function(e,t){e.exports=function(){function e(e){return e&&"object"==typeof e&&"[object RegExp]"!==Object.prototype.toString.call(e)&&"[object Date]"!==Object.prototype.toString.call(e)}function t(t,n){return n&&!0===n.clone&&e(t)?r(function(e){return Array.isArray(e)?[]:{}}(t),t,n):t}function n(n,i,a){var o=n.slice();return i.forEach((function(i,s){void 0===o[s]?o[s]=t(i,a):e(i)?o[s]=r(n[s],i,a):-1===n.indexOf(i)&&o.push(t(i,a))})),o}function i(n,i,a){var o={};return e(n)&&Object.keys(n).forEach((function(e){o[e]=t(n[e],a)})),Object.keys(i).forEach((function(s){e(i[s])&&n[s]?o[s]=r(n[s],i[s],a):o[s]=t(i[s],a)})),o}function r(e,r,a){var o=Array.isArray(r),s=(a||{arrayMerge:n}).arrayMerge||n;return o?Array.isArray(e)?s(e,r,a):t(r,a):i(e,r,a)}return r.all=function(e,t){if(!Array.isArray(e)||e.length<2)throw new Error("first argument should be an array with at least two elements");return e.reduce((function(e,n){return r(e,n,t)}))},r}()})),r=n((function(e,t){t.default={svg:{name:"xmlns",uri:"http://www.w3.org/2000/svg"},xlink:{name:"xmlns:xlink",uri:"http://www.w3.org/1999/xlink"}},e.exports=t.default})),a=r.svg,o=r.xlink,s={};s[a.name]=a.uri,s[o.name]=o.uri;var l=function(e,t){return void 0===e&&(e=""),"<svg "+function(e){return Object.keys(e).map((function(t){return t+'="'+e[t].toString().replace(/"/g,"&quot;")+'"'})).join(" ")}(i(s,t||{}))+">"+e+"</svg>"};return function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={isMounted:{}};return n.isMounted.get=function(){return!!this.node},t.createFromExistingNode=function(e){return new t({id:e.getAttribute("id"),viewBox:e.getAttribute("viewBox"),content:e.outerHTML})},t.prototype.destroy=function(){this.isMounted&&this.unmount(),e.prototype.destroy.call(this)},t.prototype.mount=function(e){if(this.isMounted)return this.node;var t="string"==typeof e?document.querySelector(e):e,n=this.render();return this.node=n,t.appendChild(n),n},t.prototype.render=function(){var e=this.stringify();return function(e){var t=!!document.importNode,n=(new DOMParser).parseFromString(e,"image/svg+xml").documentElement;return t?document.importNode(n,!0):n}(l(e)).childNodes[0]},t.prototype.unmount=function(){this.node.parentNode.removeChild(this.node)},Object.defineProperties(t.prototype,n),t}(e)}))}).call(this,n("c8ba"))},e720:function(e,t,n){"use strict";var i=n("b899"),r={components:{ScriptEditor:n("d22b").a},model:{prop:"value",event:"change"},props:{value:String,size:{type:String,default:"mini"}},data:()=>({CONFIG:i.CONFIG,adding:!1,visible:!1,code:null,list:[],viewdata:{[i.CONFIG.scf.code]:null,[i.CONFIG.scf.name]:null,[i.CONFIG.scf.dataType]:null,[i.CONFIG.scf.dataForm]:null,[i.CONFIG.scf.dataExpression]:null,[i.CONFIG.scf.dataDescription]:{}}}),created(){this.code=this.value,this.getList()},methods:{getList(){i.CONFIG.scf.getList().then(e=>{this.list=e})},editSCF(e){this.code=e,this.visible=!0},addSCF(){this.$prompt(this.$transMsg("lang.tip.scfName"),this.$transMsg("lang.common.tip"),{inputPattern:/^\S+$/,inputPlaceholder:this.$transMsg("lang.text.scfName"),inputErrorMessage:this.$transMsg("lang.tip.scfNameInvalid")}).then(({value:e})=>{const t=Object(i.uuid2)();this.adding=!0,this.viewdata[i.CONFIG.scf.name]=e,this.viewdata[i.CONFIG.scf.code]=t,i.CONFIG.scf.create(this.viewdata).then(e=>{this.code=t,this.viewdata=e,this.getList(),this.visible=!0}).catch(e=>this.$message({type:"warning",message:this.$transMsg(e.msg)})).finally(e=>this.adding=!1)})},handleChange(e){this.$emit("change",e),i.CONFIG.scf.get(this.code).then(e=>{this.viewdata=e,this.$emit("data",e)})},handleSCF(e){this.visible=!1,this.viewdata=e.viewdata,this.$emit("data",this.viewdata)}}},a=(n("5f9c"),n("0b16"),n("2877")),o=Object(a.a)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"scf-picker w-full"},[n("el-select",{staticClass:"w-full",attrs:{placeholder:e.$transMsg("lang.tip.chooseScf")},on:{change:e.handleChange},model:{value:e.code,callback:function(t){e.code=t},expression:"code"}},e._l(e.list,(function(t){return n("el-option",{key:t[e.CONFIG.scf.code],attrs:{label:t[e.CONFIG.scf.name],value:t[e.CONFIG.scf.code]}},[n("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"space-between"}},[n("span",[e._v(e._s(t[e.CONFIG.scf.name]))]),n("i",{staticClass:"el-icon-edit",on:{click:function(n){return e.editSCF(t[e.CONFIG.scf.code])}}})])])})),1),n("div",{staticClass:"add-scf"},[n("div",{staticClass:"btn",attrs:{loading:e.adding},on:{click:e.addSCF}},[n("i",{staticClass:"el-icon-plus"})]),n("el-dialog",{attrs:{title:e.$transMsg("lang.text.scfEditor"),width:"80%","custom-class":"scf-editor","append-to-body":"",visible:e.visible},on:{"update:visible":function(t){e.visible=t}}},[n("script-editor",{key:e.code,attrs:{code:e.code},on:{done:e.handleSCF}})],1)],1)],1)}),[],!1,null,"65ff55d8",null);t.a=o.exports},e7a4:function(e,t,n){},e924:function(e,t,n){"use strict";n("afbf")},ec41:function(e,t,n){"use strict";var i=n("b899"),r={components:{LazyInput:n("2df1").a},model:{prop:"value",event:"change"},props:{value:String,size:String},computed:{treeData(){let e=this.$(this.$store.state.leivii.selected.$id);return e?this.getTree(Object.entries(e.dataSource)):[]}},data:()=>({visible:!1}),methods:{getTree(e,t=[]){return e.map(e=>{let n={id:[...t,e[0]].join("."),label:e[0]};return i.Types.isObject(e[1])?{...n,children:this.getTree(Object.entries(e[1]),[...t,e[0]])}:n})},close(){this.visible=!1},nodeClick(e){this.$emit("change",e.id),this.visible=!1}}},a=(n("f10a"),n("2877")),o=Object(a.a)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"datasource-picker w-full",style:e.visible?"z-index: 9":""},[n("el-popover",{attrs:{placement:"left"},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[n("lazy-input",{attrs:{slot:"reference",value:e.value,size:e.size,clearable:"",placeholder:e.$transMsg("lang.action.chooseDataSource")},on:{change:function(t){return e.$emit("change",t)}},slot:"reference"},[n("i",{staticClass:"el-icon-circle-close el-input__icon",attrs:{slot:"suffix"},on:{click:function(t){return t.stopPropagation(),e.$emit("change","")}},slot:"suffix"})]),n("el-tree",{staticClass:"datasource-tree",attrs:{"node-key":"id",data:e.treeData,"expand-on-click-node":!1},on:{"node-click":e.nodeClick}})],1)],1)}),[],!1,null,"34fbd941",null);t.a=o.exports},ee07:function(e,t,n){"use strict";n("6df4")},ee7b:function(module,__webpack_exports__,__webpack_require__){"use strict";var leivii__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("b899"),leivii__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(leivii__WEBPACK_IMPORTED_MODULE_0__),throttle_debounce__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("9d32"),codemirror__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("56b3"),codemirror__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(codemirror__WEBPACK_IMPORTED_MODULE_2__),codemirror_lib_codemirror_css__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("a7be"),codemirror_lib_codemirror_css__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(codemirror_lib_codemirror_css__WEBPACK_IMPORTED_MODULE_3__),codemirror_mode_javascript_javascript__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("f9d4"),codemirror_mode_javascript_javascript__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(codemirror_mode_javascript_javascript__WEBPACK_IMPORTED_MODULE_4__),codemirror_theme_midnight_css__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("1ad7"),codemirror_theme_midnight_css__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(codemirror_theme_midnight_css__WEBPACK_IMPORTED_MODULE_5__),codemirror_addon_edit_matchbrackets_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("8c33"),codemirror_addon_edit_matchbrackets_js__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(codemirror_addon_edit_matchbrackets_js__WEBPACK_IMPORTED_MODULE_6__),codemirror_addon_edit_closebrackets_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("10b2"),codemirror_addon_edit_closebrackets_js__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(codemirror_addon_edit_closebrackets_js__WEBPACK_IMPORTED_MODULE_7__),codemirror_addon_hint_show_hint_css__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("f6b6"),codemirror_addon_hint_show_hint_css__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(codemirror_addon_hint_show_hint_css__WEBPACK_IMPORTED_MODULE_8__),codemirror_addon_hint_show_hint__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("9b74"),codemirror_addon_hint_show_hint__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(codemirror_addon_hint_show_hint__WEBPACK_IMPORTED_MODULE_9__),codemirror_addon_hint_javascript_hint__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("3c98"),codemirror_addon_hint_javascript_hint__WEBPACK_IMPORTED_MODULE_10___default=__webpack_require__.n(codemirror_addon_hint_javascript_hint__WEBPACK_IMPORTED_MODULE_10__),_editor_ObjectInput__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("2ded"),_editor_ComponentTreeInput__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("3d21");const typeMap={input:"text","input-number":"text",select:"dict",radio:"dict",checkbox:"dict","date-picker":"time"};__webpack_exports__.a={components:{ObjectInput:_editor_ObjectInput__WEBPACK_IMPORTED_MODULE_11__.a,ComponentTreeInput:_editor_ComponentTreeInput__WEBPACK_IMPORTED_MODULE_12__.a},props:{model:Object,viewdata:Object},data:()=>({loading:!1,comps:{form:"",table:""},pageScript:"",scripts:[],script:"/** \n * $model - \n * $viewdata - viewdata\n * $config - \n * $script - \n * $typeMap - map\n * CONFIG - Leivii Config\n */\nlet columns = $viewdata.dataDescription?.columns || []\nlet params = $viewdata.dataDescription?.parameters || []\nlet uuid = '-' + Math.random().toString(16).substr(2)\n\nthis.$set($config, 'form', $config.form || 'geek-form' + uuid)\nthis.$set($config, 'table', $config.table || 'geek-table' + uuid)\n\n// \nlet dirty = []\nthis.pageConfig.$body ||= []\n// \nlet fields = params.map(col => {\n  return {\n    $id: col.name + uuid,\n    $type: 'geek-' + col.property.type,\n    $visible: true,\n    $prop: col.property.dict,\n    prop: col.name,\n    label: col.property.label,\n    valueProcessor: col.property.config?.type === 'daterange' ? \"val => val.join('-')\" : '',\n    ...col.property.config\n  }\n})\n\nlet formConfig = await this.$store.dispatch('leivii/getConfigById', $config.form)\nif (formConfig) {\n  let { xpath } = await this.$store.dispatch('leivii/setConfigById', {\n    id: $config.form,\n    config: { $body: fields }\n  })\n  dirty = dirty.concat(xpath)\n} else {\n  this.pageConfig.$body.push({\n    $id: 'geek-search-bar' + uuid,\n    $type: 'geek-search-bar',\n    $visible: true,\n    $handlers: [{\n      type: 'component',\n      name: 'search',\n      target: $config.table,\n      action: 'loadData',\n      params: []\n    },\n    {\n      type: 'component',\n      name: 'reset',\n      target: $config.form,\n      action: 'reset',\n      params: []\n    }],\n    $body: [{\n      $id: $config.form,\n      $type: 'geek-form',\n      $visible: true,\n      $classes: 'pl pr',\n      cols: 3,\n      gutter: 20,\n      $body: fields\n    }]\n  })\n}\n\n// \nlet tableColumns = columns.map(col => {\n  let { column, property: { label, type, dict, config }} = col\n  return Object.assign({ name: column, label, type: $typeMap[type], dict, ...config })\n})\nlet tableDataSource = [{\n  type: 'SCF',\n  subtype: 'PAGING_LIST',\n  code: $viewdata.code,\n  autoProcess: true,\n  scoped: true,\n  cache: false,\n  root: 'data',\n  params: {\n    type: 'objectMerge',\n    target: '',\n    action: [{\n      type: 'component',\n      target: $config.form,\n      action: 'getForm',\n      params: []\n    }, {\n      type: 'component',\n      target: $config.table,\n      action: 'getPagination',\n      params: []\n    }]\n  },\n  page: CONFIG.pagination.page,\n  size: CONFIG.pagination.size,\n  total: CONFIG.pagination.total,\n  list: CONFIG.pagination.list,\n  key: 'table'\n}]\n\nlet tableConfig = await this.$store.dispatch('leivii/getConfigById', $config.table)\nif (tableConfig) {\n  let { xpath } = await this.$store.dispatch('leivii/setConfigById', {\n    id: $config.table,\n    config: { columns: tableColumns, $dataSource: tableDataSource }\n  })\n  dirty = dirty.concat(xpath)\n  await this.$($config.table).loadData()\n} else {\n  this.pageConfig.$body.push({\n    $id: $config.table,\n    $type: 'geek-table',\n    $visible: true,\n    $dataSource: tableDataSource,\n    $prop: 'table',\n    actions: [{\n      $id: 'geek-download' + uuid,\n      $type: 'geek-download',\n      $visible: true,\n      text: 'lang.action.export',\n      params: {\n        type: 'objectMerge',\n        target: '',\n        action: [{\n          type: 'component',\n          target: $config.form,\n          action: 'getForm',\n          params: []\n        }, {\n          type: 'custom',\n          target: '',\n          action: {\n            viewDataCode: {\n              type: 'expression',\n              target: '',\n              action: $viewdata.code,\n              params: []\n            },\n            fileType: {\n              type: 'expression',\n              target: '',\n              action: 'XLSX',\n              params: []\n            },\n            language: {\n              type: 'expression',\n              target: '',\n              action: 'zh_cn',\n              params: []\n            },\n            creator: {\n              type: 'expression',\n              target: '',\n              action: localStorage.getItem('userName'),\n              params: []\n            }\n          }\n        }]\n      },\n      type: 'primary',\n      url: '/report/api/common/export/sync/v1'\n    }],\n    columns: tableColumns,\n    fitWidth: true,\n    showPagination: true\n  })\n}\n\n//  model\nlet models = [this.pageConfig.models].flat().filter(Boolean)\nlet modelIndex = models.findIndex(m => m.type === 1 && m.code === $model.code)\nlet model = {\n  name: $model.name,\n  code: $model.code,\n  templateCode: $model.templateCode,\n  type: 1,\n  config: { ...$config, script: $script },\n  list: columns.map(item => {\n    let { column, property: { label, type, ...args }} = item\n    return { prop: column, name: label, type: type, ...args }\n  })\n}\nif (modelIndex > -1) {\n  models.splice(modelIndex, 1, model)\n} else {\n  models.push(model)\n}\n\nawait this.$store.dispatch('leivii/setConfigById', {\n  id: this.pageConfig.$id,\n  config: { models, $body: this.pageConfig.$body }\n})\n\nthis.$store.commit('leivii/SET_DIRTY', [...new Set(dirty.map(item => item.split('.')[1]))])"}),created(){},mounted(){this.initConfig()},methods:{initConfig(){let{script:e,...t}=this.model.config;this.scripts=Object.values(leivii__WEBPACK_IMPORTED_MODULE_0__.Dict.scripts),!e&&this.scripts.length&&(this.pageScript=this.scripts[0].name,this.handleScriptChange());for(let e in t)this.$set(this.comps,e,t[e])},handleChange(e){e.includes("advanced")&&!this.editor&&setTimeout(()=>this.initEditor())},handleScriptChange(e){var t;this.pageScript?this.script=leivii__WEBPACK_IMPORTED_MODULE_0__.Dict.scripts[this.pageScript].script:this.script="",null===(t=this.editor)||void 0===t||t.setValue(this.script)},initEditor(){this.editor=codemirror__WEBPACK_IMPORTED_MODULE_2___default.a.fromTextArea(this.$refs.configEditor,{mode:"javascript",theme:"midnight",lineNumbers:!0,lineWrapping:!1,styleActiveLine:!0,matchBrackets:!0,autoCloseBrackets:!0}),this.editor.setValue(this.script)},prev(){this.$emit("prev")},next(){var _this$editor2;const that=this,script=this.script=(null===(_this$editor2=this.editor)||void 0===_this$editor2?void 0:_this$editor2.getValue())||this.script;this.$emit("done",{done(){try{return eval(`(async function($model, $viewdata, $config, $script, $typeMap, CONFIG) {\n${script}\n})`).call(this,that.model,that.viewdata,that.comps,script,typeMap,leivii__WEBPACK_IMPORTED_MODULE_0__.CONFIG)}catch(e){console.log(e)}}})}}}},f10a:function(e,t,n){"use strict";n("8185")},f280:function(e,t,n){"use strict";n("9ae6")},f5c0:function(e,t,n){"use strict";n("0536")},f60c:function(e,t,n){"use strict";n("63ea")},f6b6:function(e,t,n){},f9d4:function(e,t,n){!function(e){"use strict";e.defineMode("javascript",(function(t,n){var i,r,a=t.indentUnit,o=n.statementIndent,s=n.jsonld,l=n.json||s,c=!1!==n.trackScope,u=n.typescript,d=n.wordCharacters||/[\w$\xa1-\uffff]/,p=function(){function e(e){return{type:e,style:"keyword"}}var t=e("keyword a"),n=e("keyword b"),i=e("keyword c"),r=e("keyword d"),a=e("operator"),o={type:"atom",style:"atom"};return{if:e("if"),while:t,with:t,else:n,do:n,try:n,finally:n,return:r,break:r,continue:r,new:e("new"),delete:i,void:i,throw:i,debugger:e("debugger"),var:e("var"),const:e("var"),let:e("var"),function:e("function"),catch:e("catch"),for:e("for"),switch:e("switch"),case:e("case"),default:e("default"),in:a,typeof:a,instanceof:a,true:o,false:o,null:o,undefined:o,NaN:o,Infinity:o,this:e("this"),class:e("class"),super:e("atom"),yield:i,export:e("export"),import:e("import"),extends:i,await:i}}(),h=/[+\-*&%=<>!?|~^@]/,f=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function m(e,t,n){return i=e,r=n,t}function g(e,t){var n=e.next();if('"'==n||"'"==n)return t.tokenize=function(e){return function(t,n){var i,r=!1;if(s&&"@"==t.peek()&&t.match(f))return n.tokenize=g,m("jsonld-keyword","meta");for(;null!=(i=t.next())&&(i!=e||r);)r=!r&&"\\"==i;return r||(n.tokenize=g),m("string","string")}}(n),t.tokenize(e,t);if("."==n&&e.match(/^\d[\d_]*(?:[eE][+\-]?[\d_]+)?/))return m("number","number");if("."==n&&e.match(".."))return m("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(n))return m(n);if("="==n&&e.eat(">"))return m("=>","operator");if("0"==n&&e.match(/^(?:x[\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/))return m("number","number");if(/\d/.test(n))return e.match(/^[\d_]*(?:n|(?:\.[\d_]*)?(?:[eE][+\-]?[\d_]+)?)?/),m("number","number");if("/"==n)return e.eat("*")?(t.tokenize=v,v(e,t)):e.eat("/")?(e.skipToEnd(),m("comment","comment")):Qe(e,t,1)?(function(e){for(var t,n=!1,i=!1;null!=(t=e.next());){if(!n){if("/"==t&&!i)return;"["==t?i=!0:i&&"]"==t&&(i=!1)}n=!n&&"\\"==t}}(e),e.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/),m("regexp","string-2")):(e.eat("="),m("operator","operator",e.current()));if("`"==n)return t.tokenize=b,b(e,t);if("#"==n&&"!"==e.peek())return e.skipToEnd(),m("meta","meta");if("#"==n&&e.eatWhile(d))return m("variable","property");if("<"==n&&e.match("!--")||"-"==n&&e.match("->")&&!/\S/.test(e.string.slice(0,e.start)))return e.skipToEnd(),m("comment","comment");if(h.test(n))return">"==n&&t.lexical&&">"==t.lexical.type||(e.eat("=")?"!"!=n&&"="!=n||e.eat("="):/[<>*+\-|&?]/.test(n)&&(e.eat(n),">"==n&&e.eat(n))),"?"==n&&e.eat(".")?m("."):m("operator","operator",e.current());if(d.test(n)){e.eatWhile(d);var i=e.current();if("."!=t.lastType){if(p.propertyIsEnumerable(i)){var r=p[i];return m(r.type,r.style,i)}if("async"==i&&e.match(/^(\s|\/\*([^*]|\*(?!\/))*?\*\/)*[\[\(\w]/,!1))return m("async","keyword",i)}return m("variable","variable",i)}}function v(e,t){for(var n,i=!1;n=e.next();){if("/"==n&&i){t.tokenize=g;break}i="*"==n}return m("comment","comment")}function b(e,t){for(var n,i=!1;null!=(n=e.next());){if(!i&&("`"==n||"$"==n&&e.eat("{"))){t.tokenize=g;break}i=!i&&"\\"==n}return m("quasi","string-2",e.current())}function y(e,t){t.fatArrowAt&&(t.fatArrowAt=null);var n=e.string.indexOf("=>",e.start);if(!(n<0)){if(u){var i=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(e.string.slice(e.start,n));i&&(n=i.index)}for(var r=0,a=!1,o=n-1;o>=0;--o){var s=e.string.charAt(o),l="([{}])".indexOf(s);if(l>=0&&l<3){if(!r){++o;break}if(0==--r){"("==s&&(a=!0);break}}else if(l>=3&&l<6)++r;else if(d.test(s))a=!0;else if(/["'\/`]/.test(s))for(;;--o){if(0==o)return;if(e.string.charAt(o-1)==s&&"\\"!=e.string.charAt(o-2)){o--;break}}else if(a&&!r){++o;break}}a&&!r&&(t.fatArrowAt=o)}}var x={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,import:!0,"jsonld-keyword":!0};function _(e,t,n,i,r,a){this.indented=e,this.column=t,this.type=n,this.prev=r,this.info=a,null!=i&&(this.align=i)}function w(e,t){if(!c)return!1;for(var n=e.localVars;n;n=n.next)if(n.name==t)return!0;for(var i=e.context;i;i=i.prev)for(n=i.vars;n;n=n.next)if(n.name==t)return!0}function C(e,t,n,i,r){var a=e.cc;for(k.state=e,k.stream=r,k.marked=null,k.cc=a,k.style=t,e.lexical.hasOwnProperty("align")||(e.lexical.align=!0);;)if((a.length?a.pop():l?R:F)(n,i)){for(;a.length&&a[a.length-1].lex;)a.pop()();return k.marked?k.marked:"variable"==n&&w(e,i)?"variable-2":t}}var k={state:null,column:null,marked:null,cc:null};function S(){for(var e=arguments.length-1;e>=0;e--)k.cc.push(arguments[e])}function M(){return S.apply(null,arguments),!0}function O(e,t){for(var n=t;n;n=n.next)if(n.name==e)return!0;return!1}function $(e){var t=k.state;if(k.marked="def",c){if(t.context)if("var"==t.lexical.info&&t.context&&t.context.block){var i=function e(t,n){if(n){if(n.block){var i=e(t,n.prev);return i?i==n.prev?n:new T(i,n.vars,!0):null}return O(t,n.vars)?n:new T(n.prev,new D(t,n.vars),!1)}return null}(e,t.context);if(null!=i)return void(t.context=i)}else if(!O(e,t.localVars))return void(t.localVars=new D(e,t.localVars));n.globalVars&&!O(e,t.globalVars)&&(t.globalVars=new D(e,t.globalVars))}}function E(e){return"public"==e||"private"==e||"protected"==e||"abstract"==e||"readonly"==e}function T(e,t,n){this.prev=e,this.vars=t,this.block=n}function D(e,t){this.name=e,this.next=t}var L=new D("this",new D("arguments",null));function z(){k.state.context=new T(k.state.context,k.state.localVars,!1),k.state.localVars=L}function N(){k.state.context=new T(k.state.context,k.state.localVars,!0),k.state.localVars=null}function A(){k.state.localVars=k.state.context.vars,k.state.context=k.state.context.prev}function I(e,t){var n=function(){var n=k.state,i=n.indented;if("stat"==n.lexical.type)i=n.lexical.indented;else for(var r=n.lexical;r&&")"==r.type&&r.align;r=r.prev)i=r.indented;n.lexical=new _(i,k.stream.column(),e,null,n.lexical,t)};return n.lex=!0,n}function P(){var e=k.state;e.lexical.prev&&(")"==e.lexical.type&&(e.indented=e.lexical.indented),e.lexical=e.lexical.prev)}function j(e){return function t(n){return n==e?M():";"==e||"}"==n||")"==n||"]"==n?S():M(t)}}function F(e,t){return"var"==e?M(I("vardef",t),Ce,j(";"),P):"keyword a"==e?M(I("form"),H,F,P):"keyword b"==e?M(I("form"),F,P):"keyword d"==e?k.stream.match(/^\s*$/,!1)?M():M(I("stat"),q,j(";"),P):"debugger"==e?M(j(";")):"{"==e?M(I("}"),N,se,P,A):";"==e?M():"if"==e?("else"==k.state.lexical.info&&k.state.cc[k.state.cc.length-1]==P&&k.state.cc.pop()(),M(I("form"),H,F,P,Ee)):"function"==e?M(ze):"for"==e?M(I("form"),N,Te,F,A,P):"class"==e||u&&"interface"==t?(k.marked="keyword",M(I("form","class"==e?e:t),je,P)):"variable"==e?u&&"declare"==t?(k.marked="keyword",M(F)):u&&("module"==t||"enum"==t||"type"==t)&&k.stream.match(/^\s*\w/,!1)?(k.marked="keyword","enum"==t?M(Ye):"type"==t?M(Ae,j("operator"),pe,j(";")):M(I("form"),ke,j("{"),I("}"),se,P,P)):u&&"namespace"==t?(k.marked="keyword",M(I("form"),R,F,P)):u&&"abstract"==t?(k.marked="keyword",M(F)):M(I("stat"),ee):"switch"==e?M(I("form"),H,j("{"),I("}","switch"),N,se,P,P,A):"case"==e?M(R,j(":")):"default"==e?M(j(":")):"catch"==e?M(I("form"),z,B,F,P,A):"export"==e?M(I("stat"),We,P):"import"==e?M(I("stat"),Ge,P):"async"==e?M(F):"@"==t?M(R,F):S(I("stat"),R,j(";"),P)}function B(e){if("("==e)return M(Ie,j(")"))}function R(e,t){return G(e,t,!1)}function W(e,t){return G(e,t,!0)}function H(e){return"("!=e?S():M(I(")"),q,j(")"),P)}function G(e,t,n){if(k.state.fatArrowAt==k.stream.start){var i=n?J:Y;if("("==e)return M(z,I(")"),ae(Ie,")"),P,j("=>"),i,A);if("variable"==e)return S(z,ke,j("=>"),i,A)}var r=n?V:U;return x.hasOwnProperty(e)?M(r):"function"==e?M(ze,r):"class"==e||u&&"interface"==t?(k.marked="keyword",M(I("form"),Pe,P)):"keyword c"==e||"async"==e?M(n?W:R):"("==e?M(I(")"),q,j(")"),P,r):"operator"==e||"spread"==e?M(n?W:R):"["==e?M(I("]"),Xe,P,r):"{"==e?oe(ne,"}",null,r):"quasi"==e?S(K,r):"new"==e?M(function(e){return function(t){return"."==t?M(e?Z:Q):"variable"==t&&u?M(xe,e?V:U):S(e?W:R)}}(n)):M()}function q(e){return e.match(/[;\}\)\],]/)?S():S(R)}function U(e,t){return","==e?M(q):V(e,t,!1)}function V(e,t,n){var i=0==n?U:V,r=0==n?R:W;return"=>"==e?M(z,n?J:Y,A):"operator"==e?/\+\+|--/.test(t)||u&&"!"==t?M(i):u&&"<"==t&&k.stream.match(/^([^<>]|<[^<>]*>)*>\s*\(/,!1)?M(I(">"),ae(pe,">"),P,i):"?"==t?M(R,j(":"),r):M(r):"quasi"==e?S(K,i):";"!=e?"("==e?oe(W,")","call",i):"."==e?M(te,i):"["==e?M(I("]"),q,j("]"),P,i):u&&"as"==t?(k.marked="keyword",M(pe,i)):"regexp"==e?(k.state.lastType=k.marked="operator",k.stream.backUp(k.stream.pos-k.stream.start-1),M(r)):void 0:void 0}function K(e,t){return"quasi"!=e?S():"${"!=t.slice(t.length-2)?M(K):M(q,X)}function X(e){if("}"==e)return k.marked="string-2",k.state.tokenize=b,M(K)}function Y(e){return y(k.stream,k.state),S("{"==e?F:R)}function J(e){return y(k.stream,k.state),S("{"==e?F:W)}function Q(e,t){if("target"==t)return k.marked="keyword",M(U)}function Z(e,t){if("target"==t)return k.marked="keyword",M(V)}function ee(e){return":"==e?M(P,F):S(U,j(";"),P)}function te(e){if("variable"==e)return k.marked="property",M()}function ne(e,t){return"async"==e?(k.marked="property",M(ne)):"variable"==e||"keyword"==k.style?(k.marked="property","get"==t||"set"==t?M(ie):(u&&k.state.fatArrowAt==k.stream.start&&(n=k.stream.match(/^\s*:\s*/,!1))&&(k.state.fatArrowAt=k.stream.pos+n[0].length),M(re))):"number"==e||"string"==e?(k.marked=s?"property":k.style+" property",M(re)):"jsonld-keyword"==e?M(re):u&&E(t)?(k.marked="keyword",M(ne)):"["==e?M(R,le,j("]"),re):"spread"==e?M(W,re):"*"==t?(k.marked="keyword",M(ne)):":"==e?S(re):void 0;var n}function ie(e){return"variable"!=e?S(re):(k.marked="property",M(ze))}function re(e){return":"==e?M(W):"("==e?S(ze):void 0}function ae(e,t,n){function i(r,a){if(n?n.indexOf(r)>-1:","==r){var o=k.state.lexical;return"call"==o.info&&(o.pos=(o.pos||0)+1),M((function(n,i){return n==t||i==t?S():S(e)}),i)}return r==t||a==t?M():n&&n.indexOf(";")>-1?S(e):M(j(t))}return function(n,r){return n==t||r==t?M():S(e,i)}}function oe(e,t,n){for(var i=3;i<arguments.length;i++)k.cc.push(arguments[i]);return M(I(t,n),ae(e,t),P)}function se(e){return"}"==e?M():S(F,se)}function le(e,t){if(u){if(":"==e)return M(pe);if("?"==t)return M(le)}}function ce(e,t){if(u&&(":"==e||"in"==t))return M(pe)}function ue(e){if(u&&":"==e)return k.stream.match(/^\s*\w+\s+is\b/,!1)?M(R,de,pe):M(pe)}function de(e,t){if("is"==t)return k.marked="keyword",M()}function pe(e,t){return"keyof"==t||"typeof"==t||"infer"==t||"readonly"==t?(k.marked="keyword",M("typeof"==t?W:pe)):"variable"==e||"void"==t?(k.marked="type",M(ye)):"|"==t||"&"==t?M(pe):"string"==e||"number"==e||"atom"==e?M(ye):"["==e?M(I("]"),ae(pe,"]",","),P,ye):"{"==e?M(I("}"),fe,P,ye):"("==e?M(ae(be,")"),he,ye):"<"==e?M(ae(pe,">"),pe):"quasi"==e?S(ge,ye):void 0}function he(e){if("=>"==e)return M(pe)}function fe(e){return e.match(/[\}\)\]]/)?M():","==e||";"==e?M(fe):S(me,fe)}function me(e,t){return"variable"==e||"keyword"==k.style?(k.marked="property",M(me)):"?"==t||"number"==e||"string"==e?M(me):":"==e?M(pe):"["==e?M(j("variable"),ce,j("]"),me):"("==e?S(Ne,me):e.match(/[;\}\)\],]/)?void 0:M()}function ge(e,t){return"quasi"!=e?S():"${"!=t.slice(t.length-2)?M(ge):M(pe,ve)}function ve(e){if("}"==e)return k.marked="string-2",k.state.tokenize=b,M(ge)}function be(e,t){return"variable"==e&&k.stream.match(/^\s*[?:]/,!1)||"?"==t?M(be):":"==e?M(pe):"spread"==e?M(be):S(pe)}function ye(e,t){return"<"==t?M(I(">"),ae(pe,">"),P,ye):"|"==t||"."==e||"&"==t?M(pe):"["==e?M(pe,j("]"),ye):"extends"==t||"implements"==t?(k.marked="keyword",M(pe)):"?"==t?M(pe,j(":"),pe):void 0}function xe(e,t){if("<"==t)return M(I(">"),ae(pe,">"),P,ye)}function _e(){return S(pe,we)}function we(e,t){if("="==t)return M(pe)}function Ce(e,t){return"enum"==t?(k.marked="keyword",M(Ye)):S(ke,le,Oe,$e)}function ke(e,t){return u&&E(t)?(k.marked="keyword",M(ke)):"variable"==e?($(t),M()):"spread"==e?M(ke):"["==e?oe(Me,"]"):"{"==e?oe(Se,"}"):void 0}function Se(e,t){return"variable"!=e||k.stream.match(/^\s*:/,!1)?("variable"==e&&(k.marked="property"),"spread"==e?M(ke):"}"==e?S():"["==e?M(R,j("]"),j(":"),Se):M(j(":"),ke,Oe)):($(t),M(Oe))}function Me(){return S(ke,Oe)}function Oe(e,t){if("="==t)return M(W)}function $e(e){if(","==e)return M(Ce)}function Ee(e,t){if("keyword b"==e&&"else"==t)return M(I("form","else"),F,P)}function Te(e,t){return"await"==t?M(Te):"("==e?M(I(")"),De,P):void 0}function De(e){return"var"==e?M(Ce,Le):"variable"==e?M(Le):S(Le)}function Le(e,t){return")"==e?M():";"==e?M(Le):"in"==t||"of"==t?(k.marked="keyword",M(R,Le)):S(R,Le)}function ze(e,t){return"*"==t?(k.marked="keyword",M(ze)):"variable"==e?($(t),M(ze)):"("==e?M(z,I(")"),ae(Ie,")"),P,ue,F,A):u&&"<"==t?M(I(">"),ae(_e,">"),P,ze):void 0}function Ne(e,t){return"*"==t?(k.marked="keyword",M(Ne)):"variable"==e?($(t),M(Ne)):"("==e?M(z,I(")"),ae(Ie,")"),P,ue,A):u&&"<"==t?M(I(">"),ae(_e,">"),P,Ne):void 0}function Ae(e,t){return"keyword"==e||"variable"==e?(k.marked="type",M(Ae)):"<"==t?M(I(">"),ae(_e,">"),P):void 0}function Ie(e,t){return"@"==t&&M(R,Ie),"spread"==e?M(Ie):u&&E(t)?(k.marked="keyword",M(Ie)):u&&"this"==e?M(le,Oe):S(ke,le,Oe)}function Pe(e,t){return"variable"==e?je(e,t):Fe(e,t)}function je(e,t){if("variable"==e)return $(t),M(Fe)}function Fe(e,t){return"<"==t?M(I(">"),ae(_e,">"),P,Fe):"extends"==t||"implements"==t||u&&","==e?("implements"==t&&(k.marked="keyword"),M(u?pe:R,Fe)):"{"==e?M(I("}"),Be,P):void 0}function Be(e,t){return"async"==e||"variable"==e&&("static"==t||"get"==t||"set"==t||u&&E(t))&&k.stream.match(/^\s+[\w$\xa1-\uffff]/,!1)?(k.marked="keyword",M(Be)):"variable"==e||"keyword"==k.style?(k.marked="property",M(Re,Be)):"number"==e||"string"==e?M(Re,Be):"["==e?M(R,le,j("]"),Re,Be):"*"==t?(k.marked="keyword",M(Be)):u&&"("==e?S(Ne,Be):";"==e||","==e?M(Be):"}"==e?M():"@"==t?M(R,Be):void 0}function Re(e,t){if("!"==t)return M(Re);if("?"==t)return M(Re);if(":"==e)return M(pe,Oe);if("="==t)return M(W);var n=k.state.lexical.prev;return S(n&&"interface"==n.info?Ne:ze)}function We(e,t){return"*"==t?(k.marked="keyword",M(Ke,j(";"))):"default"==t?(k.marked="keyword",M(R,j(";"))):"{"==e?M(ae(He,"}"),Ke,j(";")):S(F)}function He(e,t){return"as"==t?(k.marked="keyword",M(j("variable"))):"variable"==e?S(W,He):void 0}function Ge(e){return"string"==e?M():"("==e?S(R):"."==e?S(U):S(qe,Ue,Ke)}function qe(e,t){return"{"==e?oe(qe,"}"):("variable"==e&&$(t),"*"==t&&(k.marked="keyword"),M(Ve))}function Ue(e){if(","==e)return M(qe,Ue)}function Ve(e,t){if("as"==t)return k.marked="keyword",M(qe)}function Ke(e,t){if("from"==t)return k.marked="keyword",M(R)}function Xe(e){return"]"==e?M():S(ae(W,"]"))}function Ye(){return S(I("form"),ke,j("{"),I("}"),ae(Je,"}"),P,P)}function Je(){return S(ke,Oe)}function Qe(e,t,n){return t.tokenize==g&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(t.lastType)||"quasi"==t.lastType&&/\{\s*$/.test(e.string.slice(0,e.pos-(n||0)))}return A.lex=!0,P.lex=!0,{startState:function(e){var t={tokenize:g,lastType:"sof",cc:[],lexical:new _((e||0)-a,0,"block",!1),localVars:n.localVars,context:n.localVars&&new T(null,null,!1),indented:e||0};return n.globalVars&&"object"==typeof n.globalVars&&(t.globalVars=n.globalVars),t},token:function(e,t){if(e.sol()&&(t.lexical.hasOwnProperty("align")||(t.lexical.align=!1),t.indented=e.indentation(),y(e,t)),t.tokenize!=v&&e.eatSpace())return null;var n=t.tokenize(e,t);return"comment"==i?n:(t.lastType="operator"!=i||"++"!=r&&"--"!=r?i:"incdec",C(t,n,i,r,e))},indent:function(t,i){if(t.tokenize==v||t.tokenize==b)return e.Pass;if(t.tokenize!=g)return 0;var r,s=i&&i.charAt(0),l=t.lexical;if(!/^\s*else\b/.test(i))for(var c=t.cc.length-1;c>=0;--c){var u=t.cc[c];if(u==P)l=l.prev;else if(u!=Ee&&u!=A)break}for(;("stat"==l.type||"form"==l.type)&&("}"==s||(r=t.cc[t.cc.length-1])&&(r==U||r==V)&&!/^[,\.=+\-*:?[\(]/.test(i));)l=l.prev;o&&")"==l.type&&"stat"==l.prev.type&&(l=l.prev);var d=l.type,p=s==d;return"vardef"==d?l.indented+("operator"==t.lastType||","==t.lastType?l.info.length+1:0):"form"==d&&"{"==s?l.indented:"form"==d?l.indented+a:"stat"==d?l.indented+(function(e,t){return"operator"==e.lastType||","==e.lastType||h.test(t.charAt(0))||/[,.]/.test(t.charAt(0))}(t,i)?o||a:0):"switch"!=l.info||p||0==n.doubleIndentSwitch?l.align?l.column+(p?0:1):l.indented+(p?0:a):l.indented+(/^(?:case|default)\b/.test(i)?a:2*a)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:l?null:"/*",blockCommentEnd:l?null:"*/",blockCommentContinue:l?null:" * ",lineComment:l?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:l?"json":"javascript",jsonldMode:s,jsonMode:l,expressionAllowed:Qe,skipExpression:function(t){C(t,"atom","atom","true",new e.StringStream("",2,null))}}})),e.registerHelper("wordChars","javascript",/[\w$]/),e.defineMIME("text/javascript","javascript"),e.defineMIME("text/ecmascript","javascript"),e.defineMIME("application/javascript","javascript"),e.defineMIME("application/x-javascript","javascript"),e.defineMIME("application/ecmascript","javascript"),e.defineMIME("application/json",{name:"javascript",json:!0}),e.defineMIME("application/x-json",{name:"javascript",json:!0}),e.defineMIME("application/manifest+json",{name:"javascript",json:!0}),e.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),e.defineMIME("text/typescript",{name:"javascript",typescript:!0}),e.defineMIME("application/typescript",{name:"javascript",typescript:!0})}(n("56b3"))},fb15:function(e,t,n){"use strict";if(n.r(t),n.d(t,"Leivii",(function(){return c})),"undefined"!=typeof window){var i=window.document.currentScript,r=n("8875");i=r(),"currentScript"in document||Object.defineProperty(document,"currentScript",{get:r});var a=i&&i.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);a&&(n.p=a[1])}var o=n("8bbf"),s=n.n(o),l=n("5880"),c=n("b899"),u=n.n(c);
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function d(e,t,n,i){return new(n||(n=Promise))((function(r,a){function o(e){try{l(i.next(e))}catch(e){a(e)}}function s(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((i=i.apply(e,t||[])).next())}))}function p(e,t){var n,i,r,a,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,i&&(r=2&a[0]?i.return:a[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,a[1])).done)return r;switch(i=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,i=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((r=(r=o.trys).length>0&&r[r.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){o.label=a[1];break}if(6===a[0]&&o.label<r[1]){o.label=r[1],r=a;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(a);break}r[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],i=0}finally{n=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}}(function(){(console.warn||console.log).apply(console,arguments)}).bind("[clipboard-polyfill]");var h,f,m,g,v="undefined"==typeof navigator?void 0:navigator,b=null==v?void 0:v.clipboard,y=(null===(h=null==b?void 0:b.read)||void 0===h||h.bind(b),null===(f=null==b?void 0:b.readText)||void 0===f?void 0:f.bind(b)),x=(null===(m=null==b?void 0:b.write)||void 0===m||m.bind(b),null===(g=null==b?void 0:b.writeText)||void 0===g?void 0:g.bind(b)),_="undefined"==typeof window?void 0:window,w=(null==_||_.ClipboardItem,_);function C(){return"undefined"==typeof ClipboardEvent&&void 0!==w.clipboardData&&void 0!==w.clipboardData.setData}function k(){return d(this,void 0,void 0,(function(){var e;return p(this,(function(t){if(""===(e=w.clipboardData.getData("Text")))throw new Error("Empty clipboard or could not read plain text from clipboard");return[2,e]}))}))}var S=function(){this.success=!1};function M(e,t,n){for(var i in e.success=!0,t){var r=t[i],a=n.clipboardData;a.setData(i,r),"text/plain"===i&&a.getData(i)!==r&&(e.success=!1)}n.preventDefault()}function O(e){var t=new S,n=M.bind(this,t,e);document.addEventListener("copy",n);try{document.execCommand("copy")}finally{document.removeEventListener("copy",n)}return t.success}function $(e,t){E(e);var n=O(t);return T(),n}function E(e){var t=document.getSelection();if(t){var n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}}function T(){var e=document.getSelection();e&&e.removeAllRanges()}function D(e){return d(this,void 0,void 0,(function(){return p(this,(function(t){if(x)return[2,x(e)];if(!function(e){return d(this,void 0,void 0,(function(){var t;return p(this,(function(n){if(t="text/plain"in e,C()){if(!t)throw new Error("No `text/plain` value was specified.");if(i=e["text/plain"],w.clipboardData.setData("Text",i))return[2,!0];throw new Error("Copying failed, possibly because the user rejected it.")}var i;return O(e)||navigator.userAgent.indexOf("Edge")>-1||$(document.body,e)||function(e){var t=document.createElement("div");t.setAttribute("style","-webkit-user-select: text !important"),t.textContent="temporary element",document.body.appendChild(t);var n=$(t,e);return document.body.removeChild(t),n}(e)||function(e){var t=document.createElement("div");t.setAttribute("style","-webkit-user-select: text !important");var n=t;t.attachShadow&&(n=t.attachShadow({mode:"open"}));var i=document.createElement("span");i.innerText=e,n.appendChild(i),document.body.appendChild(t),E(i);var r=document.execCommand("copy");return T(),document.body.removeChild(t),r}(e["text/plain"])?[2,!0]:[2,!1]}))}))}(function(e){var t={};return t["text/plain"]=e,t}(e)))throw new Error("writeText() failed");return[2]}))}))}var L={data:()=>({groupList:[{code:"form",name:"lang.group.form",list:[]},{code:"container",name:"lang.group.container",list:[]},{code:"none",name:"lang.group.others",list:[]}]}),mounted(){for(let t in c.Dict.comps){var e;let n=c.Dict.comps[t];if("leivii"===(null===(e=n.options)||void 0===e?void 0:e.name))continue;let{parents:i="all",groups:r="none"}=n.options.options||{};i=[i].flat(),r=[r].flat(),r.includes("none")?this.addGroup("none",n):r.forEach(e=>this.addGroup(e,n))}},methods:{showComponent(e){var t;let{parents:n="all"}=e.options.options||{};n=[n].flat();let i=s.a.options.components[this.$store.state.leivii.selected.$type].options,{children:r=[]}=i.options||{};return r=[r].flat(),r.length?!!r.includes(e.options.name):!(!n.includes("geek-form")||null===(t=this.$store.state.leivii.selected.xpath)||void 0===t||!t.map(e=>e.split(".")[0]).includes("geek-form"))||!!n.includes("all")||!!n.some(e=>e.startsWith("!")?e!=="!"+this.$store.state.leivii.selected.$type:["all",this.$store.state.leivii.selected.$type].includes(e))},addGroup(e,t){let n=this.groupList.find(t=>t.code===e);n?n.list.push(t):this.groupList.push({code:e,name:e,list:[t]})}}},z=(n("ee07"),n("2877")),N=Object(z.a)(L,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"component-list"},e._l(e.groupList.map((function(t){return Object.assign({},t,{list:t.list.filter(e.showComponent)})})),(function(t){var i=t.code,r=t.name,a=t.list;return n("div",{key:i,staticClass:"group"},[a.length?[n("div",{staticClass:"group-title"},[e._v(e._s(e.$transMsg(r)))]),n("div",{staticClass:"component-container"},[e._l(a,(function(t,i){return[n("div",{key:i,staticClass:"component",on:{mousedown:function(n){return n.preventDefault(),e.$emit("dragstart",n,t)}}},[e._v(e._s(t.options.options&&e.$transMsg(t.options.options.name)||t.options.name))])]}))],2)]:e._e()],2)})),0)}),[],!1,null,"79e3f791",null).exports,A=n("d22b"),I=n("9d32"),P=n("33d4"),j={components:{CodeEditor:P.a},model:{prop:"value",event:"change"},props:{value:String,size:{type:String,default:"mini"},placeholder:{type:String,default:"this.$t('I18n code')"},disabled:{type:Boolean,default:!1},showExpression:{type:Boolean,default:!0}},watch:{value:{handler(){let e=!1;if(this.validExpr(this.value))this.text=this.$transMsg(this.value);else for(let t in this.langMap)t===this.value&&(e=!0,this.text=this.langMap[t]);e||this.value||(this.text="",this.$emit("change",""))},immediate:!0}},computed:{exprValue(){return this.value?/^lang/.test(this.value.toString())?this.value.toString().trim().replace(/^lang(\.\w+)*/,e=>`this.$t('${e}')`):this.value:""}},data:()=>({text:null,langMap:{},isExpression:!0,visible:!1}),created(){var e,t;this.langMap=Object.assign({},null===(e=this.$i18n)||void 0===e?void 0:e.getLocaleMessage(null===(t=this.$i18n)||void 0===t?void 0:t.locale),c.Dict.lang),this.text=this.value;for(let e in this.langMap)e===this.value&&(this.text=this.langMap[e])},methods:{$exec(e){if(null!=e&&e.toString)try{return Object(c.exec)(e.toString().trim().replace(/^\{\{/,"").replace(/\}\}$/,""),this.$(this.$store.state.leivii.selected.$id))}catch{return c.logger.log("GEEK::exec",e),null}return null},validExpr:e=>/^\{\{[\s\S]+\}\}$/.test(null==e?void 0:e.toString()),isDisabled(e){return this.disabled||this.isExpression&&this.validExpr(e)},handleExpr(e){"{{}}"===e?this.$emit("change",""):this.$emit("change",e)},querySearch(e,t){let n=[],i=/^\w+\./.test(e);for(let t in this.langMap){let r=t.split(".");if(i){let i=t.indexOf(e);i>-1&&(t!==e&&r[r.length-1]!==e||(i=-1),i-=1-this.langMap[t].length/100,n.push({label:this.langMap[t],value:t,index:i}))}else{let i=this.langMap[t].indexOf(e);i>-1&&(this.langMap[t]!==e&&r[r.length-1]!==e||(i=-1),i-=1-this.langMap[t].length/100,n.push({label:this.langMap[t],value:t,index:i}))}}n.sort((e,t)=>e.index>t.index?1:-1),t(n.slice(0,20))},handleChange(e){if(""===this.text)this.$emit("change","");else{let e=!1;for(let t in this.langMap)if(this.langMap[t]===this.text){this.$emit("change",t),e=!0;break}e||(this.$message({type:"warning",message:this.$transMsg("lang.tip.i18nNotFound")}),this.$emit("change",""),this.text=null)}},handleSelect(e){this.text=e.label,this.$emit("change",e.value)}}},F=(n("8716"),Object(z.a)(j,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"i18n-wrapper w-full"},[n("el-autocomplete",{staticClass:"i18n-selector",attrs:{size:e.size,"fetch-suggestions":e.querySearch,"trigger-on-focus":!1,placeholder:e.$transMsg("lang.tip.inputI18n"),"highlight-first-item":""},on:{select:e.handleSelect},nativeOn:{keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleChange.apply(null,arguments)}},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.item;return[n("div",{staticStyle:{"white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis"},attrs:{title:i.label+" "+i.value}},[e._v(" "+e._s(i.label)+" "),n("label",{staticClass:"fs-xs text-color-base"},[e._v(e._s(i.value))])])]}}]),model:{value:e.text,callback:function(t){e.text=t},expression:"text"}}),n("div",{staticClass:"expression-section"},[n("div",{staticClass:"btn",class:{active:e.validExpr(e.exprValue)},on:{click:function(t){e.visible=!0}}},[e._v("{/}")]),e.isDisabled(e.exprValue)?n("div",{staticClass:"disable-layer"}):e._e(),n("el-dialog",{attrs:{title:e.$transMsg("lang.text.codeEditor"),visible:e.visible,"custom-class":"editor-dialog","append-to-body":""},on:{"update:visible":function(t){e.visible=t}}},[n("code-editor",{key:Date.now(),attrs:{value:e.exprValue,placeholder:e.placeholder},on:{change:e.handleExpr,close:function(t){e.visible=!1}}})],1)],1)],1)}),[],!1,null,"61b2b722",null)).exports;const B="$.$";var R={components:{I18n:F},watch:{tab(){this.curr=null,this.form={}},form:{handler(){this.handleChange()},deep:!0}},props:{viewdata:{type:Object,required:!0},data:{type:Object,required:!0}},data:()=>({loading:!1,tab:"columns",flatData:null,checkedKeys:[],curr:null,form:{},paramForm:{},tree:null,params:null}),created(){this.handleChange=Object(I.a)(200,this.handleChange.bind(this))},mounted(){let e=this.viewdata[c.CONFIG.scf.dataDescription].columns||[];this.params=this.parseParams(),this.flatData=this.transFlat(this.washData(this.data)),this.tree=this.mergeTreeData(this.getTree(this.flatData),e),this.$nextTick(()=>{null!=e&&e.length?this.checkedKeys=this.getColumnIds(e):this.$refs.tree.setCheckedNodes(this.tree)})},methods:{parseParams(){var e;return(null===(e=this.viewdata[c.CONFIG.scf.dataDescription].parameters)||void 0===e?void 0:e.map(e=>{var t;return{id:e.name,label:e.name,val:e.defaultValue,property:{label:e.name,type:"input",...e.property,config:(null===(t=e.property)||void 0===t?void 0:t.config)||{}}}}))||[]},washData(e){return"PAGING_LIST"===this.viewdata[c.CONFIG.scf.dataForm]?e[c.CONFIG.pagination.list]||[]:e},transFlat(e,t={}){if(Array.isArray(e))return this.transFlat(e[0]);for(let n in e)this.isObject(e[n])?t[n]=this.transFlat(e[n]):Array.isArray(e[n])?t[n]=this.transFlat(e[n][0]):t[n]=e[n];return t},getTree(e,t=[]){return"object"==typeof e?Object.entries(e).map(([e,n])=>"[object Object]"===Object.prototype.toString.call(n)?{id:[...t,e].join(B),pid:t.join(B),label:e,type:"Object",children:Object.entries(n).map(([n,i])=>this.getTree({[n]:i},[...t,e])).reduce((e,t)=>e.concat(t),[])}:{id:[...t,e].join(B),pid:t.join(B),label:e,val:n,property:{type:"input",label:e,config:{}}}):e},mergeTreeData(e,t=[]){return e.forEach(e=>{let n=t.find(t=>t.column===e.label);var i;n&&(n.property&&(e.property=n.property),null!==(i=e.children)&&void 0!==i&&i.length&&(e.children=this.mergeTreeData(e.children,n.columns)))}),e.sort((e,n)=>{let i=t.findIndex(t=>t.column===e.label),r=t.findIndex(e=>e.column===n.label);return i>-1&&r>-1?i>r?1:-1:i>r?-1:void 0})},getColumnIds(e=[],t=[]){return e.flatMap(e=>{var n;return null!==(n=e.columns)&&void 0!==n&&n.length?this.getColumnIds(e.columns,[...t,e.column]):[...t,e.column].join(B)})},allowDrag:e=>!!e.data.property,allowDrop:(e,t,n)=>!(e.data.pid!==t.data.pid||!["prev","next"].includes(n)),allowParamsDrop:(e,t,n)=>["prev","next"].includes(n),nodeDrop(e,t,n,i){this.$refs.tree.setChecked(e.data.id,!0)},showColumnEditor(e,t){var n,i,r,a,o,s;t.isLeaf&&(this.curr=e,this.$set(this.form,"label",null===(n=e.property)||void 0===n?void 0:n.label),this.$set(this.form,"type",(null===(i=e.property)||void 0===i?void 0:i.type)||"input"),this.$set(this.form,"dict",null===(r=e.property)||void 0===r?void 0:r.dict),this.$set(this.form,"dictType",null===(a=e.property)||void 0===a?void 0:a.dictType),this.$set(this.form,"api",null===(o=e.property)||void 0===o?void 0:o.api),this.$set(this.form,"config",null===(s=e.property)||void 0===s?void 0:s.config),this.$refs.tree.setChecked(e.id,!0))},handleDictType(e){"api"===e&&this.$set(this.form,"api",{url:"",key:"",val:""})},handleChange(){var e;if(null!==(e=this.curr)&&void 0!==e&&e.id)if("params"===this.tab)this.params.forEach(e=>{e.id===this.curr.id&&this.$set(e,"property",{...this.form})});else{const e=t=>{t.forEach(t=>{t.id===this.curr.id?(this.$set(t,"property",{...this.form}),this.params.forEach(e=>{e.id===this.curr.id&&this.$set(e,"property",{...this.form})})):t.children&&e(t.children)})};e(this.tree)}},isObject:e=>"[object Object]"===Object.prototype.toString.call(e),getNode(e,t){for(let n=0,i=e.length;n<i;n++){let i=e[n];if(i.id===t)return i;if(i.children){let e=this.getNode(i.children,t);if(e)return e}}},getParams(){return this.params.map(e=>{var t,n;let i={name:e.id,defaultValue:e.val,property:e.property};return"date-picker"===(null===(t=e.property)||void 0===t?void 0:t.type)&&"daterange"===(null===(n=e.property.config)||void 0===n?void 0:n.type)&&(i.handler="splitDate"),i})},getColumns(e,t){return e.map(e=>{var n,i,r;let a={column:e.label,property:e.property};return"dict"===(null===(n=a.property)||void 0===n?void 0:n.dictType)&&(a.dictObjectCode=a.property.dict),"date-picker"===(null===(i=a.property)||void 0===i?void 0:i.type)&&(a.dateFormat=(null===(r=a.property.config)||void 0===r?void 0:r.format)||"yyyy-MM-dd HH:mm:ss"),e.children?{...a,columns:this.getColumns(e.children,t)}:t.includes(e.id)?a:void 0}).filter(Boolean)},getViewExpression(){const e=e=>{if(e=e.replace(/^\{\{/,"").replace(/\}\}$/,""),/^\{[^\}]+\}$/.test(e))try{return JSON.parse(e)}catch{return e}return e};return JSON.stringify({header:this.viewdata[c.CONFIG.scf.dataDescription].columns.map(t=>({title:e(t.property.label),column:t.column}))})},prevHandler(){let e=this.$refs.tree.getCheckedKeys();this.viewdata[c.CONFIG.scf.dataDescription].parameters=this.getParams(),this.viewdata[c.CONFIG.scf.dataDescription].columns=this.getColumns(this.tree,e),this.viewdata[c.CONFIG.scf.viewExpression]=this.getViewExpression(),this.$emit("prev")},nextHandler(){let e=this.$refs.tree.getCheckedKeys();this.viewdata[c.CONFIG.scf.dataDescription].parameters=this.getParams(),this.viewdata[c.CONFIG.scf.dataDescription].columns=this.getColumns(this.tree,e),this.viewdata[c.CONFIG.scf.viewExpression]=this.getViewExpression(),this.$emit("next"),this.loading=!0,c.CONFIG.scf.update(this.viewdata).then(e=>{}).finally(()=>this.loading=!1)},stepHandler(e){let t=this.$refs.tree.getCheckedKeys();this.viewdata[c.CONFIG.scf.dataDescription].parameters=this.getParams(),this.viewdata[c.CONFIG.scf.dataDescription].columns=this.getColumns(this.tree,t),this.viewdata[c.CONFIG.scf.viewExpression]=this.getViewExpression(),this.loading=!0,c.CONFIG.scf.update(this.viewdata).finally(()=>{this.$emit(e),this.loading=!1})}}},W=(n("2199"),Object(z.a)(R,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"column-selector"},[n("div",{staticClass:"grid"},[n("div",{staticClass:"tree"},[n("el-tabs",{attrs:{"tab-position":"left"},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[n("el-tab-pane",{attrs:{name:"params",label:e.$transMsg("lang.prop.params")}},[n("el-tree",{ref:"params",attrs:{"node-key":"id",data:e.params,"allow-drop":e.allowParamsDrop,"default-expand-all":"",draggable:""},on:{"node-click":e.showColumnEditor},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.node,r=t.data;return n("div",{},[n("span",[e._v(e._s(r.property&&r.property.label!=i.label?e.$transMsg(r.property.label):"")+" "+e._s(i.label))]),"Object"!=r.type&&"Array"!=r.type?n("span",{staticStyle:{"font-size":"12px",color:"#999","margin-left":"5px"}},[e._v("("+e._s(r.val)+")")]):e._e()])}}])})],1),n("el-tab-pane",{attrs:{name:"columns",label:e.$transMsg("lang.text.colConfig")}},[n("el-tree",{ref:"tree",attrs:{"node-key":"id",data:e.tree,"show-checkbox":"","default-expand-all":"",draggable:"","default-checked-keys":e.checkedKeys,"allow-drag":e.allowDrag,"allow-drop":e.allowDrop},on:{"node-drop":e.nodeDrop,"node-click":e.showColumnEditor},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.node,r=t.data;return n("div",{},[n("span",[e._v(e._s(r.property&&r.property.label!=i.label?e.$transMsg(r.property.label):"")+" "+e._s(i.label))]),"Object"!=r.type&&"Array"!=r.type?n("span",{staticStyle:{"font-size":"12px",color:"#999","margin-left":"5px"}},[e._v("("+e._s(r.val)+")")]):e._e()])}}])})],1)],1)],1),e.curr?n("div",{staticClass:"preview"},[n("div",{staticClass:"title"},[e._v(e._s(e.$transMsg(e.form.label)))]),n("el-form",{staticStyle:{"padding-right":"10px"},attrs:{model:e.form,size:"small","label-width":"100px"}},[n("el-form-item",{attrs:{label:e.$transMsg("lang.text.key"),prop:"label"}},[n("i18n",{key:e.form.label,attrs:{placeholder:"lang.tip.inputStringOrI18n","show-expression":!1},model:{value:e.form.label,callback:function(t){e.$set(e.form,"label",t)},expression:"form.label"}})],1),n("el-form-item",{attrs:{label:e.$transMsg("lang.prop.type"),prop:"type"}},[n("el-select",{staticClass:"w-full",model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},[n("el-option",{attrs:{label:e.$transMsg("lang.component.input"),value:"input"}}),n("el-option",{attrs:{label:e.$transMsg("lang.component.inputNumber"),value:"input-number"}}),n("el-option",{attrs:{label:e.$transMsg("lang.component.select"),value:"select"}}),n("el-option",{attrs:{label:e.$transMsg("lang.component.radio"),value:"radio"}}),n("el-option",{attrs:{label:e.$transMsg("lang.component.checkbox"),value:"checkbox"}}),n("el-option",{attrs:{label:e.$transMsg("lang.component.datepicker"),value:"date-picker"}}),n("el-option",{attrs:{label:e.$transMsg("lang.component.switch"),value:"switch"}})],1)],1),"params"==e.tab&&"date-picker"==e.form.type?n("el-form-item",{attrs:{label:e.$transMsg("lang.text.dateType")}},[n("el-select",{staticClass:"w-full",model:{value:e.form.config.type,callback:function(t){e.$set(e.form.config,"type",t)},expression:"form.config.type"}},[n("el-option",{attrs:{label:e.$transMsg("lang.text.date"),value:"date"}}),n("el-option",{attrs:{label:e.$transMsg("lang.prop.date.daterange"),value:"daterange"}})],1)],1):e._e(),["select","radio","checkbox"].includes(e.form.type)?n("el-form-item",{attrs:{label:e.$transMsg("lang.text.dictType"),prop:"dictType"}},[n("el-select",{staticClass:"w-full",attrs:{clearable:""},on:{change:e.handleDictType},model:{value:e.form.dictType,callback:function(t){e.$set(e.form,"dictType",t)},expression:"form.dictType"}},[n("el-option",{attrs:{label:e.$transMsg("lang.prop.dict"),value:"dict"}}),n("el-option",{attrs:{label:e.$transMsg("lang.prop.api"),value:"api"}})],1)],1):e._e(),e.form.dictType?n("el-form-item",{attrs:{label:e.$transMsg("lang.prop.dict"),prop:"dict"}},[n("el-input",{attrs:{placeholder:e.$transMsg("lang.tip.inputDict")},model:{value:e.form.dict,callback:function(t){e.$set(e.form,"dict",t)},expression:"form.dict"}})],1):e._e(),"api"==e.form.dictType?n("fieldset",{staticClass:"api-config"},[n("legend",[e._v(e._s(e.$transMsg("lang.axios.config")))]),n("el-form-item",{attrs:{label:e.$transMsg("lang.axios.url"),prop:"api.url"}},[n("el-input",{attrs:{placeholder:e.$transMsg("lang.tip.inputAxiosUrl")},model:{value:e.form.api.url,callback:function(t){e.$set(e.form.api,"url",t)},expression:"form.api.url"}})],1),n("el-form-item",{attrs:{label:e.$transMsg("lang.common.key"),prop:"api.key"}},[n("el-input",{attrs:{placeholder:e.$transMsg("lang.prop.pleaseEnter")},model:{value:e.form.api.key,callback:function(t){e.$set(e.form.api,"key",t)},expression:"form.api.key"}})],1),n("el-form-item",{attrs:{label:e.$transMsg("lang.common.value"),prop:"api.val"}},[n("el-input",{attrs:{placeholder:e.$transMsg("lang.prop.pleaseEnter")},model:{value:e.form.api.val,callback:function(t){e.$set(e.form.api,"val",t)},expression:"form.api.val"}})],1)],1):e._e(),"date-picker"==e.form.type?n("el-form-item",{attrs:{label:e.$transMsg("lang.prop.format"),prop:"format"}},[n("el-input",{attrs:{placeholder:"YYYY-MM-DD hh:mm:ss"},model:{value:e.form.config.format,callback:function(t){e.$set(e.form.config,"format",t)},expression:"form.config.format"}})],1):e._e()],1)],1):e._e()]),n("div",{staticClass:"buttons"},[n("el-button",{attrs:{loading:e.loading},on:{click:function(t){return e.stepHandler("prev")}}},[e._v(e._s(e.$transMsg("lang.text.prev")))]),n("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:function(t){return e.stepHandler("next")}}},[e._v(e._s(e.$transMsg("lang.text.next")))])],1)])}),[],!1,null,"7a2740d0",null)).exports,H=n("ee7b").a,G=(n("fdce"),n("b8be"),Object(z.a)(H,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"page-config"},[n("div",{staticClass:"title"},[e._v(e._s(e.$transMsg("lang.action.configComponent")))]),n("object-input",{key:JSON.stringify(e.comps),staticClass:"config",attrs:{valueClazz:"ComponentTreeInput",customTitle:"lang.action.componentConfiguration",open:""},model:{value:e.comps,callback:function(t){e.comps=t},expression:"comps"}}),n("div",{staticClass:"editor-wrap"},[n("el-collapse",{staticClass:"advanced",on:{change:e.handleChange}},[n("el-collapse-item",{attrs:{name:"advanced",title:e.$transMsg("lang.text.advancedSetting")}},[e.scripts.length?n("div",{staticClass:"script-picker"},[n("div",{staticClass:"picker-title"},[e._v(e._s(e.$transMsg("lang.action.chooseScript")))]),n("el-select",{attrs:{size:"mini"},on:{change:e.handleScriptChange},model:{value:e.pageScript,callback:function(t){e.pageScript=t},expression:"pageScript"}},e._l(e.scripts,(function(t,i){return n("el-option",{key:i,attrs:{label:e.$transMsg(t.i18nName),value:t.name}})})),1)],1):e._e(),n("textarea",{ref:"configEditor"})])],1)],1),n("div",{staticClass:"buttons"},[n("el-button",{on:{click:function(t){return e.$emit("prev")}}},[e._v(e._s(e.$transMsg("lang.text.prev")))]),n("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:e.next}},[e._v(e._s(e.$transMsg("lang.action.updatePage")))])],1)],1)}),[],!1,null,null,null)).exports,q={components:{ScriptEditor:A.a,ColumnSelector:W,PageConfig:G},props:{model:Object},data:()=>({CONFIG:c.CONFIG,step:0,viewdata:{[c.CONFIG.scf.code]:null,[c.CONFIG.scf.name]:null,[c.CONFIG.scf.dataType]:null,[c.CONFIG.scf.dataForm]:null,[c.CONFIG.scf.dataExpression]:null,[c.CONFIG.scf.dataDescription]:{}},data:null}),created(){if(!c.CONFIG.scf)return this.$message({type:"warning",message:this.$transMsg("lang.tip.scfConfig")});c.CONFIG.scf.get(this.model.code).then(e=>{Object.assign(this.viewdata,e)}).catch(e=>{this.model.templateCode?c.CONFIG.scf.get(this.model.templateCode).then(e=>{Object.assign(this.viewdata,e),this.viewdata[c.CONFIG.scf.name]=this.model.name,this.viewdata[c.CONFIG.scf.code]=this.model.code,c.CONFIG.scf.create(this.viewdata).then(e=>{Object.assign(this.viewdata,e)})}).catch(e=>warn("GEEK::scf: data error")):(this.viewdata[c.CONFIG.scf.name]=this.model.name,this.viewdata[c.CONFIG.scf.code]=this.model.code,c.CONFIG.scf.create(this.viewdata).then(e=>{Object.assign(this.viewdata,e)}))})},methods:{handleScript(e){this.data=e.data,this.step=-1,c.CONFIG.scf.get(this.model.code).then(e=>{this.step=1,Object.assign(this.viewdata,e)})}}},U=(n("4eeb"),Object(z.a)(q,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"data-source"},[n("el-steps",{attrs:{active:e.step,"finish-status":"success",simple:""}},[n("el-step",{attrs:{title:e.$transMsg("lang.action.writeScript")}}),n("el-step",{attrs:{title:e.$transMsg("lang.action.columnConfig")}}),n("el-step",{attrs:{title:e.$transMsg("lang.action.generatePage")}})],1),0==e.step?n("div",{staticClass:"step-content"},[e.viewdata[e.CONFIG.scf.code]?n("script-editor",{attrs:{btnText:"lang.text.next",code:e.viewdata[e.CONFIG.scf.code]},on:{done:e.handleScript}}):e._e()],1):e._e(),1==e.step?n("div",{staticClass:"step-content"},[n("column-selector",{attrs:{viewdata:e.viewdata,data:e.data},on:{prev:function(t){e.step=0},next:function(t){e.step=2}}})],1):e._e(),2==e.step?n("div",{staticClass:"step-content"},[n("page-config",{attrs:{viewdata:e.viewdata,model:e.model},on:{prev:function(t){e.step=1},done:function(t){return e.$emit("done",t)}}})],1):e._e()],1)}),[],!1,null,"6df51e62",null)).exports,V=n("2ded"),K={components:{ObjectInput:V.a},computed:{pageConfig(){return this.$store.state.leivii.pageConfig||[]},models(){return this.$store.state.leivii.pageConfig.models||[]}},data(){const e={name:{type:String,label:"lang.common.name",clazz:"I18n",title:!0},type:{type:String,options:[{label:"lang.component.input",value:"input"},{label:"lang.component.inputNumber",value:"input-number"},{label:"lang.component.select",value:"select"},{label:"lang.component.radio",value:"radio"},{label:"lang.component.checkbox",value:"checkbox"},{label:"lang.component.datepicker",value:"date-picker"},{label:"lang.component.switch",value:"switch"},{label:"lang.component.transfer",value:"transfer"}],label:"lang.prop.type"},dictType:{type:String,options:[{label:"lang.prop.dict",value:"dict"},{label:"lang.prop.api",value:"api"},{label:"lang.prop.custom",value:"custom"}],label:"lang.text.dictType",visible:"['select', 'radio', 'checkbox'].includes('{{type}}')"},dict:{type:String,label:"lang.prop.dict",visible:"['select', 'radio', 'checkbox'].includes('{{type}}')"},api:{type:Object,label:"lang.prop.api",visible:"'{{dictType}}' == 'api'",clazz:{url:{type:String,label:"lang.text.address"},key:{type:String,label:"lang.common.label"},val:{type:String,label:"lang.common.value"}}},format:{type:String,label:"lang.text.format",visible:"'{{type}}' == 'date-picker'"}};return{model:{},visible:[],menuVisible:[],newClazz:{prop:{type:String,label:"lang.prop.field"},...e},clazz:{prop:{type:String,label:"lang.prop.field",disabled:!0},...e}}},methods:{addProp(e,t){e.list.push(this.model),this.visible[t]=!1,this.model={}},closeProp(e,t){this.model={},this.visible[t]=!1},removeProp(e,t){e.list.splice(t,1)},handleCommand(e,t){"dict"===t?this.updateDict(e):"copy"===t?this.copyModel(e):"modify"===t?this.modifyModel(e):"delete"===t&&this.removeModel(e)},updateDict(e){return new Promise((t,n)=>{var i;let r=this.pageConfig.$dataSource||[],a=(null===(i=this.models[e])||void 0===i?void 0:i.list)||[],o={type:"dict",subtype:"dict",dict:[],root:c.CONFIG.root,autoProcess:!0,scoped:!1,cache:!0},s=[],l=[];a.forEach(e=>{if("dict"===e.dictType){let t=r.find(e=>"dict"===e.type&&"dict"===e.subtype);t?!t.dict.includes(e.dict)&&t.dict.every(t=>(null==t?void 0:t.code)!==e.dict)&&t.dict.push({code:e.dict,type:"string"}):o.dict.push({code:e.dict,type:"string"})}if("api"===e.dictType){let t=r.find(t=>"api"===t.type&&"dict"===t.subtype&&t.api===e.api.url);t?(t.label=e.api.key,t.value=e.api.val):s.push({type:"api",subtype:"dict",api:e.api.url,method:"GET",params:{type:"custom",target:"",action:{}},key:e.dict,label:e.api.key,value:e.api.val,root:c.CONFIG.root,autoProcess:!0,scoped:!1,cache:!0})}if("custom"===e.dictType){let t=r.find(e=>"custom"===e.type&&"dict"===e.subtype);t?t.key=e.dict:l.push({type:"custom",subtype:"dict",dictValue:[],key:e.dict,root:c.CONFIG.root,autoProcess:!0,scoped:!1,cache:!0})}}),o.dict.length&&r.unshift(o),this.$store.dispatch("leivii/setConfigById",{id:this.pageConfig.$id,config:{$dataSource:[...s,...r,...l]}}).then(()=>{this.$(this.pageConfig.$id).updateDataSource().then(t).catch(n)}).catch(n)})},copyModel(e){this.$store.dispatch("leivii/setContextMenu",{...this.$store.state.leivii.contextMenu,down:!1,clipboard:!0,type:"model",data:this.models[e]})},modifyModel(e){this.$prompt(this.$transMsg("lang.tip.modelName"),this.$transMsg("lang.common.tip"),{inputPattern:/^\S+$/,inputPlaceholder:this.$transMsg("lang.text.modelName"),inputErrorMessage:this.$transMsg("lang.tip.invalidModelName"),inputValue:this.pageConfig.models[e].name}).then(({value:t})=>{let n=this.pageConfig.models.slice();n[e].name=t,this.$store.dispatch("leivii/setConfigById",{id:this.pageConfig.$id,config:{models:n}})})},removeModel(e){this.$confirm(this.$transMsg("lang.tip.deleteModel"),this.$transMsg("lang.common.warn")).then(()=>{this.models.splice(e,1)})}}},X=(n("225c"),Object(z.a)(K,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"data-model-list"},[e.models.length?n("el-collapse",e._l(e.models,(function(t,i){return n("el-collapse-item",{key:t.name},[n("div",{staticClass:"collapse-title pl",attrs:{slot:"title"},slot:"title"},[n("div",{staticClass:"text"},[e._v(e._s(t.name)+" "+e._s(1==t.type?"["+e.$transMsg("lang.text.script")+"]":""))]),n("div",{staticClass:"actions"},[1==t.type?n("i",{staticClass:"icon el-icon-edit",attrs:{title:e.$transMsg("lang.action.editModel")},on:{click:function(t){return t.stopPropagation(),e.$emit("editModel",i)}}}):n("el-popover",{attrs:{placement:"right",trigger:"manual",width:"300"},model:{value:e.visible[i],callback:function(t){e.$set(e.visible,i,t)},expression:"visible[i]"}},[n("object-input",{key:Date.parse(new Date),attrs:{label:e.$transMsg("lang.prop.field"),keyAlign:"center",open:"",clazz:e.newClazz},model:{value:e.model,callback:function(t){e.model=t},expression:"model"}}),n("div",{staticStyle:{"text-align":"right"}},[n("el-button",{attrs:{size:"mini"},on:{click:function(n){return e.closeProp(t,i)}}},[e._v(e._s(e.$transMsg("lang.action.cancel")))]),n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(n){return e.addProp(t,i)}}},[e._v(e._s(e.$transMsg("lang.action.add")))])],1),n("i",{staticClass:"icon el-icon-plus",attrs:{slot:"reference",title:e.$transMsg("lang.action.addField")},on:{click:function(t){return t.stopPropagation(),e.visible.splice(i,1,!0)}},slot:"reference"})],1),n("el-dropdown",{attrs:{trigger:"click"},on:{command:function(t){return e.handleCommand(i,t)}},nativeOn:{click:function(e){e.stopPropagation()}}},[n("span",{staticClass:"el-dropdown-link"},[n("i",{staticClass:"icon el-icon-more",attrs:{title:e.$transMsg("lang.action.deleteModel")}})]),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{attrs:{command:"dict"}},[e._v(e._s(e.$transMsg("lang.action.updateDict")))]),n("el-dropdown-item",{attrs:{command:"copy"}},[e._v(e._s(e.$transMsg("lang.action.copyModel")))]),n("el-dropdown-item",{attrs:{command:"modify"}},[e._v(e._s(e.$transMsg("lang.action.modifyModel")))]),n("el-dropdown-item",{attrs:{command:"delete"}},[e._v(e._s(e.$transMsg("lang.action.deleteModel")))])],1)],1)],1)]),e._l(t.list,(function(i,r){return n("div",{key:i.prop,staticClass:"form-item"},[n("object-input",{attrs:{label:e.$transMsg("lang.prop.field"),keyAlign:"center",disabled:1==t.type,clazz:e.clazz},model:{value:t.list[r],callback:function(n){e.$set(t.list,r,n)},expression:"m.list[j]"}}),n("i",{staticClass:"icon el-icon-delete",on:{click:function(n){return e.removeProp(t,r)}}})],1)}))],2)})),1):e._e()],1)}),[],!1,null,null,null)).exports,Y=n("7717").a,J=(n("24d5"),Object(z.a)(Y,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"property"},[n("el-tabs",{attrs:{stretch:""},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[n("el-tab-pane",{attrs:{label:e.$transMsg("lang.text.property"),name:"dsl"}},[n("el-form",{ref:"form",staticClass:"pl pr pb fs",attrs:{size:"mini",model:e.form}},[e._l(e.properties,(function(t,i){return[e.getVisible(t.visible)?n("el-form-item",{key:i,attrs:{label:e.$transMsg(t.label)}},[n("div",{staticClass:"form-item"},[n("dynamic-input",e._b({model:{value:e.form[t.key],callback:function(n){e.$set(e.form,t.key,n)},expression:"form[item.key]"}},"dynamic-input",t,!1))],1)]):e._e()]}))],2)],1),n("el-tab-pane",{attrs:{label:e.$transMsg("lang.text.datasource"),name:"dataSource"}},[n("data-source",{on:{dataModelCreation:function(t){return e.$emit("dataModelCreation")}}})],1),n("el-tab-pane",{attrs:{label:e.$transMsg("lang.text.handler"),name:"handler"}},[n("events-handler",{on:{showEditor:function(t){return e.showEditor(arguments[0],arguments[1])}}})],1)],1),n("el-dialog",{attrs:{title:e.$transMsg("lang.text.codeEditor"),visible:e.visible,"custom-class":"editor-dialog","append-to-body":""},on:{"update:visible":function(t){e.visible=t}}},[n("code-editor",{key:Date.now(),on:{change:e.handleExpr,close:function(t){e.visible=!1}},model:{value:e.expression,callback:function(t){e.expression=t},expression:"expression"}})],1)],1)}),[],!1,null,"081b81dc",null)).exports;const Q=(e,t="",n={})=>{var i,r,a,o,l,u,d;let p=[];if(!e.$id||!e.$type){for(let t in e){if(c.Types.isObject(e[t]))return Q(e[t],t);if(c.Types.isArray(e[t])){var h;let i=Object(c.transMsg)(null===(h=n[t])||void 0===h?void 0:h.label)||t,r=e[t].map(e=>{var r;return Q(e,i,null===(r=n[t])||void 0===r?void 0:r.itemClazz)}).flat().filter(Boolean);r.length&&p.push({id:t+Math.random(),label:i,type:"props",children:r})}}return p.length?p:void 0}const f=(null===(i=s.a.component(e.$type))||void 0===i?void 0:i.options.props)||{};for(let t in e)if(!t.startsWith("$"))if(c.Types.isObject(e[t]))e[t].$id&&e[t].$type&&p.push(Q(e[t],`[${Object(c.transMsg)(f[t].label)||t}]`));else if(c.Types.isArray(e[t])){let n=e[t].map(e=>{var n;return Q(e,`[${Object(c.transMsg)(f[t].label)||t}]`,null===(n=f[t])||void 0===n?void 0:n.itemClazz)}).flat().filter(Boolean);n.length&&p.push({id:t+Math.random(),label:Object(c.transMsg)(f[t].label)||t,type:"props",children:n})}return null!==(r=e.$body)&&void 0!==r&&r.length&&p.push(...e.$body.map(e=>Q(e))),{id:e.$id,label:Object(c.transMsg)((null===(a=s.a.options.components[e.$type])||void 0===a||null===(o=a.options)||void 0===o||null===(l=o.options)||void 0===l?void 0:l.name)||e.$type)+t+` (${e.$id.slice(-4)})`,type:e.$type,name:Object(c.transMsg)(null!==(u=null!==(d=e.title)&&void 0!==d?d:e.label)&&void 0!==u?u:e.text),children:p}};var Z={name:"editor",components:{ComponentList:N,ScriptModel:U,DataModel:X,Property:J},provide(){return{editorBound:this.editorBound}},props:{data:{type:Object,required:!0}},model:{prop:"data",event:"change"},computed:{...Object(l.mapState)({mode:e=>e.leivii.mode,pageConfig:e=>e.leivii.pageConfig}),selected(){var e,t;const n=this.$store.state.leivii.selected.$type,i=s.a.options.components[n];if(i)return this.$transMsg(null===(e=i.options)||void 0===e||null===(t=e.options)||void 0===t?void 0:t.name)||n},hierarchy(){return[Q(this.pageConfig)]},key(){var e;return(null===(e=this.$route)||void 0===e?void 0:e.fullPath)||"key"}},data:()=>({tab:"add",script:{visible:!1,index:-1,data:null},dragResize:{windowWidth:0,pageMinWidth:300,leftMinWidth:200,rightMinWidth:300,showTabs:!0,showTabDebounce:20,leftDown:!1,leftWidth:280,rightDown:!1,rightWidth:400},editorBound:{x:0,y:0},versions:[],version:null,v:1}),created(){this.dropHandler=this.dropHandler.bind(this),this.draggingHandler=this.draggingHandler.bind(this),this.keydownHandler=this.keydownHandler.bind(this),this.leavePageHandler=this.leavePageHandler.bind(this),this.resizeHandler=this.resizeHandler.bind(this)},mounted(){const{id:e,status:t}=this.$store.state.leivii.page,{$id:n,$type:i}=this.$store.state.leivii.selected;this.$store.commit("leivii/SET_MODE",1),this.$store.commit("leivii/SET_PAGE_CONFIG",JSON.parse(JSON.stringify(this.data))),this.$store.dispatch("leivii/setSelected",{$id:n||this.data.$id,$type:i||this.data.$type}),this.$store.commit("leivii/SET_PAGE",{id:e,status:t}),this.initMenudata(),this.resizeHandler(),this.addEvents()},destroyed(){this.removeEvents(),this.$store.commit("leivii/SET_MODE",0)},methods:{initMenudata(){(function(){return d(this,void 0,void 0,(function(){return p(this,(function(e){if(y)return[2,y()];if(C())return[2,k()];throw new Error("Read is not supported in your browser.")}))}))})().then(e=>{try{e=JSON.parse(e),["x","y","type","id","down","pastable"].every(t=>t in e)&&Object.keys(e.data||{}).length&&this.$store.dispatch("leivii/setContextMenu",e),c.Types.isObject(e)&&(["$id","$type","$visible"].every(t=>t in e)?this.$store.dispatch("leivii/setContextMenu",{...this.$store.state.leivii.contextMenu,type:"copy",clipboard:!0,data:e}):["code","name","type","config","list"].every(t=>t in e)&&this.$store.dispatch("leivii/setContextMenu",{...this.$store.state.leivii.contextMenu,type:"model",clipboard:!0,data:e}))}catch(e){}}).catch(()=>{c.logger.log("get copy data error")})},addEvents(){this.removeEvents(),window.addEventListener("drop",this.dropHandler,!1),window.addEventListener("mouseup",this.dropHandler,!1),window.addEventListener("mousemove",this.draggingHandler,!1),this.$nextTick(()=>{var e;return null===(e=this.$refs.page)||void 0===e?void 0:e.$el.addEventListener("mouseleave",this.leavePageHandler,!1)}),window.addEventListener("keydown",this.keydownHandler,!1),window.addEventListener("resize",this.resizeHandler,!1)},removeEvents(){var e;window.removeEventListener("drop",this.dropHandler,!1),window.removeEventListener("mouseup",this.dropHandler,!1),window.removeEventListener("mousemove",this.draggingHandler,!1),window.removeEventListener("keydown",this.keydownHandler,!1),window.removeEventListener("resize",this.resizeHandler,!1),null===(e=this.$refs.page)||void 0===e||e.$el.removeEventListener("mouseleave",this.leavePageHandler,!1)},clickHandler(e){1===this.mode&&this.$store.dispatch("leivii/setContextMenu",{...this.$store.state.leivii.contextMenu,down:!1,clipboard:!1})},copyComponent(e){e.stopPropagation(),this.$store.dispatch("leivii/setContextMenu",{...this.$store.state.leivii.contextMenu,down:!1,clipboard:!0,type:"copy",data:this.$store.state.leivii.selected.data}),this.clickHandler()},pasteComponent(e){e.stopPropagation(),this.$store.dispatch("leivii/pasteToSelected"),this.clickHandler()},removeComponent(e,t){e.stopPropagation(),this.$store.dispatch("leivii/removeConfigById",t||this.$store.state.leivii.contextMenu.id),this.clickHandler()},switchTab(e){this.dragResize.showTabs?this.tab===e?this.dragResize.showTabs=!1:this.tab=e:(this.dragResize.showTabs=!0,this.tab=e,this.dragResize.leftWidth<this.dragResize.leftMinWidth+this.dragResize.showTabDebounce&&(this.dragResize.leftWidth=this.dragResize.leftMinWidth+this.dragResize.showTabDebounce))},resizeHandler(e){this.dragResize.windowWidth=window.innerWidth;let t=this.dragResize.leftWidth+this.dragResize.rightWidth+this.dragResize.pageMinWidth-this.dragResize.windowWidth;if(t>0){let e=this.dragResize.leftWidth/(this.dragResize.leftWidth+this.dragResize.rightWidth),n=1-e;this.dragResize.leftWidth-=t*e,this.dragResize.rightWidth-=t*n}},resizeStartHandler(e,t){e.preventDefault(),this.dragResize[t+"Down"]=!0},dragstartHandler(e,t){1===this.mode&&this.$store.commit("leivii/SET_DRAG",{...this.$store.state.leivii.dragObject,id:`${t.options.name}-${Object(c.uuid2)(12)}`,x:e.x,y:e.y,isNew:!0,target:t,parent:null,props:{}})},draggingHandler(e){1===this.mode&&(this.dragResize.leftDown&&(this.dragResize.leftWidth+=e.movementX,this.dragResize.leftWidth<this.dragResize.leftMinWidth-this.dragResize.showTabDebounce&&e.movementX<0?this.dragResize.showTabs=!1:this.dragResize.leftWidth>this.dragResize.leftMinWidth&&e.movementX>0&&(this.dragResize.showTabs=!0)),this.dragResize.rightDown&&(this.dragResize.rightWidth-=e.movementX),this.$store.state.leivii.dragObject.target&&this.$store.commit("leivii/SET_DRAG",{...this.$store.state.leivii.dragObject,dragging:!0,x:e.x,y:e.y}))},dropHandler(e){1===this.mode&&(this.dragResize.leftDown&&(this.dragResize.leftDown=!1,this.dragResize.leftWidth<this.dragResize.leftMinWidth&&(this.dragResize.leftWidth=this.dragResize.leftMinWidth),this.resizeHandler()),this.dragResize.rightDown&&(this.dragResize.rightDown=!1,this.dragResize.rightWidth<this.dragResize.rightMinWidth&&(this.dragResize.rightWidth=this.dragResize.rightMinWidth),this.resizeHandler()),this.$store.commit("leivii/SET_DRAG",{...this.$store.state.leivii.dragObject,dragging:!1,x:0,y:0,target:null,parent:null,props:{}}))},keydownHandler(e){"s"===e.key.toLowerCase()&&e.ctrlKey&&(e.preventDefault(),(e.shiftKey||this.$route.meta.id===this.pageId)&&this.savePage())},leavePageHandler(e){1===this.mode&&this.$store.state.leivii.dragObject.dragging&&(e.stopPropagation(),this.$store.dispatch("leivii/mouseleave",{id:this.pageConfig.$id}))},handleDataSourceCommand(e){"manual"===e&&this.addModel(),"script"===e&&this.addScript(),"pasteModel"===e&&this.pasteModel()},addModel(){this.$prompt(this.$transMsg("lang.tip.modelName"),this.$transMsg("lang.common.tip"),{inputPattern:/^\S+$/,inputPlaceholder:this.$transMsg("lang.text.modelName"),inputErrorMessage:this.$transMsg("lang.tip.invalidModelName")}).then(({value:e})=>{this.$store.dispatch("leivii/setConfigById",{id:this.pageConfig.$id,config:{models:[...[this.pageConfig.models].flat().filter(Boolean),{name:e,type:0,list:[]}]}})})},addScript(){this.$prompt(this.$transMsg("lang.tip.scriptName"),this.$transMsg("lang.common.tip"),{inputPattern:/^\S+$/,inputPlaceholder:this.$transMsg("lang.text.scriptName"),inputErrorMessage:this.$transMsg("lang.tip.invalidScriptName")}).then(({value:e})=>{const t={name:e,type:1,config:{form:"",table:"",script:""},code:Object(c.uuid2)(),list:[]};this.$store.dispatch("leivii/setConfigById",{id:this.pageConfig.$id,config:{models:[...[this.pageConfig.models].flat().filter(Boolean),t]}}).then(()=>this.editModel(this.pageConfig.models.length-1))})},pasteModel(){if("model"===this.$store.state.leivii.contextMenu.type){let e=(this.pageConfig.models||[]).slice();e.push(this.$store.state.leivii.contextMenu.data),this.$store.dispatch("leivii/setConfigById",{id:this.pageConfig.$id,config:{models:e}})}},editModel(e){this.script.index=e,this.script.visible=!0},handleModelError(e){this.$message({type:"warning",message:e});let t=this.pageConfig.models.slice();t.splice(this.script.index,1),this.$store.dispatch("leivii/setConfigById",{id:this.pageConfig.$id,config:{models:t}}),this.script.visible=!1,this.script.index=-1},async handleScript(e){this.script.visible=!1,await e.done.call(this),await this.$refs.models.updateDict(this.script.index);for(let e=this.script.index+1,t=this.pageConfig.models.length;e<t;e++)1===this.pageConfig.models[e].type&&(this.script.index=e,this.script.visible=!0)},nodeClick(e){"props"!=e.type&&this.$store.dispatch("leivii/setSelected",{$id:e.id,$type:e.type})},savePage(){this.$emit("change",this.pageConfig)},preview(){this.$store.commit("leivii/SET_MODE",1===this.mode?2:1)}}},ee=(n("85ac"),n("c188"),Object(z.a)(Z,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"geek leivii-editor",class:{editor:1==e.mode,preview:2==e.mode},on:{click:e.clickHandler}},[n("div",{staticClass:"geek-navbar flex-middle"},[n("div",{staticClass:"menus flex-middle"},[e._t("title",(function(){return[e._v(e._s(e.$transMsg("lang.prop.label")))]}))],2),n("div",{staticClass:"flex-middle"},[e._t("operations"),n("div",{staticClass:"operation",attrs:{title:e.$transMsg("lang.action.save")},on:{click:e.savePage}},[n("geek-icon",{staticClass:"menu-icon",attrs:{"icon-class":"save"}})],1),n("div",{staticClass:"operation",attrs:{title:e.$transMsg("lang.action.preview")},on:{click:e.preview}},[1==e.mode?n("geek-icon",{staticClass:"menu-icon",attrs:{"icon-class":"preview"}}):n("geek-icon",{staticClass:"menu-icon",attrs:{"icon-class":"pause"}})],1)],2)]),n("div",{ref:"editor",staticClass:"geek-body"},[e.$store.state.leivii.dragObject.target&&e.$store.state.leivii.dragObject.dragging?n("div",{staticClass:"drag-component",style:"top:"+e.$store.state.leivii.dragObject.y+"px; left:"+e.$store.state.leivii.dragObject.x+"px"},[e._v(" "+e._s(e.$store.state.leivii.dragObject.target.options.options?e.$transMsg(e.$store.state.leivii.dragObject.target.options.options.name):e.$store.state.leivii.dragObject.target.options.name)+" ")]):e._e(),e.$store.state.leivii.contextMenu.down?n("div",{staticClass:"context-menu",style:"left: "+e.$store.state.leivii.contextMenu.x+"px; top: "+e.$store.state.leivii.contextMenu.y+"px;"},[n("div",{staticClass:"menu-item",on:{click:e.copyComponent}},[e._v(e._s(e.$transMsg("lang.action.copy")))]),n("div",{staticClass:"menu-item",class:{disabled:!e.$store.state.leivii.contextMenu.pastable},on:{click:e.pasteComponent}},[e._v(e._s(e.$transMsg("lang.action.paste")))]),n("div",{staticClass:"menu-item",on:{click:e.removeComponent}},[e._v(e._s(e.$transMsg("lang.action.delete")))])]):e._e(),1==e.mode?n("div",{staticClass:"geek-sidebar",style:e.dragResize.showTabs?"min-width: "+(e.dragResize.leftMinWidth+e.dragResize.showTabDebounce)+"px; width: "+Math.max(e.dragResize.leftWidth,e.dragResize.leftMinWidth)+"px":""},[n("div",{staticClass:"resize-w-right",on:{mousedown:function(t){return e.resizeStartHandler(t,"left")}}}),n("div",{staticClass:"tabs"},[n("div",{staticClass:"tab",class:{active:"hierarchy"==e.tab},attrs:{title:e.$transMsg("lang.text.hierarchy")},on:{click:function(t){return e.switchTab("hierarchy")}}},[n("geek-icon",{staticClass:"icon",attrs:{"icon-class":"hierarchy"}})],1),n("div",{staticClass:"tab",class:{active:"add"==e.tab},attrs:{title:e.$transMsg("lang.text.insert")},on:{click:function(t){return e.switchTab("add")}}},[n("geek-icon",{staticClass:"icon",attrs:{"icon-class":"plus"}})],1),n("div",{staticClass:"tab",class:{active:"datasource"==e.tab},attrs:{title:e.$transMsg("lang.text.datasource")},on:{click:function(t){return e.switchTab("datasource")}}},[n("geek-icon",{staticClass:"icon",attrs:{"icon-class":"datasource"}})],1)]),e.dragResize.showTabs?["hierarchy"==e.tab?n("div",{staticClass:"tab-content hierarchy"},[n("div",{staticClass:"title"},[e._v(e._s(e.$transMsg("lang.text.hierarchy")))]),n("el-tree",{staticClass:"hierarchy-tree",attrs:{data:e.hierarchy,"node-key":"id","default-expand-all":"","expand-on-click-node":!1},on:{"node-click":e.nodeClick},scopedSlots:e._u([{key:"default",fn:function(t){return n("div",{staticClass:"hierarchy-item"},[t.data.name?n("span",{staticClass:"hierarchy-title"},[e._v("["+e._s(t.data.name)+"] - ")]):e._e(),n("div",{staticClass:"hierarchy-label",attrs:{title:t.node.label}},[e._v(e._s(t.data.label))]),e.pageConfig.$id!=t.data.id&&"props"!=t.data.type?n("i",{staticClass:"icon el-icon-delete",on:{click:function(n){return e.removeComponent(n,t.data.id)}}}):e._e()])}}],null,!1,2819564645)})],1):e._e(),"add"==e.tab?n("div",{staticClass:"tab-content add"},[n("div",{staticClass:"title"},[e._v(e._s(e.$transMsg("lang.text.insert")))]),n("component-list",{on:{dragstart:e.dragstartHandler}})],1):e._e(),"datasource"==e.tab?n("div",{staticClass:"tab-content datasource"},[n("div",{staticClass:"title"},[n("div",[e._v(e._s(e.$transMsg("lang.text.datasource")))]),n("el-dropdown",{attrs:{trigger:"click"},on:{command:e.handleDataSourceCommand}},[n("i",{staticClass:"icon el-icon-plus",attrs:{title:e.$transMsg("lang.action.addModel")}}),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{attrs:{command:"manual"}},[e._v(e._s(e.$transMsg("lang.action.createModel")))]),n("el-dropdown-item",{attrs:{command:"script"}},[e._v(e._s(e.$transMsg("lang.action.createScript")))]),n("el-dropdown-item",{attrs:{command:"pasteModel",disabled:"model"!=e.$store.state.leivii.contextMenu.type,divided:""}},[e._v(e._s(e.$transMsg("lang.action.pasteModel")))])],1)],1)],1),n("data-model",{ref:"models",on:{editModel:e.editModel}})],1):e._e()]:e._e()],2):e._e(),n("div",{staticClass:"geek-content",class:{"none-events":e.dragResize.leftDown||e.dragResize.rightDown},style:"min-width: "+e.dragResize.pageMinWidth+"px;"},[n("leivii",{key:e.key,ref:"page",attrs:{data:e.pageConfig}})],1),1==e.mode?n("div",{staticClass:"geek-control-sidebar",style:"min-width: "+e.dragResize.rightMinWidth+"px; width: "+Math.max(e.dragResize.rightWidth,e.dragResize.rightMinWidth)+"px"},[n("div",{staticClass:"resize-w-left",on:{mousedown:function(t){return e.resizeStartHandler(t,"right")}}}),n("div",{staticClass:"sidebar-header"},[n("div",{staticClass:"component-id"},[e._v(e._s(e.selected))])]),n("property",{key:e.$store.state.leivii.selected.$id,on:{dataModelCreation:function(t){e.tab="datasource"}}})],1):e._e()]),n("el-dialog",{attrs:{title:e.$transMsg("lang.text.scfEditor"),visible:e.script.visible,"custom-class":"script-dialog","append-to-body":"",fullscreen:""},on:{"update:visible":function(t){return e.$set(e.script,"visible",t)}}},[-1!=e.script.index?n("script-model",{key:e.script.index,attrs:{model:e.pageConfig.models[e.script.index]},on:{done:e.handleScript,error:e.handleModelError}}):e._e()],1)],1)}),[],!1,null,"0953e024",null)).exports;n("c9e2"),n("088c");const{isString:te,isArray:ne,isObject:ie}=c.Types,re=(e,t,n)=>{for(let i=0,r=(e=[e].flat()).length;i<r;i++){let r=e[i];if(!te(r)){if(r.$id===t)return[r,n];if(r.$body){let[e,i]=re(r.$body,t,n)||[];if(e)return[e,n=i||r];for(let e in r)if("$body"!==e&&(ne(r[e])||ie(r[e]))){let[i,a]=re(r[e],t)||[];if(i)return[i,n=r]}}else if(ie(r))for(let e in r)if(ne(r[e])||ie(r[e])){let[i,a]=re(r[e],t,n)||[];if(i)return[i,n=r]}}}},ae=(e,t)=>{for(let n=0,i=(e=[e].flat()).length;n<i;n++){let i=e[n];if(!te(i)){if(i.$id===t)return[i,[[i.$type,i.$id].filter(Boolean).join(".")].filter(Boolean)];if(i.$body){let[e,n]=ae(i.$body,t)||[];if(e)return[e,[[i.$type,i.$id].filter(Boolean).join("."),...n].filter(Boolean)];for(let e in i)if("$body"!==e&&(ne(i[e])||ie(i[e]))){let[n,r]=ae(i[e],t)||[];if(n)return[n,[[i.$type,i.$id].filter(Boolean).join("."),...r].filter(Boolean)]}}else if(ie(i))for(let e in i)if(ne(i[e])||ie(i[e])){let[n,r]=ae(i[e],t)||[];if(n)return[n,[[i.$type,i.$id].filter(Boolean).join("."),...r].filter(Boolean)]}}}},oe=(e,t)=>{for(let n=0,i=(e=[e].flat()).length;n<i;n++){let i=e[n];if(!te(i)){if(i.$id===t)return i;if(i.$body){let e=oe(i.$body,t);if(e)return e;for(let e in i)if("$body"!==e&&(ne(i[e])||ie(i[e]))){let n=oe(i[e],t);if(n)return n}}else if(ie(i))for(let e in i)if(ne(i[e])||ie(i[e])){let n=oe(i[e],t);if(n)return n}}}},se=(e,t)=>{for(let n=0,i=e.length;n<i;n++){let i=e[n];if(!te(i)){if(i.$id===t){let t=e.slice(n).map(e=>e.$id);return e.splice(n,1),t}for(let e in i)if(ne(i[e])){let n=se(i[e],t);if(null!=n&&n.length)return[...n,i.$id]}else if(ie(i[e])){if(i[e].$id===t){let t=i[e].$id;return i[e]=null,[i.$id,t]}{let n=se([i[e]],t);if(null!=n&&n.length)return[...n,i.$id]}}}}},le=Object(I.a)(100,(e,t,n,i,r)=>{if(i&&e.dragObject.target&&e.dragObject.parent!==i&&e.dragObject.id!==i){var a;let s=ue(e.pageConfig),l=[];if(r){var o;let[r,a]=ae(s,i)||[],c=e.dragObject.target.options.name;if(null!=r&&r.$body&&(r.$body=[r.$body].flat().filter(Boolean)),null!==(o=e.dragObject)&&void 0!==o&&o.parent&&e.dragObject.parent!==i){let[t,n]=ae(s,e.dragObject.parent)||[];l=l.concat(n.map(e=>e.split(".")[1]),se([t],e.dragObject.id))}r.$body.push({...e.dragObject.props,$id:e.dragObject.id,$type:c,$visible:!0}),l=l.concat(a.map(e=>e.split(".")[1]),e.dragObject.id),n("updateSelected",r),t("SET_DRAG",{...e.dragObject,parent:i})}else if(null!==(a=e.dragObject)&&void 0!==a&&a.parent){let[t,r]=ae(s,e.dragObject.parent)||[],a=[null==t?void 0:t.$body].flat().filter(Boolean),o=a.findIndex(e=>e.$id===i),c=a.findIndex(t=>t.$id===e.dragObject.id);if(o>-1&&c>-1){let e=a[c];o>c?(a.splice(o+1,0,e),a.splice(c,1)):(a.splice(c,1),a.splice(o,0,e))}l=l.concat(r.map(e=>e.split(".")[1]),...a.slice(Math.min(o,c),Math.max(o,c)+1).map(e=>e.$id)),t.$body=a,n("updateSelected",t)}t("SET_DIRTY",[...new Set([...l])]),t("SET_PAGE_CONFIG",s)}}),ce=Object(I.a)(100,(e,t,n,i)=>{var r;null!==(r=e.dragObject)&&void 0!==r&&r.parent&&e.dragObject.isNew&&(n("removeConfigById",e.dragObject.id),t("SET_DRAG",{...e.dragObject,parent:null}))}),ue=e=>JSON.parse(JSON.stringify(e));var de={namespaced:!0,state:{mode:0,selected:{$id:"",$type:"",xpath:[],droppable:"",data:{}},dirty:[],contextMenu:{x:0,y:0,id:null,type:null,data:null,pastable:!1,down:!1},dragObject:{x:0,y:0,id:null,parent:null,dragging:!1,isNew:!1,target:null,props:{}},page:{id:0,status:1},pageConfig:JSON.parse(localStorage.getItem("pageData"))||{$id:"geek-page",$type:"geek-page",$visible:!0,$classes:"mb"}},mutations:{SET_MODE(e,t){e.mode=t},SET_SELECTED(e,t){e.selected=t},SET_DIRTY(e,t){c.logger.log("dirty",t),e.dirty=t},SET_PAGE_CONFIG(e,t){e.pageConfig=t,e.page.status=0},SET_CONTEXT_MENU(e,t){e.contextMenu=t},SET_DRAG(e,t){e.dragObject=t},SET_PAGE(e,t){e.page=t}},actions:{mouseenter({state:e,commit:t,dispatch:n},{id:i,canDropIn:r=!0}){le(e,t,n,i,r)},mouseleave({state:e,commit:t,dispatch:n},{id:i}){ce(e,t,n,i)},setSelected({state:e,commit:t},n){if(n.$id===e.selected.$id&&Object.keys(e.selected.data).length)return;let i=ue(e.pageConfig);const[r,a=[]]=ae(i,n.$id)||[];let o="";for(let e=a.length-1;e>=0;e--){var l,u,d;let[t,n]=a[e].split(".");if(null!==(l=s.a.component(t).options)&&void 0!==l&&null!==(u=l.options)&&void 0!==u&&null!==(d=u.groups)&&void 0!==d&&d.includes("container")){o=n;break}}c.logger.log("select xpath",a,r,o),t("SET_SELECTED",{...n,xpath:a,droppable:o,data:r})},setDirty({state:e,commit:t},n){c.logger.log("dirty",n),t("SET_DIRTY",n)},updateSelected({state:e,commit:t},n){n.$id===e.selected.$id&&t("SET_SELECTED",{...e.selected,data:n})},getXpathById({state:e},t){const[n,i=[]]=ae(e.pageConfig,t)||[];return i},removeConfigById({state:e,dispatch:t,commit:n},i){if(!i)return;let r=ue(e.pageConfig),a=se([r],i);n("SET_PAGE_CONFIG",r),n("SET_DIRTY",a),e.selected.$id===i&&t("setSelected",{$id:r.$id,$type:r.$type})},async setContextMenu({commit:e},t){t.clipboard&&await D(JSON.stringify(t.data,null,2)),e("SET_CONTEXT_MENU",t)},pasteToSelected({state:e,dispatch:t,commit:n}){let i=(e=>{let t={},n=JSON.stringify(e);[...n.matchAll(/"\$id":\s?"([^"]+)"/g)].forEach(e=>{let n=e[1];/((\w+-)+)\w+/.test(n)?t[n]=n.replace(/((\w+-)+)\w+/,(e,t)=>t+Object(c.uuid2)(12)):t[n]=n+"-copy"});for(let e in t)n=n.replaceAll(new RegExp(e,"g"),t[e]);return JSON.parse(n)})(e.contextMenu.data);n("SET_DIRTY",e.selected.xpath.map(e=>e.split(".")[1])),t("setConfigById",{id:e.selected.$id,config:{$body:[...[e.selected.data.$body].flat().filter(Boolean),i]}})},getParentConfigById({state:e},t){let n=ue(e.pageConfig);return re(n,t)},getConfigById({state:e},t){let n=ue(e.pageConfig);return oe(n,t)},setConfigById:({state:e,commit:t,dispatch:n},{id:i,config:r})=>new Promise(a=>{c.logger.log("GEEK::setConfigById",i,r);let o=ue(e.pageConfig),[s,l=[]]=ae(o,i)||[];if(!s)return a(l);for(let e in r)s[e]=r[e];t("SET_PAGE_CONFIG",o),t("SET_DIRTY",l.map(e=>e.split(".")[1])),n("updateSelected",s),a({xpath:l})})}};let pe={cn:{"lang.common.name":"","lang.common.tip":"","lang.common.warn":"","lang.common.success":"","lang.common.fail":"","lang.group.form":"","lang.group.container":"","lang.group.others":"","lang.text.hierarchy":"","lang.text.insert":"","lang.text.customComponent":"","lang.text.property":"","lang.text.datasource":"","lang.text.handler":"","lang.text.doc":"","lang.text.objectMerge":"","lang.text.customParam":"","lang.text.scfEditor":"","lang.text.codeEditor":"","lang.text.functionEditor":"","lang.text.validatorEditor":"","lang.text.modelName":"","lang.text.scriptName":"","lang.text.content":"","lang.text.list":"","lang.text.paginglist":"","lang.text.object":"","lang.text.dict":"","lang.text.dictValue":"","lang.text.script":"","lang.text.dictType":"","lang.text.address":"","lang.text.format":"","lang.text.subtype":"","lang.text.scf":"","lang.text.scfName":"","lang.text.keyword":"","lang.text.pagingConfig":"","lang.text.dictConfig":"","lang.text.autoProcess":"","lang.text.private":"","lang.text.cache":"","lang.text.rootNode":"","lang.text.plugin":"","lang.text.valueType":"","lang.text.string":"","lang.text.number":"","lang.text.bool":"","lang.text.array":"","lang.text.object":"","lang.text.component":"","lang.text.condition":"","lang.text.method":"","lang.text.dragComponent":"","lang.text.fieldName":"","lang.text.moreConfig":"","lang.text.showAsText":"","lang.text.disableAll":"","lang.text.restInfo":"REST","lang.text.method.c":"(POST)","lang.text.method.r":"(DELETE)","lang.text.method.u":"(PUT)","lang.text.method.d":"(GET)","lang.text.queries":"","lang.text.themePicker":"","lang.text.border":"","lang.text.radius":"","lang.text.all":"","lang.text.whole":"","lang.text.pos":"","lang.text.colConfig":"","lang.text.key":"","lang.text.date":"","lang.text.dateType":"","lang.text.prev":"","lang.text.next":"","lang.text.advancedSetting":"","lang.axios.config":"","lang.axios.url":"","lang.axios.method":"","lang.axios.params":" (params)","lang.axios.data":" (body)","lang.axios.dataType":"","lang.plugin.name":"","lang.plugin.method":"","lang.plugin.params":"","lang.theme.xxs":"","lang.theme.xs":"","lang.theme.sm":"","lang.theme.nomal":"","lang.theme.md":"","lang.theme.lg":"","lang.theme.xl":"","lang.theme.xxl":"","lang.theme.m":"","lang.theme.p":"","lang.theme.fs":"","lang.theme.c":"","lang.theme.t":"","lang.theme.r":"","lang.theme.b":"","lang.theme.l":"","lang.theme.tl":"","lang.theme.tr":"","lang.theme.br":"","lang.theme.bl":"","lang.theme.white":"","lang.theme.deep":"","lang.theme.bgColor":"","lang.tip.createPage":"","lang.tip.saveData":"","lang.tip.modelName":"","lang.tip.scriptName":"","lang.tip.invalidModelName":"","lang.tip.invalidScriptName":"","lang.tip.content":"","lang.tip.selectComponent":"","lang.tip.deleteModel":"","lang.tip.modelNotFound":"","lang.tip.dataSourceEmpty":"","lang.tip.checkDataSource":"","lang.tip.dataSourceSaved":"","lang.tip.deleteDataSource":"","lang.tip.noneComponent":"/","lang.tip.inputExpressionCode":"","lang.tip.inputRequestUrl":"","lang.tip.completeConfig":"","lang.tip.inputI18n":"","lang.tip.inputStringOrI18n":"","lang.tip.i18nNotFound":"","lang.tip.inputDict":"code","lang.tip.inputList":"","lang.tip.inputRestUrl":"REST","lang.tip.inputAxiosUrl":"","lang.tip.multiTheme":"","lang.tip.scfConfig":"","lang.tip.chooseScf":"","lang.tip.scfName":"","lang.tip.scfNameInvalid":"","lang.tip.selectScriptType":"","lang.tip.compelteParams":"","lang.tip.noMoreThan15":"15","lang.tip.less15day":"15","lang.tip.noMoreThan30":"30","lang.tip.less30day":"30","lang.tip.positiveInt":"","lang.tip.less32bit":"32","lang.tip.noLongerThan":" ","lang.tip.inputNumber":" ","lang.tip.onlyInputNumberOrEnglishCharacters":" ","lang.action.$alert":"","lang.action.$confirm":"","lang.action.$prompt":"","lang.action.$message":"","lang.action.preview":"","lang.action.copy":"","lang.action.paste":"","lang.action.delete":"","lang.action.addModel":"","lang.action.createModel":"","lang.action.createScript":"","lang.action.execScript":"","lang.action.exec":"","lang.action.execOnEnter":"","lang.action.editModel":"","lang.action.modifyModel":"","lang.action.copyModel":"","lang.action.pasteModel":"","lang.action.deleteModel":"","lang.action.chooseModel":"","lang.action.complete":"","lang.action.export":"","lang.action.add":"","lang.action.addField":"","lang.action.updateDict":"","lang.action.addDataSource":"","lang.action.chooseDataSource":"","lang.action.createModel":"","lang.action.addHandler":"","lang.action.configFormItem":"","lang.action.configColumn":"","lang.action.configComponent":"","lang.action.componentConfiguration":"","lang.action.checkAll":"","lang.action.none":"","lang.action.validate":"","lang.action.writeScript":"","lang.action.columnConfig":"","lang.action.generatePage":"","lang.action.updatePage":"","lang.action.chooseScript":"","lang.action.execFail":""},en:{"lang.common.name":"","lang.common.tip":"","lang.common.warn":"","lang.common.success":"","lang.common.fail":"","lang.group.form":"Form","lang.group.container":"Container","lang.group.others":"Others","lang.text.hierarchy":"","lang.text.insert":"","lang.text.customComponent":"","lang.text.property":"Property","lang.text.datasource":"DataSource","lang.text.handler":"Handler","lang.text.doc":"","lang.text.objectMerge":"","lang.text.customParam":"","lang.text.scfEditor":"","lang.text.codeEditor":"","lang.text.functionEditor":"","lang.text.validatorEditor":"","lang.text.modelName":"","lang.text.scriptName":"","lang.text.content":"","lang.text.list":"List","lang.text.paginglist":"","lang.text.dict":"Dict","lang.text.dictValue":"","lang.text.script":"","lang.text.dictType":"","lang.text.address":"","lang.text.format":"","lang.text.subtype":"","lang.text.scf":"","lang.text.scfName":"","lang.text.keyword":"","lang.text.pagingConfig":"","lang.text.dictConfig":"","lang.text.autoProcess":"","lang.text.private":"","lang.text.cache":"","lang.text.rootNode":"","lang.text.plugin":"","lang.text.valueType":"","lang.text.string":"String","lang.text.number":"Number","lang.text.bool":"Boolean","lang.text.array":"Array","lang.text.object":"Object","lang.text.component":"Component","lang.text.condition":"Condition","lang.text.method":"Method","lang.text.dragComponent":"Drag Component","lang.text.fieldName":"","lang.text.moreConfig":"","lang.text.showAsText":"","lang.text.disableAll":"","lang.text.restInfo":"REST","lang.text.method.c":"(POST)","lang.text.method.r":"(DELETE)","lang.text.method.u":"(PUT)","lang.text.method.d":"(GET)","lang.text.queries":"","lang.text.themePicker":"","lang.text.border":"","lang.text.radius":"","lang.text.all":"","lang.text.whole":"","lang.text.pos":"","lang.text.colConfig":"","lang.text.key":"","lang.text.date":"","lang.text.dateType":"","lang.text.prev":"","lang.text.next":"","lang.text.advancedSetting":"","lang.axios.config":"","lang.axios.url":"","lang.axios.method":"","lang.axios.params":" (params)","lang.axios.data":" (body)","lang.axios.dataType":"","lang.plugin.name":"","lang.plugin.method":"","lang.plugin.params":"","lang.theme.xxs":"","lang.theme.xs":"","lang.theme.sm":"","lang.theme.nomal":"","lang.theme.md":"","lang.theme.lg":"","lang.theme.xl":"","lang.theme.xxl":"","lang.theme.m":"","lang.theme.p":"","lang.theme.fs":"","lang.theme.c":"","lang.theme.t":"","lang.theme.r":"","lang.theme.b":"","lang.theme.l":"","lang.theme.tl":"","lang.theme.tr":"","lang.theme.br":"","lang.theme.bl":"","lang.theme.white":"","lang.theme.deep":"","lang.theme.bgColor":"","lang.tip.createPage":"","lang.tip.saveData":"","lang.tip.modelName":"","lang.tip.scriptName":"","lang.tip.invalidModelName":"","lang.tip.invalidScriptName":"","lang.tip.content":"","lang.tip.selectComponent":"","lang.tip.deleteModel":"","lang.tip.modelNotFound":"","lang.tip.dataSourceEmpty":"","lang.tip.checkDataSource":"","lang.tip.dataSourceSaved":"","lang.tip.deleteDataSource":"","lang.tip.noneComponent":"/","lang.tip.inputExpressionCode":"","lang.tip.inputRequestUrl":"","lang.tip.completeConfig":"","lang.tip.inputI18n":"","lang.tip.inputStringOrI18n":"","lang.tip.i18nNotFound":"","lang.tip.inputDict":"code","lang.tip.inputList":"","lang.tip.inputRestUrl":"REST","lang.tip.inputAxiosUrl":"","lang.tip.multiTheme":"","lang.tip.scfConfig":"","lang.tip.chooseScf":"","lang.tip.scfName":"","lang.tip.scfNameInvalid":"","lang.tip.selectScriptType":"","lang.tip.compelteParams":"","lang.tip.noMoreThan15":"15","lang.tip.less15day":"15","lang.tip.noMoreThan30":"30","lang.tip.less30day":"30","lang.tip.positiveInt":"","lang.tip.less32bit":"32","lang.tip.noLongerThan":" ","lang.tip.inputNumber":" ","lang.tip.onlyInputNumberOrEnglishCharacters":" ","lang.action.$alert":"","lang.action.$confirm":"","lang.action.$prompt":"","lang.action.$message":"","lang.action.preview":"","lang.action.copy":"","lang.action.paste":"","lang.action.delete":"","lang.action.addModel":"","lang.action.createModel":"","lang.action.createScript":"","lang.action.execScript":"","lang.action.exec":"","lang.action.execOnEnter":"","lang.action.editModel":"","lang.action.modifyModel":"","lang.action.copyModel":"","lang.action.pasteModel":"","lang.action.deleteModel":"","lang.action.chooseModel":"","lang.action.complete":"","lang.action.export":"","lang.action.add":"","lang.action.addField":"","lang.action.updateDict":"","lang.action.addDataSource":"","lang.action.chooseDataSource":"","lang.action.createModel":"","lang.action.addHandler":"","lang.action.configFormItem":"","lang.action.configColumn":"","lang.action.configComponent":"","lang.action.componentConfiguration":"","lang.action.checkAll":"","lang.action.none":"","lang.action.validate":"","lang.action.writeScript":"","lang.action.columnConfig":"","lang.action.generatePage":"","lang.action.updatePage":"","lang.action.chooseScript":"","lang.action.execFail":""}};var he={i18n:c.i18n,transMsg:c.transMsg,locale:function(e,t){u.a.locale(e,Object.assign({},pe[c.i18n.formatLangCode(e)],t))}},fe={model:{prop:"value",event:"change"},props:{value:String,size:String},watch:{actives:{handler(e,t){this.$emit("change",Object.values(e).filter(Boolean).join(" "))},deep:!0,immediate:!0}},data(){return{actives:{},attrs:{m:this.$transMsg("lang.theme.m"),p:this.$transMsg("lang.theme.p")},others:{fs:this.$transMsg("lang.theme.fs"),c:this.$transMsg("lang.theme.c"),"bg-color":this.$transMsg("lang.theme.bgColor")},hands:{all:this.$transMsg("lang.text.all"),t:this.$transMsg("lang.prop.top"),r:this.$transMsg("lang.prop.right"),b:this.$transMsg("lang.prop.down"),l:this.$transMsg("lang.prop.left")},sizes:{xxs:this.$transMsg("lang.theme.xxs"),xs:this.$transMsg("lang.theme.xs"),sm:this.$transMsg("lang.theme.sm"),nom:this.$transMsg("lang.theme.nomal"),md:this.$transMsg("lang.theme.md"),lg:this.$transMsg("lang.theme.lg"),xl:this.$transMsg("lang.theme.xl")},edges:{all:this.$transMsg("lang.text.whole"),t:this.$transMsg("lang.theme.t"),r:this.$transMsg("lang.theme.r"),b:this.$transMsg("lang.theme.b"),l:this.$transMsg("lang.theme.l"),none:this.$transMsg("lang.action.none")},colors:{primary:this.$transMsg("lang.prop.theme.primary"),info:this.$transMsg("lang.prop.theme.info"),warning:this.$transMsg("lang.prop.theme.warning"),danger:this.$transMsg("lang.prop.theme.danger"),success:this.$transMsg("lang.prop.theme.success"),white:this.$transMsg("lang.theme.white"),deep:this.$transMsg("lang.theme.deep")},redges:{all:this.$transMsg("lang.text.whole"),tl:this.$transMsg("lang.theme.tl"),tr:this.$transMsg("lang.theme.tr"),br:this.$transMsg("lang.theme.br"),bl:this.$transMsg("lang.theme.bl")},border:{pos:{label:this.$transMsg("lang.text.pos"),value:{}},width:{label:this.$transMsg("lang.prop.width"),value:{"2x":"2","3x":"3","4x":"4","5x":"5"}},color:{label:this.$transMsg("lang.prop.color"),value:{}}}}},mounted(){this.value&&(this.$emit("change",this.value),this.value.split(" ").forEach(e=>{this.getActiveClass(e)})),this.border.pos.value={...this.hands},this.border.color.value={...this.colors}},methods:{getActiveClass(e){["fs","m","p","r","border"].includes(e)?this.$set(this.actives,e,e):3==e.split("-").length||"r"==e.split("-")[0]?this.$set(this.actives,e.split("-")[0]+"-"+e.split("-")[1],e):this.$set(this.actives,e.split("-")[0],e)},handleSizeClick(e,t,n){const i=["all","pos"].includes(t)?"":["border","r"].includes(e)?"-"+t:t,r=e+i,a=e+i+(["nom","all"].includes(n)?"":"-"+n);this.actives[r]==a?this.$set(this.actives,r,""):("r"==e&&("all"==t?Object.keys(this.redges).forEach(e=>{this.$set(this.actives,"r"+("all"==e?"":"-"+e),"")}):this.$set(this.actives,"r","")),this.$set(this.actives,r,a))},handleClean(e,t){if("all"==t){const t=Object.keys(this.hands).map(t=>e+("all"==t?"":t));Object.keys(this.actives).forEach(e=>{t.includes(e)&&this.$set(this.actives,e,"")})}else this.$set(this.actives,e+t,"")},handleBorderClean(){Object.keys(this.border).forEach(e=>{this.$set(this.actives,"border"+("pos"==e?"":"-"+e),"")})}}},me=(n("bb5a"),Object(z.a)(fe,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"geek-theme w-full"},[n("el-input",{attrs:{size:e.size,value:e.value,placeholder:e.$transMsg("lang.tip.multiTheme")},on:{input:function(t){return e.$emit("change",t)}}},[n("el-popover",{attrs:{slot:"append",placement:"left",title:e.$transMsg("lang.text.themePicker"),width:"640"},slot:"append"},[n("div",{staticClass:"theme-picker pl-sm pt-xxs pr-sm fs-xxs"},[n("geek-flex-container",{attrs:{wrap:"wrap",justify:"space-between"}},[e._l(Object.keys(e.attrs),(function(t){return[n("div",{key:t,staticStyle:{width:"49%"}},[n("p",{staticClass:"fs-md pb-sm mt-sm mb"},[e._v(e._s(e.attrs[t]))]),e._l(Object.keys(e.edges),(function(i){return n("geek-flex-container",{key:t+i,staticClass:"mb-sm edges-box",attrs:{height:"22px"}},[n("span",{staticClass:"edge-title"},[e._v(e._s(e.edges[i]))]),"none"!==i?[n("geek-flex-container",e._l(Object.keys(e.sizes),(function(r,a){return n("span",{key:t+i+r=="nom"?"":"-"+r,staticClass:"size-item pl-sm pr-sm",class:[{"border-n-l":0!=a},{active:Object.values(e.actives).includes(t+("all"==i?"":i)+("nom"==r?"":"-"+r))}],on:{click:function(n){return e.handleSizeClick(t,i,r)}}},[e._v(" "+e._s(e.sizes[r])+" ")])})),0)]:e._l(Object.keys(e.hands),(function(r,a){return n("span",{key:t+i+r,staticClass:"size-item pl-sm pr-sm",class:[{"border-n-l":0!=a}],on:{click:function(n){return e.handleClean(t,r)}}},[e._v(" "+e._s(e.hands[r])+" ")])}))],2)}))],2)]}))],2),n("p",{staticClass:"fs-md pb-sm mt-sm mb"},[e._v(e._s(e.$transMsg("lang.text.border")))]),e._l(Object.keys(e.border),(function(t){return n("geek-flex-container",{key:t,staticClass:"mb-sm edges-box"},[n("span",{staticClass:"edge-title"},[e._v(e._s(e.border[t].label))]),[e._l(Object.keys(e.border[t].value),(function(i,r){return n("span",{key:t+i,staticClass:"size-item pl-sm pr-sm",class:[{"border-n-l":0!=r},"color"==t?"bg-color-"+i:"",{"c-white":"color"==t&&!["white","light"].includes(i)},{active:Object.values(e.actives).includes("border"+(["all","pos"].includes(t)?"":"-"+t)+(["nom","all"].includes(i)?"":"-"+i))}],on:{click:function(n){return e.handleSizeClick("border",t,i)}}},[e._v(" "+e._s(e.border[t].value[i]+("width"==t?"px":""))+" ")])})),"pos"==t?n("span",{staticClass:"size-item ml-sm pl-sm pr-sm",on:{click:e.handleBorderClean}},[e._v(e._s(e.$transMsg("lang.action.none")))]):e._e()]],2)})),n("p",{staticClass:"fs-md pb-sm mt-sm mb"},[e._v(e._s(e.$transMsg("lang.text.radius")))]),e._l(Object.keys(e.redges),(function(t){return n("geek-flex-container",{key:t,staticClass:"mb-sm edges-box"},[n("span",{staticClass:"edge-title"},[e._v(e._s(e.redges[t]))]),e._l(Object.keys(e.sizes),(function(i,r){return n("span",{key:t+i,staticClass:"size-item pl-sm pr-sm",class:[{"border-n-l":0!=r},{active:Object.values(e.actives).includes("r"+("all"==t?"":"-"+t)+(["nom","all"].includes(i)?"":"-"+i))}],on:{click:function(n){return e.handleSizeClick("r",t,i)}}},[e._v(" "+e._s(e.sizes[i])+" ")])}))],2)})),n("p",{staticClass:"fs-md pb-sm mt-sm mb"},[e._v(e._s(e.$transMsg("lang.group.others")))]),e._l(Object.keys(e.others),(function(t){return n("geek-flex-container",{key:t,staticClass:"mb-sm edges-box"},[n("span",{staticClass:"edge-title"},[e._v(e._s(e.others[t]))]),"fs"==t?e._l(Object.keys(Object.assign({},e.sizes,{xxl:e.$transMsg("lang.theme.xxl")})),(function(i,r){return n("span",{key:t+i,staticClass:"size-item pl-sm pr-sm",class:[{"border-n-l":0!=r},{active:Object.values(e.actives).includes(t+("nom"==i?"":"-"+i))}],on:{click:function(n){return e.handleSizeClick("",t,i)}}},[e._v(" "+e._s(Object.assign({},e.sizes,{xxl:e.$transMsg("lang.theme.xxl")})[i])+" ")])})):[e._l(Object.keys(e.colors),(function(i,r){return n("span",{key:t+i,staticClass:"size-item pl-sm pr-sm",class:[{"border-n-l":0!=r},{active:Object.values(e.actives).includes(t+"-"+i)},"c"==t?"white"==i?"":"c-"+i:"","bg-color"==t?"bg-color-"+i:"",{"c-white":"bg-color"==t&&!["white","light"].includes(i)}],on:{click:function(n){return e.handleSizeClick("",t,i)}}},[e._v(" "+e._s(e.colors[i])+" ")])})),"bg-color"==t?n("span",{staticClass:"size-item ml-sm pl-sm pr-sm",on:{click:function(n){return e.handleClean("",t)}}},[e._v(e._s(e.$transMsg("lang.action.none")))]):e._e()]],2)}))],2),n("el-button",{attrs:{slot:"reference",icon:"el-icon-s-open"},slot:"reference"})],1)],1)],1)}),[],!1,null,"5f3a9b5a",null)).exports,ge=n("3994"),ve=n("3d21");const{isString:be,isNumber:ye,isBoolean:xe}=c.Types;var _e={components:{I18n:F},model:{prop:"dict",event:"change"},props:{dict:Object,default:()=>({label:"",value:""})},data:()=>({label:"",value:"",valueType:"String",valueTypeList:[{label:"lang.text.string",value:"String"},{label:"lang.text.number",value:"Number"},{label:"lang.text.bool",value:"Boolean"}]}),mounted(){this.label=this.dict.label,this.value=this.dict.value,be(this.value)&&(this.valueType="String"),ye(this.value)&&(this.valueType="Number"),xe(this.value)&&(this.valueType="Boolean")},methods:{handleCommand(e){this.valueType=e,"Boolean"===this.valueType&&(this.value=!1)},handleChange(e){this.label&&("String"===this.valueType&&this.value||"Number"===this.valueType&&ye(this.value)||"Boolean"===this.valueType&&xe(this.value))&&this.$emit("change",{label:this.label,value:this.value})}}},we=(n("009d"),Object(z.a)(_e,(function(){var e=this,t=this,n=t.$createElement,i=t._self._c||n;return i("div",{staticClass:"dict-input mb-sx w-full"},[i("div",{staticClass:"header flex-center pr-sm mb-sm"},[i("div",{staticClass:"title fs-sm w-full pl-sm"},[t._v(t._s(t.$transMsg("lang.text.dict")))]),i("el-dropdown",{attrs:{trigger:"click"},on:{command:t.handleCommand}},[i("div",{staticClass:"el-dropdown-link",staticStyle:{display:"flex","align-items":"center","font-size":"12px","white-space":"nowrap",cursor:"pointer"}},[t._v(" "+t._s(t.$transMsg(t.valueTypeList.find((function(t){return t.value==e.valueType})).label))),i("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},t._l(t.valueTypeList,(function(e){return i("el-dropdown-item",{key:e.value,attrs:{command:e.value}},[t._v(t._s(t.$transMsg(e.label)))])})),1)],1)],1),i("div",{staticClass:"dict-item flex-center pl pr-sm"},[i("div",{staticClass:"mr"},[t._v(t._s(t.$transMsg("lang.common.label")))]),i("i18n",{attrs:{placeholder:t.$transMsg("lang.common.key")},on:{change:t.handleChange},model:{value:t.label,callback:function(e){t.label=e},expression:"label"}})],1),i("div",{staticClass:"flex-center pl pr-sm"},[i("div",{staticClass:"mr"},[t._v(t._s(t.$transMsg("lang.common.value")))]),"String"==t.valueType?i("el-input",{staticClass:"input w-full",attrs:{size:"mini",placeholder:t.$transMsg("lang.common.value")},on:{input:t.handleChange},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}}):"Number"==t.valueType?i("el-input-number",{staticClass:"input w-full",attrs:{size:"mini",placeholder:t.$transMsg("lang.common.value")},on:{input:t.handleChange},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}}):"Boolean"==t.valueType?i("el-switch",{staticClass:"input w-full",attrs:{size:"mini",placeholder:t.$transMsg("lang.common.value")},on:{change:t.handleChange},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}}):t._e()],1)])}),[],!1,null,"2cb01472",null)).exports,Ce=n("3e18"),ke={components:{ParamPicker:Ce.a},model:{prop:"value",event:"change"},props:{value:Object,size:{type:String,default:"mini"}},data(){return{form:{url:null,method:"GET",params:{},data:{},dataType:null},rules:{url:[{required:!0,message:this.$transMsg("lang.tip.inputRequestUrl"),trigger:"change"}]}}},created(){c.Types.isObject(this.value)&&(this.form.url=this.value.url,this.form.method=this.value.method,this.form.params=this.value.params,this.form.data=this.value.data,this.form.dataType=this.value.dataType)},methods:{handleChange(){var e;null===(e=this.$refs.form)||void 0===e||e.validate(e=>{e&&this.$emit("change",this.form)})}}},Se=(n("f5c0"),Object(z.a)(ke,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"axios-input w-full"},[n("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,size:e.size}},[n("el-form-item",{attrs:{label:e.$transMsg("lang.axios.url"),prop:"url"}},[n("el-input",{staticClass:"w-full",on:{change:e.handleChange},model:{value:e.form.url,callback:function(t){e.$set(e.form,"url",t)},expression:"form.url"}})],1),n("el-form-item",{attrs:{label:e.$transMsg("lang.axios.method"),prop:"method"}},[n("el-select",{staticClass:"w-full",on:{change:e.handleChange},model:{value:e.form.method,callback:function(t){e.$set(e.form,"method",t)},expression:"form.method"}},[n("el-option",{attrs:{value:"GET"}}),n("el-option",{attrs:{value:"POST"}}),n("el-option",{attrs:{value:"PUT"}}),n("el-option",{attrs:{value:"DELETE"}})],1)],1),n("el-form-item",{attrs:{label:e.$transMsg("lang.axios.params"),prop:"params"}},[n("param-picker",{on:{change:e.handleChange},model:{value:e.form.params,callback:function(t){e.$set(e.form,"params",t)},expression:"form.params"}})],1),["POST","PUT"].includes(e.form.method)?n("el-form-item",{attrs:{label:e.$transMsg("lang.axios.data"),prop:"data"}},[n("param-picker",{on:{change:e.handleChange},model:{value:e.form.data,callback:function(t){e.$set(e.form,"data",t)},expression:"form.data"}})],1):e._e(),"POST"==e.form.method||"PUT"==e.form.method?n("el-form-item",{attrs:{label:e.$transMsg("lang.axios.dataType"),prop:"dataType"}},[n("el-select",{staticClass:"w-full",on:{change:e.handleChange},model:{value:e.form.dataType,callback:function(t){e.$set(e.form,"dataType",t)},expression:"form.dataType"}},[n("el-option",{attrs:{value:"JSON"}}),n("el-option",{attrs:{value:"FormData"}})],1)],1):e._e()],1)],1)}),[],!1,null,"8912bd0a",null)).exports,Me=n("395d"),Oe={components:{ArrayInput:Me.a,ObjectInput:V.a},model:{prop:"value",event:"change"},props:{value:Object,size:String},data(){return{form:{type:"dict",dict:null,list:[]},rules:{dict:[{required:!0,message:this.$transMsg("lang.tip.inputDict"),trigger:"change"}],list:[{required:!0,message:this.$transMsg("lang.tip.inputList"),trigger:"change"}]}}},created(){c.Types.isObject(this.value)&&(this.form.type=this.value.type,this.form.dict=this.value.dict,this.form.list=this.value.list)},methods:{handleChange(){this.$refs.form.validate(e=>{if(e){let e={type:this.form.type};"dict"===this.form.type?e.dict=this.form.dict:"custom"===this.form.type&&(e.list=this.form.list),this.$emit("change",e)}})}}},$e=(n("f60c"),Object(z.a)(Oe,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"option-list pl-sm pt-sm pr-sm w-full"},[n("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,size:"mini","label-width":"60px"}},[n("el-form-item",{attrs:{label:e.$transMsg("lang.prop.type"),prop:"type"}},[n("el-select",{staticClass:"w-full",on:{change:e.handleChange},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},[n("el-option",{attrs:{label:e.$transMsg("lang.prop.dict"),value:"dict"}}),n("el-option",{attrs:{label:e.$transMsg("lang.prop.custom"),value:"custom"}})],1)],1),"dict"==e.form.type?n("el-form-item",{attrs:{label:e.$transMsg("lang.prop.dict"),prop:"dict"}},[n("el-input",{staticClass:"w-full",on:{change:e.handleChange},model:{value:e.form.dict,callback:function(t){e.$set(e.form,"dict",t)},expression:"form.dict"}})],1):e._e(),"custom"==e.form.type?n("el-form-item",{attrs:{label:e.$transMsg("lang.text.list"),prop:"list"}},[n("array-input",{staticClass:"w-full",attrs:{itemClazz:"DictInput"},on:{change:e.handleChange},model:{value:e.form.list,callback:function(t){e.$set(e.form,"list",t)},expression:"form.list"}})],1):e._e()],1)],1)}),[],!1,null,"e413c9dc",null)).exports,Ee=n("ec41"),Te={model:{prop:"value",event:"change"},props:{value:String,size:String},watch:{value:{handler(){this.data=this.value},immediate:!0}},data:()=>({data:null})},De=Object(z.a)(Te,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("el-color-picker",{staticClass:"color-picker w-full",attrs:{size:e.size},on:{change:function(t){return e.$emit("change",t)}},model:{value:e.data,callback:function(t){e.data=t},expression:"data"}})}),[],!1,null,null,null).exports,Le={model:{prop:"value",event:"change"},props:{value:null,size:String},watch:{value:{handler(){this.data=this.value},immediate:!0}},data:()=>({data:null})},ze=Object(z.a)(Le,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("el-time-picker",{staticClass:"color-picker w-full",attrs:{"value-format":"timestamp",size:e.size},on:{change:function(t){return e.$emit("change",t)}},model:{value:e.data,callback:function(t){e.data=t},expression:"data"}})}),[],!1,null,null,null).exports,Ne={components:{CodeEditor:P.a},model:{prop:"value",event:"change"},props:{value:String,placeholder:String,size:String},data:()=>({visible:!1}),methods:{handleExpr(e){this.$emit("change",e)}}},Ae=(n("6307"),Object(z.a)(Ne,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"geek-function w-full"},[n("div",{staticClass:"func-val"},[e._v(e._s(e.value))]),n("div",{staticClass:"expression-section"},[n("div",{staticClass:"btn",on:{click:function(t){e.visible=!0}}},[n("i",{staticClass:"el-icon-edit"})]),n("el-dialog",{attrs:{title:e.$transMsg("lang.text.functionEditor"),visible:e.visible,"custom-class":"editor-dialog","append-to-body":""},on:{"update:visible":function(t){e.visible=t}}},[n("code-editor",{attrs:{value:e.value,placeholder:e.placeholder,"is-fn":""},on:{change:e.handleExpr,close:function(t){e.visible=!1}}})],1)],1)])}),[],!1,null,"fefec4c6",null)).exports,Ie={components:{CodeEditor:P.a},model:{prop:"value",event:"change"},props:{value:Array,size:String},data:()=>({opened:!1,visible:!1,curr:null,placeholder:"function validator(label) {\n  return {\n    validator: (rule,value, callback) => {\n      callback()\n    },\n    trigger: 'change'\n  }\n}",validFn:"",options:[],data:[]}),created(){this.init()},methods:{init(){var e;null===(e=this.value)||void 0===e||e.forEach(e=>{if(e in c.Dict.validator){var t;let n={label:(null===(t=c.Dict.validator[e])||void 0===t?void 0:t[Symbol.for("name")])||e,value:e};this.data.push(n),this.options.push(n)}else this.handleExpr(e)}),Object.keys(c.Dict.validator).forEach(e=>{var t;this.options.some(t=>t.value===e)||this.options.push({label:(null===(t=c.Dict.validator[e])||void 0===t?void 0:t[Symbol.for("name")])||e,value:e})})},addValidator(){this.validFn="",this.visible=!0},editValidator(e){this.curr=e,this.validFn=e.value,this.visible=!0},removeValidator(e){this.options.splice(this.options.indexOf(e),1),this.data.indexOf(e)>-1&&(this.data.splice(this.data.indexOf(e),1),this.handleChange())},handleClose(){this.curr=null,this.visible=!1},handleChange(){var e;let t=this.data.map(e=>e.value);null!==(e=t)&&void 0!==e&&e.length||(t=null),this.$emit("change",t)},handleExpr(e){let t=e.match(/function\s(\w+)\(label\)/)[1];if(this.curr)this.curr.label=t,this.curr.value=e,this.data.includes(e)&&this.handleChange();else{let n={label:t,value:e,editable:!0};this.data.push(n),this.options.push(n),this.handleChange()}}}},Pe=(n("1057"),Object(z.a)(Ie,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"geek-validator w-full"},[n("geek-collapse",{staticClass:"mt-xs",attrs:{title:"lang.action.validate"},model:{value:e.opened,callback:function(t){e.opened=t},expression:"opened"}},[n("template",{slot:"actions"},[e._t("actions"),n("div",{staticClass:"header-buttons"},[n("el-button",{attrs:{size:"mini"},on:{click:e.addValidator}},[n("i",{staticClass:"el-icon-plus"}),e._v(e._s(e.$transMsg("lang.prop.custom"))+" ")])],1)],2),n("el-checkbox-group",{staticClass:"rules",on:{change:e.handleChange},model:{value:e.data,callback:function(t){e.data=t},expression:"data"}},e._l(e.options,(function(t){return n("div",{key:t.value,staticClass:"rule"},[n("el-checkbox",{attrs:{label:t}},[e._v(" "+e._s(e.$transMsg(t.label))+" ")]),t.editable?n("div",{staticClass:"operations"},[n("i",{staticClass:"icon el-icon-edit",on:{click:function(n){return e.editValidator(t)}}}),n("i",{staticClass:"icon el-icon-delete",on:{click:function(n){return e.removeValidator(t)}}})]):e._e()],1)})),0)],2),n("div",{staticClass:"expression-section"},[n("el-dialog",{attrs:{title:e.$transMsg("lang.text.validatorEditor"),visible:e.visible,"custom-class":"editor-dialog","append-to-body":""},on:{"update:visible":function(t){e.visible=t}}},[n("code-editor",{key:e.validFn,attrs:{value:e.validFn,placeholder:e.placeholder,"is-fn":""},on:{change:e.handleExpr,close:e.handleClose}})],1)],1)],1)}),[],!1,null,"259e86ae",null)).exports,je={components:{ArrayInput:Me.a},model:{prop:"value",event:"change"},props:{value:Array,itemClazz:[String,Object],size:String},computed:{valueProxy:{get(){return this.value},set(e){this.$emit("change",e)}},columns(){var e,t;return(null===(e=this.$store.state.leivii.selected.data)||void 0===e||null===(t=e.columns)||void 0===t?void 0:t.slice())||[]},models(){return this.$store.state.leivii.pageConfig.models||[]},model(){var e;return this.modelName&&(null===(e=this.models.find(e=>e.name===this.modelName))||void 0===e?void 0:e.list)||[]}},watch:{columns:{handler(){this.handleChange()},immediate:!0,deep:!0}},data:()=>({key:Date.now(),visible:!1,checkAll:!1,isIndeterminate:!1,modelName:"",props:[],columnData:{name:"",label:"",minWidth:0,tooltip:!1,fixed:"",$body:[],type:"text",dict:"",format:""}}),mounted(){var e;this.modelName=null===(e=this.models[0])||void 0===e?void 0:e.name,this.handleChange()},methods:{handleChange(){this.columns.length?(this.props=[],this.columns.forEach(e=>{let t=this.model.find(t=>t.prop===e.name);t&&this.props.push(t)}),this.isIndeterminate=!0):(this.props=this.model,this.checkAll=!0)},configCols(){var e,t;let n=(null===(e=this.$store.state.leivii.selected.data)||void 0===e||null===(t=e.columns)||void 0===t?void 0:t.slice())||[],i={input:"text","input-number":"text","date-picker":"time",select:"dict",radio:"dict",checkbox:"dict",switch:"dict"};this.props.length?(this.props.forEach(e=>{let t=n.find(t=>t.name===e.prop),r=i[e.type]||"text",a={name:e.prop,label:e.name,type:r,format:e.format,dict:e.dict};t?n.splice(n.indexOf(t),1,{...t,...a}):n.push(Object.assign({},this.columnData,a))}),this.key=Date.now(),this.visible=!1,this.$emit("change",n)):this.$alert(this.$transMsg("lang.tip.completeConfig"),this.$transMsg("lang.common.tip"))},handleCheckAllChange(e){this.props=e?this.model:[],this.isIndeterminate=!1},handlePropChange(e){this.checkAll=this.props.length===this.model.length,this.isIndeterminate=this.props.length>0&&this.props.length<this.model.length}}},Fe=(n("280f"),Object(z.a)(je,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"table-columns w-full"},[n("array-input",{key:e.key,attrs:{label:e.$transMsg("lang.prop.column"),size:e.size,itemClazz:e.itemClazz},model:{value:e.valueProxy,callback:function(t){e.valueProxy=t},expression:"valueProxy"}},[n("el-button",{attrs:{slot:"actions",size:"mini"},on:{click:function(t){e.visible=!0}},slot:"actions"},[e._v(e._s(e.$transMsg("lang.action.configColumn")))])],1),n("el-dialog",{attrs:{title:e.$transMsg("lang.action.configColumn"),width:"80%","append-to-body":"",visible:e.visible},on:{"update:visible":function(t){e.visible=t}}},[n("div",{staticClass:"pl pr"},[n("p",{staticClass:"item-p"},[n("label",{staticClass:"el-form-item__label"},[e._v(e._s(e.$transMsg("lang.text.modelName"))+":")])]),n("el-select",{attrs:{clearable:""},on:{change:e.handleChange},model:{value:e.modelName,callback:function(t){e.modelName=t},expression:"modelName"}},e._l(e.models,(function(e){return n("el-option",{key:e.name,attrs:{label:e.name,value:e.name}})})),1),e.modelName?n("p",{staticClass:"item-p"},[n("label",{staticClass:"el-form-item__label"},[e._v(e._s(e.$transMsg("lang.text.fieldName"))+":")]),n("el-checkbox",{attrs:{indeterminate:e.isIndeterminate},on:{change:e.handleCheckAllChange},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}},[e._v(e._s(e.$transMsg("lang.action.checkAll")))])],1):e._e(),n("el-checkbox-group",{key:e.model.length,on:{change:e.handlePropChange},model:{value:e.props,callback:function(t){e.props=t},expression:"props"}},[n("geek-container",{attrs:{cols:4}},e._l(e.model,(function(t){return n("el-checkbox",{key:t.prop,attrs:{label:t}},[e._v(e._s(e.$transMsg(t.name)))])})),1)],1),n("div",{staticClass:"dialog-footer p align-right",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.visible=!1}}},[e._v(e._s(e.$transMsg("lang.action.cancel")))]),n("el-button",{attrs:{type:"primary"},on:{click:e.configCols}},[e._v(e._s(e.$transMsg("lang.action.confirm")))])],1)],1)])],1)}),[],!1,null,"63679860",null)).exports,Be={components:{ArrayInput:Me.a},model:{prop:"value",event:"change"},props:{value:Array,itemClazz:[String,Object],size:String},computed:{valueProxy:{get(){return this.value},set(e){this.$emit("change",e)}},columns(){var e,t;return(null===(e=this.$store.state.leivii.selected.data)||void 0===e||null===(t=e.$body)||void 0===t?void 0:t.slice())||[]},models(){return this.$store.state.leivii.pageConfig.models||[]},model(){var e;return this.modelName&&(null===(e=this.models.find(e=>e.name===this.modelName))||void 0===e?void 0:e.list)||[]}},watch:{columns:{handler(){this.handleChange()},immediate:!0,deep:!0}},data:()=>({key:Date.now(),visible:!1,checkAll:!1,isIndeterminate:!1,showAsText:!1,allDisabled:!1,modelName:"",props:[],columnData:{name:"",label:"",minWidth:0,tooltip:!1,fixed:"",$body:[],type:"text",dict:"",format:""}}),mounted(){var e;this.modelName=null===(e=this.models[0])||void 0===e?void 0:e.name,this.handleChange()},methods:{handleChange(){this.columns.length?(this.props=[],this.columns.forEach(e=>{let t=this.model.find(t=>t.prop===e.prop);t&&this.props.push(t)}),this.isIndeterminate=!0):(this.props=this.model,this.checkAll=!0)},configCols(){var e,t;let n=(null===(e=this.$store.state.leivii.selected.data)||void 0===e||null===(t=e.$body)||void 0===t?void 0:t.slice())||[];this.props.length?(this.props.forEach(e=>{var t;let i=n.find(t=>t.prop===e.prop),r=this.showAsText?"geek-form-text":"geek-"+e.type,a=this.allDisabled,o=`${r}-${Object(c.uuid2)(12)}`,s={$type:r,disabled:a,$visible:!0,label:e.name,prop:e.prop,$prop:e.dict,type:null!==(t=e.type)&&void 0!==t&&t.startsWith("date")?"date":e.type,format:e.format};i?n.splice(n.indexOf(i),1,{...i,...s}):n.push(Object.assign({},this.columnData,{$id:o,...s}))}),this.key=Date.now(),this.visible=!1,this.$emit("change",n)):this.$alert(this.$transMsg("lang.tip.completeConfig"),this.$transMsg("lang.common.tip"))},handleCheckAllChange(e){this.props=e?this.model:[],this.isIndeterminate=!1},handlePropChange(e){this.checkAll=this.props.length===this.model.length,this.isIndeterminate=this.props.length>0&&this.props.length<this.model.length}}},Re=(n("a4af"),Object(z.a)(Be,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"form-items w-full"},[n("array-input",{key:e.key,attrs:{label:e.$transMsg("lang.prop.column"),size:e.size,itemClazz:e.itemClazz},model:{value:e.valueProxy,callback:function(t){e.valueProxy=t},expression:"valueProxy"}},[n("el-button",{attrs:{slot:"actions",size:"mini"},on:{click:function(t){e.visible=!0}},slot:"actions"},[e._v(e._s(e.$transMsg("lang.action.configFormItem")))])],1),n("el-dialog",{attrs:{title:e.$transMsg("lang.action.configColumn"),width:"80%","append-to-body":"",visible:e.visible},on:{"update:visible":function(t){e.visible=t}}},[n("div",{staticClass:"pl pr"},[n("p",{staticClass:"item-p"},[n("label",{staticClass:"el-form-item__label"},[e._v(e._s(e.$transMsg("lang.text.modelName"))+":")])]),n("el-select",{attrs:{clearable:""},on:{change:e.handleChange},model:{value:e.modelName,callback:function(t){e.modelName=t},expression:"modelName"}},e._l(e.models,(function(e){return n("el-option",{key:e.name,attrs:{label:e.name,value:e.name}})})),1),e.modelName?n("p",{staticClass:"item-p"},[n("label",{staticClass:"el-form-item__label"},[e._v(e._s(e.$transMsg("lang.text.fieldName"))+":")]),n("el-checkbox",{attrs:{indeterminate:e.isIndeterminate},on:{change:e.handleCheckAllChange},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}},[e._v(e._s(e.$transMsg("lang.action.checkAll")))])],1):e._e(),n("el-checkbox-group",{key:e.model.length,on:{change:e.handlePropChange},model:{value:e.props,callback:function(t){e.props=t},expression:"props"}},[n("geek-container",{attrs:{cols:4}},e._l(e.model,(function(t){return n("el-checkbox",{key:t.prop,attrs:{label:t}},[e._v(e._s(e.$transMsg(t.name)))])})),1)],1),e.modelName?n("p",{staticClass:"item-p"},[n("label",{staticClass:"el-form-item__label"},[e._v(e._s(e.$transMsg("lang.text.moreConfig"))+":")]),n("el-checkbox",{model:{value:e.showAsText,callback:function(t){e.showAsText=t},expression:"showAsText"}},[e._v(e._s(e.$transMsg("lang.text.showAsText")))]),n("el-checkbox",{model:{value:e.allDisabled,callback:function(t){e.allDisabled=t},expression:"allDisabled"}},[e._v(e._s(e.$transMsg("lang.text.disableAll")))])],1):e._e(),n("div",{staticClass:"dialog-footer p align-right",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.visible=!1}}},[e._v(e._s(e.$transMsg("lang.action.cancel")))]),n("el-button",{attrs:{type:"primary"},on:{click:e.configCols}},[e._v(e._s(e.$transMsg("lang.action.confirm")))])],1)],1)])],1)}),[],!1,null,"0bf09293",null)).exports,We={components:{ParamPicker:Ce.a},model:{prop:"value",event:"change"},props:{value:Object,size:{type:String,default:"mini"}},data:()=>({opened:!1,form:{restapi:null,getapi:null,postapi:null,putapi:null,deleteapi:null,getFilters:{}}}),created(){c.Types.isObject(this.value)&&Object.assign(this.form,this.value)},methods:{handleChange(){let{restapi:e}=this.form;var t,n,i,r;e&&((t=this.form).getapi||(t.getapi=e+"/${rowKey}"),(n=this.form).postapi||(n.postapi=e),(i=this.form).putapi||(i.putapi=e+"/${rowKey}"),(r=this.form).deleteapi||(r.deleteapi=e+"/${rowKey}")),this.$emit("change",this.form)}}},He=(n("b07f"),Object(z.a)(We,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"rest-input w-full"},[n("geek-collapse",{staticClass:"mt-xs",attrs:{title:"REST CONFIG"},model:{value:e.opened,callback:function(t){e.opened=t},expression:"opened"}},[n("el-form",{ref:"form",attrs:{model:e.form,size:e.size}},[n("el-input",{staticClass:"w-full",attrs:{placeholder:e.$transMsg("lang.tip.inputRestUrl")},on:{change:e.handleChange},model:{value:e.form.restapi,callback:function(t){e.$set(e.form,"restapi",t)},expression:"form.restapi"}}),n("geek-collapse",{staticClass:"mt-xs",attrs:{$classes:"pl pr",title:e.$transMsg("lang.text.restInfo")},model:{value:e.opened,callback:function(t){e.opened=t},expression:"opened"}},[n("el-form-item",{attrs:{label:e.$transMsg("lang.text.method.c"),prop:"postapi"}},[n("el-input",{staticClass:"w-full",attrs:{placeholder:e.$transMsg("lang.axios.url")},model:{value:e.form.postapi,callback:function(t){e.$set(e.form,"postapi",t)},expression:"form.postapi"}})],1),n("el-form-item",{attrs:{label:e.$transMsg("lang.text.method.r"),prop:"deleteapi"}},[n("el-input",{staticClass:"w-full",attrs:{placeholder:e.$transMsg("lang.axios.url")},model:{value:e.form.deleteapi,callback:function(t){e.$set(e.form,"deleteapi",t)},expression:"form.deleteapi"}})],1),n("el-form-item",{attrs:{label:e.$transMsg("lang.text.method.u"),prop:"putapi"}},[n("el-input",{staticClass:"w-full",attrs:{placeholder:e.$transMsg("lang.axios.url")},model:{value:e.form.putapi,callback:function(t){e.$set(e.form,"putapi",t)},expression:"form.putapi"}})],1),n("el-form-item",{attrs:{label:e.$transMsg("lang.text.method.d"),prop:"getapi"}},[n("el-input",{staticClass:"w-full",attrs:{placeholder:e.$transMsg("lang.axios.url")},model:{value:e.form.getapi,callback:function(t){e.$set(e.form,"getapi",t)},expression:"form.getapi"}})],1),n("fieldset",{staticClass:"pl-md pr-md mb",staticStyle:{color:"#606266",border:"1px solid #efefef"}},[n("legend",{staticStyle:{color:"#999"}},[e._v(e._s(e.$transMsg("lang.text.queries")))]),n("param-picker",{model:{value:e.form.getFilters,callback:function(t){e.$set(e.form,"getFilters",t)},expression:"form.getFilters"}})],1)],1)],1)],1)],1)}),[],!1,null,"638fb65a",null)).exports,Ge=n("9224");const qe=(e,t)=>{var n;if(!qe.installed){if(!t)return console.error("Leivii Editor: plugin config error");qe.installed=!0,e.use(u.a,t),he.locale(t.locale),c.API.registProp("Theme",me),c.API.registProp("ComponentDragger",ge.a),c.API.registProp("ComponentTreeInput",ve.a),c.API.registProp("I18n",F),c.API.registProp("DictInput",we),c.API.registProp("AxiosInput",Se),c.API.registProp("OptionList",$e),c.API.registProp("DataSourcePicker",Ee.a),c.API.registProp("ParamPicker",Ce.a),c.API.registProp("ColorPicker",De),c.API.registProp("TimePicker",ze),c.API.registProp("FunctionInput",Ae),c.API.registProp("Validator",Pe),c.API.registProp("TableColumns",Fe),c.API.registProp("FormItems",Re),c.API.registProp("Rest",He),c.API.registDoc("$alert",{method:"lang.action.$alert",params:[{label:"lang.text.content",type:String,clazz:"I18n"},{label:"lang.prop.label",type:String,clazz:"I18n"},{label:"lang.common.options",type:Object}]}),c.API.registDoc("$confirm",{method:"lang.action.$confirm",params:[{label:"lang.text.content",type:String,clazz:"I18n"},{label:"lang.prop.label",type:String,clazz:"I18n"},{label:"lang.common.options",type:Object}]}),c.API.registDoc("$prompt",{method:"lang.action.$prompt",params:[{label:"lang.text.content",type:String,clazz:"I18n"},{label:"lang.prop.label",type:String,clazz:"I18n"},{label:"lang.common.options",type:Object}]}),c.API.registDoc("$message",{method:"lang.action.$message",params:[{label:"lang.common.options",type:Object,clazz:{type:{label:"lang.prop.type",type:String,options:[{label:"lang.common.success",value:"success"},{label:"lang.prop.theme.warning",value:"warning"},{label:"lang.prop.theme.info",value:"info"},{label:"lang.prop.theme.error",value:"error"}]},message:{label:"lang.tip.content",type:String,clazz:"I18n"}}}]}),e.component("LeiviiEditor",ee),null===(n=t.store)||void 0===n||n.registerModule("leivii",de)}};var Ue={version:Ge.version,install:qe,CONFIG:c.CONFIG,i18n:he.i18n,locale:he.locale};t.default=Ue},fb73:function(e,t,n){},fd6e:function(e,t,n){},fdce:function(e,t,n){"use strict";n("c107")},ffda:function(e,t,n){!function(e){"use strict";function t(e){for(var t;null!=(t=e.next());)if("`"==t&&!e.eat("`"))return"variable-2";return e.backUp(e.current().length-1),e.eatWhile(/\w/)?"variable-2":null}function n(e){return e.eat("@")&&(e.match("session."),e.match("local."),e.match("global.")),e.eat("'")?(e.match(/^.*'/),"variable-2"):e.eat('"')?(e.match(/^.*"/),"variable-2"):e.eat("`")?(e.match(/^.*`/),"variable-2"):e.match(/^[0-9a-zA-Z$\.\_]+/)?"variable-2":null}function i(e){return e.eat("N")?"atom":e.match(/^[a-zA-Z.#!?]/)?"variable-2":null}e.defineMode("sql",(function(t,n){var i=n.client||{},s=n.atoms||{false:!0,true:!0,null:!0},l=n.builtin||a(o),c=n.keywords||a(r),u=n.operatorChars||/^[*+\-%<>!=&|~^\/]/,d=n.support||{},p=n.hooks||{},h=n.dateSQL||{date:!0,time:!0,timestamp:!0},f=!1!==n.backslashStringEscapes,m=n.brackets||/^[\{}\(\)\[\]]/,g=n.punctuation||/^[;.,:]/;function v(e,t){var n=e.next();if(p[n]){var r=p[n](e,t);if(!1!==r)return r}if(d.hexNumber&&("0"==n&&e.match(/^[xX][0-9a-fA-F]+/)||("x"==n||"X"==n)&&e.match(/^'[0-9a-fA-F]+'/)))return"number";if(d.binaryNumber&&(("b"==n||"B"==n)&&e.match(/^'[01]+'/)||"0"==n&&e.match(/^b[01]+/)))return"number";if(n.charCodeAt(0)>47&&n.charCodeAt(0)<58)return e.match(/^[0-9]*(\.[0-9]+)?([eE][-+]?[0-9]+)?/),d.decimallessFloat&&e.match(/^\.(?!\.)/),"number";if("?"==n&&(e.eatSpace()||e.eol()||e.eat(";")))return"variable-3";if("'"==n||'"'==n&&d.doubleQuote)return t.tokenize=b(n),t.tokenize(e,t);if((d.nCharCast&&("n"==n||"N"==n)||d.charsetCast&&"_"==n&&e.match(/[a-z][a-z0-9]*/i))&&("'"==e.peek()||'"'==e.peek()))return"keyword";if(d.escapeConstant&&("e"==n||"E"==n)&&("'"==e.peek()||'"'==e.peek()&&d.doubleQuote))return t.tokenize=function(e,t){return(t.tokenize=b(e.next(),!0))(e,t)},"keyword";if(d.commentSlashSlash&&"/"==n&&e.eat("/"))return e.skipToEnd(),"comment";if(d.commentHash&&"#"==n||"-"==n&&e.eat("-")&&(!d.commentSpaceRequired||e.eat(" ")))return e.skipToEnd(),"comment";if("/"==n&&e.eat("*"))return t.tokenize=function e(t){return function(n,i){var r=n.match(/^.*?(\/\*|\*\/)/);return r?"/*"==r[1]?i.tokenize=e(t+1):i.tokenize=t>1?e(t-1):v:n.skipToEnd(),"comment"}}(1),t.tokenize(e,t);if("."!=n){if(u.test(n))return e.eatWhile(u),"operator";if(m.test(n))return"bracket";if(g.test(n))return e.eatWhile(g),"punctuation";if("{"==n&&(e.match(/^( )*(d|D|t|T|ts|TS)( )*'[^']*'( )*}/)||e.match(/^( )*(d|D|t|T|ts|TS)( )*"[^"]*"( )*}/)))return"number";e.eatWhile(/^[_\w\d]/);var a=e.current().toLowerCase();return h.hasOwnProperty(a)&&(e.match(/^( )+'[^']*'/)||e.match(/^( )+"[^"]*"/))?"number":s.hasOwnProperty(a)?"atom":l.hasOwnProperty(a)?"builtin":c.hasOwnProperty(a)?"keyword":i.hasOwnProperty(a)?"string-2":null}return d.zerolessFloat&&e.match(/^(?:\d+(?:e[+-]?\d+)?)/i)?"number":e.match(/^\.+/)?null:d.ODBCdotTable&&e.match(/^[\w\d_$#]+/)?"variable-2":void 0}function b(e,t){return function(n,i){for(var r,a=!1;null!=(r=n.next());){if(r==e&&!a){i.tokenize=v;break}a=(f||t)&&!a&&"\\"==r}return"string"}}function y(e,t,n){t.context={prev:t.context,indent:e.indentation(),col:e.column(),type:n}}return{startState:function(){return{tokenize:v,context:null}},token:function(e,t){if(e.sol()&&t.context&&null==t.context.align&&(t.context.align=!1),t.tokenize==v&&e.eatSpace())return null;var n=t.tokenize(e,t);if("comment"==n)return n;t.context&&null==t.context.align&&(t.context.align=!0);var i=e.current();return"("==i?y(e,t,")"):"["==i?y(e,t,"]"):t.context&&t.context.type==i&&function(e){e.indent=e.context.indent,e.context=e.context.prev}(t),n},indent:function(n,i){var r=n.context;if(!r)return e.Pass;var a=i.charAt(0)==r.type;return r.align?r.col+(a?0:1):r.indent+(a?0:t.indentUnit)},blockCommentStart:"/*",blockCommentEnd:"*/",lineComment:d.commentSlashSlash?"//":d.commentHash?"#":"--",closeBrackets:"()[]{}''\"\"``"}}));var r="alter and as asc between by count create delete desc distinct drop from group having in insert into is join like not on or order select set table union update values where limit ";function a(e){for(var t={},n=e.split(" "),i=0;i<n.length;++i)t[n[i]]=!0;return t}var o="bool boolean bit blob enum long longblob longtext medium mediumblob mediumint mediumtext time timestamp tinyblob tinyint tinytext text bigint int int1 int2 int3 int4 int8 integer float float4 float8 double char varbinary varchar varcharacter precision real date datetime year unsigned signed decimal numeric";e.defineMIME("text/x-sql",{name:"sql",keywords:a(r+"begin"),builtin:a(o),atoms:a("false true null unknown"),dateSQL:a("date time timestamp"),support:a("ODBCdotTable doubleQuote binaryNumber hexNumber")}),e.defineMIME("text/x-mssql",{name:"sql",client:a("$partition binary_checksum checksum connectionproperty context_info current_request_id error_line error_message error_number error_procedure error_severity error_state formatmessage get_filestream_transaction_context getansinull host_id host_name isnull isnumeric min_active_rowversion newid newsequentialid rowcount_big xact_state object_id"),keywords:a(r+"begin trigger proc view index for add constraint key primary foreign collate clustered nonclustered declare exec go if use index holdlock nolock nowait paglock readcommitted readcommittedlock readpast readuncommitted repeatableread rowlock serializable snapshot tablock tablockx updlock with"),builtin:a("bigint numeric bit smallint decimal smallmoney int tinyint money float real char varchar text nchar nvarchar ntext binary varbinary image cursor timestamp hierarchyid uniqueidentifier sql_variant xml table "),atoms:a("is not null like and or in left right between inner outer join all any some cross unpivot pivot exists"),operatorChars:/^[*+\-%<>!=^\&|\/]/,brackets:/^[\{}\(\)]/,punctuation:/^[;.,:/]/,backslashStringEscapes:!1,dateSQL:a("date datetimeoffset datetime2 smalldatetime datetime time"),hooks:{"@":n}}),e.defineMIME("text/x-mysql",{name:"sql",client:a("charset clear connect edit ego exit go help nopager notee nowarning pager print prompt quit rehash source status system tee"),keywords:a(r+"accessible action add after algorithm all analyze asensitive at authors auto_increment autocommit avg avg_row_length before binary binlog both btree cache call cascade cascaded case catalog_name chain change changed character check checkpoint checksum class_origin client_statistics close coalesce code collate collation collations column columns comment commit committed completion concurrent condition connection consistent constraint contains continue contributors convert cross current current_date current_time current_timestamp current_user cursor data database databases day_hour day_microsecond day_minute day_second deallocate dec declare default delay_key_write delayed delimiter des_key_file describe deterministic dev_pop dev_samp deviance diagnostics directory disable discard distinctrow div dual dumpfile each elseif enable enclosed end ends engine engines enum errors escape escaped even event events every execute exists exit explain extended fast fetch field fields first flush for force foreign found_rows full fulltext function general get global grant grants group group_concat handler hash help high_priority hosts hour_microsecond hour_minute hour_second if ignore ignore_server_ids import index index_statistics infile inner innodb inout insensitive insert_method install interval invoker isolation iterate key keys kill language last leading leave left level limit linear lines list load local localtime localtimestamp lock logs low_priority master master_heartbeat_period master_ssl_verify_server_cert masters match max max_rows maxvalue message_text middleint migrate min min_rows minute_microsecond minute_second mod mode modifies modify mutex mysql_errno natural next no no_write_to_binlog offline offset one online open optimize option optionally out outer outfile pack_keys parser partition partitions password phase plugin plugins prepare preserve prev primary privileges procedure processlist profile profiles purge query quick range read read_write reads real rebuild recover references regexp relaylog release remove rename reorganize repair repeatable replace require resignal restrict resume return returns revoke right rlike rollback rollup row row_format rtree savepoint schedule schema schema_name schemas second_microsecond security sensitive separator serializable server session share show signal slave slow smallint snapshot soname spatial specific sql sql_big_result sql_buffer_result sql_cache sql_calc_found_rows sql_no_cache sql_small_result sqlexception sqlstate sqlwarning ssl start starting starts status std stddev stddev_pop stddev_samp storage straight_join subclass_origin sum suspend table_name table_statistics tables tablespace temporary terminated to trailing transaction trigger triggers truncate uncommitted undo uninstall unique unlock upgrade usage use use_frm user user_resources user_statistics using utc_date utc_time utc_timestamp value variables varying view views warnings when while with work write xa xor year_month zerofill begin do then else loop repeat"),builtin:a("bool boolean bit blob decimal double float long longblob longtext medium mediumblob mediumint mediumtext time timestamp tinyblob tinyint tinytext text bigint int int1 int2 int3 int4 int8 integer float float4 float8 double char varbinary varchar varcharacter precision date datetime year unsigned signed numeric"),atoms:a("false true null unknown"),operatorChars:/^[*+\-%<>!=&|^]/,dateSQL:a("date time timestamp"),support:a("ODBCdotTable decimallessFloat zerolessFloat binaryNumber hexNumber doubleQuote nCharCast charsetCast commentHash commentSpaceRequired"),hooks:{"@":n,"`":t,"\\":i}}),e.defineMIME("text/x-mariadb",{name:"sql",client:a("charset clear connect edit ego exit go help nopager notee nowarning pager print prompt quit rehash source status system tee"),keywords:a(r+"accessible action add after algorithm all always analyze asensitive at authors auto_increment autocommit avg avg_row_length before binary binlog both btree cache call cascade cascaded case catalog_name chain change changed character check checkpoint checksum class_origin client_statistics close coalesce code collate collation collations column columns comment commit committed completion concurrent condition connection consistent constraint contains continue contributors convert cross current current_date current_time current_timestamp current_user cursor data database databases day_hour day_microsecond day_minute day_second deallocate dec declare default delay_key_write delayed delimiter des_key_file describe deterministic dev_pop dev_samp deviance diagnostics directory disable discard distinctrow div dual dumpfile each elseif enable enclosed end ends engine engines enum errors escape escaped even event events every execute exists exit explain extended fast fetch field fields first flush for force foreign found_rows full fulltext function general generated get global grant grants group groupby_concat handler hard hash help high_priority hosts hour_microsecond hour_minute hour_second if ignore ignore_server_ids import index index_statistics infile inner innodb inout insensitive insert_method install interval invoker isolation iterate key keys kill language last leading leave left level limit linear lines list load local localtime localtimestamp lock logs low_priority master master_heartbeat_period master_ssl_verify_server_cert masters match max max_rows maxvalue message_text middleint migrate min min_rows minute_microsecond minute_second mod mode modifies modify mutex mysql_errno natural next no no_write_to_binlog offline offset one online open optimize option optionally out outer outfile pack_keys parser partition partitions password persistent phase plugin plugins prepare preserve prev primary privileges procedure processlist profile profiles purge query quick range read read_write reads real rebuild recover references regexp relaylog release remove rename reorganize repair repeatable replace require resignal restrict resume return returns revoke right rlike rollback rollup row row_format rtree savepoint schedule schema schema_name schemas second_microsecond security sensitive separator serializable server session share show shutdown signal slave slow smallint snapshot soft soname spatial specific sql sql_big_result sql_buffer_result sql_cache sql_calc_found_rows sql_no_cache sql_small_result sqlexception sqlstate sqlwarning ssl start starting starts status std stddev stddev_pop stddev_samp storage straight_join subclass_origin sum suspend table_name table_statistics tables tablespace temporary terminated to trailing transaction trigger triggers truncate uncommitted undo uninstall unique unlock upgrade usage use use_frm user user_resources user_statistics using utc_date utc_time utc_timestamp value variables varying view views virtual warnings when while with work write xa xor year_month zerofill begin do then else loop repeat"),builtin:a("bool boolean bit blob decimal double float long longblob longtext medium mediumblob mediumint mediumtext time timestamp tinyblob tinyint tinytext text bigint int int1 int2 int3 int4 int8 integer float float4 float8 double char varbinary varchar varcharacter precision date datetime year unsigned signed numeric"),atoms:a("false true null unknown"),operatorChars:/^[*+\-%<>!=&|^]/,dateSQL:a("date time timestamp"),support:a("ODBCdotTable decimallessFloat zerolessFloat binaryNumber hexNumber doubleQuote nCharCast charsetCast commentHash commentSpaceRequired"),hooks:{"@":n,"`":t,"\\":i}}),e.defineMIME("text/x-sqlite",{name:"sql",client:a("auth backup bail binary changes check clone databases dbinfo dump echo eqp exit explain fullschema headers help import imposter indexes iotrace limit lint load log mode nullvalue once open output print prompt quit read restore save scanstats schema separator session shell show stats system tables testcase timeout timer trace vfsinfo vfslist vfsname width"),keywords:a(r+"abort action add after all analyze attach autoincrement before begin cascade case cast check collate column commit conflict constraint cross current_date current_time current_timestamp database default deferrable deferred detach each else end escape except exclusive exists explain fail for foreign full glob if ignore immediate index indexed initially inner instead intersect isnull key left limit match natural no notnull null of offset outer plan pragma primary query raise recursive references regexp reindex release rename replace restrict right rollback row savepoint temp temporary then to transaction trigger unique using vacuum view virtual when with without"),builtin:a("bool boolean bit blob decimal double float long longblob longtext medium mediumblob mediumint mediumtext time timestamp tinyblob tinyint tinytext text clob bigint int int2 int8 integer float double char varchar date datetime year unsigned signed numeric real"),atoms:a("null current_date current_time current_timestamp"),operatorChars:/^[*+\-%<>!=&|/~]/,dateSQL:a("date time timestamp datetime"),support:a("decimallessFloat zerolessFloat"),identifierQuote:'"',hooks:{"@":n,":":n,"?":n,$:n,'"':function(e){for(var t;null!=(t=e.next());)if('"'==t&&!e.eat('"'))return"variable-2";return e.backUp(e.current().length-1),e.eatWhile(/\w/)?"variable-2":null},"`":t}}),e.defineMIME("text/x-cassandra",{name:"sql",client:{},keywords:a("add all allow alter and any apply as asc authorize batch begin by clustering columnfamily compact consistency count create custom delete desc distinct drop each_quorum exists filtering from grant if in index insert into key keyspace keyspaces level limit local_one local_quorum modify nan norecursive nosuperuser not of on one order password permission permissions primary quorum rename revoke schema select set storage superuser table three to token truncate ttl two type unlogged update use user users using values where with writetime"),builtin:a("ascii bigint blob boolean counter decimal double float frozen inet int list map static text timestamp timeuuid tuple uuid varchar varint"),atoms:a("false true infinity NaN"),operatorChars:/^[<>=]/,dateSQL:{},support:a("commentSlashSlash decimallessFloat"),hooks:{}}),e.defineMIME("text/x-plsql",{name:"sql",client:a("appinfo arraysize autocommit autoprint autorecovery autotrace blockterminator break btitle cmdsep colsep compatibility compute concat copycommit copytypecheck define describe echo editfile embedded escape exec execute feedback flagger flush heading headsep instance linesize lno loboffset logsource long longchunksize markup native newpage numformat numwidth pagesize pause pno recsep recsepchar release repfooter repheader serveroutput shiftinout show showmode size spool sqlblanklines sqlcase sqlcode sqlcontinue sqlnumber sqlpluscompatibility sqlprefix sqlprompt sqlterminator suffix tab term termout time timing trimout trimspool ttitle underline verify version wrap"),keywords:a("abort accept access add all alter and any array arraylen as asc assert assign at attributes audit authorization avg base_table begin between binary_integer body boolean by case cast char char_base check close cluster clusters colauth column comment commit compress connect connected constant constraint crash create current currval cursor data_base database date dba deallocate debugoff debugon decimal declare default definition delay delete desc digits dispose distinct do drop else elseif elsif enable end entry escape exception exception_init exchange exclusive exists exit external fast fetch file for force form from function generic goto grant group having identified if immediate in increment index indexes indicator initial initrans insert interface intersect into is key level library like limited local lock log logging long loop master maxextents maxtrans member minextents minus mislabel mode modify multiset new next no noaudit nocompress nologging noparallel not nowait number_base object of off offline on online only open option or order out package parallel partition pctfree pctincrease pctused pls_integer positive positiven pragma primary prior private privileges procedure public raise range raw read rebuild record ref references refresh release rename replace resource restrict return returning returns reverse revoke rollback row rowid rowlabel rownum rows run savepoint schema segment select separate session set share snapshot some space split sql start statement storage subtype successful synonym tabauth table tables tablespace task terminate then to trigger truncate type union unique unlimited unrecoverable unusable update use using validate value values variable view views when whenever where while with work"),builtin:a("abs acos add_months ascii asin atan atan2 average bfile bfilename bigserial bit blob ceil character chartorowid chr clob concat convert cos cosh count dec decode deref dual dump dup_val_on_index empty error exp false float floor found glb greatest hextoraw initcap instr instrb int integer isopen last_day least length lengthb ln lower lpad ltrim lub make_ref max min mlslabel mod months_between natural naturaln nchar nclob new_time next_day nextval nls_charset_decl_len nls_charset_id nls_charset_name nls_initcap nls_lower nls_sort nls_upper nlssort no_data_found notfound null number numeric nvarchar2 nvl others power rawtohex real reftohex round rowcount rowidtochar rowtype rpad rtrim serial sign signtype sin sinh smallint soundex sqlcode sqlerrm sqrt stddev string substr substrb sum sysdate tan tanh to_char text to_date to_label to_multi_byte to_number to_single_byte translate true trunc uid unlogged upper user userenv varchar varchar2 variance varying vsize xml"),operatorChars:/^[*\/+\-%<>!=~]/,dateSQL:a("date time timestamp"),support:a("doubleQuote nCharCast zerolessFloat binaryNumber hexNumber")}),e.defineMIME("text/x-hive",{name:"sql",keywords:a("select alter $elem$ $key$ $value$ add after all analyze and archive as asc before between binary both bucket buckets by cascade case cast change cluster clustered clusterstatus collection column columns comment compute concatenate continue create cross cursor data database databases dbproperties deferred delete delimited desc describe directory disable distinct distribute drop else enable end escaped exclusive exists explain export extended external fetch fields fileformat first format formatted from full function functions grant group having hold_ddltime idxproperties if import in index indexes inpath inputdriver inputformat insert intersect into is items join keys lateral left like limit lines load local location lock locks mapjoin materialized minus msck no_drop nocompress not of offline on option or order out outer outputdriver outputformat overwrite partition partitioned partitions percent plus preserve procedure purge range rcfile read readonly reads rebuild recordreader recordwriter recover reduce regexp rename repair replace restrict revoke right rlike row schema schemas semi sequencefile serde serdeproperties set shared show show_database sort sorted ssl statistics stored streamtable table tables tablesample tblproperties temporary terminated textfile then tmp to touch transform trigger unarchive undo union uniquejoin unlock update use using utc utc_tmestamp view when where while with admin authorization char compact compactions conf cube current current_date current_timestamp day decimal defined dependency directories elem_type exchange file following for grouping hour ignore inner interval jar less logical macro minute month more none noscan over owner partialscan preceding pretty principals protection reload rewrite role roles rollup rows second server sets skewed transactions truncate unbounded unset uri user values window year"),builtin:a("bool boolean long timestamp tinyint smallint bigint int float double date datetime unsigned string array struct map uniontype key_type utctimestamp value_type varchar"),atoms:a("false true null unknown"),operatorChars:/^[*+\-%<>!=]/,dateSQL:a("date timestamp"),support:a("ODBCdotTable doubleQuote binaryNumber hexNumber")}),e.defineMIME("text/x-pgsql",{name:"sql",client:a("source"),keywords:a(r+"a abort abs absent absolute access according action ada add admin after aggregate alias all allocate also alter always analyse analyze and any are array array_agg array_max_cardinality as asc asensitive assert assertion assignment asymmetric at atomic attach attribute attributes authorization avg backward base64 before begin begin_frame begin_partition bernoulli between bigint binary bit bit_length blob blocked bom boolean both breadth by c cache call called cardinality cascade cascaded case cast catalog catalog_name ceil ceiling chain char char_length character character_length character_set_catalog character_set_name character_set_schema characteristics characters check checkpoint class class_origin clob close cluster coalesce cobol collate collation collation_catalog collation_name collation_schema collect column column_name columns command_function command_function_code comment comments commit committed concurrently condition condition_number configuration conflict connect connection connection_name constant constraint constraint_catalog constraint_name constraint_schema constraints constructor contains content continue control conversion convert copy corr corresponding cost count covar_pop covar_samp create cross csv cube cume_dist current current_catalog current_date current_default_transform_group current_path current_role current_row current_schema current_time current_timestamp current_transform_group_for_type current_user cursor cursor_name cycle data database datalink datatype date datetime_interval_code datetime_interval_precision day db deallocate debug dec decimal declare default defaults deferrable deferred defined definer degree delete delimiter delimiters dense_rank depends depth deref derived desc describe descriptor detach detail deterministic diagnostics dictionary disable discard disconnect dispatch distinct dlnewcopy dlpreviouscopy dlurlcomplete dlurlcompleteonly dlurlcompletewrite dlurlpath dlurlpathonly dlurlpathwrite dlurlscheme dlurlserver dlvalue do document domain double drop dump dynamic dynamic_function dynamic_function_code each element else elseif elsif empty enable encoding encrypted end end_frame end_partition endexec enforced enum equals errcode error escape event every except exception exclude excluding exclusive exec execute exists exit exp explain expression extension external extract false family fetch file filter final first first_value flag float floor following for force foreach foreign fortran forward found frame_row free freeze from fs full function functions fusion g general generated get global go goto grant granted greatest group grouping groups handler having header hex hierarchy hint hold hour id identity if ignore ilike immediate immediately immutable implementation implicit import in include including increment indent index indexes indicator info inherit inherits initially inline inner inout input insensitive insert instance instantiable instead int integer integrity intersect intersection interval into invoker is isnull isolation join k key key_member key_type label lag language large last last_value lateral lead leading leakproof least left length level library like like_regex limit link listen ln load local localtime localtimestamp location locator lock locked log logged loop lower m map mapping match matched materialized max max_cardinality maxvalue member merge message message_length message_octet_length message_text method min minute minvalue mod mode modifies module month more move multiset mumps name names namespace national natural nchar nclob nesting new next nfc nfd nfkc nfkd nil no none normalize normalized not nothing notice notify notnull nowait nth_value ntile null nullable nullif nulls number numeric object occurrences_regex octet_length octets of off offset oids old on only open operator option options or order ordering ordinality others out outer output over overlaps overlay overriding owned owner p pad parallel parameter parameter_mode parameter_name parameter_ordinal_position parameter_specific_catalog parameter_specific_name parameter_specific_schema parser partial partition pascal passing passthrough password path percent percent_rank percentile_cont percentile_disc perform period permission pg_context pg_datatype_name pg_exception_context pg_exception_detail pg_exception_hint placing plans pli policy portion position position_regex power precedes preceding precision prepare prepared preserve primary print_strict_params prior privileges procedural procedure procedures program public publication query quote raise range rank read reads real reassign recheck recovery recursive ref references referencing refresh regr_avgx regr_avgy regr_count regr_intercept regr_r2 regr_slope regr_sxx regr_sxy regr_syy reindex relative release rename repeatable replace replica requiring reset respect restart restore restrict result result_oid return returned_cardinality returned_length returned_octet_length returned_sqlstate returning returns reverse revoke right role rollback rollup routine routine_catalog routine_name routine_schema routines row row_count row_number rows rowtype rule savepoint scale schema schema_name schemas scope scope_catalog scope_name scope_schema scroll search second section security select selective self sensitive sequence sequences serializable server server_name session session_user set setof sets share show similar simple size skip slice smallint snapshot some source space specific specific_name specifictype sql sqlcode sqlerror sqlexception sqlstate sqlwarning sqrt stable stacked standalone start state statement static statistics stddev_pop stddev_samp stdin stdout storage strict strip structure style subclass_origin submultiset subscription substring substring_regex succeeds sum symmetric sysid system system_time system_user t table table_name tables tablesample tablespace temp template temporary text then ties time timestamp timezone_hour timezone_minute to token top_level_count trailing transaction transaction_active transactions_committed transactions_rolled_back transform transforms translate translate_regex translation treat trigger trigger_catalog trigger_name trigger_schema trim trim_array true truncate trusted type types uescape unbounded uncommitted under unencrypted union unique unknown unlink unlisten unlogged unnamed unnest until untyped update upper uri usage use_column use_variable user user_defined_type_catalog user_defined_type_code user_defined_type_name user_defined_type_schema using vacuum valid validate validator value value_of values var_pop var_samp varbinary varchar variable_conflict variadic varying verbose version versioning view views volatile warning when whenever where while whitespace width_bucket window with within without work wrapper write xml xmlagg xmlattributes xmlbinary xmlcast xmlcomment xmlconcat xmldeclaration xmldocument xmlelement xmlexists xmlforest xmliterate xmlnamespaces xmlparse xmlpi xmlquery xmlroot xmlschema xmlserialize xmltable xmltext xmlvalidate year yes zone"),builtin:a("bigint int8 bigserial serial8 bit varying varbit boolean bool box bytea character char varchar cidr circle date double precision float8 inet integer int int4 interval json jsonb line lseg macaddr macaddr8 money numeric decimal path pg_lsn point polygon real float4 smallint int2 smallserial serial2 serial serial4 text time without zone with timetz timestamp timestamptz tsquery tsvector txid_snapshot uuid xml"),atoms:a("false true null unknown"),operatorChars:/^[*\/+\-%<>!=&|^\/#@?~]/,backslashStringEscapes:!1,dateSQL:a("date time timestamp"),support:a("ODBCdotTable decimallessFloat zerolessFloat binaryNumber hexNumber nCharCast charsetCast escapeConstant")}),e.defineMIME("text/x-gql",{name:"sql",keywords:a("ancestor and asc by contains desc descendant distinct from group has in is limit offset on order select superset where"),atoms:a("false true"),builtin:a("blob datetime first key __key__ string integer double boolean null"),operatorChars:/^[*+\-%<>!=]/}),e.defineMIME("text/x-gpsql",{name:"sql",client:a("source"),keywords:a("abort absolute access action active add admin after aggregate all also alter always analyse analyze and any array as asc assertion assignment asymmetric at authorization backward before begin between bigint binary bit boolean both by cache called cascade cascaded case cast chain char character characteristics check checkpoint class close cluster coalesce codegen collate column comment commit committed concurrency concurrently configuration connection constraint constraints contains content continue conversion copy cost cpu_rate_limit create createdb createexttable createrole createuser cross csv cube current current_catalog current_date current_role current_schema current_time current_timestamp current_user cursor cycle data database day deallocate dec decimal declare decode default defaults deferrable deferred definer delete delimiter delimiters deny desc dictionary disable discard distinct distributed do document domain double drop dxl each else enable encoding encrypted end enum errors escape every except exchange exclude excluding exclusive execute exists explain extension external extract false family fetch fields filespace fill filter first float following for force foreign format forward freeze from full function global grant granted greatest group group_id grouping handler hash having header hold host hour identity if ignore ilike immediate immutable implicit in including inclusive increment index indexes inherit inherits initially inline inner inout input insensitive insert instead int integer intersect interval into invoker is isnull isolation join key language large last leading least left level like limit list listen load local localtime localtimestamp location lock log login mapping master match maxvalue median merge minute minvalue missing mode modifies modify month move name names national natural nchar new newline next no nocreatedb nocreateexttable nocreaterole nocreateuser noinherit nologin none noovercommit nosuperuser not nothing notify notnull nowait null nullif nulls numeric object of off offset oids old on only operator option options or order ordered others out outer over overcommit overlaps overlay owned owner parser partial partition partitions passing password percent percentile_cont percentile_disc placing plans position preceding precision prepare prepared preserve primary prior privileges procedural procedure protocol queue quote randomly range read readable reads real reassign recheck recursive ref references reindex reject relative release rename repeatable replace replica reset resource restart restrict returning returns revoke right role rollback rollup rootpartition row rows rule savepoint scatter schema scroll search second security segment select sequence serializable session session_user set setof sets share show similar simple smallint some split sql stable standalone start statement statistics stdin stdout storage strict strip subpartition subpartitions substring superuser symmetric sysid system table tablespace temp template temporary text then threshold ties time timestamp to trailing transaction treat trigger trim true truncate trusted type unbounded uncommitted unencrypted union unique unknown unlisten until update user using vacuum valid validation validator value values varchar variadic varying verbose version view volatile web when where whitespace window with within without work writable write xml xmlattributes xmlconcat xmlelement xmlexists xmlforest xmlparse xmlpi xmlroot xmlserialize year yes zone"),builtin:a("bigint int8 bigserial serial8 bit varying varbit boolean bool box bytea character char varchar cidr circle date double precision float float8 inet integer int int4 interval json jsonb line lseg macaddr macaddr8 money numeric decimal path pg_lsn point polygon real float4 smallint int2 smallserial serial2 serial serial4 text time without zone with timetz timestamp timestamptz tsquery tsvector txid_snapshot uuid xml"),atoms:a("false true null unknown"),operatorChars:/^[*+\-%<>!=&|^\/#@?~]/,dateSQL:a("date time timestamp"),support:a("ODBCdotTable decimallessFloat zerolessFloat binaryNumber hexNumber nCharCast charsetCast")}),e.defineMIME("text/x-sparksql",{name:"sql",keywords:a("add after all alter analyze and anti archive array as asc at between bucket buckets by cache cascade case cast change clear cluster clustered codegen collection column columns comment commit compact compactions compute concatenate cost create cross cube current current_date current_timestamp database databases data dbproperties defined delete delimited deny desc describe dfs directories distinct distribute drop else end escaped except exchange exists explain export extended external false fields fileformat first following for format formatted from full function functions global grant group grouping having if ignore import in index indexes inner inpath inputformat insert intersect interval into is items join keys last lateral lazy left like limit lines list load local location lock locks logical macro map minus msck natural no not null nulls of on optimize option options or order out outer outputformat over overwrite partition partitioned partitions percent preceding principals purge range recordreader recordwriter recover reduce refresh regexp rename repair replace reset restrict revoke right rlike role roles rollback rollup row rows schema schemas select semi separated serde serdeproperties set sets show skewed sort sorted start statistics stored stratify struct table tables tablesample tblproperties temp temporary terminated then to touch transaction transactions transform true truncate unarchive unbounded uncache union unlock unset use using values view when where window with"),builtin:a("tinyint smallint int bigint boolean float double string binary timestamp decimal array map struct uniontype delimited serde sequencefile textfile rcfile inputformat outputformat"),atoms:a("false true null"),operatorChars:/^[*\/+\-%<>!=~&|^]/,dateSQL:a("date time timestamp"),support:a("ODBCdotTable doubleQuote zerolessFloat")}),e.defineMIME("text/x-esper",{name:"sql",client:a("source"),keywords:a("alter and as asc between by count create delete desc distinct drop from group having in insert into is join like not on or order select set table union update values where limit after all and as at asc avedev avg between by case cast coalesce count create current_timestamp day days delete define desc distinct else end escape events every exists false first from full group having hour hours in inner insert instanceof into irstream is istream join last lastweekday left limit like max match_recognize matches median measures metadatasql min minute minutes msec millisecond milliseconds not null offset on or order outer output partition pattern prev prior regexp retain-union retain-intersection right rstream sec second seconds select set some snapshot sql stddev sum then true unidirectional until update variable weekday when where window"),builtin:{},atoms:a("false true null"),operatorChars:/^[*+\-%<>!=&|^\/#@?~]/,dateSQL:a("time"),support:a("decimallessFloat zerolessFloat binaryNumber hexNumber")})}(n("56b3"))}})},module.exports=t(__webpack_require__(948),__webpack_require__(255),__webpack_require__(6),__webpack_require__(36),__webpack_require__(408))},948:function(e,t,n){var i;"undefined"!=typeof self&&self,i=function(e){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s="fb15")}({"01f9":function(e,t,n){"use strict";var i=n("2d00"),r=n("5ca1"),a=n("2aba"),o=n("32e9"),s=n("84f2"),l=n("41a0"),c=n("7f20"),u=n("38fd"),d=n("2b4c")("iterator"),p=!([].keys&&"next"in[].keys()),h=function(){return this};e.exports=function(e,t,n,f,m,g,v){l(n,t,f);var b,y,x,_=function(e){if(!p&&e in S)return S[e];switch(e){case"keys":case"values":return function(){return new n(this,e)}}return function(){return new n(this,e)}},w=t+" Iterator",C="values"==m,k=!1,S=e.prototype,M=S[d]||S["@@iterator"]||m&&S[m],O=M||_(m),$=m?C?_("entries"):O:void 0,E="Array"==t&&S.entries||M;if(E&&(x=u(E.call(new e)))!==Object.prototype&&x.next&&(c(x,w,!0),i||"function"==typeof x[d]||o(x,d,h)),C&&M&&"values"!==M.name&&(k=!0,O=function(){return M.call(this)}),i&&!v||!p&&!k&&S[d]||o(S,d,O),s[t]=O,s[w]=h,m)if(b={values:C?O:_("values"),keys:g?O:_("keys"),entries:$},v)for(y in b)y in S||a(S,y,b[y]);else r(r.P+r.F*(p||k),t,b);return b}},"02f4":function(e,t,n){var i=n("4588"),r=n("be13");e.exports=function(e){return function(t,n){var a,o,s=String(r(t)),l=i(n),c=s.length;return l<0||l>=c?e?"":void 0:(a=s.charCodeAt(l))<55296||a>56319||l+1===c||(o=s.charCodeAt(l+1))<56320||o>57343?e?s.charAt(l):a:e?s.slice(l,l+2):o-56320+(a-55296<<10)+65536}}},"0390":function(e,t,n){"use strict";var i=n("02f4")(!0);e.exports=function(e,t,n){return t+(n?i(e,t).length:1)}},"0bfb":function(e,t,n){"use strict";var i=n("cb7c");e.exports=function(){var e=i(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},"0d58":function(e,t,n){var i=n("ce10"),r=n("e11e");e.exports=Object.keys||function(e){return i(e,r)}},1495:function(e,t,n){var i=n("86cc"),r=n("cb7c"),a=n("0d58");e.exports=n("9e1e")?Object.defineProperties:function(e,t){r(e);for(var n,o=a(t),s=o.length,l=0;s>l;)i.f(e,n=o[l++],t[n]);return e}},"214f":function(e,t,n){"use strict";n("b0c5");var i=n("2aba"),r=n("32e9"),a=n("79e5"),o=n("be13"),s=n("2b4c"),l=n("520a"),c=s("species"),u=!a((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),d=function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2===n.length&&"a"===n[0]&&"b"===n[1]}();e.exports=function(e,t,n){var p=s(e),h=!a((function(){var t={};return t[p]=function(){return 7},7!=""[e](t)})),f=h?!a((function(){var t=!1,n=/a/;return n.exec=function(){return t=!0,null},"split"===e&&(n.constructor={},n.constructor[c]=function(){return n}),n[p](""),!t})):void 0;if(!h||!f||"replace"===e&&!u||"split"===e&&!d){var m=/./[p],g=n(o,p,""[e],(function(e,t,n,i,r){return t.exec===l?h&&!r?{done:!0,value:m.call(t,n,i)}:{done:!0,value:e.call(n,t,i)}:{done:!1}})),v=g[0],b=g[1];i(String.prototype,e,v),r(RegExp.prototype,p,2==t?function(e,t){return b.call(e,this,t)}:function(e){return b.call(e,this)})}}},"230e":function(e,t,n){var i=n("d3f4"),r=n("7726").document,a=i(r)&&i(r.createElement);e.exports=function(e){return a?r.createElement(e):{}}},"23c6":function(e,t,n){var i=n("2d95"),r=n("2b4c")("toStringTag"),a="Arguments"==i(function(){return arguments}());e.exports=function(e){var t,n,o;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),r))?n:a?i(t):"Object"==(o=i(t))&&"function"==typeof t.callee?"Arguments":o}},2621:function(e,t){t.f=Object.getOwnPropertySymbols},"2aba":function(e,t,n){var i=n("7726"),r=n("32e9"),a=n("69a8"),o=n("ca5a")("src"),s=n("fa5b"),l=(""+s).split("toString");n("8378").inspectSource=function(e){return s.call(e)},(e.exports=function(e,t,n,s){var c="function"==typeof n;c&&(a(n,"name")||r(n,"name",t)),e[t]!==n&&(c&&(a(n,o)||r(n,o,e[t]?""+e[t]:l.join(String(t)))),e===i?e[t]=n:s?e[t]?e[t]=n:r(e,t,n):(delete e[t],r(e,t,n)))})(Function.prototype,"toString",(function(){return"function"==typeof this&&this[o]||s.call(this)}))},"2aeb":function(e,t,n){var i=n("cb7c"),r=n("1495"),a=n("e11e"),o=n("613b")("IE_PROTO"),s=function(){},l=function(){var e,t=n("230e")("iframe"),i=a.length;for(t.style.display="none",n("fab2").appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),l=e.F;i--;)delete l.prototype[a[i]];return l()};e.exports=Object.create||function(e,t){var n;return null!==e?(s.prototype=i(e),n=new s,s.prototype=null,n[o]=e):n=l(),void 0===t?n:r(n,t)}},"2b4c":function(e,t,n){var i=n("5537")("wks"),r=n("ca5a"),a=n("7726").Symbol,o="function"==typeof a;(e.exports=function(e){return i[e]||(i[e]=o&&a[e]||(o?a:r)("Symbol."+e))}).store=i},"2d00":function(e,t){e.exports=!1},"2d95":function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},"2fdb":function(e,t,n){"use strict";var i=n("5ca1"),r=n("d2c8");i(i.P+i.F*n("5147")("includes"),"String",{includes:function(e){return!!~r(this,e,"includes").indexOf(e,arguments.length>1?arguments[1]:void 0)}})},"32e9":function(e,t,n){var i=n("86cc"),r=n("4630");e.exports=n("9e1e")?function(e,t,n){return i.f(e,t,r(1,n))}:function(e,t,n){return e[t]=n,e}},"38fd":function(e,t,n){var i=n("69a8"),r=n("4bf8"),a=n("613b")("IE_PROTO"),o=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=r(e),i(e,a)?e[a]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?o:null}},"41a0":function(e,t,n){"use strict";var i=n("2aeb"),r=n("4630"),a=n("7f20"),o={};n("32e9")(o,n("2b4c")("iterator"),(function(){return this})),e.exports=function(e,t,n){e.prototype=i(o,{next:r(1,n)}),a(e,t+" Iterator")}},"456d":function(e,t,n){var i=n("4bf8"),r=n("0d58");n("5eda")("keys",(function(){return function(e){return r(i(e))}}))},4588:function(e,t){var n=Math.ceil,i=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?i:n)(e)}},4630:function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},"4bf8":function(e,t,n){var i=n("be13");e.exports=function(e){return Object(i(e))}},5147:function(e,t,n){var i=n("2b4c")("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[i]=!1,!"/./"[e](t)}catch(e){}}return!0}},"520a":function(e,t,n){"use strict";var i,r,a=n("0bfb"),o=RegExp.prototype.exec,s=String.prototype.replace,l=o,c=(i=/a/,r=/b*/g,o.call(i,"a"),o.call(r,"a"),0!==i.lastIndex||0!==r.lastIndex),u=void 0!==/()??/.exec("")[1];(c||u)&&(l=function(e){var t,n,i,r,l=this;return u&&(n=new RegExp("^"+l.source+"$(?!\\s)",a.call(l))),c&&(t=l.lastIndex),i=o.call(l,e),c&&i&&(l.lastIndex=l.global?i.index+i[0].length:t),u&&i&&i.length>1&&s.call(i[0],n,(function(){for(r=1;r<arguments.length-2;r++)void 0===arguments[r]&&(i[r]=void 0)})),i}),e.exports=l},"52a7":function(e,t){t.f={}.propertyIsEnumerable},5537:function(e,t,n){var i=n("8378"),r=n("7726"),a=r["__core-js_shared__"]||(r["__core-js_shared__"]={});(e.exports=function(e,t){return a[e]||(a[e]=void 0!==t?t:{})})("versions",[]).push({version:i.version,mode:n("2d00")?"pure":"global",copyright:" 2019 Denis Pushkarev (zloirock.ru)"})},"5ca1":function(e,t,n){var i=n("7726"),r=n("8378"),a=n("32e9"),o=n("2aba"),s=n("9b43"),l=function(e,t,n){var c,u,d,p,h=e&l.F,f=e&l.G,m=e&l.S,g=e&l.P,v=e&l.B,b=f?i:m?i[t]||(i[t]={}):(i[t]||{}).prototype,y=f?r:r[t]||(r[t]={}),x=y.prototype||(y.prototype={});for(c in f&&(n=t),n)d=((u=!h&&b&&void 0!==b[c])?b:n)[c],p=v&&u?s(d,i):g&&"function"==typeof d?s(Function.call,d):d,b&&o(b,c,d,e&l.U),y[c]!=d&&a(y,c,p),g&&x[c]!=d&&(x[c]=d)};i.core=r,l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,e.exports=l},"5eda":function(e,t,n){var i=n("5ca1"),r=n("8378"),a=n("79e5");e.exports=function(e,t){var n=(r.Object||{})[e]||Object[e],o={};o[e]=t(n),i(i.S+i.F*a((function(){n(1)})),"Object",o)}},"5f1b":function(e,t,n){"use strict";var i=n("23c6"),r=RegExp.prototype.exec;e.exports=function(e,t){var n=e.exec;if("function"==typeof n){var a=n.call(e,t);if("object"!=typeof a)throw new TypeError("RegExp exec method returned something other than an Object or null");return a}if("RegExp"!==i(e))throw new TypeError("RegExp#exec called on incompatible receiver");return r.call(e,t)}},"613b":function(e,t,n){var i=n("5537")("keys"),r=n("ca5a");e.exports=function(e){return i[e]||(i[e]=r(e))}},"626a":function(e,t,n){var i=n("2d95");e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==i(e)?e.split(""):Object(e)}},6762:function(e,t,n){"use strict";var i=n("5ca1"),r=n("c366")(!0);i(i.P,"Array",{includes:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),n("9c6c")("includes")},6821:function(e,t,n){var i=n("626a"),r=n("be13");e.exports=function(e){return i(r(e))}},"69a8":function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},"6a99":function(e,t,n){var i=n("d3f4");e.exports=function(e,t){if(!i(e))return e;var n,r;if(t&&"function"==typeof(n=e.toString)&&!i(r=n.call(e)))return r;if("function"==typeof(n=e.valueOf)&&!i(r=n.call(e)))return r;if(!t&&"function"==typeof(n=e.toString)&&!i(r=n.call(e)))return r;throw TypeError("Can't convert object to primitive value")}},7333:function(e,t,n){"use strict";var i=n("0d58"),r=n("2621"),a=n("52a7"),o=n("4bf8"),s=n("626a"),l=Object.assign;e.exports=!l||n("79e5")((function(){var e={},t={},n=Symbol(),i="abcdefghijklmnopqrst";return e[n]=7,i.split("").forEach((function(e){t[e]=e})),7!=l({},e)[n]||Object.keys(l({},t)).join("")!=i}))?function(e,t){for(var n=o(e),l=arguments.length,c=1,u=r.f,d=a.f;l>c;)for(var p,h=s(arguments[c++]),f=u?i(h).concat(u(h)):i(h),m=f.length,g=0;m>g;)d.call(h,p=f[g++])&&(n[p]=h[p]);return n}:l},7726:function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},"77f1":function(e,t,n){var i=n("4588"),r=Math.max,a=Math.min;e.exports=function(e,t){return(e=i(e))<0?r(e+t,0):a(e,t)}},"79e5":function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},"7f20":function(e,t,n){var i=n("86cc").f,r=n("69a8"),a=n("2b4c")("toStringTag");e.exports=function(e,t,n){e&&!r(e=n?e:e.prototype,a)&&i(e,a,{configurable:!0,value:t})}},8378:function(e,t){var n=e.exports={version:"2.6.5"};"number"==typeof __e&&(__e=n)},"84f2":function(e,t){e.exports={}},"86cc":function(e,t,n){var i=n("cb7c"),r=n("c69a"),a=n("6a99"),o=Object.defineProperty;t.f=n("9e1e")?Object.defineProperty:function(e,t,n){if(i(e),t=a(t,!0),i(n),r)try{return o(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},"9b43":function(e,t,n){var i=n("d8e8");e.exports=function(e,t,n){if(i(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,r){return e.call(t,n,i,r)}}return function(){return e.apply(t,arguments)}}},"9c6c":function(e,t,n){var i=n("2b4c")("unscopables"),r=Array.prototype;null==r[i]&&n("32e9")(r,i,{}),e.exports=function(e){r[i][e]=!0}},"9def":function(e,t,n){var i=n("4588"),r=Math.min;e.exports=function(e){return e>0?r(i(e),9007199254740991):0}},"9e1e":function(e,t,n){e.exports=!n("79e5")((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},a352:function(t,n){t.exports=e},a481:function(e,t,n){"use strict";var i=n("cb7c"),r=n("4bf8"),a=n("9def"),o=n("4588"),s=n("0390"),l=n("5f1b"),c=Math.max,u=Math.min,d=Math.floor,p=/\$([$&`']|\d\d?|<[^>]*>)/g,h=/\$([$&`']|\d\d?)/g;n("214f")("replace",2,(function(e,t,n,f){return[function(i,r){var a=e(this),o=null==i?void 0:i[t];return void 0!==o?o.call(i,a,r):n.call(String(a),i,r)},function(e,t){var r=f(n,e,this,t);if(r.done)return r.value;var d=i(e),p=String(this),h="function"==typeof t;h||(t=String(t));var g=d.global;if(g){var v=d.unicode;d.lastIndex=0}for(var b=[];;){var y=l(d,p);if(null===y)break;if(b.push(y),!g)break;""===String(y[0])&&(d.lastIndex=s(p,a(d.lastIndex),v))}for(var x,_="",w=0,C=0;C<b.length;C++){y=b[C];for(var k=String(y[0]),S=c(u(o(y.index),p.length),0),M=[],O=1;O<y.length;O++)M.push(void 0===(x=y[O])?x:String(x));var $=y.groups;if(h){var E=[k].concat(M,S,p);void 0!==$&&E.push($);var T=String(t.apply(void 0,E))}else T=m(k,p,S,M,$,t);S>=w&&(_+=p.slice(w,S)+T,w=S+k.length)}return _+p.slice(w)}];function m(e,t,i,a,o,s){var l=i+e.length,c=a.length,u=h;return void 0!==o&&(o=r(o),u=p),n.call(s,u,(function(n,r){var s;switch(r.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,i);case"'":return t.slice(l);case"<":s=o[r.slice(1,-1)];break;default:var u=+r;if(0===u)return n;if(u>c){var p=d(u/10);return 0===p?n:p<=c?void 0===a[p-1]?r.charAt(1):a[p-1]+r.charAt(1):n}s=a[u-1]}return void 0===s?"":s}))}}))},aae3:function(e,t,n){var i=n("d3f4"),r=n("2d95"),a=n("2b4c")("match");e.exports=function(e){var t;return i(e)&&(void 0!==(t=e[a])?!!t:"RegExp"==r(e))}},ac6a:function(e,t,n){for(var i=n("cadf"),r=n("0d58"),a=n("2aba"),o=n("7726"),s=n("32e9"),l=n("84f2"),c=n("2b4c"),u=c("iterator"),d=c("toStringTag"),p=l.Array,h={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},f=r(h),m=0;m<f.length;m++){var g,v=f[m],b=h[v],y=o[v],x=y&&y.prototype;if(x&&(x[u]||s(x,u,p),x[d]||s(x,d,v),l[v]=p,b))for(g in i)x[g]||a(x,g,i[g],!0)}},b0c5:function(e,t,n){"use strict";var i=n("520a");n("5ca1")({target:"RegExp",proto:!0,forced:i!==/./.exec},{exec:i})},be13:function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},c366:function(e,t,n){var i=n("6821"),r=n("9def"),a=n("77f1");e.exports=function(e){return function(t,n,o){var s,l=i(t),c=r(l.length),u=a(o,c);if(e&&n!=n){for(;c>u;)if((s=l[u++])!=s)return!0}else for(;c>u;u++)if((e||u in l)&&l[u]===n)return e||u||0;return!e&&-1}}},c649:function(e,t,n){"use strict";(function(e){n.d(t,"c",(function(){return c})),n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return a})),n.d(t,"d",(function(){return l})),n("a481");var i,r,a="undefined"!=typeof window?window.console:e.console,o=/-(\w)/g,s=(i=function(e){return e.replace(o,(function(e,t){return t?t.toUpperCase():""}))},r=Object.create(null),function(e){return r[e]||(r[e]=i(e))});function l(e){null!==e.parentElement&&e.parentElement.removeChild(e)}function c(e,t,n){var i=0===n?e.children[0]:e.children[n-1].nextSibling;e.insertBefore(t,i)}}).call(this,n("c8ba"))},c69a:function(e,t,n){e.exports=!n("9e1e")&&!n("79e5")((function(){return 7!=Object.defineProperty(n("230e")("div"),"a",{get:function(){return 7}}).a}))},c8ba:function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},ca5a:function(e,t){var n=0,i=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+i).toString(36))}},cadf:function(e,t,n){"use strict";var i=n("9c6c"),r=n("d53b"),a=n("84f2"),o=n("6821");e.exports=n("01f9")(Array,"Array",(function(e,t){this._t=o(e),this._i=0,this._k=t}),(function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,r(1)):r(0,"keys"==t?n:"values"==t?e[n]:[n,e[n]])}),"values"),a.Arguments=a.Array,i("keys"),i("values"),i("entries")},cb7c:function(e,t,n){var i=n("d3f4");e.exports=function(e){if(!i(e))throw TypeError(e+" is not an object!");return e}},ce10:function(e,t,n){var i=n("69a8"),r=n("6821"),a=n("c366")(!1),o=n("613b")("IE_PROTO");e.exports=function(e,t){var n,s=r(e),l=0,c=[];for(n in s)n!=o&&i(s,n)&&c.push(n);for(;t.length>l;)i(s,n=t[l++])&&(~a(c,n)||c.push(n));return c}},d2c8:function(e,t,n){var i=n("aae3"),r=n("be13");e.exports=function(e,t,n){if(i(t))throw TypeError("String#"+n+" doesn't accept regex!");return String(r(e))}},d3f4:function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},d53b:function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},d8e8:function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},e11e:function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},f559:function(e,t,n){"use strict";var i=n("5ca1"),r=n("9def"),a=n("d2c8"),o="".startsWith;i(i.P+i.F*n("5147")("startsWith"),"String",{startsWith:function(e){var t=a(this,e,"startsWith"),n=r(Math.min(arguments.length>1?arguments[1]:void 0,t.length)),i=String(e);return o?o.call(t,i,n):t.slice(n,n+i.length)===i}})},f6fd:function(e,t){!function(e){var t=e.getElementsByTagName("script");"currentScript"in e||Object.defineProperty(e,"currentScript",{get:function(){try{throw new Error}catch(i){var e,n=(/.*at [^\(]*\((.*):.+:.+\)$/gi.exec(i.stack)||[!1])[1];for(e in t)if(t[e].src==n||"interactive"==t[e].readyState)return t[e];return null}}})}(document)},f751:function(e,t,n){var i=n("5ca1");i(i.S+i.F,"Object",{assign:n("7333")})},fa5b:function(e,t,n){e.exports=n("5537")("native-function-to-string",Function.toString)},fab2:function(e,t,n){var i=n("7726").document;e.exports=i&&i.documentElement},fb15:function(e,t,n){"use strict";var i;function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function a(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],i=!0,r=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(e){r=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw a}}return n}}(e,t)||a(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e){return function(e){if(Array.isArray(e))return r(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||a(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}n.r(t),"undefined"!=typeof window&&(n("f6fd"),(i=window.document.currentScript)&&(i=i.src.match(/(.+\/)[^/]+\.js(\?.*)?$/))&&(n.p=i[1])),n("f751"),n("f559"),n("ac6a"),n("cadf"),n("456d"),n("6762"),n("2fdb");var l=n("a352"),c=n.n(l),u=n("c649");function d(e,t){var n=this;this.$nextTick((function(){return n.$emit(e.toLowerCase(),t)}))}function p(e){var t=this;return function(n){null!==t.realList&&t["onDrag"+e](n),d.call(t,e,n)}}function h(e){return["transition-group","TransitionGroup"].includes(e)}function f(e,t,n){return e[n]||(t[n]?t[n]():void 0)}var m=["Start","Add","Remove","Update","End"],g=["Choose","Unchoose","Sort","Filter","Clone"],v=["Move"].concat(m,g).map((function(e){return"on"+e})),b=null,y={name:"draggable",inheritAttrs:!1,props:{options:Object,list:{type:Array,required:!1,default:null},value:{type:Array,required:!1,default:null},noTransitionOnDrag:{type:Boolean,default:!1},clone:{type:Function,default:function(e){return e}},element:{type:String,default:"div"},tag:{type:String,default:null},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null}},data:function(){return{transitionMode:!1,noneFunctionalComponentMode:!1}},render:function(e){var t=this.$slots.default;this.transitionMode=function(e){if(!e||1!==e.length)return!1;var t=o(e,1)[0].componentOptions;return!!t&&h(t.tag)}(t);var n=function(e,t,n){var i=0,r=0,a=f(t,n,"header");a&&(i=a.length,e=e?[].concat(s(a),s(e)):s(a));var o=f(t,n,"footer");return o&&(r=o.length,e=e?[].concat(s(e),s(o)):s(o)),{children:e,headerOffset:i,footerOffset:r}}(t,this.$slots,this.$scopedSlots),i=n.children,r=n.headerOffset,a=n.footerOffset;this.headerOffset=r,this.footerOffset=a;var l=function(e,t){var n=null,i=function(e,t){n=function(e,t,n){return void 0===n||((e=e||{})[t]=n),e}(n,e,t)};if(i("attrs",Object.keys(e).filter((function(e){return"id"===e||e.startsWith("data-")})).reduce((function(t,n){return t[n]=e[n],t}),{})),!t)return n;var r=t.on,a=t.props,o=t.attrs;return i("on",r),i("props",a),Object.assign(n.attrs,o),n}(this.$attrs,this.componentData);return e(this.getTag(),l,i)},created:function(){null!==this.list&&null!==this.value&&u.b.error("Value and list props are mutually exclusive! Please set one or another."),"div"!==this.element&&u.b.warn("Element props is deprecated please use tag props instead. See https://github.com/SortableJS/Vue.Draggable/blob/master/documentation/migrate.md#element-props"),void 0!==this.options&&u.b.warn("Options props is deprecated, add sortable options directly as vue.draggable item, or use v-bind. See https://github.com/SortableJS/Vue.Draggable/blob/master/documentation/migrate.md#options-props")},mounted:function(){var e=this;if(this.noneFunctionalComponentMode=this.getTag().toLowerCase()!==this.$el.nodeName.toLowerCase()&&!this.getIsFunctional(),this.noneFunctionalComponentMode&&this.transitionMode)throw new Error("Transition-group inside component is not supported. Please alter tag value or remove transition-group. Current tag value: ".concat(this.getTag()));var t={};m.forEach((function(n){t["on"+n]=p.call(e,n)})),g.forEach((function(n){t["on"+n]=d.bind(e,n)}));var n=Object.keys(this.$attrs).reduce((function(t,n){return t[Object(u.a)(n)]=e.$attrs[n],t}),{}),i=Object.assign({},this.options,n,t,{onMove:function(t,n){return e.onDragMove(t,n)}});!("draggable"in i)&&(i.draggable=">*"),this._sortable=new c.a(this.rootContainer,i),this.computeIndexes()},beforeDestroy:function(){void 0!==this._sortable&&this._sortable.destroy()},computed:{rootContainer:function(){return this.transitionMode?this.$el.children[0]:this.$el},realList:function(){return this.list?this.list:this.value}},watch:{options:{handler:function(e){this.updateOptions(e)},deep:!0},$attrs:{handler:function(e){this.updateOptions(e)},deep:!0},realList:function(){this.computeIndexes()}},methods:{getIsFunctional:function(){var e=this._vnode.fnOptions;return e&&e.functional},getTag:function(){return this.tag||this.element},updateOptions:function(e){for(var t in e){var n=Object(u.a)(t);-1===v.indexOf(n)&&this._sortable.option(n,e[t])}},getChildrenNodes:function(){if(this.noneFunctionalComponentMode)return this.$children[0].$slots.default;var e=this.$slots.default;return this.transitionMode?e[0].child.$slots.default:e},computeIndexes:function(){var e=this;this.$nextTick((function(){e.visibleIndexes=function(e,t,n,i){if(!e)return[];var r=e.map((function(e){return e.elm})),a=t.length-i,o=s(t).map((function(e,t){return t>=a?r.length:r.indexOf(e)}));return n?o.filter((function(e){return-1!==e})):o}(e.getChildrenNodes(),e.rootContainer.children,e.transitionMode,e.footerOffset)}))},getUnderlyingVm:function(e){var t=function(e,t){return e.map((function(e){return e.elm})).indexOf(t)}(this.getChildrenNodes()||[],e);return-1===t?null:{index:t,element:this.realList[t]}},getUnderlyingPotencialDraggableComponent:function(e){var t=e.__vue__;return t&&t.$options&&h(t.$options._componentTag)?t.$parent:!("realList"in t)&&1===t.$children.length&&"realList"in t.$children[0]?t.$children[0]:t},emitChanges:function(e){var t=this;this.$nextTick((function(){t.$emit("change",e)}))},alterList:function(e){if(this.list)e(this.list);else{var t=s(this.value);e(t),this.$emit("input",t)}},spliceList:function(){var e=arguments,t=function(t){return t.splice.apply(t,s(e))};this.alterList(t)},updatePosition:function(e,t){var n=function(n){return n.splice(t,0,n.splice(e,1)[0])};this.alterList(n)},getRelatedContextFromMoveEvent:function(e){var t=e.to,n=e.related,i=this.getUnderlyingPotencialDraggableComponent(t);if(!i)return{component:i};var r=i.realList,a={list:r,component:i};if(t!==n&&r&&i.getUnderlyingVm){var o=i.getUnderlyingVm(n);if(o)return Object.assign(o,a)}return a},getVmIndex:function(e){var t=this.visibleIndexes,n=t.length;return e>n-1?n:t[e]},getComponent:function(){return this.$slots.default[0].componentInstance},resetTransitionData:function(e){if(this.noTransitionOnDrag&&this.transitionMode){this.getChildrenNodes()[e].data=null;var t=this.getComponent();t.children=[],t.kept=void 0}},onDragStart:function(e){this.context=this.getUnderlyingVm(e.item),e.item._underlying_vm_=this.clone(this.context.element),b=e.item},onDragAdd:function(e){var t=e.item._underlying_vm_;if(void 0!==t){Object(u.d)(e.item);var n=this.getVmIndex(e.newIndex);this.spliceList(n,0,t),this.computeIndexes();var i={element:t,newIndex:n};this.emitChanges({added:i})}},onDragRemove:function(e){if(Object(u.c)(this.rootContainer,e.item,e.oldIndex),"clone"!==e.pullMode){var t=this.context.index;this.spliceList(t,1);var n={element:this.context.element,oldIndex:t};this.resetTransitionData(t),this.emitChanges({removed:n})}else Object(u.d)(e.clone)},onDragUpdate:function(e){Object(u.d)(e.item),Object(u.c)(e.from,e.item,e.oldIndex);var t=this.context.index,n=this.getVmIndex(e.newIndex);this.updatePosition(t,n);var i={element:this.context.element,oldIndex:t,newIndex:n};this.emitChanges({moved:i})},updateProperty:function(e,t){e.hasOwnProperty(t)&&(e[t]+=this.headerOffset)},computeFutureIndex:function(e,t){if(!e.element)return 0;var n=s(t.to.children).filter((function(e){return"none"!==e.style.display})),i=n.indexOf(t.related),r=e.component.getVmIndex(i);return-1===n.indexOf(b)&&t.willInsertAfter?r+1:r},onDragMove:function(e,t){var n=this.move;if(!n||!this.realList)return!0;var i=this.getRelatedContextFromMoveEvent(e),r=this.context,a=this.computeFutureIndex(i,e);return Object.assign(r,{futureIndex:a}),n(Object.assign({},e,{relatedContext:i,draggedContext:r}),t)},onDragEnd:function(){this.computeIndexes(),b=null}}};"undefined"!=typeof window&&"Vue"in window&&window.Vue.component("draggable",y);var x=y;t.default=x}}).default},e.exports=i(n(949))},949:function(e,t,n){"use strict";
/**!
 * Sortable 1.10.2
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */
function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),i.forEach((function(t){r(e,t,n[t])}))}return e}function s(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function l(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}n.r(t),n.d(t,"MultiDrag",(function(){return yt})),n.d(t,"Sortable",(function(){return Be})),n.d(t,"Swap",(function(){return lt}));function c(e){if("undefined"!=typeof window&&window.navigator)return!!navigator.userAgent.match(e)}var u=c(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),d=c(/Edge/i),p=c(/firefox/i),h=c(/safari/i)&&!c(/chrome/i)&&!c(/android/i),f=c(/iP(ad|od|hone)/i),m=c(/chrome/i)&&c(/android/i),g={capture:!1,passive:!1};function v(e,t,n){e.addEventListener(t,n,!u&&g)}function b(e,t,n){e.removeEventListener(t,n,!u&&g)}function y(e,t){if(t){if(">"===t[0]&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch(e){return!1}return!1}}function x(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function _(e,t,n,i){if(e){n=n||document;do{if(null!=t&&(">"===t[0]?e.parentNode===n&&y(e,t):y(e,t))||i&&e===n)return e;if(e===n)break}while(e=x(e))}return null}var w,C=/\s+/g;function k(e,t,n){if(e&&t)if(e.classList)e.classList[n?"add":"remove"](t);else{var i=(" "+e.className+" ").replace(C," ").replace(" "+t+" "," ");e.className=(i+(n?" "+t:"")).replace(C," ")}}function S(e,t,n){var i=e&&e.style;if(i){if(void 0===n)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),void 0===t?n:n[t];t in i||-1!==t.indexOf("webkit")||(t="-webkit-"+t),i[t]=n+("string"==typeof n?"":"px")}}function M(e,t){var n="";if("string"==typeof e)n=e;else do{var i=S(e,"transform");i&&"none"!==i&&(n=i+" "+n)}while(!t&&(e=e.parentNode));var r=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return r&&new r(n)}function O(e,t,n){if(e){var i=e.getElementsByTagName(t),r=0,a=i.length;if(n)for(;r<a;r++)n(i[r],r);return i}return[]}function $(){var e=document.scrollingElement;return e||document.documentElement}function E(e,t,n,i,r){if(e.getBoundingClientRect||e===window){var a,o,s,l,c,d,p;if(e!==window&&e!==$()?(o=(a=e.getBoundingClientRect()).top,s=a.left,l=a.bottom,c=a.right,d=a.height,p=a.width):(o=0,s=0,l=window.innerHeight,c=window.innerWidth,d=window.innerHeight,p=window.innerWidth),(t||n)&&e!==window&&(r=r||e.parentNode,!u))do{if(r&&r.getBoundingClientRect&&("none"!==S(r,"transform")||n&&"static"!==S(r,"position"))){var h=r.getBoundingClientRect();o-=h.top+parseInt(S(r,"border-top-width")),s-=h.left+parseInt(S(r,"border-left-width")),l=o+a.height,c=s+a.width;break}}while(r=r.parentNode);if(i&&e!==window){var f=M(r||e),m=f&&f.a,g=f&&f.d;f&&(l=(o/=g)+(d/=g),c=(s/=m)+(p/=m))}return{top:o,left:s,bottom:l,right:c,width:p,height:d}}}function T(e,t,n){for(var i=A(e,!0),r=E(e)[t];i;){var a=E(i)[n];if(!("top"===n||"left"===n?r>=a:r<=a))return i;if(i===$())break;i=A(i,!1)}return!1}function D(e,t,n){for(var i=0,r=0,a=e.children;r<a.length;){if("none"!==a[r].style.display&&a[r]!==Be.ghost&&a[r]!==Be.dragged&&_(a[r],n.draggable,e,!1)){if(i===t)return a[r];i++}r++}return null}function L(e,t){for(var n=e.lastElementChild;n&&(n===Be.ghost||"none"===S(n,"display")||t&&!y(n,t));)n=n.previousElementSibling;return n||null}function z(e,t){var n=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)"TEMPLATE"===e.nodeName.toUpperCase()||e===Be.clone||t&&!y(e,t)||n++;return n}function N(e){var t=0,n=0,i=$();if(e)do{var r=M(e),a=r.a,o=r.d;t+=e.scrollLeft*a,n+=e.scrollTop*o}while(e!==i&&(e=e.parentNode));return[t,n]}function A(e,t){if(!e||!e.getBoundingClientRect)return $();var n=e,i=!1;do{if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var r=S(n);if(n.clientWidth<n.scrollWidth&&("auto"==r.overflowX||"scroll"==r.overflowX)||n.clientHeight<n.scrollHeight&&("auto"==r.overflowY||"scroll"==r.overflowY)){if(!n.getBoundingClientRect||n===document.body)return $();if(i||t)return n;i=!0}}}while(n=n.parentNode);return $()}function I(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}function P(e,t){return function(){if(!w){var n=arguments,i=this;1===n.length?e.call(i,n[0]):e.apply(i,n),w=setTimeout((function(){w=void 0}),t)}}}function j(e,t,n){e.scrollLeft+=t,e.scrollTop+=n}function F(e){var t=window.Polymer,n=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):n?n(e).clone(!0)[0]:e.cloneNode(!0)}function B(e,t){S(e,"position","absolute"),S(e,"top",t.top),S(e,"left",t.left),S(e,"width",t.width),S(e,"height",t.height)}function R(e){S(e,"position",""),S(e,"top",""),S(e,"left",""),S(e,"width",""),S(e,"height","")}var W="Sortable"+(new Date).getTime();function H(){var e,t=[];return{captureAnimationState:function(){(t=[],this.options.animation)&&[].slice.call(this.el.children).forEach((function(e){if("none"!==S(e,"display")&&e!==Be.ghost){t.push({target:e,rect:E(e)});var n=o({},t[t.length-1].rect);if(e.thisAnimationDuration){var i=M(e,!0);i&&(n.top-=i.f,n.left-=i.e)}e.fromRect=n}}))},addAnimationState:function(e){t.push(e)},removeAnimationState:function(e){t.splice(function(e,t){for(var n in e)if(e.hasOwnProperty(n))for(var i in t)if(t.hasOwnProperty(i)&&t[i]===e[n][i])return Number(n);return-1}(t,{target:e}),1)},animateAll:function(n){var i=this;if(!this.options.animation)return clearTimeout(e),void("function"==typeof n&&n());var r=!1,a=0;t.forEach((function(e){var t=0,n=e.target,o=n.fromRect,s=E(n),l=n.prevFromRect,c=n.prevToRect,u=e.rect,d=M(n,!0);d&&(s.top-=d.f,s.left-=d.e),n.toRect=s,n.thisAnimationDuration&&I(l,s)&&!I(o,s)&&(u.top-s.top)/(u.left-s.left)==(o.top-s.top)/(o.left-s.left)&&(t=function(e,t,n,i){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-n.top,2)+Math.pow(t.left-n.left,2))*i.animation}(u,l,c,i.options)),I(s,o)||(n.prevFromRect=o,n.prevToRect=s,t||(t=i.options.animation),i.animate(n,u,s,t)),t&&(r=!0,a=Math.max(a,t),clearTimeout(n.animationResetTimer),n.animationResetTimer=setTimeout((function(){n.animationTime=0,n.prevFromRect=null,n.fromRect=null,n.prevToRect=null,n.thisAnimationDuration=null}),t),n.thisAnimationDuration=t)})),clearTimeout(e),r?e=setTimeout((function(){"function"==typeof n&&n()}),a):"function"==typeof n&&n(),t=[]},animate:function(e,t,n,i){if(i){S(e,"transition",""),S(e,"transform","");var r=M(this.el),a=r&&r.a,o=r&&r.d,s=(t.left-n.left)/(a||1),l=(t.top-n.top)/(o||1);e.animatingX=!!s,e.animatingY=!!l,S(e,"transform","translate3d("+s+"px,"+l+"px,0)"),function(e){e.offsetWidth}(e),S(e,"transition","transform "+i+"ms"+(this.options.easing?" "+this.options.easing:"")),S(e,"transform","translate3d(0,0,0)"),"number"==typeof e.animated&&clearTimeout(e.animated),e.animated=setTimeout((function(){S(e,"transition",""),S(e,"transform",""),e.animated=!1,e.animatingX=!1,e.animatingY=!1}),i)}}}}var G=[],q={initializeByDefault:!0},U={mount:function(e){for(var t in q)q.hasOwnProperty(t)&&!(t in e)&&(e[t]=q[t]);G.push(e)},pluginEvent:function(e,t,n){var i=this;this.eventCanceled=!1,n.cancel=function(){i.eventCanceled=!0};var r=e+"Global";G.forEach((function(i){t[i.pluginName]&&(t[i.pluginName][r]&&t[i.pluginName][r](o({sortable:t},n)),t.options[i.pluginName]&&t[i.pluginName][e]&&t[i.pluginName][e](o({sortable:t},n)))}))},initializePlugins:function(e,t,n,i){for(var r in G.forEach((function(i){var r=i.pluginName;if(e.options[r]||i.initializeByDefault){var o=new i(e,t,e.options);o.sortable=e,o.options=e.options,e[r]=o,a(n,o.defaults)}})),e.options)if(e.options.hasOwnProperty(r)){var o=this.modifyOption(e,r,e.options[r]);void 0!==o&&(e.options[r]=o)}},getEventProperties:function(e,t){var n={};return G.forEach((function(i){"function"==typeof i.eventProperties&&a(n,i.eventProperties.call(t[i.pluginName],e))})),n},modifyOption:function(e,t,n){var i;return G.forEach((function(r){e[r.pluginName]&&r.optionListeners&&"function"==typeof r.optionListeners[t]&&(i=r.optionListeners[t].call(e[r.pluginName],n))})),i}};function V(e){var t=e.sortable,n=e.rootEl,i=e.name,r=e.targetEl,a=e.cloneEl,s=e.toEl,l=e.fromEl,c=e.oldIndex,p=e.newIndex,h=e.oldDraggableIndex,f=e.newDraggableIndex,m=e.originalEvent,g=e.putSortable,v=e.extraEventProperties;if(t=t||n&&n[W]){var b,y=t.options,x="on"+i.charAt(0).toUpperCase()+i.substr(1);!window.CustomEvent||u||d?(b=document.createEvent("Event")).initEvent(i,!0,!0):b=new CustomEvent(i,{bubbles:!0,cancelable:!0}),b.to=s||n,b.from=l||n,b.item=r||n,b.clone=a,b.oldIndex=c,b.newIndex=p,b.oldDraggableIndex=h,b.newDraggableIndex=f,b.originalEvent=m,b.pullMode=g?g.lastPutMode:void 0;var _=o({},v,U.getEventProperties(i,t));for(var w in _)b[w]=_[w];n&&n.dispatchEvent(b),y[x]&&y[x].call(t,b)}}var K=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.evt,r=s(n,["evt"]);U.pluginEvent.bind(Be)(e,t,o({dragEl:Y,parentEl:J,ghostEl:Q,rootEl:Z,nextEl:ee,lastDownEl:te,cloneEl:ne,cloneHidden:ie,dragStarted:ge,putSortable:ce,activeSortable:Be.active,originalEvent:i,oldIndex:re,oldDraggableIndex:oe,newIndex:ae,newDraggableIndex:se,hideGhostForTarget:Ie,unhideGhostForTarget:Pe,cloneNowHidden:function(){ie=!0},cloneNowShown:function(){ie=!1},dispatchSortableEvent:function(e){X({sortable:t,name:e,originalEvent:i})}},r))};function X(e){V(o({putSortable:ce,cloneEl:ne,targetEl:Y,rootEl:Z,oldIndex:re,oldDraggableIndex:oe,newIndex:ae,newDraggableIndex:se},e))}var Y,J,Q,Z,ee,te,ne,ie,re,ae,oe,se,le,ce,ue,de,pe,he,fe,me,ge,ve,be,ye,xe,_e=!1,we=!1,Ce=[],ke=!1,Se=!1,Me=[],Oe=!1,$e=[],Ee="undefined"!=typeof document,Te=f,De=d||u?"cssFloat":"float",Le=Ee&&!m&&!f&&"draggable"in document.createElement("div"),ze=function(){if(Ee){if(u)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto","auto"===e.style.pointerEvents}}(),Ne=function(e,t){var n=S(e),i=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),r=D(e,0,t),a=D(e,1,t),o=r&&S(r),s=a&&S(a),l=o&&parseInt(o.marginLeft)+parseInt(o.marginRight)+E(r).width,c=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+E(a).width;if("flex"===n.display)return"column"===n.flexDirection||"column-reverse"===n.flexDirection?"vertical":"horizontal";if("grid"===n.display)return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(r&&o.float&&"none"!==o.float){var u="left"===o.float?"left":"right";return!a||"both"!==s.clear&&s.clear!==u?"horizontal":"vertical"}return r&&("block"===o.display||"flex"===o.display||"table"===o.display||"grid"===o.display||l>=i&&"none"===n[De]||a&&"none"===n[De]&&l+c>i)?"vertical":"horizontal"},Ae=function(e){function t(e,n){return function(i,r,a,o){var s=i.options.group.name&&r.options.group.name&&i.options.group.name===r.options.group.name;if(null==e&&(n||s))return!0;if(null==e||!1===e)return!1;if(n&&"clone"===e)return e;if("function"==typeof e)return t(e(i,r,a,o),n)(i,r,a,o);var l=(n?i:r).options.group.name;return!0===e||"string"==typeof e&&e===l||e.join&&e.indexOf(l)>-1}}var n={},r=e.group;r&&"object"==i(r)||(r={name:r}),n.name=r.name,n.checkPull=t(r.pull,!0),n.checkPut=t(r.put),n.revertClone=r.revertClone,e.group=n},Ie=function(){!ze&&Q&&S(Q,"display","none")},Pe=function(){!ze&&Q&&S(Q,"display","")};Ee&&document.addEventListener("click",(function(e){if(we)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),we=!1,!1}),!0);var je=function(e){if(Y){e=e.touches?e.touches[0]:e;var t=(r=e.clientX,a=e.clientY,Ce.some((function(e){if(!L(e)){var t=E(e),n=e[W].options.emptyInsertThreshold,i=r>=t.left-n&&r<=t.right+n,s=a>=t.top-n&&a<=t.bottom+n;return n&&i&&s?o=e:void 0}})),o);if(t){var n={};for(var i in e)e.hasOwnProperty(i)&&(n[i]=e[i]);n.target=n.rootEl=t,n.preventDefault=void 0,n.stopPropagation=void 0,t[W]._onDragOver(n)}}var r,a,o},Fe=function(e){Y&&Y.parentNode[W]._isOutsideThisEl(e.target)};function Be(e,t){if(!e||!e.nodeType||1!==e.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=a({},t),e[W]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Ne(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(e,t){e.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==Be.supportPointer&&"PointerEvent"in window,emptyInsertThreshold:5};for(var i in U.initializePlugins(this,e,n),n)!(i in t)&&(t[i]=n[i]);for(var r in Ae(t),this)"_"===r.charAt(0)&&"function"==typeof this[r]&&(this[r]=this[r].bind(this));this.nativeDraggable=!t.forceFallback&&Le,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?v(e,"pointerdown",this._onTapStart):(v(e,"mousedown",this._onTapStart),v(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(v(e,"dragover",this),v(e,"dragenter",this)),Ce.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),a(this,H())}function Re(e,t,n,i,r,a,o,s){var l,c,p=e[W],h=p.options.onMove;return!window.CustomEvent||u||d?(l=document.createEvent("Event")).initEvent("move",!0,!0):l=new CustomEvent("move",{bubbles:!0,cancelable:!0}),l.to=t,l.from=e,l.dragged=n,l.draggedRect=i,l.related=r||t,l.relatedRect=a||E(t),l.willInsertAfter=s,l.originalEvent=o,e.dispatchEvent(l),h&&(c=h.call(p,l,o)),c}function We(e){e.draggable=!1}function He(){Oe=!1}function Ge(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,n=t.length,i=0;n--;)i+=t.charCodeAt(n);return i.toString(36)}function qe(e){return setTimeout(e,0)}function Ue(e){return clearTimeout(e)}Be.prototype={constructor:Be,_isOutsideThisEl:function(e){this.el.contains(e)||e===this.el||(ve=null)},_getDirection:function(e,t){return"function"==typeof this.options.direction?this.options.direction.call(this,e,t,Y):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,n=this.el,i=this.options,r=i.preventOnFilter,a=e.type,o=e.touches&&e.touches[0]||e.pointerType&&"touch"===e.pointerType&&e,s=(o||e).target,l=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||s,c=i.filter;if(function(e){$e.length=0;var t=e.getElementsByTagName("input"),n=t.length;for(;n--;){var i=t[n];i.checked&&$e.push(i)}}(n),!Y&&!(/mousedown|pointerdown/.test(a)&&0!==e.button||i.disabled||l.isContentEditable||(s=_(s,i.draggable,n,!1))&&s.animated||te===s)){if(re=z(s),oe=z(s,i.draggable),"function"==typeof c){if(c.call(this,e,s,this))return X({sortable:t,rootEl:l,name:"filter",targetEl:s,toEl:n,fromEl:n}),K("filter",t,{evt:e}),void(r&&e.cancelable&&e.preventDefault())}else if(c&&(c=c.split(",").some((function(i){if(i=_(l,i.trim(),n,!1))return X({sortable:t,rootEl:i,name:"filter",targetEl:s,fromEl:n,toEl:n}),K("filter",t,{evt:e}),!0}))))return void(r&&e.cancelable&&e.preventDefault());i.handle&&!_(l,i.handle,n,!1)||this._prepareDragStart(e,o,s)}}},_prepareDragStart:function(e,t,n){var i,r=this,a=r.el,o=r.options,s=a.ownerDocument;if(n&&!Y&&n.parentNode===a){var l=E(n);if(Z=a,J=(Y=n).parentNode,ee=Y.nextSibling,te=n,le=o.group,Be.dragged=Y,ue={target:Y,clientX:(t||e).clientX,clientY:(t||e).clientY},fe=ue.clientX-l.left,me=ue.clientY-l.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,Y.style["will-change"]="all",i=function(){K("delayEnded",r,{evt:e}),Be.eventCanceled?r._onDrop():(r._disableDelayedDragEvents(),!p&&r.nativeDraggable&&(Y.draggable=!0),r._triggerDragStart(e,t),X({sortable:r,name:"choose",originalEvent:e}),k(Y,o.chosenClass,!0))},o.ignore.split(",").forEach((function(e){O(Y,e.trim(),We)})),v(s,"dragover",je),v(s,"mousemove",je),v(s,"touchmove",je),v(s,"mouseup",r._onDrop),v(s,"touchend",r._onDrop),v(s,"touchcancel",r._onDrop),p&&this.nativeDraggable&&(this.options.touchStartThreshold=4,Y.draggable=!0),K("delayStart",this,{evt:e}),!o.delay||o.delayOnTouchOnly&&!t||this.nativeDraggable&&(d||u))i();else{if(Be.eventCanceled)return void this._onDrop();v(s,"mouseup",r._disableDelayedDrag),v(s,"touchend",r._disableDelayedDrag),v(s,"touchcancel",r._disableDelayedDrag),v(s,"mousemove",r._delayedDragTouchMoveHandler),v(s,"touchmove",r._delayedDragTouchMoveHandler),o.supportPointer&&v(s,"pointermove",r._delayedDragTouchMoveHandler),r._dragStartTimer=setTimeout(i,o.delay)}}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){Y&&We(Y),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;b(e,"mouseup",this._disableDelayedDrag),b(e,"touchend",this._disableDelayedDrag),b(e,"touchcancel",this._disableDelayedDrag),b(e,"mousemove",this._delayedDragTouchMoveHandler),b(e,"touchmove",this._delayedDragTouchMoveHandler),b(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||"touch"==e.pointerType&&e,!this.nativeDraggable||t?this.options.supportPointer?v(document,"pointermove",this._onTouchMove):v(document,t?"touchmove":"mousemove",this._onTouchMove):(v(Y,"dragend",this),v(Z,"dragstart",this._onDragStart));try{document.selection?qe((function(){document.selection.empty()})):window.getSelection().removeAllRanges()}catch(e){}},_dragStarted:function(e,t){if(_e=!1,Z&&Y){K("dragStarted",this,{evt:t}),this.nativeDraggable&&v(document,"dragover",Fe);var n=this.options;!e&&k(Y,n.dragClass,!1),k(Y,n.ghostClass,!0),Be.active=this,e&&this._appendGhost(),X({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(de){this._lastX=de.clientX,this._lastY=de.clientY,Ie();for(var e=document.elementFromPoint(de.clientX,de.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(de.clientX,de.clientY))!==t;)t=e;if(Y.parentNode[W]._isOutsideThisEl(e),t)do{if(t[W]){if(t[W]._onDragOver({clientX:de.clientX,clientY:de.clientY,target:e,rootEl:t})&&!this.options.dragoverBubble)break}e=t}while(t=t.parentNode);Pe()}},_onTouchMove:function(e){if(ue){var t=this.options,n=t.fallbackTolerance,i=t.fallbackOffset,r=e.touches?e.touches[0]:e,a=Q&&M(Q,!0),o=Q&&a&&a.a,s=Q&&a&&a.d,l=Te&&xe&&N(xe),c=(r.clientX-ue.clientX+i.x)/(o||1)+(l?l[0]-Me[0]:0)/(o||1),u=(r.clientY-ue.clientY+i.y)/(s||1)+(l?l[1]-Me[1]:0)/(s||1);if(!Be.active&&!_e){if(n&&Math.max(Math.abs(r.clientX-this._lastX),Math.abs(r.clientY-this._lastY))<n)return;this._onDragStart(e,!0)}if(Q){a?(a.e+=c-(pe||0),a.f+=u-(he||0)):a={a:1,b:0,c:0,d:1,e:c,f:u};var d="matrix(".concat(a.a,",").concat(a.b,",").concat(a.c,",").concat(a.d,",").concat(a.e,",").concat(a.f,")");S(Q,"webkitTransform",d),S(Q,"mozTransform",d),S(Q,"msTransform",d),S(Q,"transform",d),pe=c,he=u,de=r}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!Q){var e=this.options.fallbackOnBody?document.body:Z,t=E(Y,!0,Te,!0,e),n=this.options;if(Te){for(xe=e;"static"===S(xe,"position")&&"none"===S(xe,"transform")&&xe!==document;)xe=xe.parentNode;xe!==document.body&&xe!==document.documentElement?(xe===document&&(xe=$()),t.top+=xe.scrollTop,t.left+=xe.scrollLeft):xe=$(),Me=N(xe)}k(Q=Y.cloneNode(!0),n.ghostClass,!1),k(Q,n.fallbackClass,!0),k(Q,n.dragClass,!0),S(Q,"transition",""),S(Q,"transform",""),S(Q,"box-sizing","border-box"),S(Q,"margin",0),S(Q,"top",t.top),S(Q,"left",t.left),S(Q,"width",t.width),S(Q,"height",t.height),S(Q,"opacity","0.8"),S(Q,"position",Te?"absolute":"fixed"),S(Q,"zIndex","100000"),S(Q,"pointerEvents","none"),Be.ghost=Q,e.appendChild(Q),S(Q,"transform-origin",fe/parseInt(Q.style.width)*100+"% "+me/parseInt(Q.style.height)*100+"%")}},_onDragStart:function(e,t){var n=this,i=e.dataTransfer,r=n.options;K("dragStart",this,{evt:e}),Be.eventCanceled?this._onDrop():(K("setupClone",this),Be.eventCanceled||((ne=F(Y)).draggable=!1,ne.style["will-change"]="",this._hideClone(),k(ne,this.options.chosenClass,!1),Be.clone=ne),n.cloneId=qe((function(){K("clone",n),Be.eventCanceled||(n.options.removeCloneOnHide||Z.insertBefore(ne,Y),n._hideClone(),X({sortable:n,name:"clone"}))})),!t&&k(Y,r.dragClass,!0),t?(we=!0,n._loopId=setInterval(n._emulateDragOver,50)):(b(document,"mouseup",n._onDrop),b(document,"touchend",n._onDrop),b(document,"touchcancel",n._onDrop),i&&(i.effectAllowed="move",r.setData&&r.setData.call(n,i,Y)),v(document,"drop",n),S(Y,"transform","translateZ(0)")),_e=!0,n._dragStartId=qe(n._dragStarted.bind(n,t,e)),v(document,"selectstart",n),ge=!0,h&&S(document.body,"user-select","none"))},_onDragOver:function(e){var t,n,i,r,a=this.el,s=e.target,l=this.options,c=l.group,u=Be.active,d=le===c,p=l.sort,h=ce||u,f=this,m=!1;if(!Oe){if(void 0!==e.preventDefault&&e.cancelable&&e.preventDefault(),s=_(s,l.draggable,a,!0),I("dragOver"),Be.eventCanceled)return m;if(Y.contains(e.target)||s.animated&&s.animatingX&&s.animatingY||f._ignoreWhileAnimating===s)return F(!1);if(we=!1,u&&!l.disabled&&(d?p||(i=!Z.contains(Y)):ce===this||(this.lastPutMode=le.checkPull(this,u,Y,e))&&c.checkPut(this,u,Y,e))){if(r="vertical"===this._getDirection(e,s),t=E(Y),I("dragOverValid"),Be.eventCanceled)return m;if(i)return J=Z,P(),this._hideClone(),I("revert"),Be.eventCanceled||(ee?Z.insertBefore(Y,ee):Z.appendChild(Y)),F(!0);var g=L(a,l.draggable);if(!g||function(e,t,n){var i=E(L(n.el,n.options.draggable));return t?e.clientX>i.right+10||e.clientX<=i.right&&e.clientY>i.bottom&&e.clientX>=i.left:e.clientX>i.right&&e.clientY>i.top||e.clientX<=i.right&&e.clientY>i.bottom+10}(e,r,this)&&!g.animated){if(g===Y)return F(!1);if(g&&a===e.target&&(s=g),s&&(n=E(s)),!1!==Re(Z,a,Y,t,s,n,e,!!s))return P(),a.appendChild(Y),J=a,B(),F(!0)}else if(s.parentNode===a){n=E(s);var v,b,y,x=Y.parentNode!==a,w=!function(e,t,n){var i=n?e.left:e.top,r=n?e.right:e.bottom,a=n?e.width:e.height,o=n?t.left:t.top,s=n?t.right:t.bottom,l=n?t.width:t.height;return i===o||r===s||i+a/2===o+l/2}(Y.animated&&Y.toRect||t,s.animated&&s.toRect||n,r),C=r?"top":"left",M=T(s,"top","top")||T(Y,"top","top"),O=M?M.scrollTop:void 0;if(ve!==s&&(b=n[C],ke=!1,Se=!w&&l.invertSwap||x),0!==(v=function(e,t,n,i,r,a,o,s){var l=i?e.clientY:e.clientX,c=i?n.height:n.width,u=i?n.top:n.left,d=i?n.bottom:n.right,p=!1;if(!o)if(s&&ye<c*r){if(!ke&&(1===be?l>u+c*a/2:l<d-c*a/2)&&(ke=!0),ke)p=!0;else if(1===be?l<u+ye:l>d-ye)return-be}else if(l>u+c*(1-r)/2&&l<d-c*(1-r)/2)return function(e){return z(Y)<z(e)?1:-1}(t);if((p=p||o)&&(l<u+c*a/2||l>d-c*a/2))return l>u+c/2?1:-1;return 0}(e,s,n,r,w?1:l.swapThreshold,null==l.invertedSwapThreshold?l.swapThreshold:l.invertedSwapThreshold,Se,ve===s))){var $=z(Y);do{$-=v,y=J.children[$]}while(y&&("none"===S(y,"display")||y===Q))}if(0===v||y===s)return F(!1);ve=s,be=v;var D=s.nextElementSibling,N=!1,A=Re(Z,a,Y,t,s,n,e,N=1===v);if(!1!==A)return 1!==A&&-1!==A||(N=1===A),Oe=!0,setTimeout(He,30),P(),N&&!D?a.appendChild(Y):s.parentNode.insertBefore(Y,N?D:s),M&&j(M,0,O-M.scrollTop),J=Y.parentNode,void 0===b||Se||(ye=Math.abs(b-E(s)[C])),B(),F(!0)}if(a.contains(Y))return F(!1)}return!1}function I(l,c){K(l,f,o({evt:e,isOwner:d,axis:r?"vertical":"horizontal",revert:i,dragRect:t,targetRect:n,canSort:p,fromSortable:h,target:s,completed:F,onMove:function(n,i){return Re(Z,a,Y,t,n,E(n),e,i)},changed:B},c))}function P(){I("dragOverAnimationCapture"),f.captureAnimationState(),f!==h&&h.captureAnimationState()}function F(t){return I("dragOverCompleted",{insertion:t}),t&&(d?u._hideClone():u._showClone(f),f!==h&&(k(Y,ce?ce.options.ghostClass:u.options.ghostClass,!1),k(Y,l.ghostClass,!0)),ce!==f&&f!==Be.active?ce=f:f===Be.active&&ce&&(ce=null),h===f&&(f._ignoreWhileAnimating=s),f.animateAll((function(){I("dragOverAnimationComplete"),f._ignoreWhileAnimating=null})),f!==h&&(h.animateAll(),h._ignoreWhileAnimating=null)),(s===Y&&!Y.animated||s===a&&!s.animated)&&(ve=null),l.dragoverBubble||e.rootEl||s===document||(Y.parentNode[W]._isOutsideThisEl(e.target),!t&&je(e)),!l.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),m=!0}function B(){ae=z(Y),se=z(Y,l.draggable),X({sortable:f,name:"change",toEl:a,newIndex:ae,newDraggableIndex:se,originalEvent:e})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){b(document,"mousemove",this._onTouchMove),b(document,"touchmove",this._onTouchMove),b(document,"pointermove",this._onTouchMove),b(document,"dragover",je),b(document,"mousemove",je),b(document,"touchmove",je)},_offUpEvents:function(){var e=this.el.ownerDocument;b(e,"mouseup",this._onDrop),b(e,"touchend",this._onDrop),b(e,"pointerup",this._onDrop),b(e,"touchcancel",this._onDrop),b(document,"selectstart",this)},_onDrop:function(e){var t=this.el,n=this.options;ae=z(Y),se=z(Y,n.draggable),K("drop",this,{evt:e}),J=Y&&Y.parentNode,ae=z(Y),se=z(Y,n.draggable),Be.eventCanceled||(_e=!1,Se=!1,ke=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Ue(this.cloneId),Ue(this._dragStartId),this.nativeDraggable&&(b(document,"drop",this),b(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),h&&S(document.body,"user-select",""),S(Y,"transform",""),e&&(ge&&(e.cancelable&&e.preventDefault(),!n.dropBubble&&e.stopPropagation()),Q&&Q.parentNode&&Q.parentNode.removeChild(Q),(Z===J||ce&&"clone"!==ce.lastPutMode)&&ne&&ne.parentNode&&ne.parentNode.removeChild(ne),Y&&(this.nativeDraggable&&b(Y,"dragend",this),We(Y),Y.style["will-change"]="",ge&&!_e&&k(Y,ce?ce.options.ghostClass:this.options.ghostClass,!1),k(Y,this.options.chosenClass,!1),X({sortable:this,name:"unchoose",toEl:J,newIndex:null,newDraggableIndex:null,originalEvent:e}),Z!==J?(ae>=0&&(X({rootEl:J,name:"add",toEl:J,fromEl:Z,originalEvent:e}),X({sortable:this,name:"remove",toEl:J,originalEvent:e}),X({rootEl:J,name:"sort",toEl:J,fromEl:Z,originalEvent:e}),X({sortable:this,name:"sort",toEl:J,originalEvent:e})),ce&&ce.save()):ae!==re&&ae>=0&&(X({sortable:this,name:"update",toEl:J,originalEvent:e}),X({sortable:this,name:"sort",toEl:J,originalEvent:e})),Be.active&&(null!=ae&&-1!==ae||(ae=re,se=oe),X({sortable:this,name:"end",toEl:J,originalEvent:e}),this.save())))),this._nulling()},_nulling:function(){K("nulling",this),Z=Y=J=Q=ee=ne=te=ie=ue=de=ge=ae=se=re=oe=ve=be=ce=le=Be.dragged=Be.ghost=Be.clone=Be.active=null,$e.forEach((function(e){e.checked=!0})),$e.length=pe=he=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":Y&&(this._onDragOver(e),function(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move");e.cancelable&&e.preventDefault()}(e));break;case"selectstart":e.preventDefault()}},toArray:function(){for(var e,t=[],n=this.el.children,i=0,r=n.length,a=this.options;i<r;i++)_(e=n[i],a.draggable,this.el,!1)&&t.push(e.getAttribute(a.dataIdAttr)||Ge(e));return t},sort:function(e){var t={},n=this.el;this.toArray().forEach((function(e,i){var r=n.children[i];_(r,this.options.draggable,n,!1)&&(t[e]=r)}),this),e.forEach((function(e){t[e]&&(n.removeChild(t[e]),n.appendChild(t[e]))}))},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return _(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var n=this.options;if(void 0===t)return n[e];var i=U.modifyOption(this,e,t);n[e]=void 0!==i?i:t,"group"===e&&Ae(n)},destroy:function(){K("destroy",this);var e=this.el;e[W]=null,b(e,"mousedown",this._onTapStart),b(e,"touchstart",this._onTapStart),b(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(b(e,"dragover",this),b(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),(function(e){e.removeAttribute("draggable")})),this._onDrop(),this._disableDelayedDragEvents(),Ce.splice(Ce.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!ie){if(K("hideClone",this),Be.eventCanceled)return;S(ne,"display","none"),this.options.removeCloneOnHide&&ne.parentNode&&ne.parentNode.removeChild(ne),ie=!0}},_showClone:function(e){if("clone"===e.lastPutMode){if(ie){if(K("showClone",this),Be.eventCanceled)return;Z.contains(Y)&&!this.options.group.revertClone?Z.insertBefore(ne,Y):ee?Z.insertBefore(ne,ee):Z.appendChild(ne),this.options.group.revertClone&&this.animate(Y,ne),S(ne,"display",""),ie=!1}}else this._hideClone()}},Ee&&v(document,"touchmove",(function(e){(Be.active||_e)&&e.cancelable&&e.preventDefault()})),Be.utils={on:v,off:b,css:S,find:O,is:function(e,t){return!!_(e,t,e,!1)},extend:function(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},throttle:P,closest:_,toggleClass:k,clone:F,index:z,nextTick:qe,cancelNextTick:Ue,detectDirection:Ne,getChild:D},Be.get=function(e){return e[W]},Be.mount=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t[0].constructor===Array&&(t=t[0]),t.forEach((function(e){if(!e.prototype||!e.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(e));e.utils&&(Be.utils=o({},Be.utils,e.utils)),U.mount(e)}))},Be.create=function(e,t){return new Be(e,t)},Be.version="1.10.2";var Ve,Ke,Xe,Ye,Je,Qe,Ze=[],et=!1;function tt(){Ze.forEach((function(e){clearInterval(e.pid)})),Ze=[]}function nt(){clearInterval(Qe)}var it,rt=P((function(e,t,n,i){if(t.scroll){var r,a=(e.touches?e.touches[0]:e).clientX,o=(e.touches?e.touches[0]:e).clientY,s=t.scrollSensitivity,l=t.scrollSpeed,c=$(),u=!1;Ke!==n&&(Ke=n,tt(),Ve=t.scroll,r=t.scrollFn,!0===Ve&&(Ve=A(n,!0)));var d=0,p=Ve;do{var h=p,f=E(h),m=f.top,g=f.bottom,v=f.left,b=f.right,y=f.width,x=f.height,_=void 0,w=void 0,C=h.scrollWidth,k=h.scrollHeight,M=S(h),O=h.scrollLeft,T=h.scrollTop;h===c?(_=y<C&&("auto"===M.overflowX||"scroll"===M.overflowX||"visible"===M.overflowX),w=x<k&&("auto"===M.overflowY||"scroll"===M.overflowY||"visible"===M.overflowY)):(_=y<C&&("auto"===M.overflowX||"scroll"===M.overflowX),w=x<k&&("auto"===M.overflowY||"scroll"===M.overflowY));var D=_&&(Math.abs(b-a)<=s&&O+y<C)-(Math.abs(v-a)<=s&&!!O),L=w&&(Math.abs(g-o)<=s&&T+x<k)-(Math.abs(m-o)<=s&&!!T);if(!Ze[d])for(var z=0;z<=d;z++)Ze[z]||(Ze[z]={});Ze[d].vx==D&&Ze[d].vy==L&&Ze[d].el===h||(Ze[d].el=h,Ze[d].vx=D,Ze[d].vy=L,clearInterval(Ze[d].pid),0==D&&0==L||(u=!0,Ze[d].pid=setInterval(function(){i&&0===this.layer&&Be.active._onTouchMove(Je);var t=Ze[this.layer].vy?Ze[this.layer].vy*l:0,n=Ze[this.layer].vx?Ze[this.layer].vx*l:0;"function"==typeof r&&"continue"!==r.call(Be.dragged.parentNode[W],n,t,e,Je,Ze[this.layer].el)||j(Ze[this.layer].el,n,t)}.bind({layer:d}),24))),d++}while(t.bubbleScroll&&p!==c&&(p=A(p,!1)));et=u}}),30),at=function(e){var t=e.originalEvent,n=e.putSortable,i=e.dragEl,r=e.activeSortable,a=e.dispatchSortableEvent,o=e.hideGhostForTarget,s=e.unhideGhostForTarget;if(t){var l=n||r;o();var c=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,u=document.elementFromPoint(c.clientX,c.clientY);s(),l&&!l.el.contains(u)&&(a("spill"),this.onSpill({dragEl:i,putSortable:n}))}};function ot(){}function st(){}function lt(){function e(){this.defaults={swapClass:"sortable-swap-highlight"}}return e.prototype={dragStart:function(e){var t=e.dragEl;it=t},dragOverValid:function(e){var t=e.completed,n=e.target,i=e.onMove,r=e.activeSortable,a=e.changed,o=e.cancel;if(r.options.swap){var s=this.sortable.el,l=this.options;if(n&&n!==s){var c=it;!1!==i(n)?(k(n,l.swapClass,!0),it=n):it=null,c&&c!==it&&k(c,l.swapClass,!1)}a(),t(!0),o()}},drop:function(e){var t=e.activeSortable,n=e.putSortable,i=e.dragEl,r=n||this.sortable,a=this.options;it&&k(it,a.swapClass,!1),it&&(a.swap||n&&n.options.swap)&&i!==it&&(r.captureAnimationState(),r!==t&&t.captureAnimationState(),function(e,t){var n,i,r=e.parentNode,a=t.parentNode;if(!r||!a||r.isEqualNode(t)||a.isEqualNode(e))return;n=z(e),i=z(t),r.isEqualNode(a)&&n<i&&i++;r.insertBefore(t,r.children[n]),a.insertBefore(e,a.children[i])}(i,it),r.animateAll(),r!==t&&t.animateAll())},nulling:function(){it=null}},a(e,{pluginName:"swap",eventProperties:function(){return{swapItem:it}}})}ot.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,n=e.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var i=D(this.sortable.el,this.startIndex,this.options);i?this.sortable.el.insertBefore(t,i):this.sortable.el.appendChild(t),this.sortable.animateAll(),n&&n.animateAll()},drop:at},a(ot,{pluginName:"revertOnSpill"}),st.prototype={onSpill:function(e){var t=e.dragEl,n=e.putSortable||this.sortable;n.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),n.animateAll()},drop:at},a(st,{pluginName:"removeOnSpill"});var ct,ut,dt,pt,ht,ft=[],mt=[],gt=!1,vt=!1,bt=!1;function yt(){function e(e){for(var t in this)"_"===t.charAt(0)&&"function"==typeof this[t]&&(this[t]=this[t].bind(this));e.options.supportPointer?v(document,"pointerup",this._deselectMultiDrag):(v(document,"mouseup",this._deselectMultiDrag),v(document,"touchend",this._deselectMultiDrag)),v(document,"keydown",this._checkKeyDown),v(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,setData:function(t,n){var i="";ft.length&&ut===e?ft.forEach((function(e,t){i+=(t?", ":"")+e.textContent})):i=n.textContent,t.setData("Text",i)}}}return e.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(e){var t=e.dragEl;dt=t},delayEnded:function(){this.isMultiDrag=~ft.indexOf(dt)},setupClone:function(e){var t=e.sortable,n=e.cancel;if(this.isMultiDrag){for(var i=0;i<ft.length;i++)mt.push(F(ft[i])),mt[i].sortableIndex=ft[i].sortableIndex,mt[i].draggable=!1,mt[i].style["will-change"]="",k(mt[i],this.options.selectedClass,!1),ft[i]===dt&&k(mt[i],this.options.chosenClass,!1);t._hideClone(),n()}},clone:function(e){var t=e.sortable,n=e.rootEl,i=e.dispatchSortableEvent,r=e.cancel;this.isMultiDrag&&(this.options.removeCloneOnHide||ft.length&&ut===t&&(xt(!0,n),i("clone"),r()))},showClone:function(e){var t=e.cloneNowShown,n=e.rootEl,i=e.cancel;this.isMultiDrag&&(xt(!1,n),mt.forEach((function(e){S(e,"display","")})),t(),ht=!1,i())},hideClone:function(e){var t=this,n=(e.sortable,e.cloneNowHidden),i=e.cancel;this.isMultiDrag&&(mt.forEach((function(e){S(e,"display","none"),t.options.removeCloneOnHide&&e.parentNode&&e.parentNode.removeChild(e)})),n(),ht=!0,i())},dragStartGlobal:function(e){e.sortable;!this.isMultiDrag&&ut&&ut.multiDrag._deselectMultiDrag(),ft.forEach((function(e){e.sortableIndex=z(e)})),ft=ft.sort((function(e,t){return e.sortableIndex-t.sortableIndex})),bt=!0},dragStarted:function(e){var t=this,n=e.sortable;if(this.isMultiDrag){if(this.options.sort&&(n.captureAnimationState(),this.options.animation)){ft.forEach((function(e){e!==dt&&S(e,"position","absolute")}));var i=E(dt,!1,!0,!0);ft.forEach((function(e){e!==dt&&B(e,i)})),vt=!0,gt=!0}n.animateAll((function(){vt=!1,gt=!1,t.options.animation&&ft.forEach((function(e){R(e)})),t.options.sort&&_t()}))}},dragOver:function(e){var t=e.target,n=e.completed,i=e.cancel;vt&&~ft.indexOf(t)&&(n(!1),i())},revert:function(e){var t=e.fromSortable,n=e.rootEl,i=e.sortable,r=e.dragRect;ft.length>1&&(ft.forEach((function(e){i.addAnimationState({target:e,rect:vt?E(e):r}),R(e),e.fromRect=r,t.removeAnimationState(e)})),vt=!1,function(e,t){ft.forEach((function(n,i){var r=t.children[n.sortableIndex+(e?Number(i):0)];r?t.insertBefore(n,r):t.appendChild(n)}))}(!this.options.removeCloneOnHide,n))},dragOverCompleted:function(e){var t=e.sortable,n=e.isOwner,i=e.insertion,r=e.activeSortable,a=e.parentEl,o=e.putSortable,s=this.options;if(i){if(n&&r._hideClone(),gt=!1,s.animation&&ft.length>1&&(vt||!n&&!r.options.sort&&!o)){var l=E(dt,!1,!0,!0);ft.forEach((function(e){e!==dt&&(B(e,l),a.appendChild(e))})),vt=!0}if(!n)if(vt||_t(),ft.length>1){var c=ht;r._showClone(t),r.options.animation&&!ht&&c&&mt.forEach((function(e){r.addAnimationState({target:e,rect:pt}),e.fromRect=pt,e.thisAnimationDuration=null}))}else r._showClone(t)}},dragOverAnimationCapture:function(e){var t=e.dragRect,n=e.isOwner,i=e.activeSortable;if(ft.forEach((function(e){e.thisAnimationDuration=null})),i.options.animation&&!n&&i.multiDrag.isMultiDrag){pt=a({},t);var r=M(dt,!0);pt.top-=r.f,pt.left-=r.e}},dragOverAnimationComplete:function(){vt&&(vt=!1,_t())},drop:function(e){var t=e.originalEvent,n=e.rootEl,i=e.parentEl,r=e.sortable,a=e.dispatchSortableEvent,o=e.oldIndex,s=e.putSortable,l=s||this.sortable;if(t){var c=this.options,u=i.children;if(!bt)if(c.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),k(dt,c.selectedClass,!~ft.indexOf(dt)),~ft.indexOf(dt))ft.splice(ft.indexOf(dt),1),ct=null,V({sortable:r,rootEl:n,name:"deselect",targetEl:dt,originalEvt:t});else{if(ft.push(dt),V({sortable:r,rootEl:n,name:"select",targetEl:dt,originalEvt:t}),t.shiftKey&&ct&&r.el.contains(ct)){var d,p,h=z(ct),f=z(dt);if(~h&&~f&&h!==f)for(f>h?(p=h,d=f):(p=f,d=h+1);p<d;p++)~ft.indexOf(u[p])||(k(u[p],c.selectedClass,!0),ft.push(u[p]),V({sortable:r,rootEl:n,name:"select",targetEl:u[p],originalEvt:t}))}else ct=dt;ut=l}if(bt&&this.isMultiDrag){if((i[W].options.sort||i!==n)&&ft.length>1){var m=E(dt),g=z(dt,":not(."+this.options.selectedClass+")");if(!gt&&c.animation&&(dt.thisAnimationDuration=null),l.captureAnimationState(),!gt&&(c.animation&&(dt.fromRect=m,ft.forEach((function(e){if(e.thisAnimationDuration=null,e!==dt){var t=vt?E(e):m;e.fromRect=t,l.addAnimationState({target:e,rect:t})}}))),_t(),ft.forEach((function(e){u[g]?i.insertBefore(e,u[g]):i.appendChild(e),g++})),o===z(dt))){var v=!1;ft.forEach((function(e){e.sortableIndex===z(e)||(v=!0)})),v&&a("update")}ft.forEach((function(e){R(e)})),l.animateAll()}ut=l}(n===i||s&&"clone"!==s.lastPutMode)&&mt.forEach((function(e){e.parentNode&&e.parentNode.removeChild(e)}))}},nullingGlobal:function(){this.isMultiDrag=bt=!1,mt.length=0},destroyGlobal:function(){this._deselectMultiDrag(),b(document,"pointerup",this._deselectMultiDrag),b(document,"mouseup",this._deselectMultiDrag),b(document,"touchend",this._deselectMultiDrag),b(document,"keydown",this._checkKeyDown),b(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(e){if(!(void 0!==bt&&bt||ut!==this.sortable||e&&_(e.target,this.options.draggable,this.sortable.el,!1)||e&&0!==e.button))for(;ft.length;){var t=ft[0];k(t,this.options.selectedClass,!1),ft.shift(),V({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:t,originalEvt:e})}},_checkKeyDown:function(e){e.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(e){e.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},a(e,{pluginName:"multiDrag",utils:{select:function(e){var t=e.parentNode[W];t&&t.options.multiDrag&&!~ft.indexOf(e)&&(ut&&ut!==t&&(ut.multiDrag._deselectMultiDrag(),ut=t),k(e,t.options.selectedClass,!0),ft.push(e))},deselect:function(e){var t=e.parentNode[W],n=ft.indexOf(e);t&&t.options.multiDrag&&~n&&(k(e,t.options.selectedClass,!1),ft.splice(n,1))}},eventProperties:function(){var e=this,t=[],n=[];return ft.forEach((function(i){var r;t.push({multiDragElement:i,index:i.sortableIndex}),r=vt&&i!==dt?-1:vt?z(i,":not(."+e.options.selectedClass+")"):z(i),n.push({multiDragElement:i,index:r})})),{items:l(ft),clones:[].concat(mt),oldIndicies:t,newIndicies:n}},optionListeners:{multiDragKey:function(e){return"ctrl"===(e=e.toLowerCase())?e="Control":e.length>1&&(e=e.charAt(0).toUpperCase()+e.substr(1)),e}}})}function xt(e,t){mt.forEach((function(n,i){var r=t.children[n.sortableIndex+(e?Number(i):0)];r?t.insertBefore(n,r):t.appendChild(n)}))}function _t(){ft.forEach((function(e){e!==dt&&e.parentNode&&e.parentNode.removeChild(e)}))}Be.mount(new function(){function e(){for(var e in this.defaults={scroll:!0,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)"_"===e.charAt(0)&&"function"==typeof this[e]&&(this[e]=this[e].bind(this))}return e.prototype={dragStarted:function(e){var t=e.originalEvent;this.sortable.nativeDraggable?v(document,"dragover",this._handleAutoScroll):this.options.supportPointer?v(document,"pointermove",this._handleFallbackAutoScroll):t.touches?v(document,"touchmove",this._handleFallbackAutoScroll):v(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(e){var t=e.originalEvent;this.options.dragOverBubble||t.rootEl||this._handleAutoScroll(t)},drop:function(){this.sortable.nativeDraggable?b(document,"dragover",this._handleAutoScroll):(b(document,"pointermove",this._handleFallbackAutoScroll),b(document,"touchmove",this._handleFallbackAutoScroll),b(document,"mousemove",this._handleFallbackAutoScroll)),nt(),tt(),clearTimeout(w),w=void 0},nulling:function(){Je=Ke=Ve=et=Qe=Xe=Ye=null,Ze.length=0},_handleFallbackAutoScroll:function(e){this._handleAutoScroll(e,!0)},_handleAutoScroll:function(e,t){var n=this,i=(e.touches?e.touches[0]:e).clientX,r=(e.touches?e.touches[0]:e).clientY,a=document.elementFromPoint(i,r);if(Je=e,t||d||u||h){rt(e,this.options,a,t);var o=A(a,!0);!et||Qe&&i===Xe&&r===Ye||(Qe&&nt(),Qe=setInterval((function(){var a=A(document.elementFromPoint(i,r),!0);a!==o&&(o=a,tt()),rt(e,n.options,a,t)}),10),Xe=i,Ye=r)}else{if(!this.options.bubbleScroll||A(a,!0)===$())return void tt();rt(e,this.options,A(a,!1),!1)}}},a(e,{pluginName:"scroll",initializeByDefault:!0})}),Be.mount(st,ot),t.default=Be}}]);