(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{1018:function(t,s,a){"use strict";a.r(s);var n=a(49),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h1",{attrs:{id:"云函数"}},[t._v("云函数")]),t._v(" "),n("p",[t._v("云函数即在云端（服务器端）运行的函数。")]),t._v(" "),n("h2",{attrs:{id:"简介"}},[t._v("简介")]),t._v(" "),n("p",[t._v("在 Leivii 中云函数即脚本，支持 "),n("code",[t._v("groovy")]),t._v(" 和 "),n("code",[t._v("SQL")]),t._v(" 两种方式。云函数的独特优势在于与所在系统的无缝整合。由于 "),n("code",[t._v("groovy")]),t._v(" 可以运行在 "),n("code",[t._v("jvm")]),t._v(" 中，开发者可以直接使用业务系统已有的服务，无需鉴权。")]),t._v(" "),n("h2",{attrs:{id:"配置"}},[t._v("配置")]),t._v(" "),n("p",[t._v("在使用云函数时需要配置指定的数据结构，并实现云函数的相应方法，具体配置如下：")]),t._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[t._v("Vue"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("use")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("LeiviiEditor"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  scf"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    root"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'data'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    listRoot"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'data.recordList'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    code"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'code'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 主键")]),t._v("\n    name"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'name'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 云函数名称")]),t._v("\n    dataType"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'dataType'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 脚本类型")]),t._v("\n    defaultDataType"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'groovy'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 支持 groovy/SQL")]),t._v("\n    dataForm"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'dataForm'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 数据类型")]),t._v("\n    defaultDataForm"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'PAGING_LIST'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 默认数据类型：List/PAGING_LIST/SINGLE")]),t._v("\n    dataExpression"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'dataExpression'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 脚本")]),t._v("\n    dataDescription"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'dataDescription'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 脚本描述字符串")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getList")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("queries")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 获取云函数列表")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("code"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 获取云函数详情")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("create")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("data")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 创建云函数")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("update")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("data")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 更新云函数")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getData")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("code"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" params")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 获取云函数执行结果")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("exec")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("data")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 调试云函数（参数为脚本及其配置）")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br"),n("span",{staticClass:"line-number"},[t._v("17")]),n("br"),n("span",{staticClass:"line-number"},[t._v("18")]),n("br"),n("span",{staticClass:"line-number"},[t._v("19")]),n("br"),n("span",{staticClass:"line-number"},[t._v("20")]),n("br")])]),n("h2",{attrs:{id:"数据模型"}},[t._v("数据模型")]),t._v(" "),n("p",[t._v("用云函数创建页面的数据模型，并生成基础页面，如报表。")]),t._v(" "),n("p",[t._v("创建云函数步骤：")]),t._v(" "),n("p",[t._v("1、创建云函数")]),t._v(" "),n("leivii-img",[n("template",{slot:"img"},[n("img",{attrs:{src:a(872),alt:"创建云函数"}})]),n("p",[t._v("../assets/img/datasource-21.png")])],2),n("p",[t._v("2、调试云函数代码")]),t._v(" "),n("leivii-img",[n("template",{slot:"img"},[n("img",{attrs:{src:a(873),alt:"调试云函数代码"}})]),n("p",[t._v("../assets/img/datasource-22.png")])],2),n("p",[t._v("3、配置字段")]),t._v(" "),n("leivii-img",[n("template",{slot:"img"},[n("img",{attrs:{src:a(874),alt:"配置字段"}})]),n("p",[t._v("../assets/img/datasource-23.png")])],2),n("p",[t._v("4、页面配置")]),t._v(" "),n("leivii-img",[n("template",{slot:"img"},[n("img",{attrs:{src:a(875),alt:"页面配置"}})]),n("p",[t._v("../assets/img/datasource-24.png")])],2),n("p",[t._v("5、生成页面")]),t._v(" "),n("leivii-img",[n("template",{slot:"img"},[n("img",{attrs:{src:a(876),alt:"生成页面"}})]),n("p",[t._v("../assets/img/datasource-25.png")])],2),n("h2",{attrs:{id:"数据源"}},[t._v("数据源")]),t._v(" "),n("p",[t._v("云函数作为数据源，为组件提供数据。")]),t._v(" "),n("leivii-img",[n("template",{slot:"img"},[n("img",{attrs:{src:a(892),alt:"云函数数据源"}})]),n("p",[t._v("../assets/img/scf-1.png")])],2),n("h2",{attrs:{id:"处理器"}},[t._v("处理器")]),t._v(" "),n("p",[t._v("云函数作为业务请求，为组件提供交互处理器。")]),t._v(" "),n("leivii-img",[n("template",{slot:"img"},[n("img",{attrs:{src:a(893),alt:"云函数处理器"}})]),n("p",[t._v("../assets/img/scf-2.png")])],2)],1)}),[],!1,null,null,null);s.default=e.exports},872:function(t,s,a){t.exports=a.p+"assets/img/datasource-21.1012258a.png"},873:function(t,s,a){t.exports=a.p+"assets/img/datasource-22.3d514464.png"},874:function(t,s,a){t.exports=a.p+"assets/img/datasource-23.c54e6a8e.png"},875:function(t,s,a){t.exports=a.p+"assets/img/datasource-24.209ba78f.png"},876:function(t,s,a){t.exports=a.p+"assets/img/datasource-25.1b930ed4.png"},892:function(t,s,a){t.exports=a.p+"assets/img/scf-1.6a49a226.png"},893:function(t,s,a){t.exports=a.p+"assets/img/scf-2.0ae2805b.png"}}]);